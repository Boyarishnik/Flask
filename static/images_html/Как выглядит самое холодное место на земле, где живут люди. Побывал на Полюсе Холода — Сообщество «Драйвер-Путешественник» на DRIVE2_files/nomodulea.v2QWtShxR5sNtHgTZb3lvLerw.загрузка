"use strict";(()=>{var JD=Object.create;var Ul=Object.defineProperty,YD=Object.defineProperties,ZD=Object.getOwnPropertyDescriptor,KD=Object.getOwnPropertyDescriptors,XD=Object.getOwnPropertyNames,cv=Object.getOwnPropertySymbols,QD=Object.getPrototypeOf,mv=Object.prototype.hasOwnProperty,tH=Object.prototype.propertyIsEnumerable;var Gm=Math.pow,dv=(i,t,e)=>t in i?Ul(i,t,{enumerable:!0,configurable:!0,writable:!0,value:e}):i[t]=e,N=(i,t)=>{for(var e in t||(t={}))mv.call(t,e)&&dv(i,e,t[e]);if(cv)for(var e of cv(t))tH.call(t,e)&&dv(i,e,t[e]);return i},wt=(i,t)=>YD(i,KD(t));var v=(i,t)=>()=>(i&&(t=i(i=0)),t);var eo=(i,t)=>()=>(t||i((t={exports:{}}).exports,t),t.exports),ut=(i,t)=>{for(var e in t)Ul(i,e,{get:t[e],enumerable:!0})},eH=(i,t,e,n)=>{if(t&&typeof t=="object"||typeof t=="function")for(let o of XD(t))!mv.call(i,o)&&o!==e&&Ul(i,o,{get:()=>t[o],enumerable:!(n=ZD(t,o))||n.enumerable});return i};var io=(i,t,e)=>(e=i!=null?JD(QD(i)):{},eH(t||!i||!i.__esModule?Ul(e,"default",{value:i,enumerable:!0}):e,i));var A=(i,t,e)=>new Promise((n,o)=>{var s=l=>{try{a(e.next(l))}catch(c){o(c)}},r=l=>{try{a(e.throw(l))}catch(c){o(c)}},a=l=>l.done?n(l.value):Promise.resolve(l.value).then(s,r);a((e=e.apply(i,t)).next())});var pv,hv=v(()=>{"use strict";pv=i=>{let t=(n,o,s,r,a)=>{for(let l=0,{length:c}=n;l<c;l++){let d=n[l];d instanceof HTMLElement&&(r?o.has(d)||(o.add(d),s.delete(d),i(d,r)):s.has(d)||(s.add(d),o.delete(d),i(d,r)),a||t(d.querySelectorAll("*"),o,s,r,!0))}},e=new MutationObserver(n=>{for(let o=new Set,s=new Set,r=0,{length:a}=n;r<a;r++){let{addedNodes:l,removedNodes:c}=n[r];t(c,o,s,!1,!1),t(l,o,s,!0,!1)}});return e.observe(document.documentElement,{subtree:!0,childList:!0}),e}});var uv,fv=v(()=>{"use strict";hv();uv=(i,t)=>{let e=new WeakMap,n=(l,c)=>{let d;if(c)for(let p,u=0;u<i.length;u++)l.matches(p=i[u])&&(e.has(l)||e.set(l,new Set),d=e.get(l),d.has(p)||(d.add(p),t(l,c,p)));else e.has(l)&&(d=e.get(l),e.delete(l),d.forEach(p=>{t(l,c,p)}))},o=l=>{for(let c=0;c<l.length;c++){let d=l[c];d instanceof HTMLElement&&e.delete(d)}},s=(l,c=!0)=>{for(let d=0;d<l.length;d++){let p=l[d];p instanceof HTMLElement&&n(p,c)}},r=pv(n),a=()=>{let l=r.takeRecords();for(let c=0;c<l.length;c++)s(l[c].removedNodes,!1),s(l[c].addedNodes,!0)};return i.length&&s(document.documentElement.querySelectorAll(i.toString())),{drop:o,flush:a,observer:r,parse:s}}});var gv,zl,no,mr,Ge,on,jo,x,lt,ft,vv,jl,Ev,X=v(()=>{"use strict";gv="role",zl="slot",no=i=>`[data-${gv}~="${i}"]`,mr=i=>`[data-${zl}~="${i}"]`,Ge=(i,t)=>(t||document).querySelector(no(i))||void 0,on=(i,t)=>Array.from((t||document).querySelectorAll(no(i))),jo=(i,t)=>i.closest(no(t))||void 0,x=(i,t,e)=>(e||document).querySelector(mr(`${i}.${t}`))||void 0,lt=(i,t,e)=>i.closest(mr(`${t}.${e}`))||void 0,ft=(i,t,e)=>Array.from((e||document).querySelectorAll(mr(`${i}.${t}`))),vv=(i,t)=>{i.dataset[gv]=t},jl=(i,t,e)=>{i.dataset[zl]=`${t}.${e}`},Ev=i=>{i.dataset[zl]!==void 0&&delete i.dataset[zl]}});var H,ql,Jm,Ym,yv,Wo,oo,Tv,Wl,Vl,bv,nH,xv,_v,oH,sH,rH,aH,wv,Gl,B,be,Ht,Vo,Y=v(()=>{"use strict";fv();X();H=class{constructor(t,e){this.element=t;this.role=e}root(t,e){return jo(t,e||this.role)}slot(t,e){return x(this.role,t,e||this.element)}slots(t,e){return ft(this.role,t,e||this.element)}closestSlot(t,e){return lt(t,this.role,e)}},ql=new WeakMap,Jm=new WeakSet,Ym=[],yv=new WeakMap,Wo=new Set,oo=[],Tv={},Wl={},Vl=new WeakMap,bv=i=>{let t=i;do if(t.nextSibling)return!0;while(t=t.parentNode);return!1},nH=()=>{Ym.splice(0).forEach(i=>{ql.get(i)!==!0&&(ql.set(i,!0),i.parsedInit&&!Jm.has(i)&&(Jm.add(i),i.parsedInit()),i.parsed&&i.element.ownerDocument.contains(i.element)&&i.parsed())})},xv=i=>{Ym.length||requestAnimationFrame(nH),Ym.push(i)},_v=(i,t,e,n)=>{t.disconnect(),e.removeEventListener("DOMContentLoaded",n),xv(i)},oH=(i,t)=>{for(let e=yv.get(t),n=0;n<i.length;n++){let{target:o,attributeName:s,oldValue:r}=i[n],a=o.getAttribute(s);e.attributeChanged(s,r,a)}},sH=(i,t,e,n)=>{let o=new n(i,t);if(Vl.has(i)?Vl.get(i)[t]=o:Vl.set(i,{[t]:o}),e.set(i,o),o.init&&o.init(),o.observedAttributes&&o.attributeChanged){let s=new MutationObserver(oH);s.observe(i,{attributes:!0,attributeOldValue:!0,attributeFilter:o.observedAttributes.map(r=>(i.hasAttribute(r)&&o.attributeChanged(r,null,i.getAttribute(r)),r))}),yv.set(s,o)}return o},{flush:rH,parse:aH,drop:wv}=uv(oo,(i,t,e)=>{let{r:n,m:o,o:s}=Tv[e],r;if(s.prototype instanceof H)if(r=o.get(i)||sH(i,n,o,s),t){if(r.parsed||r.parsedInit&&!Jm.has(r)){let{ownerDocument:a}=i;if(ql.set(r,!1),a.readyState==="complete"||bv(i))xv(r);else{let l=()=>_v(r,c,a,l);a.addEventListener("DOMContentLoaded",l);let c=new MutationObserver(()=>{bv(i)&&_v(r,c,a,l)});c.observe(i.parentNode,{childList:!0,subtree:!0})}}r.connected&&r.connected()}else!t&&r.disconnected&&(!r.parsed&&!r.parsedInit||ql.get(r))&&r.disconnected();else o.has(i)||(o.set(i,s),s(i,n))}),Gl=(i,t)=>{let e=t?i:no(i);if(!(e in Wl)){let n=()=>{},o=new Promise(s=>{n=s});Wl[e]={_:n,$:o}}return Wl[e].$},B=(i,t,e)=>{let n=e?i:no(i);if(oo.includes(n))throw new Error(`Duplicated selector: ${n}`);rH(),oo.push(n),Tv[n]={r:i,m:new WeakMap,o:t},aH(document.querySelectorAll(n)),Gl(i,e),Wl[n]._()},be=(i,t,e)=>{let n=e?i:no(i);Wo.add(n),B(n,()=>{Wo.has(n)&&(Wo.delete(n),t().then(({default:o})=>{oo.splice(oo.indexOf(n),1),wv(document.querySelectorAll(n)),B(i,o,e)}))},!0)},Ht=(i,t,e)=>{let n=e?`meta[name="module"][content~="${i}"]`:i;Wo.add(n),B(n,()=>{Wo.has(n)&&(Wo.delete(n),t().then(({default:o})=>{oo.splice(oo.indexOf(n),1),wv(document.querySelectorAll(n)),o()}))},!0)},Vo=(i,t)=>{let e=Vl.get(i);if(e)return t?e[t]:e[Object.keys(e)[0]]}});var pr,Jl,lH,cH,dH,pe,Pi=v(()=>{"use strict";pr=new Map,Jl=[],lH=(i,t)=>{pr.has(t)&&pr.get(t).unobserve(i)},cH=(i,t)=>{let{target:e,isIntersecting:n}=i;for(let o=Jl.length-1,s;s=Jl[o];o--)if(s.targetEl===e&&s.rootMargin===t){let r=s.onEnter&&n;r&&s.onEnter(e);let a=s.onExit&&!n;a&&s.onExit(e),s.callOnce&&(r||a)&&(lH(e,s.rootMargin),Jl.splice(o,1))}},dH=i=>{if(pr.has(i))return pr.get(i);let t=new IntersectionObserver(e=>{e.forEach(n=>cH(n,i))},{rootMargin:`${i}px 0px`});return pr.set(i,t),t},pe=(i,t)=>{if(!t.onEnter&&!t.onExit)throw Error("Provide an Iview callback");let e=t.rootMargin||0,n={targetEl:i,rootMargin:e,onEnter:t.onEnter,onExit:t.onExit,callOnce:!t.permanent};Jl.push(n),dH(e).observe(i)}});var qo,Yl=v(()=>{"use strict";qo=i=>{let t=!1,e;return()=>(t||(e=i(),t=!0),e)}});var Je,Tn,hr,Zl,M,Kl,sn,Lv,Z=v(()=>{"use strict";Yl();Je=(i,t)=>window.getComputedStyle(i,null).getPropertyValue(t),Tn=(i,t)=>parseFloat(Je(i,t))||0,hr=i=>{document.body.classList.toggle("docbusy",i)},Zl=qo(()=>{let t=document.createElement("a").style;return t.cssText="position:-webkit-sticky;position:sticky;",t.position.includes("sticky")}),M=(i,t)=>{i.style.display=t?"":"none"},Kl=i=>i.style.display!=="none",sn=i=>{let t=i.getBoundingClientRect();return t.x+=window.scrollX,t.y+=window.scrollY,t},Lv=()=>{let i=document.createElement("div");i.style.cssText="overflow:auto;position:absolute;top:0;width:100px;height:100px";let t=document.createElement("div");t.style.width="200px",t.style.height="200px",i.appendChild(t),document.body.appendChild(i);let e=i.offsetWidth-i.clientWidth;return i.remove(),e}});var Av,Xl,Cv=v(()=>{"use strict";Av=["click","dblclick","mousedown","mousemove","mouseup","touchend","touchmove","touchstart","keydown","keyup"],Xl=class extends EventTarget{constructor(){super();this.lastEventTime=Date.now();this.minEventTime=0;Av.forEach(e=>{document.addEventListener(e,this)})}handleEvent(e){(e.type!=="mousemove"||e.movementX!==0||e.movementY!==0)&&(this.lastEventTime=Date.now(),this.lastEventTime>this.minEventTime&&(this.dispatchEvent(new CustomEvent("activity")),this.minEventTime=this.lastEventTime+3e3))}getLastEventTime(){return this.lastEventTime}dispose(){Av.forEach(e=>{document.removeEventListener(e,this)})}}});var Ql,Sv=v(()=>{"use strict";Cv();Ql=class extends EventTarget{constructor(e){super();this.idleThreshold=e;this.isIdle=!1;this.activityMonitor=new Xl;this.hasActivityListener=!1;this.maybeStillActive()}maybeStillActive(){let e=this.idleThreshold+1-(Date.now()-this.activityMonitor.getLastEventTime());e>0?this.onActivityTimerId=setTimeout(this.maybeStillActive.bind(this),e):this.becomeIdle()}becomeIdle(){this.isIdle=!0,this.activityMonitor.addEventListener("activity",this),this.hasActivityListener=!0,this.dispatchEvent(new CustomEvent("idle"))}handleEvent(){this.isIdle=!1,this.removeActivityListener(),this.dispatchEvent(new CustomEvent("active")),this.maybeStillActive()}removeActivityListener(){this.hasActivityListener&&(this.activityMonitor.removeEventListener("activity",this),this.hasActivityListener=!1)}dispose(){this.removeActivityListener(),clearTimeout(this.onActivityTimerId),this.activityMonitor.dispose()}}});var mH,$i,fr=v(()=>{"use strict";Sv();mH=2e4,$i=new Ql(mH)});var ct,U,et,Pt,At,Go,tc,Fi,P,Iv,V=v(()=>{"use strict";Z();ct=(i,t)=>(t||document).querySelector(i),U=(i,t)=>ct(`.${i}`,t),et=(i,t)=>Array.from((t||document).querySelectorAll(i)),Pt=(i,t)=>et(`.${i}`,t),At=(i,t)=>i.closest(`.${t}`),Go=i=>{let t=ct('[type="submit"]',i);t&&t.click()},tc=i=>{let t;for(;i;){let e=Je(i,"position");if(e==="absolute"||e==="relative"||e==="fixed"){let n=Tn(i,"z-index");!Number.isNaN(n)&&n>(t||0)&&(t=n)}i=i.parentElement}return t},Fi=i=>{let t=document.createElement("div");if(t.innerHTML=i.trim(),t.childNodes.length===1)return t.removeChild(t.firstChild);let e=document.createDocumentFragment();for(;t.firstChild;)e.appendChild(t.firstChild);return e},P=(i,t,...e)=>{typeof t=="string"&&(t={className:t});let n=document.createElement(i);return Object.entries(t||{}).forEach(([o,s])=>{o==="style"?n.style.cssText=s:o==="class"?n.className=s:o.startsWith("aria-")||o.startsWith("data-")?n.setAttribute(o,s):n[o]=s}),n.append(...e.filter(Boolean)),n},Iv=i=>{i.replaceWith(...i.children)}});var xn,mi,_e,Ce=v(()=>{"use strict";xn=(i,t)=>{let e=i.elements[t];if(e){if(e.type)return e.value;for(let n=0;n<e.length;n++){let o=e[n].type==="checkbox"||e[n].type==="radio"?e[n].checked&&e[n].value:e[n].value;if(o)return o}}},mi=i=>{let t=new URLSearchParams;if(i){let e=new FormData(i);for(let[n,o]of e)o instanceof File||t.append(n,o)}return t},_e=i=>{i.dispatchEvent(new Event("change",{bubbles:!0}))}});var Jt,se,Qt,Kt,ec,wn,rn,so,Ov,ic,Jo,Dv,Zm,nc,gH,vH,EH,bH,_H,yH,TH,xH,wH,Hv,Ye=v(()=>{Jt="top",se="bottom",Qt="right",Kt="left",ec="auto",wn=[Jt,se,Qt,Kt],rn="start",so="end",Ov="clippingParents",ic="viewport",Jo="popper",Dv="reference",Zm=wn.reduce(function(i,t){return i.concat([t+"-"+rn,t+"-"+so])},[]),nc=[].concat(wn,[ec]).reduce(function(i,t){return i.concat([t,t+"-"+rn,t+"-"+so])},[]),gH="beforeRead",vH="read",EH="afterRead",bH="beforeMain",_H="main",yH="afterMain",TH="beforeWrite",xH="write",wH="afterWrite",Hv=[gH,vH,EH,bH,_H,yH,TH,xH,wH]});function he(i){return i?(i.nodeName||"").toLowerCase():null}var Ln=v(()=>{});function Wt(i){if(i==null)return window;if(i.toString()!=="[object Window]"){var t=i.ownerDocument;return t&&t.defaultView||window}return i}var xi=v(()=>{});function pi(i){var t=Wt(i).Element;return i instanceof t||i instanceof Element}function re(i){var t=Wt(i).HTMLElement;return i instanceof t||i instanceof HTMLElement}function Yo(i){if(typeof ShadowRoot=="undefined")return!1;var t=Wt(i).ShadowRoot;return i instanceof t||i instanceof ShadowRoot}var Ze=v(()=>{xi()});function LH(i){var t=i.state;Object.keys(t.elements).forEach(function(e){var n=t.styles[e]||{},o=t.attributes[e]||{},s=t.elements[e];!re(s)||!he(s)||(Object.assign(s.style,n),Object.keys(o).forEach(function(r){var a=o[r];a===!1?s.removeAttribute(r):s.setAttribute(r,a===!0?"":a)}))})}function AH(i){var t=i.state,e={popper:{position:t.options.strategy,left:"0",top:"0",margin:"0"},arrow:{position:"absolute"},reference:{}};return Object.assign(t.elements.popper.style,e.popper),t.styles=e,t.elements.arrow&&Object.assign(t.elements.arrow.style,e.arrow),function(){Object.keys(t.elements).forEach(function(n){var o=t.elements[n],s=t.attributes[n]||{},r=Object.keys(t.styles.hasOwnProperty(n)?t.styles[n]:e[n]),a=r.reduce(function(l,c){return l[c]="",l},{});!re(o)||!he(o)||(Object.assign(o.style,a),Object.keys(s).forEach(function(l){o.removeAttribute(l)}))})}}var kv,Nv=v(()=>{Ln();Ze();kv={name:"applyStyles",enabled:!0,phase:"write",fn:LH,effect:AH,requires:["computeStyles"]}});function ue(i){return i.split("-")[0]}var An=v(()=>{});var wi,ro,an,Cn=v(()=>{wi=Math.max,ro=Math.min,an=Math.round});function Zo(){var i=navigator.userAgentData;return i!=null&&i.brands?i.brands.map(function(t){return t.brand+"/"+t.version}).join(" "):navigator.userAgent}var Km=v(()=>{});function gr(){return!/^((?!chrome|android).)*safari/i.test(Zo())}var Xm=v(()=>{Km()});function hi(i,t,e){t===void 0&&(t=!1),e===void 0&&(e=!1);var n=i.getBoundingClientRect(),o=1,s=1;t&&re(i)&&(o=i.offsetWidth>0&&an(n.width)/i.offsetWidth||1,s=i.offsetHeight>0&&an(n.height)/i.offsetHeight||1);var r=pi(i)?Wt(i):window,a=r.visualViewport,l=!gr()&&e,c=(n.left+(l&&a?a.offsetLeft:0))/o,d=(n.top+(l&&a?a.offsetTop:0))/s,p=n.width/o,u=n.height/s;return{width:p,height:u,top:d,right:c+p,bottom:d+u,left:c,x:c,y:d}}var Ko=v(()=>{Ze();Cn();xi();Xm()});function ao(i){var t=hi(i),e=i.offsetWidth,n=i.offsetHeight;return Math.abs(t.width-e)<=1&&(e=t.width),Math.abs(t.height-n)<=1&&(n=t.height),{x:i.offsetLeft,y:i.offsetTop,width:e,height:n}}var oc=v(()=>{Ko()});function vr(i,t){var e=t.getRootNode&&t.getRootNode();if(i.contains(t))return!0;if(e&&Yo(e)){var n=t;do{if(n&&i.isSameNode(n))return!0;n=n.parentNode||n.host}while(n)}return!1}var Qm=v(()=>{Ze()});function De(i){return Wt(i).getComputedStyle(i)}var Xo=v(()=>{xi()});function tp(i){return["table","td","th"].indexOf(he(i))>=0}var Pv=v(()=>{Ln()});function ye(i){return((pi(i)?i.ownerDocument:i.document)||window.document).documentElement}var ln=v(()=>{Ze()});function cn(i){return he(i)==="html"?i:i.assignedSlot||i.parentNode||(Yo(i)?i.host:null)||ye(i)}var Er=v(()=>{Ln();ln();Ze()});function $v(i){return!re(i)||De(i).position==="fixed"?null:i.offsetParent}function CH(i){var t=/firefox/i.test(Zo()),e=/Trident/i.test(Zo());if(e&&re(i)){var n=De(i);if(n.position==="fixed")return null}var o=cn(i);for(Yo(o)&&(o=o.host);re(o)&&["html","body"].indexOf(he(o))<0;){var s=De(o);if(s.transform!=="none"||s.perspective!=="none"||s.contain==="paint"||["transform","perspective"].indexOf(s.willChange)!==-1||t&&s.willChange==="filter"||t&&s.filter&&s.filter!=="none")return o;o=o.parentNode}return null}function Li(i){for(var t=Wt(i),e=$v(i);e&&tp(e)&&De(e).position==="static";)e=$v(e);return e&&(he(e)==="html"||he(e)==="body"&&De(e).position==="static")?t:e||CH(i)||t}var Qo=v(()=>{xi();Ln();Xo();Ze();Pv();Er();Km()});function lo(i){return["top","bottom"].indexOf(i)>=0?"x":"y"}var sc=v(()=>{});function co(i,t,e){return wi(i,ro(t,e))}function Fv(i,t,e){var n=co(i,t,e);return n>e?e:n}var ep=v(()=>{Cn()});function br(){return{top:0,right:0,bottom:0,left:0}}var ip=v(()=>{});function _r(i){return Object.assign({},br(),i)}var np=v(()=>{ip()});function yr(i,t){return t.reduce(function(e,n){return e[n]=i,e},{})}var op=v(()=>{});function MH(i){var t,e=i.state,n=i.name,o=i.options,s=e.elements.arrow,r=e.modifiersData.popperOffsets,a=ue(e.placement),l=lo(a),c=[Kt,Qt].indexOf(a)>=0,d=c?"height":"width";if(!(!s||!r)){var p=SH(o.padding,e),u=ao(s),m=l==="y"?Jt:Kt,h=l==="y"?se:Qt,g=e.rects.reference[d]+e.rects.reference[l]-r[l]-e.rects.popper[d],f=r[l]-e.rects.reference[l],E=Li(s),b=E?l==="y"?E.clientHeight||0:E.clientWidth||0:0,L=g/2-f/2,S=p[m],y=b-u[d]-p[h],_=b/2-u[d]/2+L,w=co(S,_,y),O=l;e.modifiersData[n]=(t={},t[O]=w,t.centerOffset=w-_,t)}}function RH(i){var t=i.state,e=i.options,n=e.element,o=n===void 0?"[data-popper-arrow]":n;o!=null&&(typeof o=="string"&&(o=t.elements.popper.querySelector(o),!o)||vr(t.elements.popper,o)&&(t.elements.arrow=o))}var SH,Bv,Uv=v(()=>{An();oc();Qm();Qo();sc();ep();np();op();Ye();SH=function(t,e){return t=typeof t=="function"?t(Object.assign({},e.rects,{placement:e.placement})):t,_r(typeof t!="number"?t:yr(t,wn))};Bv={name:"arrow",enabled:!0,phase:"main",fn:MH,effect:RH,requires:["popperOffsets"],requiresIfExists:["preventOverflow"]}});function ui(i){return i.split("-")[1]}var ts=v(()=>{});function OH(i){var t=i.x,e=i.y,n=window,o=n.devicePixelRatio||1;return{x:an(t*o)/o||0,y:an(e*o)/o||0}}function zv(i){var t,e=i.popper,n=i.popperRect,o=i.placement,s=i.variation,r=i.offsets,a=i.position,l=i.gpuAcceleration,c=i.adaptive,d=i.roundOffsets,p=i.isFixed,u=r.x,m=u===void 0?0:u,h=r.y,g=h===void 0?0:h,f=typeof d=="function"?d({x:m,y:g}):{x:m,y:g};m=f.x,g=f.y;var E=r.hasOwnProperty("x"),b=r.hasOwnProperty("y"),L=Kt,S=Jt,y=window;if(c){var _=Li(e),w="clientHeight",O="clientWidth";if(_===Wt(e)&&(_=ye(e),De(_).position!=="static"&&a==="absolute"&&(w="scrollHeight",O="scrollWidth")),_=_,o===Jt||(o===Kt||o===Qt)&&s===so){S=se;var D=p&&_===y&&y.visualViewport?y.visualViewport.height:_[w];g-=D-n.height,g*=l?1:-1}if(o===Kt||(o===Jt||o===se)&&s===so){L=Qt;var z=p&&_===y&&y.visualViewport?y.visualViewport.width:_[O];m-=z-n.width,m*=l?1:-1}}var j=Object.assign({position:a},c&&IH),W=d===!0?OH({x:m,y:g}):{x:m,y:g};if(m=W.x,g=W.y,l){var I;return Object.assign({},j,(I={},I[S]=b?"0":"",I[L]=E?"0":"",I.transform=(y.devicePixelRatio||1)<=1?"translate("+m+"px, "+g+"px)":"translate3d("+m+"px, "+g+"px, 0)",I))}return Object.assign({},j,(t={},t[S]=b?g+"px":"",t[L]=E?m+"px":"",t.transform="",t))}function DH(i){var t=i.state,e=i.options,n=e.gpuAcceleration,o=n===void 0?!0:n,s=e.adaptive,r=s===void 0?!0:s,a=e.roundOffsets,l=a===void 0?!0:a;if(!1)var c;var d={placement:ue(t.placement),variation:ui(t.placement),popper:t.elements.popper,popperRect:t.rects.popper,gpuAcceleration:o,isFixed:t.options.strategy==="fixed"};t.modifiersData.popperOffsets!=null&&(t.styles.popper=Object.assign({},t.styles.popper,zv(Object.assign({},d,{offsets:t.modifiersData.popperOffsets,position:t.options.strategy,adaptive:r,roundOffsets:l})))),t.modifiersData.arrow!=null&&(t.styles.arrow=Object.assign({},t.styles.arrow,zv(Object.assign({},d,{offsets:t.modifiersData.arrow,position:"absolute",adaptive:!1,roundOffsets:l})))),t.attributes.popper=Object.assign({},t.attributes.popper,{"data-popper-placement":t.placement})}var IH,jv,Wv=v(()=>{Ye();Qo();xi();ln();Xo();An();ts();Cn();IH={top:"auto",right:"auto",bottom:"auto",left:"auto"};jv={name:"computeStyles",enabled:!0,phase:"beforeWrite",fn:DH,data:{}}});function HH(i){var t=i.state,e=i.instance,n=i.options,o=n.scroll,s=o===void 0?!0:o,r=n.resize,a=r===void 0?!0:r,l=Wt(t.elements.popper),c=[].concat(t.scrollParents.reference,t.scrollParents.popper);return s&&c.forEach(function(d){d.addEventListener("scroll",e.update,rc)}),a&&l.addEventListener("resize",e.update,rc),function(){s&&c.forEach(function(d){d.removeEventListener("scroll",e.update,rc)}),a&&l.removeEventListener("resize",e.update,rc)}}var rc,Vv,qv=v(()=>{xi();rc={passive:!0};Vv={name:"eventListeners",enabled:!0,phase:"write",fn:function(){},effect:HH,data:{}}});function es(i){return i.replace(/left|right|bottom|top/g,function(t){return kH[t]})}var kH,Gv=v(()=>{kH={left:"right",right:"left",bottom:"top",top:"bottom"}});function ac(i){return i.replace(/start|end/g,function(t){return NH[t]})}var NH,Jv=v(()=>{NH={start:"end",end:"start"}});function mo(i){var t=Wt(i),e=t.pageXOffset,n=t.pageYOffset;return{scrollLeft:e,scrollTop:n}}var lc=v(()=>{xi()});function po(i){return hi(ye(i)).left+mo(i).scrollLeft}var cc=v(()=>{Ko();ln();lc()});function sp(i,t){var e=Wt(i),n=ye(i),o=e.visualViewport,s=n.clientWidth,r=n.clientHeight,a=0,l=0;if(o){s=o.width,r=o.height;var c=gr();(c||!c&&t==="fixed")&&(a=o.offsetLeft,l=o.offsetTop)}return{width:s,height:r,x:a+po(i),y:l}}var Yv=v(()=>{xi();ln();cc();Xm()});function rp(i){var t,e=ye(i),n=mo(i),o=(t=i.ownerDocument)==null?void 0:t.body,s=wi(e.scrollWidth,e.clientWidth,o?o.scrollWidth:0,o?o.clientWidth:0),r=wi(e.scrollHeight,e.clientHeight,o?o.scrollHeight:0,o?o.clientHeight:0),a=-n.scrollLeft+po(i),l=-n.scrollTop;return De(o||e).direction==="rtl"&&(a+=wi(e.clientWidth,o?o.clientWidth:0)-s),{width:s,height:r,x:a,y:l}}var Zv=v(()=>{ln();Xo();cc();lc();Cn()});function ho(i){var t=De(i),e=t.overflow,n=t.overflowX,o=t.overflowY;return/auto|scroll|overlay|hidden/.test(e+o+n)}var dc=v(()=>{Xo()});function mc(i){return["html","body","#document"].indexOf(he(i))>=0?i.ownerDocument.body:re(i)&&ho(i)?i:mc(cn(i))}var Kv=v(()=>{Er();dc();Ln();Ze()});function Sn(i,t){var e;t===void 0&&(t=[]);var n=mc(i),o=n===((e=i.ownerDocument)==null?void 0:e.body),s=Wt(n),r=o?[s].concat(s.visualViewport||[],ho(n)?n:[]):n,a=t.concat(r);return o?a:a.concat(Sn(cn(r)))}var ap=v(()=>{Kv();Er();xi();dc()});function is(i){return Object.assign({},i,{left:i.x,top:i.y,right:i.x+i.width,bottom:i.y+i.height})}var lp=v(()=>{});function PH(i,t){var e=hi(i,!1,t==="fixed");return e.top=e.top+i.clientTop,e.left=e.left+i.clientLeft,e.bottom=e.top+i.clientHeight,e.right=e.left+i.clientWidth,e.width=i.clientWidth,e.height=i.clientHeight,e.x=e.left,e.y=e.top,e}function Xv(i,t,e){return t===ic?is(sp(i,e)):pi(t)?PH(t,e):is(rp(ye(i)))}function $H(i){var t=Sn(cn(i)),e=["absolute","fixed"].indexOf(De(i).position)>=0,n=e&&re(i)?Li(i):i;return pi(n)?t.filter(function(o){return pi(o)&&vr(o,n)&&he(o)!=="body"}):[]}function cp(i,t,e,n){var o=t==="clippingParents"?$H(i):[].concat(t),s=[].concat(o,[e]),r=s[0],a=s.reduce(function(l,c){var d=Xv(i,c,n);return l.top=wi(d.top,l.top),l.right=ro(d.right,l.right),l.bottom=ro(d.bottom,l.bottom),l.left=wi(d.left,l.left),l},Xv(i,r,n));return a.width=a.right-a.left,a.height=a.bottom-a.top,a.x=a.left,a.y=a.top,a}var Qv=v(()=>{Ye();Yv();Zv();ap();Qo();ln();Xo();Ze();Ko();Er();Qm();Ln();lp();Cn()});function Tr(i){var t=i.reference,e=i.element,n=i.placement,o=n?ue(n):null,s=n?ui(n):null,r=t.x+t.width/2-e.width/2,a=t.y+t.height/2-e.height/2,l;switch(o){case Jt:l={x:r,y:t.y-e.height};break;case se:l={x:r,y:t.y+t.height};break;case Qt:l={x:t.x+t.width,y:a};break;case Kt:l={x:t.x-e.width,y:a};break;default:l={x:t.x,y:t.y}}var c=o?lo(o):null;if(c!=null){var d=c==="y"?"height":"width";switch(s){case rn:l[c]=l[c]-(t[d]/2-e[d]/2);break;case so:l[c]=l[c]+(t[d]/2-e[d]/2);break;default:}}return l}var dp=v(()=>{An();ts();sc();Ye()});function Ai(i,t){t===void 0&&(t={});var e=t,n=e.placement,o=n===void 0?i.placement:n,s=e.strategy,r=s===void 0?i.strategy:s,a=e.boundary,l=a===void 0?Ov:a,c=e.rootBoundary,d=c===void 0?ic:c,p=e.elementContext,u=p===void 0?Jo:p,m=e.altBoundary,h=m===void 0?!1:m,g=e.padding,f=g===void 0?0:g,E=_r(typeof f!="number"?f:yr(f,wn)),b=u===Jo?Dv:Jo,L=i.rects.popper,S=i.elements[h?b:u],y=cp(pi(S)?S:S.contextElement||ye(i.elements.popper),l,d,r),_=hi(i.elements.reference),w=Tr({reference:_,element:L,strategy:"absolute",placement:o}),O=is(Object.assign({},L,w)),D=u===Jo?O:_,z={top:y.top-D.top+E.top,bottom:D.bottom-y.bottom+E.bottom,left:y.left-D.left+E.left,right:D.right-y.right+E.right},j=i.modifiersData.offset;if(u===Jo&&j){var W=j[o];Object.keys(z).forEach(function(I){var K=[Qt,se].indexOf(I)>=0?1:-1,ot=[Jt,se].indexOf(I)>=0?"y":"x";z[I]+=W[ot]*K})}return z}var xr=v(()=>{Qv();ln();Ko();dp();lp();Ye();Ze();np();op()});function mp(i,t){t===void 0&&(t={});var e=t,n=e.placement,o=e.boundary,s=e.rootBoundary,r=e.padding,a=e.flipVariations,l=e.allowedAutoPlacements,c=l===void 0?nc:l,d=ui(n),p=d?a?Zm:Zm.filter(function(h){return ui(h)===d}):wn,u=p.filter(function(h){return c.indexOf(h)>=0});u.length===0&&(u=p);var m=u.reduce(function(h,g){return h[g]=Ai(i,{placement:g,boundary:o,rootBoundary:s,padding:r})[ue(g)],h},{});return Object.keys(m).sort(function(h,g){return m[h]-m[g]})}var tE=v(()=>{ts();Ye();xr();An()});function FH(i){if(ue(i)===ec)return[];var t=es(i);return[ac(i),t,ac(t)]}function BH(i){var t=i.state,e=i.options,n=i.name;if(!t.modifiersData[n]._skip){for(var o=e.mainAxis,s=o===void 0?!0:o,r=e.altAxis,a=r===void 0?!0:r,l=e.fallbackPlacements,c=e.padding,d=e.boundary,p=e.rootBoundary,u=e.altBoundary,m=e.flipVariations,h=m===void 0?!0:m,g=e.allowedAutoPlacements,f=t.options.placement,E=ue(f),b=E===f,L=l||(b||!h?[es(f)]:FH(f)),S=[f].concat(L).reduce(function(tt,Q){return tt.concat(ue(Q)===ec?mp(t,{placement:Q,boundary:d,rootBoundary:p,padding:c,flipVariations:h,allowedAutoPlacements:g}):Q)},[]),y=t.rects.reference,_=t.rects.popper,w=new Map,O=!0,D=S[0],z=0;z<S.length;z++){var j=S[z],W=ue(j),I=ui(j)===rn,K=[Jt,se].indexOf(W)>=0,ot=K?"width":"height",_t=Ai(t,{placement:j,boundary:d,rootBoundary:p,altBoundary:u,padding:c}),nt=K?I?Qt:Kt:I?se:Jt;y[ot]>_[ot]&&(nt=es(nt));var Nt=es(nt),Ut=[];if(s&&Ut.push(_t[W]<=0),a&&Ut.push(_t[nt]<=0,_t[Nt]<=0),Ut.every(function(tt){return tt})){D=j,O=!1;break}w.set(j,Ut)}if(O)for(var Ee=h?3:1,oe=function(Q){var ht=S.find(function(at){var Dt=w.get(at);if(Dt)return Dt.slice(0,Q).every(function(Zt){return Zt})});if(ht)return D=ht,"break"},qe=Ee;qe>0;qe--){var k=oe(qe);if(k==="break")break}t.placement!==D&&(t.modifiersData[n]._skip=!0,t.placement=D,t.reset=!0)}}var eE,iE=v(()=>{Gv();An();Jv();xr();tE();Ye();ts();eE={name:"flip",enabled:!0,phase:"main",fn:BH,requiresIfExists:["offset"],data:{_skip:!1}}});function nE(i,t,e){return e===void 0&&(e={x:0,y:0}),{top:i.top-t.height-e.y,right:i.right-t.width+e.x,bottom:i.bottom-t.height+e.y,left:i.left-t.width-e.x}}function oE(i){return[Jt,Qt,se,Kt].some(function(t){return i[t]>=0})}function UH(i){var t=i.state,e=i.name,n=t.rects.reference,o=t.rects.popper,s=t.modifiersData.preventOverflow,r=Ai(t,{elementContext:"reference"}),a=Ai(t,{altBoundary:!0}),l=nE(r,n),c=nE(a,o,s),d=oE(l),p=oE(c);t.modifiersData[e]={referenceClippingOffsets:l,popperEscapeOffsets:c,isReferenceHidden:d,hasPopperEscaped:p},t.attributes.popper=Object.assign({},t.attributes.popper,{"data-popper-reference-hidden":d,"data-popper-escaped":p})}var sE,rE=v(()=>{Ye();xr();sE={name:"hide",enabled:!0,phase:"main",requiresIfExists:["preventOverflow"],fn:UH}});function zH(i,t,e){var n=ue(i),o=[Kt,Jt].indexOf(n)>=0?-1:1,s=typeof e=="function"?e(Object.assign({},t,{placement:i})):e,r=s[0],a=s[1];return r=r||0,a=(a||0)*o,[Kt,Qt].indexOf(n)>=0?{x:a,y:r}:{x:r,y:a}}function jH(i){var t=i.state,e=i.options,n=i.name,o=e.offset,s=o===void 0?[0,0]:o,r=nc.reduce(function(d,p){return d[p]=zH(p,t.rects,s),d},{}),a=r[t.placement],l=a.x,c=a.y;t.modifiersData.popperOffsets!=null&&(t.modifiersData.popperOffsets.x+=l,t.modifiersData.popperOffsets.y+=c),t.modifiersData[n]=r}var aE,lE=v(()=>{An();Ye();aE={name:"offset",enabled:!0,phase:"main",requires:["popperOffsets"],fn:jH}});function WH(i){var t=i.state,e=i.name;t.modifiersData[e]=Tr({reference:t.rects.reference,element:t.rects.popper,strategy:"absolute",placement:t.placement})}var cE,dE=v(()=>{dp();cE={name:"popperOffsets",enabled:!0,phase:"read",fn:WH,data:{}}});function pp(i){return i==="x"?"y":"x"}var mE=v(()=>{});function VH(i){var t=i.state,e=i.options,n=i.name,o=e.mainAxis,s=o===void 0?!0:o,r=e.altAxis,a=r===void 0?!1:r,l=e.boundary,c=e.rootBoundary,d=e.altBoundary,p=e.padding,u=e.tether,m=u===void 0?!0:u,h=e.tetherOffset,g=h===void 0?0:h,f=Ai(t,{boundary:l,rootBoundary:c,padding:p,altBoundary:d}),E=ue(t.placement),b=ui(t.placement),L=!b,S=lo(E),y=pp(S),_=t.modifiersData.popperOffsets,w=t.rects.reference,O=t.rects.popper,D=typeof g=="function"?g(Object.assign({},t.rects,{placement:t.placement})):g,z=typeof D=="number"?{mainAxis:D,altAxis:D}:Object.assign({mainAxis:0,altAxis:0},D),j=t.modifiersData.offset?t.modifiersData.offset[t.placement]:null,W={x:0,y:0};if(_){if(s){var I,K=S==="y"?Jt:Kt,ot=S==="y"?se:Qt,_t=S==="y"?"height":"width",nt=_[S],Nt=nt+f[K],Ut=nt-f[ot],Ee=m?-O[_t]/2:0,oe=b===rn?w[_t]:O[_t],qe=b===rn?-O[_t]:-w[_t],k=t.elements.arrow,tt=m&&k?ao(k):{width:0,height:0},Q=t.modifiersData["arrow#persistent"]?t.modifiersData["arrow#persistent"].padding:br(),ht=Q[K],at=Q[ot],Dt=co(0,w[_t],tt[_t]),Zt=L?w[_t]/2-Ee-Dt-ht-z.mainAxis:oe-Dt-ht-z.mainAxis,Ni=L?-w[_t]/2+Ee+Dt+at+z.mainAxis:qe+Dt+at+z.mainAxis,Ti=t.elements.arrow&&Li(t.elements.arrow),Qn=Ti?S==="y"?Ti.clientTop||0:Ti.clientLeft||0:0,yn=(I=j==null?void 0:j[S])!=null?I:0,$l=nt+Zt-yn-Qn,Vm=nt+Ni-yn,Fl=co(m?ro(Nt,$l):Nt,nt,m?wi(Ut,Vm):Ut);_[S]=Fl,W[S]=Fl-nt}if(a){var di,qD=S==="x"?Jt:Kt,GD=S==="x"?se:Qt,to=_[y],Bl=y==="y"?"height":"width",nv=to+f[qD],ov=to-f[GD],qm=[Jt,Kt].indexOf(E)!==-1,sv=(di=j==null?void 0:j[y])!=null?di:0,rv=qm?nv:to-w[Bl]-O[Bl]-sv+z.altAxis,av=qm?to+w[Bl]+O[Bl]-sv-z.altAxis:ov,lv=m&&qm?Fv(rv,to,av):co(m?rv:nv,to,m?av:ov);_[y]=lv,W[y]=lv-to}t.modifiersData[n]=W}}var pE,hE=v(()=>{Ye();An();sc();mE();ep();oc();Qo();xr();ts();ip();Cn();pE={name:"preventOverflow",enabled:!0,phase:"main",fn:VH,requiresIfExists:["offset"]}});var hp=v(()=>{});function up(i){return{scrollLeft:i.scrollLeft,scrollTop:i.scrollTop}}var uE=v(()=>{});function fp(i){return i===Wt(i)||!re(i)?mo(i):up(i)}var fE=v(()=>{lc();xi();Ze();uE()});function qH(i){var t=i.getBoundingClientRect(),e=an(t.width)/i.offsetWidth||1,n=an(t.height)/i.offsetHeight||1;return e!==1||n!==1}function gp(i,t,e){e===void 0&&(e=!1);var n=re(t),o=re(t)&&qH(t),s=ye(t),r=hi(i,o,e),a={scrollLeft:0,scrollTop:0},l={x:0,y:0};return(n||!n&&!e)&&((he(t)!=="body"||ho(s))&&(a=fp(t)),re(t)?(l=hi(t,!0),l.x+=t.clientLeft,l.y+=t.clientTop):s&&(l.x=po(s))),{x:r.left+a.scrollLeft-l.x,y:r.top+a.scrollTop-l.y,width:r.width,height:r.height}}var gE=v(()=>{Ko();fE();Ln();Ze();cc();ln();dc();Cn()});function GH(i){var t=new Map,e=new Set,n=[];i.forEach(function(s){t.set(s.name,s)});function o(s){e.add(s.name);var r=[].concat(s.requires||[],s.requiresIfExists||[]);r.forEach(function(a){if(!e.has(a)){var l=t.get(a);l&&o(l)}}),n.push(s)}return i.forEach(function(s){e.has(s.name)||o(s)}),n}function vp(i){var t=GH(i);return Hv.reduce(function(e,n){return e.concat(t.filter(function(o){return o.phase===n}))},[])}var vE=v(()=>{Ye()});function Ep(i){var t;return function(){return t||(t=new Promise(function(e){Promise.resolve().then(function(){t=void 0,e(i())})})),t}}var EE=v(()=>{});function bp(i){var t=i.reduce(function(e,n){var o=e[n.name];return e[n.name]=o?Object.assign({},o,n,{options:Object.assign({},o.options,n.options),data:Object.assign({},o.data,n.data)}):n,e},{});return Object.keys(t).map(function(e){return t[e]})}var bE=v(()=>{});function yE(){for(var i=arguments.length,t=new Array(i),e=0;e<i;e++)t[e]=arguments[e];return!t.some(function(n){return!(n&&typeof n.getBoundingClientRect=="function")})}function TE(i){i===void 0&&(i={});var t=i,e=t.defaultModifiers,n=e===void 0?[]:e,o=t.defaultOptions,s=o===void 0?_E:o;return function(a,l,c){c===void 0&&(c=s);var d={placement:"bottom",orderedModifiers:[],options:Object.assign({},_E,s),modifiersData:{},elements:{reference:a,popper:l},attributes:{},styles:{}},p=[],u=!1,m={state:d,setOptions:function(E){var b=typeof E=="function"?E(d.options):E;g(),d.options=Object.assign({},s,d.options,b),d.scrollParents={reference:pi(a)?Sn(a):a.contextElement?Sn(a.contextElement):[],popper:Sn(l)};var L=vp(bp([].concat(n,d.options.modifiers)));if(d.orderedModifiers=L.filter(function(j){return j.enabled}),!1){var S;if(getBasePlacement(d.options.placement)===auto)var y;var _,w,O,D,z}return h(),m.update()},forceUpdate:function(){if(!u){var E=d.elements,b=E.reference,L=E.popper;if(yE(b,L)){d.rects={reference:gp(b,Li(L),d.options.strategy==="fixed"),popper:ao(L)},d.reset=!1,d.placement=d.options.placement,d.orderedModifiers.forEach(function(j){return d.modifiersData[j.name]=Object.assign({},j.data)});for(var S=0,y=0;y<d.orderedModifiers.length;y++){if(d.reset===!0){d.reset=!1,y=-1;continue}var _=d.orderedModifiers[y],w=_.fn,O=_.options,D=O===void 0?{}:O,z=_.name;typeof w=="function"&&(d=w({state:d,options:D,name:z,instance:m})||d)}}}},update:Ep(function(){return new Promise(function(f){m.forceUpdate(),f(d)})}),destroy:function(){g(),u=!0}};if(!yE(a,l))return m;m.setOptions(c).then(function(f){!u&&c.onFirstUpdate&&c.onFirstUpdate(f)});function h(){d.orderedModifiers.forEach(function(f){var E=f.name,b=f.options,L=b===void 0?{}:b,S=f.effect;if(typeof S=="function"){var y=S({state:d,name:E,instance:m,options:L}),_=function(){};p.push(y||_)}})}function g(){p.forEach(function(f){return f()}),p=[]}return m}}var _E,xE=v(()=>{gE();oc();ap();Qo();vE();EE();bE();Ze();_E={placement:"bottom",modifiers:[],strategy:"absolute"}});var JH,uo,wE=v(()=>{xE();qv();dE();Wv();Nv();lE();iE();hE();Uv();rE();hp();JH=[Vv,cE,jv,kv,aE,eE,pE,Bv,sE],uo=TE({defaultModifiers:JH})});var pc=v(()=>{Ye();hp();wE()});var YH,hc,WJ,_p=v(()=>{"use strict";YH=()=>["iPad Simulator","iPhone Simulator","iPod Simulator","iPad","iPhone","iPod"].includes(navigator.platform)||navigator.userAgent.includes("Mac")&&"ontouchend"in document,hc=Boolean(navigator.userAgent.match(/android/i)),WJ=YH()});var ZH,fo,yp=v(()=>{"use strict";pc();_p();V();ZH=200,fo=class extends EventTarget{constructor(e,n,o={}){super();this.element=o.element,this.anchor=n,this.message=e,this.config=o}render(){let e=this.anchor&&document.body.contains(this.anchor),n=P("div",`c-bubble__body${this.config.isDark?" ctx-dark":""}`,this.close=P("div","c-bubble__close"),this.contentElement=typeof this.message=="string"?P("div",{className:"c-bubble__content",innerHTML:this.message}):P("div","c-bubble__content",this.message),e&&P("div",{className:"c-bubble__arrow","data-popper-arrow":""}));this.element?this.element.classList.add("c-bubble"):this.element=P("div","c-bubble"),this.config.classNames&&this.element.classList.add(...this.config.classNames);let o=this.anchor&&tc(this.anchor)||0;this.element.style.zIndex=String(Math.max(o+1,this.config.minZIndex||10)),this.element.appendChild(n),document.body.contains(this.element)||document.body.appendChild(this.element)}show(){let e=Boolean(this.anchor&&document.body.contains(this.anchor));this.popper=uo(this.anchor||document.body,this.element,{placement:e&&this.config.placement||"top",modifiers:[{name:"offset",options:{offset:this.config.offset||[0,9]}},{name:"arrow",enabled:e},{name:"preventOverflow",options:{padding:e?5:20,altAxis:!e,tether:e}},{name:"flip",enabled:e&&!this.config.noFlip,options:{padding:{top:d2Env.isApp?hc?56:0:50,bottom:d2Env.isApp?56:0}}}],onFirstUpdate:()=>{this.onCreate()}}),this.anchor&&this.anchor.parentElement&&(this.anchorObserver=new MutationObserver(()=>{(!this.anchor||!document.body.contains(this.anchor))&&(this.anchorObserver.disconnect(),this.attachEventListeners(!1),this.onHide())}),this.anchorObserver.observe(this.anchor.parentElement,{childList:!0}))}attachEventListeners(e){e?(this.close.addEventListener("click",this),document.addEventListener("click",this,!0),document.addEventListener("keydown",this)):(this.close.removeEventListener("click",this),document.removeEventListener("click",this,!0),document.removeEventListener("keydown",this))}handleEvent(e){switch(e.type){case"click":(!this.element.contains(e.target)||e.target===this.close)&&this.hide();break;case"keydown":e.keyCode===27&&this.hide()}}setTransition(e){return this.element.animate({opacity:e?[0,1]:[1,0]},{duration:ZH,easing:`cubic-bezier(${e?".61,1,.88,1":".12,0,.39,0"})`,fill:"forwards"})}onCreate(){if(this.config.isDropdown||this.config.noAnimation)this.onShow();else{let e=this.setTransition(!0);e.onfinish=()=>this.onShow()}this.attachEventListeners(!0)}hide(){if(this.dispatchEvent(new CustomEvent("beforehide",{cancelable:!0})))if(this.attachEventListeners(!1),this.anchorObserver&&this.anchorObserver.disconnect(),this.config.noAnimation)this.onHide();else{let e=this.setTransition(!1);e.onfinish=()=>this.onHide()}}onShow(){this.dispatchEvent(new CustomEvent("show"))}onHide(){this.popper&&(this.popper.destroy(),delete this.popper),this.element&&(this.element.remove(),delete this.element),this.dispatchEvent(new CustomEvent("hide"))}}});var uc,fc,Tp=v(()=>{"use strict";uc="Подтвердить",fc="Отменить"});var gc,AE=v(()=>{"use strict";Tp();V();yp();gc=class extends fo{constructor(e,n,o,s,r){super(`<h3 class="x-header o-b-xs">${e}</h3>${n?`<div class="x-text">${n}</div>`:""}`,o,{classNames:["c-bubble--confirm"]});this.confirmButton=s,this.cancelButton=r,this.resolve=()=>{},this.promise=new Promise(a=>{this.resolve=a}),this.isConfirm=!1}render(){super.render(),this.contentElement.appendChild(P("div","o-t-l",this.confirm=P("button","c-button c-button--block c-button--l c-button--primary",this.confirmButton||uc),this.cancel=P("button","c-button c-button--block c-button--l o-t-s",this.cancelButton||fc)))}onCreate(){super.onCreate(),this.confirm.focus(),this.confirm.addEventListener("click",()=>{this.isConfirm=!0,this.hide()}),this.cancel.addEventListener("click",()=>this.hide())}onHide(){super.onHide(),this.resolve(this.isConfirm)}}});var CE,SE,xp=v(()=>{"use strict";CE="Закрыть (Esc)",SE="Выберите действие"});var wr,wp=v(()=>{"use strict";wr=(i,t)=>{if(!d2Env.isApp)return;let e=t?t.toString():"";window.location.href=`drive2://${i}${e?`/?${e}`:""}`}});var Lp,Ap,ME,RE,Ke,vc,dn=v(()=>{"use strict";ME=i=>{Lp=i},RE=i=>{Ap=i},Ke=()=>{Lp&&Lp.hide()},vc=()=>{Ap&&Ap.hide()}});var mn,Ec=v(()=>{"use strict";V();Z();dn();mn=class extends EventTarget{constructor(e={}){super();this.needTransition=!1;this.canHazOverlay=()=>!1;this.visible=!1;this.backwardTabWrapInProgress=!1;let{anchor:n,title:o,html:s}=e;this.anchor=n,this.title=o||"",this.html=s||"",this.config=N({className:"c-modal__content--basic"},e)}createDom(){this.element=P("div","c-modal",this.containerEl=P("div",{className:"c-modal__container",tabIndex:"0"},this.headerGroup=P("div","c-modal__header-group",this.header=P("div",{className:"c-modal__header",innerHTML:this.title}),this.close=P("div","c-modal__close",P("div"))),this.contentElement=P("div",{className:`c-modal__content${this.config.className?` ${this.config.className}`:""}`,innerHTML:this.html}))),M(this.element,!1),this.tabCatcherEl=P("div",{tabIndex:"0",style:"position:fixed"}),M(this.tabCatcherEl,!1),document.body.append(this.element,this.tabCatcherEl)}render(){this.createDom()}decorate(e){this.createDom(),this.contentElement.replaceWith(e),this.contentElement=e,this.contentElement.classList.add("c-modal__content"),this.config.className&&this.contentElement.classList.add(this.config.className),M(this.contentElement,!0)}show(){this.visible||!this.dispatchEvent(new CustomEvent("beforeshow",{cancelable:!0}))||(this.visible=!0,this.onBeforeShow(),Ke(),vc(),this.attachEventListeners(!0),this.showElements(!0),this.needTransition?this.playTransition(!0):this.onShow())}hide(){!this.visible||!this.dispatchEvent(new CustomEvent("beforehide",{cancelable:!0}))||(this.visible=!1,this.onBeforeHide(),this.attachEventListeners(!1),this.needTransition?this.playTransition(!1):this.onHide())}focus(){this.focusElement()}setupBackwardTabWrap(){this.backwardTabWrapInProgress=!0;try{this.tabCatcherEl.focus()}catch(e){}setTimeout(()=>this.resetBackwardTabWrap())}resetBackwardTabWrap(){this.backwardTabWrapInProgress=!1}showElements(e){M(this.tabCatcherEl,e),M(this.element,e)}attachEventListeners(e){e?(document.documentElement.addEventListener("focus",this,!0),this.close.addEventListener("click",this),document.addEventListener("keydown",this)):(document.documentElement.removeEventListener("focus",this,!0),this.close.removeEventListener("click",this),document.removeEventListener("keydown",this))}playTransition(e){e?this.onShow():this.onHide()}handleEvent(e){switch(e.type){case"focus":this.onFocus(e);break;case"click":this.onClick(e);break;case"keydown":this.onKey(e)}}onClick(e){e.preventDefault(),e.stopPropagation(),this.hide()}onFocus(e){this.backwardTabWrapInProgress?this.resetBackwardTabWrap():e.target===this.tabCatcherEl&&setTimeout(()=>this.focusElement())}onKey(e){let n=e.target,o=!1;e.keyCode===27?n.tagName==="SELECT"&&!n.disabled||(o=!0):e.keyCode===9&&e.shiftKey&&n===this.containerEl&&this.setupBackwardTabWrap(),o&&(e.stopPropagation(),e.preventDefault(),this.hide())}onBeforeShow(){}onShow(){this.focus();let e=ct("[data-autofocus],[autofocus]",this.contentElement);e&&setTimeout(()=>{e.focus(),e.value&&(e.selectionStart=e.selectionEnd=e.value.length)}),this.dispatchEvent(new CustomEvent("show"))}onBeforeHide(){}onHide(){this.element.remove(),this.tabCatcherEl.remove(),this.dispatchEvent(new CustomEvent("hide"))}focusElement(){try{let{scrollTop:e}=this.element;this.containerEl.focus(),this.element.scrollTop=e}catch(e){}}}});var pn,bc=v(()=>{"use strict";xp();V();wp();Ec();pn=class extends mn{constructor(e={}){super(N({title:SE},e));this.scrollY=0}createDomInternal(){this.element.classList.add("c-modal--pop-screen"),this.closeClone=this.close.cloneNode(!1),this.closeClone.classList.replace("c-modal__close","c-modal__close-box"),this.wrapper.prepend(this.closeClone)}createDom(){super.createDom(),this.wrapper=P("div","c-modal__wrapper"),this.wrapper.appendChild(this.containerEl),this.element.appendChild(this.wrapper),this.createDomInternal()}attachEventListeners(e){super.attachEventListeners(e),e?this.closeClone.addEventListener("click",this):this.closeClone.removeEventListener("click",this)}setDocumentHidden(e){e&&(this.scrollY=document.scrollingElement.scrollTop),document.documentElement.classList.toggle("g-dialog-active",e),document.scrollingElement.scrollTop=e?0:this.scrollY}onBeforeShow(){super.onBeforeShow(),this.canHazOverlay(!0)&&(this.setDocumentHidden(!0),d2Env.isApp&&setTimeout(()=>{let e=new URLSearchParams({header:this.title,headerColor:"111111",statusBarStyle:"light"});wr("modal",e)}))}onHide(){super.onHide(),this.canHazOverlay(!1)&&(this.setDocumentHidden(!1),d2Env.isApp&&wr("modal-close"))}focusElement(){try{this.containerEl.focus(),this.wrapper.scrollTop=0,setTimeout(()=>{this.wrapper.scrollTop=0})}catch(e){}}}});var _c,IE=v(()=>{"use strict";Tp();V();bc();_c=class extends pn{constructor(e,n,o,s,r){super({anchor:o,title:e});this.resolve=()=>{};this.promise=new Promise(e=>{this.resolve=e});this.isConfirm=!1;this.html=n?`<div class="x-box x-box--ghost">${n}</div>`:"",this.confirmButton=s,this.cancelButton=r}render(){super.render(),this.contentElement.appendChild(P("div","x-box x-box--ghost o-t-l",this.confirm=P("button","c-button c-button--block c-button--l c-button--primary",this.confirmButton||uc),this.cancel=P("button","c-button c-button--block c-button--l o-t-s",this.cancelButton||fc)))}attachEventListeners(e){super.attachEventListeners(e),e&&(this.confirm.addEventListener("click",()=>{this.isConfirm=!0,this.hide()}),this.cancel.addEventListener("click",()=>{this.hide()}))}onShow(){super.onShow(),this.confirm.focus()}onHide(){super.onHide(),setTimeout(()=>{this.resolve(this.isConfirm)},1e3)}}});var Ot,Mn=v(()=>{"use strict";Ot=class{constructor(t,e){this.width=t;this.height=e}clone(){return new Ot(this.width,this.height)}getLongest(){return Math.max(this.width,this.height)}getShortest(){return Math.min(this.width,this.height)}area(){return this.width*this.height}aspectRatio(){return this.width/this.height}ceil(){return this.width=Math.ceil(this.width),this.height=Math.ceil(this.height),this}fitsInside(t){return this.width<=t.width&&this.height<=t.height}floor(){return this.width=Math.floor(this.width),this.height=Math.floor(this.height),this}round(){return this.width=Math.round(this.width),this.height=Math.round(this.height),this}scale(t,e){return this.width*=t,this.height*=typeof e=="number"?e:t,this}scaleToCover(t){let e=this.aspectRatio()<=t.aspectRatio()?t.width/this.width:t.height/this.height;return this.scale(e)}scaleToFit(t){let e=this.aspectRatio()>t.aspectRatio()?t.width/this.width:t.height/this.height;return this.scale(e)}static equals(t,e){return t===e?!0:!t||!e?!1:t.width===e.width&&t.height===e.height}}});var Cp,OE=v(()=>{"use strict";Z();Cp=i=>{document.body.style.marginRight=i?`${Lv()}px`:"",document.documentElement.style.overflow=i?"hidden":""}});var XH,yc,DE=v(()=>{"use strict";xp();V();Mn();Z();OE();Ec();XH="cubic-bezier(.39,.575,.565,1)",yc=class extends mn{constructor(e){super(e);this.transitionDuration=300;this.needTransition=!0,this.onDocumentClick=this.onDocumentClick.bind(this)}createDom(){this.bgEl=P("div","c-modal__bg"),M(this.bgEl,!1),document.body.appendChild(this.bgEl),super.createDom(),this.close.title=CE}showElements(e){M(this.bgEl,e),super.showElements(e)}getPreviewSize(e,n){return e.clone().scaleToFit(n)}playTransition(e){if(!this.anchor){this.onTransitionEnd();return}this.anchorBox=this.anchorBox&&!document.documentElement.contains(this.anchor)?this.anchorBox:sn(this.anchor);let n=sn(this.containerEl),o=new Ot(n.width,n.height),s=this.getPreviewSize(o,new Ot(this.anchorBox.width,this.anchorBox.height)),r=s.width/o.width,a=this.anchorBox.left-n.left-Math.round((s.width-this.anchorBox.width)/2),l=this.anchorBox.top-n.top-Math.round((s.height-this.anchorBox.height)/2);if(this.transition){this.bgTransition.reverse(),this.transition.reverse();return}let c={duration:this.transitionDuration,easing:XH,direction:e?"normal":"reverse",fill:"forwards"};this.bgTransition=this.bgEl.animate({opacity:[0,1]},c),this.transition=this.containerEl.animate({transform:[`translate(${a}px,${l}px) scale(${r})`,"none"],opacity:[0,1]},c),this.transition.onfinish=()=>this.onTransitionEnd()}onTransitionEnd(){this.containerEl&&(this.containerEl.style.transform=""),this.visible?this.onShow():this.onHide()}attachEventListeners(e){super.attachEventListeners(e),this.config.closeOnClick&&(e?document.addEventListener("click",this.onDocumentClick,!0):document.removeEventListener("click",this.onDocumentClick,!0))}onDocumentClick(e){this.containerEl.contains(e.target)||(e.preventDefault(),e.stopPropagation(),this.hide())}onBeforeShow(){super.onBeforeShow(),this.canHazOverlay(!0)&&Cp(!0)}onShow(){super.onShow(),this.transition=void 0,this.bgTransition=void 0}onHide(){this.transition=void 0,this.bgTransition=void 0,this.bgEl.remove(),super.onHide(),this.canHazOverlay(!1)&&Cp(!1)}}});var Tc,HE=v(()=>{"use strict";V();bc();Tc=class extends pn{createDomInternal(){this.sentinel=P("div","c-modal__sentinel"),this.wrapper.prepend(this.sentinel),this.headerTop=P("div","c-modal__header-top"),this.closeClone=this.close.cloneNode(!1),this.headerTop.append(this.header.cloneNode(!0),this.closeClone),this.containerEl.prepend(this.headerGroup),this.element.appendChild(this.headerTop),this.observer=new IntersectionObserver(e=>{this.element.classList.toggle("is-stuck",!e[0].isIntersecting)},{threshold:0})}onShow(){super.onShow(),this.observer.observe(this.sentinel)}onHide(){super.onHide(),this.observer.unobserve(this.sentinel)}}});var ae,Sp,kE,Mt,zt,Rp,Ip,Op,Mp,xc,NE,Ci,Te,$t,PE,dt,gt=v(()=>{"use strict";yp();AE();IE();Ec();DE();HE();bc();ae=[],Sp=!1,kE=i=>i&&!Sp||!i&&Sp&&ae.length===0?(Sp=i,!0):!1,Mt=()=>{let i=ae.pop();i&&i.hide()},zt=()=>{if(ae.length){let i=ae[ae.length-1];(i instanceof fo||i instanceof pn)&&Mt()}},Rp=i=>{i||Mt()},Ip=i=>{ae.length>1&&ae[ae.length-1]!==i.target&&i.preventDefault()},Op=i=>{let t=ae.indexOf(i.target);t!==-1&&ae.splice(t)},Mp=(i,t={},e)=>{Rp(e);let n=new i(t);return n.addEventListener("beforehide",Ip),n.addEventListener("hide",Op),ae.push(n),n.canHazOverlay=kE,n},xc=i=>Mp(pn,i,!0),NE=i=>{let t=xc(i);return t.render(),t.show(),t},Ci=(i,t,e)=>d2Env.isMobile?e?xc(i):Mp(Tc,i,t):Mp(yc,i,t),Te=(i,t)=>{let e=Ci(i,t);return e.render(),e.show(),e},$t=(i,t,e={},n)=>{ae.length!==0&&!(ae[ae.length-1]instanceof mn)&&Rp(n);let o=new fo(i,t,e);return o.addEventListener("beforehide",Ip),o.addEventListener("hide",Op),ae.push(o),o.render(),o.show(),o},PE=(i,t,e={})=>(e.classNames=e.classNames||[],e.classNames.push("c-bubble--error"),$t(i,t,wt(N({},e),{isDark:!0}))),dt=(i,t,e,n,o,s)=>{ae.length!==0&&!(ae[ae.length-1]instanceof mn)&&Rp(s||d2Env.isMobile);let r=d2Env.isMobile?new _c(i,t,e,n,o):new gc(i,t,e,n,o);return r.addEventListener("beforehide",Ip),r.addEventListener("hide",Op),ae.push(r),d2Env.isMobile&&(r.canHazOverlay=kE),r.render(),r.show(),r.promise}});var QH,tk,ek,ik,$E,wc,nk,Bi,FE,ok,Lr,Dp,BE,Ui,Xe=v(()=>{"use strict";V();Ce();Z();gt();QH=/^[a-zA-Z0-9\-_.+]+@(?:[a-zA-Z0-9-]+\.)+[a-zA-Z]+$/,tk=/^(http|https|ftp):\/\/(([A-Z0-9][A-Z0-9_-]*)(\.[A-Z0-9][A-Z0-9_-]*)+)(:(\d+))?\/?/i,ek="is-invalid",ik="is-empty",$E="field-validation-error",wc=new WeakMap,nk=(i,t)=>i.getAttribute(t)||i.dataset[t]||void 0,Bi=(i,...t)=>{let e=typeof i=="string"?document.getElementById(i):i;e&&(wc.has(e)?wc.get(e).push(...t):wc.set(e,t))},FE=i=>{let t=typeof i=="string"?document.getElementById(i):i;return wc.get(t)||[]},ok=(i,t)=>{try{return typeof i=="string"?t[i].value:i.value}catch(e){return}},Lr=(i,t,e)=>{let n=t.closest(".c-form__item, .x-form__item");if(n){n.classList.toggle(ik,Boolean(e)),n.classList.add(ek);let o=U($E,n);if(o||(o=document.createElement("span"),o.classList.add($E),n.appendChild(o)),M(o,!e),o.innerHTML=i,n.offsetHeight===0&&n.closest("details")){let r=n.querySelector("summary");r&&(r.open=!0)}}else t.offsetParent!==null&&$t(i,t,{placement:"bottom-start"})},Dp=(i,t)=>{let[e,n,o,s]=t,r=typeof e=="string"?i[e]||document.getElementById(e):e;if(s)return!Array.from(r).map(p=>[p,n,o]).some(p=>!Dp(i,p));let a="";if(r)try{a=r.value||xn(i,e)}catch(p){}else if(o!=="imagereq")return!0;let l=typeof o=="function"||o==="imagereq"||r.length?void 0:nk(r,o==="minlengthorempty"?"minlength":o),c=Number(l),d=typeof o=="function"?o.call({getValue:ok},i,r,a):o==="required"?Boolean(a):o==="max"?a&&Number(a)<=c:o==="min"?a&&Number(a)>=c:o==="maxlength"?a&&a.length<=c||a==="":o==="minlength"?a&&a.length>=c:o==="minlengthorempty"?a&&a.length>=c||a==="":o==="pattern"?a&&l&&new RegExp(l).test(a):o==="email"?a&&QH.test(a):o==="imagereq"?Boolean(i[`${e}-1`]):o==="url"?a&&tk.test(a):!0;if(!d){r&&r.length&&r[0].type&&(r=r[0]),o==="imagereq"&&(r=i.querySelector(`[data-field-name="${e}"]`)),a=Array.isArray(a)?a[0]:a;let p=n.replace("{value}",a);p&&Lr(p,r);try{r.scrollIntoView({behavior:"smooth",block:"nearest"}),r.focus()}catch(u){}}return Boolean(d)},BE=i=>i&&FE(i).find(t=>!Dp(i,t)),Ui=i=>i?!FE(i).some(n=>!Dp(i,n)):!0});var ns,os,Ar,Cr=v(()=>{"use strict";ns="data-action",os=".",Ar=":"});var Sr,UE=v(()=>{"use strict";Cr();Sr=class{constructor(t){this.flowType_=t.action,this.node_=t.actionElement||t.targetElement,this.event_=t.event,this.eventType_=t.eventType,this.target_=t.targetElement||(t.event&&t.event.target&&t.event.target.nodeType===1?t.event.target:void 0)}flowType(){return this.flowType_}actionNamespace(){let t=this.flowType_;return t.substr(0,t.indexOf(os))}actionName(){let t=this.flowType_;return t.substring(t.indexOf(os)+1)}node(){return this.node_}event(){return this.event_}eventType(){return this.eventType_}target(){return this.target_}}});var sk,go,zE=v(()=>{"use strict";UE();Cr();sk=i=>new Sr(i),go=class{constructor(t,e){this.actions_={};this.namespaceActions_={};this.loaders_={};this.defaultLoaderNamespaces_={};this.queue_=[];this.globalHandlers_={};let n=t||sk;this.flowFactory_=o=>n(o),this.getHandler_=e}dispatch(t,e){if(Array.isArray(t)){this.queue_=[...t],this.replayQueuedEvents_();return}if(e){let{event:a,eventType:l}=t,c=this.globalHandlers_[l];if(c)for(let d=0,p;p=c[d];d++)p(a)===!1&&a.preventDefault();return}let{action:n}=t,o=go.getNamespace(n),s=this.namespaceActions_[o],r;if(this.getHandler_?r=this.getHandler_(t):s?s.accept(t)&&(r=s.handle):r=this.actions_[n],r){let a=this.flowFactory_(t);r(a);return}this.queue_.push(t),s||this.maybeInvokeLoader_(o,t)}registerLoader(t,e){this.loaders_[t]={loader:e,called:!1}}registerDefaultLoader(t){this.defaultLoader_=t}registerNamespaceHandler(t,e,n=()=>!0){this.namespaceActions_[t]={accept:n,handle:e}}maybeInvokeLoader_(t,e){let n=this.loaders_[t];n?n.called||(n.loader(this,t,e),n.called=!0):this.defaultLoader_&&!(t in this.defaultLoaderNamespaces_)&&(this.defaultLoaderNamespaces_[t]=!0,this.defaultLoader_(this,t,e))}static getNamespace(t){return t.split(".")[0]}registerHandlers(t,e,n){for(let o in e)this.actions_[t+os+o]=n?e[o].bind(n):e[o];this.replayQueuedEvents_()}unregisterHandler(t,e){delete this.actions_[t+os+e]}registerGlobalHandler(t,e){this.globalHandlers_[t]=this.globalHandlers_[t]||[],this.globalHandlers_[t].push(e)}unregisterGlobalHandler(t,e){if(this.globalHandlers_[t]){let n=this.globalHandlers_[t].indexOf(e);n!==-1&&this.globalHandlers_[t].splice(n,1)}}canDispatch(t){let{action:e}=t;if(this.actions_.hasOwnProperty(e))return!0;let n=go.getNamespace(e);return this.namespaceActions_.hasOwnProperty(n)?this.namespaceActions_[n].accept(t):!1}replay(){this.replayQueuedEvents_()}replayNow(){!this.eventReplayer_||this.queue_.length===0||this.eventReplayer_(this.queue_,this)}replayQueuedEvents_(){!this.eventReplayer_||this.queue_.length===0||queueMicrotask(()=>{this.eventReplayer_(this.queue_,this)})}setEventReplayer(t){this.eventReplayer_=t,this.replayQueuedEvents_()}}});var jE,Hp,Mr,kp,Lc,WE,VE,Np=v(()=>{"use strict";jE=new Map,Hp=new WeakMap,Mr=i=>Hp.get(i),kp=(i,t)=>{Hp.set(i,t)},Lc=i=>jE.get(i),WE=(i,t)=>{jE.set(i,t)},VE=i=>{Hp.delete(i)}});var GE,JE,YE,ZE=v(()=>{"use strict";GE=(i,t,e)=>{let n=t==="focus"||t==="blur"||t==="error"||t==="load";return i.addEventListener(t,e,n),{eventType:t,handler:e,capture:n}},JE=(i,t)=>{i.removeEventListener(t.eventType,t.handler,t.capture)},YE=i=>i.ctrlKey||i.shiftKey||i.metaKey||i.button===1});var Pp,rk,Rr,Qe,vo,$p=v(()=>{"use strict";Np();ZE();Cr();Pp=!1,rk={},Rr=class{constructor(t){this.div=t;this.handlers=[]}containsNode(t){return this.div.contains(t)}static isNested(t,e){for(let n=0;n<e.length;++n)if(e[n].div!==t.div&&e[n].containsNode(t.div))return!0;return!1}installHandler(t){this.handlers.push(t.call(null,this.div))}cleanUp(){for(let t=0;t<this.handlers.length;++t){let e=this.handlers[t];JE(this.div,e)}this.handlers.length=0}},Qe=class{constructor(){this.installers=[];this.containers=[];this.nestedContainers=[];this.events={};this.queue=[]}static getDefaultEventType(){return Qe.defaultEventType}static setDefaultEventType(t){Qe.defaultEventType=t}static eventHandler(t,e){return function n(o){let s=this,r=Qe.createEventInfo(e,o,s);if(t.dispatcher&&(r.eventType==="clickonly"&&(r.eventType="click"),t.dispatcher(r,!0)),!Qe.canSkipDispatch(r))if(Pp&&o.stopPropagation(),t.dispatcher){Qe.shouldPreventDefaultBeforeDispatching(r)&&o.preventDefault();let a=t.dispatcher(r);a&&n.call(this,a)}else Qe.queueEvent(t,r,o)}}static shouldPreventDefaultBeforeDispatching(t){return!!t.actionElement&&t.actionElement.tagName==="A"&&t.actionElement.getAttribute("data-npd")===null&&(t.eventType==="click"||t.eventType==="clickmod")}static queueEvent(t,e,n){e.event=n,t.queue.push(e)}static createEventInfo(t,e,n){t==="click"&&YE(e)&&(t="clickmod");let o=e.target,s={eventType:t,event:e,targetElement:o,action:"",actionElement:void 0,timeStamp:Date.now()};for(let r=o;r&&r!==n;r=r.parentElement){let a=Qe.getAction(r,t);if(a.action)return wt(N(N({},s),a),{actionElement:r,event:a.event||s.event})}return s}static canSkipDispatch(t){return!t.actionElement}static parseActions(t){let e=Mr(t);if(!e){let n=t.getAttribute(ns);if(!n)e=rk,kp(t,e);else{if(e=Lc(n),!e){e={};let o=n.split(/\s*;\s*/),s=o?o.length:0;for(let r=0;r<s;r++){let a=o[r];if(!a)continue;let l=a.indexOf(Ar),c=l!==-1,d=c?a.substr(0,l).trim():Qe.defaultEventType;e[d]=c?a.substr(l+1).trim():a}WE(n,e)}kp(t,e)}}return e}static getAction(t,e){let o=Qe.parseActions(t)[e]||"";return{eventType:e,action:o,event:void 0}}static containerHandlerInstaller(t,e){return n=>GE(n,t,e)}addEvent(t,e){if(this.events.hasOwnProperty(t))return;let n=Qe.eventHandler(this,t),o=Qe.containerHandlerInstaller(e||t,n);this.events[t]=n,this.installers.push(o);for(let s=0;s<this.containers.length;++s)this.containers[s].installHandler(o)}handler(t){return this.events[t]}addContainer(t){let e=new Rr(t);if(Pp)this.setUpContainer_(e),this.containers.push(e);else{if(this.hasContainerFor_(t))return this.nestedContainers.push(e),e;this.setUpContainer_(e),this.containers.push(e),this.updateNestedContainers_()}return e}updateNestedContainers_(){let t=this.nestedContainers.concat(this.containers),e=[],n=[];for(let o=0;o<this.containers.length;++o){let s=this.containers[o];Rr.isNested(s,t)?(e.push(s),s.cleanUp()):n.push(s)}for(let o=0;o<this.nestedContainers.length;++o){let s=this.nestedContainers[o];Rr.isNested(s,t)?e.push(s):(n.push(s),this.setUpContainer_(s))}this.containers=n,this.nestedContainers=e}setUpContainer_(t){typeof navigator!="undefined"&&/iPhone|iPad|iPod/.test(navigator.userAgent)&&(t.div.style.cursor="pointer");for(let e=0;e<this.installers.length;++e)t.installHandler(this.installers[e])}hasContainerFor_(t){for(let e=0;e<this.containers.length;e++)if(this.containers[e].containsNode(t))return!0;return!1}removeContainer(t){t.cleanUp();let e=!1;for(let n=0;n<this.containers.length;++n)if(this.containers[n]===t){this.containers.splice(n,1),e=!0;break}if(!e){for(let n=0;n<this.nestedContainers.length;++n)if(this.nestedContainers[n]===t){this.nestedContainers.splice(n,1);break}}Pp||this.updateNestedContainers_()}dispatchTo(t){this.dispatcher=t,this.queue&&(this.queue.length>0&&t(this.queue),this.queue.length=0)}},vo=Qe;vo.defaultEventType="click"});var Fp,Bp,Up,ak,lk,ck,dk,mk,fi,T,$=v(()=>{"use strict";Xe();zE();$p();V();Ce();Fp="__unloadw",ak=(i,t)=>{let e=i[i.length-1];t.canDispatch(e)&&(t.dispatch(e),i.length=0)},lk=i=>{Bp&&mi(Bp).toString()!==Up.toString()&&(i.preventDefault(),i.returnValue="")},ck=i=>{let t=i.target,e=Ui(t);return e&&t[Fp]&&(delete t[Fp],window.onbeforeunload=null),e},dk=i=>{let t=i.target,e=t&&t.closest("form"),n=e&&"keysubmit"in e.dataset;e&&n&&(i.ctrlKey||i.metaKey)&&i.keyCode===13&&Go(e)},mk=i=>{let t=i.target,e=t&&t.closest("form"),n=e&&"leavewarning"in e.dataset;e&&n&&typeof window.onbeforeunload!="function"&&(Up||(Bp=e,Up=mi(e)),e[Fp]=!0,window.onbeforeunload=lk)},fi=new vo;fi.addContainer(document.documentElement);document.documentElement.style.cursor="";fi.addEvent("click");fi.addEvent("focus");fi.addEvent("blur");fi.addEvent("submit");fi.addEvent("keyup");fi.addEvent("touchstart");fi.addEvent("input");fi.addEvent("change");fi.addEvent("mouseover");fi.addEvent("mouseout");T=new go;fi.dispatchTo(T.dispatch.bind(T));T.registerGlobalHandler("submit",ck);T.registerGlobalHandler("keyup",dk);T.registerGlobalHandler("focus",mk);T.setEventReplayer(ak)});var Ir,KE,ss,XE,QE,tb,eb,Or=v(()=>{"use strict";Ir="Внести в Чёрный список?",KE="Внести в Чёрный список",ss="Убрать из Чёрного списка",XE="Разблокировать пользователя?",QE="Он сможет писать вам сообщения, комментарии и появится в списке контактов",tb="Разблокировать",eb="Внести"});var rs,ib,Cc,zp=v(()=>{"use strict";rs="Ошибка исполнения запроса",ib="Слишком много запросов, попробуйте позже",Cc="Ошибочный ответ сервера"});var as,Sc=v(()=>{"use strict";as=()=>{let i="0123456789abcdef",t="xxxxxxxxxxxx4xxxyxxxxxxxxxxxxxxx",e="",n=0,o=Math.random()*4294967295|0;for(;n++<32;){let s=t[n-1],r=o&15,a=s=="x"?r:r&3|8;e+=s=="-"||s=="4"?s:i[a],o=n%8==0?Math.random()*4294967295|0:o>>4}return e}});var Wp,pk,jp,fe,zi=v(()=>{"use strict";Z();Wp=300,pk="is-active",jp=new WeakMap,fe=class{constructor(t){this.target=t;this.target.classList.add("c-spin"),jp.has(this.target)&&jp.get(this.target).stop(),jp.set(this.target,this)}start(t){clearTimeout(this.tm),this.tm=setTimeout(()=>{this.setActive(!0)},t||Wp)}stop(){clearTimeout(this.tm),this.setActive(!1)}setActive(t){hr(t),this.target.classList.toggle(pk,t)}}});function sb(i){clearTimeout(ob),i?ob=setTimeout(()=>{hr(i)},Wp):hr(i)}var ob,rb=v(()=>{"use strict";zi();Z()});var Rn,Ue,Vp=v(()=>{"use strict";gt();zp();Sc();rb();Rn=class extends EventTarget{constructor(e,n,o){super();let s=Rn.normalizeParams(e,n);this.url=s.url,this.config=s.config,this.isDummy=o,this.request=new XMLHttpRequest,this.completed=!1}abort(e,n){let o=Rn.normalizeParams(e,n),s=this.url!==o.url||(this.config.body||"").toString()!==(o.config.body||"").toString();return s&&this.request.abort(),s}dispose(){this.completed||this.request.abort()}send(){return new Promise((e,n)=>{if(this.isDummy)return;let{request:o}=this,{delay:s,method:r,body:a,headers:l,throwError:c,acceptOnlyHttp200:d}=this.config,p=u=>{c&&n(u)};o.open(r,this.url,!0),o.onload=()=>{if(d?o.status!==200:(o.status/100|0)!==2){let{status:u,statusText:m}=o,h=u===429?ib:m!==""?m:rs;this.showError(Rn.formatError(h,o),!0),p({request:o});return}if(this.config.returnType===3)try{let u=JSON.parse(o.responseText),{error:m,notification:h}=u,f=(Boolean(h)?h:m)||[];f=Array.isArray(f)?f:[f];let E=`<p>${f.join("</p><p>")}</p>`;f.length?(this.showError(E,!1),p({request:o,messages:f,formattedMessage:E,json:u})):e(u)}catch(u){this.showError(Rn.formatError(Cc,o),!1),p({request:o})}else this.config.returnType===2?e(o.responseText):e(o)},o.onerror=()=>{this.showError(Rn.formatError(rs),!0),p({request:o})},o.onreadystatechange=()=>{o.readyState===4&&(this.completed=!0,this.enableSpinner(!1),this.dispatchEvent(new Event("complete")))},Object.entries(l).forEach(([u,m])=>o.setRequestHeader(u,m)),d2Env.isApp&&s?setTimeout(()=>{this.enableSpinner(!0),o.send(a&&a.toString())},120):(this.enableSpinner(!0),o.send(a&&a.toString()))})}enableSpinner(e){let{silent:n,spinner:o}=this.config;o?e?o.start():o.stop():n||sb(e)}showError(e,n){let{anchorEl:o,silent:s}=this.config;if(!s){let r={classNames:["c-bubble--xhr"]};n?PE(e,o,r):$t(e,o,r)}}static normalizeParams(e,n){let o=e,s=N({method:"GET"},n);s.headers=N(N(N({},Rn.defaultHeaders),!s.omitMobileHeader&&{"X-Needs-Mobile-Version":String(d2Env.isMobile)}),s.headers||{});let r=s.body instanceof URLSearchParams?s.body:new URLSearchParams(typeof s.body=="string"?s.body:void 0);if(s.body instanceof FormData)for(let[a,l]of s.body)l instanceof File||r.append(a,l);else if(typeof s.body!="string"&&!(s.body instanceof URLSearchParams))for(let a in s.body){let l=s.body[a];(Array.isArray(l)?l:[l]).forEach(c=>r.append(a,String(c)))}if(s.method==="GET"||s.method==="HEAD"){let a=new URL(o,window.location.href);for(let[l,c]of r)a.searchParams.append(l,c);o=a.href,s.body=""}else Object.entries(d2Env.formContext).forEach(([a,l])=>r.append(a,l)),s.headers["Content-Type"]="application/x-www-form-urlencoded;charset=utf-8",s.body=r;return{url:o,config:s}}static formatError(e,n){let o=n?n.getResponseHeader("X-Request-ID")||n.status:"";return e+(o?` (${o}).`:".")}},Ue=Rn;Ue.defaultHeaders={"X-Requested-With":"XMLHttpRequest","X-Origin-Request-ID":d2Env.requestId,"X-Client-Request-ID":as()}});var qp,Gp,ab,R,kt,G=v(()=>{"use strict";Vp();qp=new Map,Gp=(i,t,e={})=>{let n=qp.get(t);if(n&&!n.completed&&!n.abort(i,e))return new Ue(i,e,!0);let o=new Ue(i,e);return o.addEventListener("complete",()=>qp.delete(t),{once:!0}),qp.set(t,o),o},ab=(i,t={},e={})=>t&&typeof t=="object"?(t.returnType=1,new Ue(i,t).send()):(e.returnType=1,Gp(i,t,e).send()),R=(i,t={},e={})=>t&&typeof t=="object"?(t.returnType=3,new Ue(i,t).send()):(e.returnType=3,Gp(i,t,e).send()),kt=(i,t={},e={})=>t&&typeof t=="object"?(t.returnType=2,new Ue(i,t).send()):(e.returnType=2,Gp(i,t,e).send())});var hk,uk,gi,Eo=v(()=>{"use strict";hk=i=>[void 0,i],uk=i=>[i,void 0],gi=i=>Promise.resolve().then(i).then(hk).catch(uk)});var yt,hn,Vt=v(()=>{"use strict";Np();$p();Cr();yt=i=>{let t=i.event();t&&t.preventDefault()},hn=(i,t)=>{let e=vo.getDefaultEventType(),n=Mr(i)&&N({},Mr(i));if(!n){let s=i.getAttribute(ns);if(!s)n={};else if(n=Lc(s),!n){n={};let r=s.split(/\s*;\s*/);for(let a=0,l=r?r.length:0;a<l;a++){let c=r[a];if(c){let d=c.indexOf(Ar),p=d!==-1,u=p?c.substr(0,d).trim():e;n[u]=p?c.substr(d+1).trim():c}}}}delete n[t||e];let o=Object.keys(n).map(s=>(s===e?"":s+Ar)+n[s]).join(";");VE(i),o?i.setAttribute(ns,o):i.removeAttribute(ns)}});var ji,Hr=v(()=>{"use strict";ji=i=>new Promise(t=>{setTimeout(t,i)})});var ze,In=v(()=>{"use strict";ze=(i,t)=>{let e,n=0,o,s=a=>{i(...a)},r=()=>{e=void 0;let a=t-(Date.now()-n);a>0?e=setTimeout(r,a):s(o)};return(...a)=>{n=Date.now(),o=a,e||(e=setTimeout(r,t))}}});var ls,Ic=v(()=>{"use strict";ls=(i,t)=>{let e=0,n=!1,o,s=()=>{e=0,n&&(n=!1,r())},r=()=>{e=setTimeout(s,t);let a=o;o=[],i(...a)};return(...a)=>{o=a,e?n=!0:r()}}});function yo(i,t,e=i,n){var o,s,r,a;if(t===ge)return t;let l=n!==void 0?(o=e._$Co)===null||o===void 0?void 0:o[n]:e._$Cl,c=Pr(t)?void 0:t._$litDirective$;return(l==null?void 0:l.constructor)!==c&&((s=l==null?void 0:l._$AO)===null||s===void 0||s.call(l,!1),c===void 0?l=void 0:(l=new c(i),l._$AT(i,e,n)),n!==void 0?((r=(a=e)._$Co)!==null&&r!==void 0?r:a._$Co=[])[n]=l:e._$Cl=l),l!==void 0&&(t=yo(i,l._$AS(i,t.values),l,n)),t}var Jp,Oc,ds,Mb,un,Yp,_k,ms,Nr,Pr,Nb,Pb,kr,Rb,Ib,bo,Ob,Db,$b,Fb,C,FZ,ge,F,Hb,cs,Bb,_o,Dc,On,To,Hc,yk,kc,Nc,Pc,Ub,kb,J,vt=v(()=>{Oc=window,ds=Oc.trustedTypes,Mb=ds?ds.createPolicy("lit-html",{createHTML:i=>i}):void 0,un=`lit$${(Math.random()+"").slice(9)}$`,Yp="?"+un,_k=`<${Yp}>`,ms=document,Nr=(i="")=>ms.createComment(i),Pr=i=>i===null||typeof i!="object"&&typeof i!="function",Nb=Array.isArray,Pb=i=>Nb(i)||typeof(i==null?void 0:i[Symbol.iterator])=="function",kr=/<(?:(!--|\/[^a-zA-Z])|(\/?[a-zA-Z][^>\s]*)|(\/?$))/g,Rb=/-->/g,Ib=/>/g,bo=RegExp(`>|[ 	
\f\r](?:([^\\s"'>=/]+)([ 	
\f\r]*=[ 	
\f\r]*(?:[^ 	
\f\r"'\`<>=]|("|')|))|$)`,"g"),Ob=/'/g,Db=/"/g,$b=/^(?:script|style|textarea|title)$/i,Fb=i=>(t,...e)=>({_$litType$:i,strings:t,values:e}),C=Fb(1),FZ=Fb(2),ge=Symbol.for("lit-noChange"),F=Symbol.for("lit-nothing"),Hb=new WeakMap,cs=ms.createTreeWalker(ms,129,null,!1),Bb=(i,t)=>{let e=i.length-1,n=[],o,s=t===2?"<svg>":"",r=kr;for(let l=0;l<e;l++){let c=i[l],d,p,u=-1,m=0;for(;m<c.length&&(r.lastIndex=m,p=r.exec(c),p!==null);)m=r.lastIndex,r===kr?p[1]==="!--"?r=Rb:p[1]!==void 0?r=Ib:p[2]!==void 0?($b.test(p[2])&&(o=RegExp("</"+p[2],"g")),r=bo):p[3]!==void 0&&(r=bo):r===bo?p[0]===">"?(r=o!=null?o:kr,u=-1):p[1]===void 0?u=-2:(u=r.lastIndex-p[2].length,d=p[1],r=p[3]===void 0?bo:p[3]==='"'?Db:Ob):r===Db||r===Ob?r=bo:r===Rb||r===Ib?r=kr:(r=bo,o=void 0);let h=r===bo&&i[l+1].startsWith("/>")?" ":"";s+=r===kr?c+_k:u>=0?(n.push(d),c.slice(0,u)+"$lit$"+c.slice(u)+un+h):c+un+(u===-2?(n.push(void 0),l):h)}let a=s+(i[e]||"<?>")+(t===2?"</svg>":"");if(!Array.isArray(i)||!i.hasOwnProperty("raw"))throw Error("invalid template strings array");return[Mb!==void 0?Mb.createHTML(a):a,n]},_o=class{constructor({strings:t,_$litType$:e},n){let o;this.parts=[];let s=0,r=0,a=t.length-1,l=this.parts,[c,d]=Bb(t,e);if(this.el=_o.createElement(c,n),cs.currentNode=this.el.content,e===2){let p=this.el.content,u=p.firstChild;u.remove(),p.append(...u.childNodes)}for(;(o=cs.nextNode())!==null&&l.length<a;){if(o.nodeType===1){if(o.hasAttributes()){let p=[];for(let u of o.getAttributeNames())if(u.endsWith("$lit$")||u.startsWith(un)){let m=d[r++];if(p.push(u),m!==void 0){let h=o.getAttribute(m.toLowerCase()+"$lit$").split(un),g=/([.?@])?(.*)/.exec(m);l.push({type:1,index:s,name:g[2],strings:h,ctor:g[1]==="."?Hc:g[1]==="?"?kc:g[1]==="@"?Nc:To})}else l.push({type:6,index:s})}for(let u of p)o.removeAttribute(u)}if($b.test(o.tagName)){let p=o.textContent.split(un),u=p.length-1;if(u>0){o.textContent=ds?ds.emptyScript:"";for(let m=0;m<u;m++)o.append(p[m],Nr()),cs.nextNode(),l.push({type:2,index:++s});o.append(p[u],Nr())}}}else if(o.nodeType===8)if(o.data===Yp)l.push({type:2,index:s});else{let p=-1;for(;(p=o.data.indexOf(un,p+1))!==-1;)l.push({type:7,index:s}),p+=un.length-1}s++}}static createElement(t,e){let n=ms.createElement("template");return n.innerHTML=t,n}};Dc=class{constructor(t,e){this.u=[],this._$AN=void 0,this._$AD=t,this._$AM=e}get parentNode(){return this._$AM.parentNode}get _$AU(){return this._$AM._$AU}v(t){var e;let{el:{content:n},parts:o}=this._$AD,s=((e=t==null?void 0:t.creationScope)!==null&&e!==void 0?e:ms).importNode(n,!0);cs.currentNode=s;let r=cs.nextNode(),a=0,l=0,c=o[0];for(;c!==void 0;){if(a===c.index){let d;c.type===2?d=new On(r,r.nextSibling,this,t):c.type===1?d=new c.ctor(r,c.name,c.strings,this,t):c.type===6&&(d=new Pc(r,this,t)),this.u.push(d),c=o[++l]}a!==(c==null?void 0:c.index)&&(r=cs.nextNode(),a++)}return s}p(t){let e=0;for(let n of this.u)n!==void 0&&(n.strings!==void 0?(n._$AI(t,n,e),e+=n.strings.length-2):n._$AI(t[e])),e++}},On=class{constructor(t,e,n,o){var s;this.type=2,this._$AH=F,this._$AN=void 0,this._$AA=t,this._$AB=e,this._$AM=n,this.options=o,this._$Cm=(s=o==null?void 0:o.isConnected)===null||s===void 0||s}get _$AU(){var t,e;return(e=(t=this._$AM)===null||t===void 0?void 0:t._$AU)!==null&&e!==void 0?e:this._$Cm}get parentNode(){let t=this._$AA.parentNode,e=this._$AM;return e!==void 0&&t.nodeType===11&&(t=e.parentNode),t}get startNode(){return this._$AA}get endNode(){return this._$AB}_$AI(t,e=this){t=yo(this,t,e),Pr(t)?t===F||t==null||t===""?(this._$AH!==F&&this._$AR(),this._$AH=F):t!==this._$AH&&t!==ge&&this.g(t):t._$litType$!==void 0?this.$(t):t.nodeType!==void 0?this.T(t):Pb(t)?this.k(t):this.g(t)}O(t,e=this._$AB){return this._$AA.parentNode.insertBefore(t,e)}T(t){this._$AH!==t&&(this._$AR(),this._$AH=this.O(t))}g(t){this._$AH!==F&&Pr(this._$AH)?this._$AA.nextSibling.data=t:this.T(ms.createTextNode(t)),this._$AH=t}$(t){var e;let{values:n,_$litType$:o}=t,s=typeof o=="number"?this._$AC(t):(o.el===void 0&&(o.el=_o.createElement(o.h,this.options)),o);if(((e=this._$AH)===null||e===void 0?void 0:e._$AD)===s)this._$AH.p(n);else{let r=new Dc(s,this),a=r.v(this.options);r.p(n),this.T(a),this._$AH=r}}_$AC(t){let e=Hb.get(t.strings);return e===void 0&&Hb.set(t.strings,e=new _o(t)),e}k(t){Nb(this._$AH)||(this._$AH=[],this._$AR());let e=this._$AH,n,o=0;for(let s of t)o===e.length?e.push(n=new On(this.O(Nr()),this.O(Nr()),this,this.options)):n=e[o],n._$AI(s),o++;o<e.length&&(this._$AR(n&&n._$AB.nextSibling,o),e.length=o)}_$AR(t=this._$AA.nextSibling,e){var n;for((n=this._$AP)===null||n===void 0||n.call(this,!1,!0,e);t&&t!==this._$AB;){let o=t.nextSibling;t.remove(),t=o}}setConnected(t){var e;this._$AM===void 0&&(this._$Cm=t,(e=this._$AP)===null||e===void 0||e.call(this,t))}},To=class{constructor(t,e,n,o,s){this.type=1,this._$AH=F,this._$AN=void 0,this.element=t,this.name=e,this._$AM=o,this.options=s,n.length>2||n[0]!==""||n[1]!==""?(this._$AH=Array(n.length-1).fill(new String),this.strings=n):this._$AH=F}get tagName(){return this.element.tagName}get _$AU(){return this._$AM._$AU}_$AI(t,e=this,n,o){let s=this.strings,r=!1;if(s===void 0)t=yo(this,t,e,0),r=!Pr(t)||t!==this._$AH&&t!==ge,r&&(this._$AH=t);else{let a=t,l,c;for(t=s[0],l=0;l<s.length-1;l++)c=yo(this,a[n+l],e,l),c===ge&&(c=this._$AH[l]),r||(r=!Pr(c)||c!==this._$AH[l]),c===F?t=F:t!==F&&(t+=(c!=null?c:"")+s[l+1]),this._$AH[l]=c}r&&!o&&this.j(t)}j(t){t===F?this.element.removeAttribute(this.name):this.element.setAttribute(this.name,t!=null?t:"")}},Hc=class extends To{constructor(){super(...arguments),this.type=3}j(t){this.element[this.name]=t===F?void 0:t}},yk=ds?ds.emptyScript:"",kc=class extends To{constructor(){super(...arguments),this.type=4}j(t){t&&t!==F?this.element.setAttribute(this.name,yk):this.element.removeAttribute(this.name)}},Nc=class extends To{constructor(t,e,n,o,s){super(t,e,n,o,s),this.type=5}_$AI(t,e=this){var n;if((t=(n=yo(this,t,e,0))!==null&&n!==void 0?n:F)===ge)return;let o=this._$AH,s=t===F&&o!==F||t.capture!==o.capture||t.once!==o.once||t.passive!==o.passive,r=t!==F&&(o===F||s);s&&this.element.removeEventListener(this.name,this,o),r&&this.element.addEventListener(this.name,this,t),this._$AH=t}handleEvent(t){var e,n;typeof this._$AH=="function"?this._$AH.call((n=(e=this.options)===null||e===void 0?void 0:e.host)!==null&&n!==void 0?n:this.element,t):this._$AH.handleEvent(t)}},Pc=class{constructor(t,e,n){this.element=t,this.type=6,this._$AN=void 0,this._$AM=e,this.options=n}get _$AU(){return this._$AM._$AU}_$AI(t){yo(this,t)}},Ub={P:"$lit$",A:un,M:Yp,C:1,L:Bb,R:Dc,D:Pb,V:yo,I:On,H:To,N:kc,U:Nc,B:Hc,F:Pc},kb=Oc.litHtmlPolyfillSupport;kb==null||kb(_o,On),((Jp=Oc.litHtmlVersions)!==null&&Jp!==void 0?Jp:Oc.litHtmlVersions=[]).push("2.6.1");J=(i,t,e)=>{var n,o;let s=(n=e==null?void 0:e.renderBefore)!==null&&n!==void 0?n:t,r=s._$litPart$;if(r===void 0){let a=(o=e==null?void 0:e.renderBefore)!==null&&o!==void 0?o:null;s._$litPart$=r=new On(t.insertBefore(Nr(),a),a,void 0,e!=null?e:{})}return r._$AI(i),r}});var He,Wi,vi,ps=v(()=>{He={ATTRIBUTE:1,CHILD:2,PROPERTY:3,BOOLEAN_ATTRIBUTE:4,EVENT:5,ELEMENT:6},Wi=i=>(...t)=>({_$litDirective$:i,values:t}),vi=class{constructor(t){}get _$AU(){return this._$AM._$AU}_$AT(t,e,n){this._$Ct=t,this._$AM=e,this._$Ci=n}_$AS(t,e){return this.update(t,e)}update(t,e){return this.render(...e)}}});var Ft,Si=v(()=>{vt();ps();Ft=Wi(class extends vi{constructor(i){var t;if(super(i),i.type!==He.ATTRIBUTE||i.name!=="class"||((t=i.strings)===null||t===void 0?void 0:t.length)>2)throw Error("`classMap()` can only be used in the `class` attribute and must be the only part in the attribute.")}render(i){return" "+Object.keys(i).filter(t=>i[t]).join(" ")+" "}update(i,[t]){var e,n;if(this.nt===void 0){this.nt=new Set,i.strings!==void 0&&(this.st=new Set(i.strings.join(" ").split(/\s/).filter(s=>s!=="")));for(let s in t)t[s]&&!(!((e=this.st)===null||e===void 0)&&e.has(s))&&this.nt.add(s);return this.render(t)}let o=i.element.classList;this.nt.forEach(s=>{s in t||(o.remove(s),this.nt.delete(s))});for(let s in t){let r=!!t[s];r===this.nt.has(s)||!((n=this.st)===null||n===void 0)&&n.has(s)||(r?(o.add(s),this.nt.add(s)):(o.remove(s),this.nt.delete(s)))}return ge}})});var Tk,jb,zb,hs,Dn,xk,$c,Wb,Fc,Zp=v(()=>{vt();({I:Tk}=Ub),jb=i=>i.strings===void 0,zb=()=>document.createComment(""),hs=(i,t,e)=>{var n;let o=i._$AA.parentNode,s=t===void 0?i._$AB:t._$AA;if(e===void 0){let r=o.insertBefore(zb(),s),a=o.insertBefore(zb(),s);e=new Tk(r,a,i,i.options)}else{let r=e._$AB.nextSibling,a=e._$AM,l=a!==i;if(l){let c;(n=e._$AQ)===null||n===void 0||n.call(e,i),e._$AM=i,e._$AP!==void 0&&(c=i._$AU)!==a._$AU&&e._$AP(c)}if(r!==s||l){let c=e._$AA;for(;c!==r;){let d=c.nextSibling;o.insertBefore(c,s),c=d}}}return e},Dn=(i,t,e=i)=>(i._$AI(t,e),i),xk={},$c=(i,t=xk)=>i._$AH=t,Wb=i=>i._$AH,Fc=i=>{var t;(t=i._$AP)===null||t===void 0||t.call(i,!1,!0);let e=i._$AA,n=i._$AB.nextSibling;for(;e!==n;){let o=e.nextSibling;e.remove(),e=o}}});var Vb,rt,Xt=v(()=>{vt();ps();Zp();Vb=(i,t,e)=>{let n=new Map;for(let o=t;o<=e;o++)n.set(i[o],o);return n},rt=Wi(class extends vi{constructor(i){if(super(i),i.type!==He.CHILD)throw Error("repeat() can only be used in text expressions")}ht(i,t,e){let n;e===void 0?e=t:t!==void 0&&(n=t);let o=[],s=[],r=0;for(let a of i)o[r]=n?n(a,r):r,s[r]=e(a,r),r++;return{values:s,keys:o}}render(i,t,e){return this.ht(i,t,e).values}update(i,[t,e,n]){var o;let s=Wb(i),{values:r,keys:a}=this.ht(t,e,n);if(!Array.isArray(s))return this.ut=a,r;let l=(o=this.ut)!==null&&o!==void 0?o:this.ut=[],c=[],d,p,u=0,m=s.length-1,h=0,g=r.length-1;for(;u<=m&&h<=g;)if(s[u]===null)u++;else if(s[m]===null)m--;else if(l[u]===a[h])c[h]=Dn(s[u],r[h]),u++,h++;else if(l[m]===a[g])c[g]=Dn(s[m],r[g]),m--,g--;else if(l[u]===a[g])c[g]=Dn(s[u],r[g]),hs(i,c[g+1],s[u]),u++,g--;else if(l[m]===a[h])c[h]=Dn(s[m],r[h]),hs(i,s[u],s[m]),m--,h++;else if(d===void 0&&(d=Vb(a,h,g),p=Vb(l,u,m)),d.has(l[u]))if(d.has(l[m])){let f=p.get(a[h]),E=f!==void 0?s[f]:null;if(E===null){let b=hs(i,s[u]);Dn(b,r[h]),c[h]=b}else c[h]=Dn(E,r[h]),hs(i,s[u],E),s[f]=null;h++}else Fc(s[m]),m--;else Fc(s[u]),u++;for(;h<=g;){let f=hs(i,c[g+1]);Dn(f,r[h]),c[h++]=f}for(;u<=m;){let f=s[u++];f!==null&&Fc(f)}return this.ut=a,$c(i,c),ge}})});var xe,Hn=v(()=>{"use strict";vt();Si();Xt();V();gt();xe=class extends EventTarget{constructor(t,e,n){super();let o=P("div","c-dropdown-menu");if(J(rt(e,s=>s.action,s=>C`
<div class=${Ft({"x-menu":!0,"x-menu--mod":!!s.isMod,"x-menu--delete":!!s.delete})}
  @click=${r=>this.click(r.target,s)}>${s.text}
</div>
    `),o),d2Env.isMobile){let s=xc({anchor:t,title:n});s.decorate(o),s.show()}else $t(o,t,{classNames:["c-bubble--dropdown"],placement:"bottom",isDropdown:!0,minZIndex:2})}click(t,e){e.inactive||(e.confirmTitle?dt(e.confirmTitle,e.confirmMessage,t,e.confirm,e.cancel,!0).then(n=>{n&&this.dispatchEvent(new CustomEvent("select",{detail:e.action}))}):this.dispatchEvent(new CustomEvent("select",{detail:e.action})))}}});var ti,wk,qb,kn=v(()=>{"use strict";$();X();gt();ti=i=>{let t=x("signuptt","content");return t&&$t(t.content.cloneNode(!0),i),!!t},wk=i=>{let t=i.node(),e=t&&t.href;!ti(t)&&e&&(window.location.href=e)},qb=()=>{T.registerHandlers("signuptt",{show:wk})}});var Ei,us=v(()=>{vt();Ei=i=>i!=null?i:F});var Gb,Bc,qt,fs,Kp,Jb,Yb,Zb,gs,ke,vs,Kb,Xp,Qp,te=v(()=>{"use strict";Gb="Вы уверены?",Bc="Подтвердить покупку?",qt="Удалить",fs="Скрыть",Kp="Да, я уверен{Gender, select, XX {а} other {}}",Jb="Нет, я передумал{Gender, select, XX {а} other {}}",Yb="Закрыть окно?",Zb="Внесённые изменения не сохранятся",gs="Закрыть",ke="Сохранить",vs="Отменить",Kb="{Amount, plural, one {# кредит} many {# кредитов} other {# кредита}}",Xp="Выделить все",Qp="Отменить все"});var $r,Xb=v(()=>{vt();ps();Zp();$r=Wi(class extends vi{constructor(i){if(super(i),i.type!==He.PROPERTY&&i.type!==He.ATTRIBUTE&&i.type!==He.BOOLEAN_ATTRIBUTE)throw Error("The `live` directive is not allowed on child or event bindings");if(!jb(i))throw Error("`live` bindings can only contain a single expression")}render(i){return i}update(i,[t]){if(t===ge||t===F)return t;let e=i.element,n=i.name;if(i.type===He.PROPERTY){if(t===e[n])return ge}else if(i.type===He.BOOLEAN_ATTRIBUTE){if(!!t===e.hasAttribute(n))return ge}else if(i.type===He.ATTRIBUTE&&e.getAttribute(n)===t+"")return ge;return $c(i),t}})});var ce,Es=v(()=>{vt();ps();ce=Wi(class extends vi{constructor(i){var t;if(super(i),i.type!==He.ATTRIBUTE||i.name!=="style"||((t=i.strings)===null||t===void 0?void 0:t.length)>2)throw Error("The `styleMap` directive must be used in the `style` attribute and must be the only part in the attribute.")}render(i){return Object.keys(i).reduce((t,e)=>{let n=i[e];return n==null?t:t+`${e=e.replace(/(?:^(webkit|moz|ms|o)|)(?=[A-Z])/g,"-$&").toLowerCase()}:${n};`},"")}update(i,[t]){let{style:e}=i.element;if(this.vt===void 0){this.vt=new Set;for(let n in t)this.vt.add(n);return this.render(t)}this.vt.forEach(n=>{t[n]==null&&(this.vt.delete(n),n.includes("-")?e.removeProperty(n):e[n]="")});for(let n in t){let o=t[n];o!=null&&(this.vt.add(n),n.includes("-")?e.setProperty(n,o):e[n]=o)}return ge}})});var xo,Uc=v(()=>{"use strict";xo="data:image/gif;base64,R0lGODlhAQABAIAAAP///wAAACH5BAEAAAAALAAAAAABAAEAAAICRAEAOw=="});var bs,zc=v(()=>{"use strict";bs=i=>{i.offsetHeight}});var Lk,Ak,Ck,Qb,Sk,th,Mk,Rk,Ik,eh,Ok,t_,Dk,Hk,e_,ih=v(()=>{"use strict";Uc();Pi();zc();Lk="is-contain",Ak="is-cover",Ck="is-transparent",Qb="is-ready",Sk="is-loaded",th="data-src",Mk="data-lowsrc",Rk="opacity .4s",Ik=.4,eh=[],Ok=i=>{eh.includes(i)||eh.push(i)},t_=i=>eh.includes(i),Dk=i=>{let t=i.target,e=t.parentElement;e.classList.add(Sk),setTimeout(()=>{t.style.transition="",e.classList.remove(Qb)},Ik*1e3+100)},Hk=i=>{let t=i.getAttribute(th);if(!t)return;let e=i.parentElement;i.setAttribute(Mk,i.src),i.removeAttribute(th),e.classList.add(Qb),bs(i),i.style.transition=Rk,i.addEventListener("load",Dk,{once:!0,passive:!0}),i.src=t,Ok(t)},e_=i=>{if(i.dataset.defined==="")return;let t=i.querySelector("img"),e=i.querySelector("span");if(!t||!e)return;i.dataset.defined="";let n=i.classList.contains(Lk),o=i.classList.contains(Ak),s=i.classList.contains(Ck),r=t.getAttribute(th);if(s&&(i.style.backgroundColor=""),r){let a=document.createElement("img");a.src=xo,e.appendChild(a),a.style.backgroundImage=`url(${t.src})`,a.style.backgroundSize=n?"contain":o?"cover":"100% 100%",a.style.backgroundPosition="50% 50%",a.style.backgroundRepeat="no-repeat",pe(t,{rootMargin:200,onEnter:Hk})}}});var i_,Fr,wo,Se,Mi=v(()=>{"use strict";vt();Si();us();Xb();Es();ih();Uc();i_=(i,t=960)=>{let e=t*t;return i.images.reduce((n,o)=>Math.abs(e-n.width*n.height)<Math.abs(e-o.width*o.width)?n:o)},Fr=(i,t=0,e={},n=960)=>{let o=i_(i,n),s=t===1?"is-contain":t===2?"is-cover":"",r=e.isTransparent?"is-transparent":"",a=`${o.width},${o.height}`,l=e.size||o,c=100*l.height/l.width,d=i.color?`style="background-color:${i.color};"`:"";return`<div class="o-img ${s} ${r} ${e.className||""}" data-size="${a}" ${d}>
    <span style="display: block; padding-top: ${c}%;"></span>
    <img src="${d2Env.isMobile?i.inline||xo:o.url}" ${d2Env.isMobile?`data-src="${o.url}"`:""}>
  </div>`},wo=(i,t=0,e={},n=960)=>{let o=document.createElement("div");return o.innerHTML=Fr(i,t,e,n),o.firstElementChild},Se=(i,t=0,e={},n=960)=>{let o=i_(i,n),{url:s}=o,r=d2Env.isMobile&&!t_(s),a=`${o.width},${o.height}`,l=e.size||{width:o.width,height:o.height},c=`${100*(l.height/l.width)}%`,d={"o-img":!0,"is-contain":t===1,"is-cover":t===2,"is-transparent":Boolean(e.isTransparent)};e.className&&e.className.split(/\s+/).forEach(u=>{d[u]=!0});let p=r?i.inline||xo:s;return C`<div class=${$r(Ft(d))} data-size=${$r(a)} style="background-color: ${i.color||""}">
    <span style=${ce({display:"block",paddingTop:c})}></span>
    <img src=${$r(p)} data-src=${Ei(r?$r(s):void 0)} loading=${Ei(d2Env.isMobile?void 0:"lazy")}>
  </div>`}});var Br,nh,n_,o_,s_,jc,oh,sh=v(()=>{"use strict";Xe();Br=new WeakMap,nh=i=>{i.preventDefault();let t=i.currentTarget;Ui(t)&&Br.has(t)&&Br.get(t)()},n_=i=>{(i.ctrlKey||i.metaKey)&&i.keyCode===13&&nh(i)},o_=i=>{i.currentTarget.addEventListener("keyup",n_)},s_=i=>{i.currentTarget.removeEventListener("keyup",n_)},jc=(i,t)=>{Br.has(i)||Br.set(i,t),i.addEventListener("submit",nh),i.addEventListener("focusin",o_),i.addEventListener("focusout",s_)},oh=i=>{i.removeEventListener("submit",nh),i.removeEventListener("focusin",o_),i.removeEventListener("focusout",s_),Br.delete(i)}});var kk,de,Vi=v(()=>{"use strict";kk=0,de=()=>{let i=kk++,t="";for(;i>=0;)t=String.fromCharCode(i%26+97)+t,i=Math.floor(i/26)-1;return t}});var Ct,Ne=v(()=>{"use strict";vt();te();V();Ce();G();Hr();sh();Vi();zi();gt();Ct=class extends EventTarget{constructor(e,n,o){super();this.config=e;this.isNested=n;this.isPopscreen=o;this.element=document.createElement("div");this.formData="";this.showCloseConfirm=!1;this.closeWithoutConfirm=!this.showCloseConfirm;this.requestId=de();this.submitHandler=this.defaultSubmitHandler;this.formDataTransformer=e=>new FormData(e)}setSubmitHandler(e){this.submitHandler=e}setFormDataTransformer(e){this.formDataTransformer=e}initCloseConfirm(e){this.showCloseConfirm=!0,this.closeWithoutConfirm=!this.showCloseConfirm,e&&(this.isDataChanged=e),this.form&&(this.formData=mi(this.form).toString()),this.config&&delete this.config.closeOnClick}isDataChanged(){return Boolean(this.form&&this.formData!==mi(this.form).toString())}show(e){return A(this,null,function*(){var n;if(this.closeWithoutConfirm=!this.showCloseConfirm,this.dialog=Ci(this.config,this.isNested,this.isPopscreen),e&&!d2Env.isApp&&J(e,this.element),this.dialog.decorate(this.element),this.dialog.addEventListener("beforehide",o=>A(this,null,function*(){let s=this.isDataChanged();!this.closeWithoutConfirm&&s&&(o.preventDefault(),(yield dt(Yb,Zb,void 0,gs))&&this.close())})),this.dialog.addEventListener("hide",()=>this.close(),{once:!0}),this.dialog.show(),e&&d2Env.isApp&&(yield ji(50),J(e,this.element)),this.form=(n=this.dialog.contentElement)==null?void 0:n.querySelector("form"),this.form){let o=U("js-spinner",this.form);o&&(this.spinner=new fe(o)),jc(this.form,()=>this.submit())}})}close(){this.closeWithoutConfirm=!0,this.stopSpinner(),this.form&&oh(this.form),this.dialog&&this.dialog.hide(),zt()}submit(){!this.submitHandler||!this.form||(this.spinner&&this.spinner.start(),this.submitHandler(this.form,this.form.querySelector('button[type="submit"]')).then(e=>{this.form&&oh(this.form),this.dispatchEvent(new CustomEvent("submit",{detail:e,cancelable:!0}))&&this.close()}).catch(()=>{}).finally(()=>{this.stopSpinner()}))}stopSpinner(){this.spinner&&this.spinner.stop()}defaultSubmitHandler(e,n){return R(e.action,this.requestId,{method:e.getAttribute("method")||"POST",anchorEl:n,body:this.formDataTransformer(e),throwError:!0})}}});var w_=eo((NX,x_)=>{var Ao="long",Nn="short",dh="narrow",Rt="numeric",Pn="2-digit";x_.exports={number:{decimal:{style:"decimal"},integer:{style:"decimal",maximumFractionDigits:0},currency:{style:"currency",currency:"USD"},percent:{style:"percent"},default:{style:"decimal"}},date:{short:{month:Rt,day:Rt,year:Pn},medium:{month:Nn,day:Rt,year:Rt},long:{month:Ao,day:Rt,year:Rt},full:{month:Ao,day:Rt,year:Rt,weekday:Ao},default:{month:Nn,day:Rt,year:Rt}},time:{short:{hour:Rt,minute:Rt},medium:{hour:Rt,minute:Rt,second:Rt},long:{hour:Rt,minute:Rt,second:Rt,timeZoneName:Nn},full:{hour:Rt,minute:Rt,second:Rt,timeZoneName:Nn},default:{hour:Rt,minute:Rt,second:Rt}},duration:{default:{hours:{minimumIntegerDigits:1,maximumFractionDigits:0},minutes:{minimumIntegerDigits:2,maximumFractionDigits:0},seconds:{minimumIntegerDigits:2,maximumFractionDigits:3}}},parseNumberPattern:function(i){if(i){var t={},e=i.match(/\b[A-Z]{3}\b/i),n=i.replace(/[^¤]/g,"").length;if(!n&&e&&(n=1),n?(t.style="currency",t.currencyDisplay=n===1?"symbol":n===2?"code":"name",t.currency=e?e[0].toUpperCase():"USD"):i.indexOf("%")>=0&&(t.style="percent"),!/[@#0]/.test(i))return t.style?t:void 0;if(t.useGrouping=i.indexOf(",")>=0,/E\+?[@#0]+/i.test(i)||i.indexOf("@")>=0){var o=i.replace(/E\+?[@#0]+|[^@#0]/gi,"");t.minimumSignificantDigits=Math.min(Math.max(o.replace(/[^@0]/g,"").length,1),21),t.maximumSignificantDigits=Math.min(Math.max(o.length,1),21)}else{for(var s=i.replace(/[^#0.]/g,"").split("."),r=s[0],a=r.length-1;r[a]==="0";)--a;t.minimumIntegerDigits=Math.min(Math.max(r.length-1-a,1),21);var l=s[1]||"";for(a=0;l[a]==="0";)++a;for(t.minimumFractionDigits=Math.min(Math.max(a,0),20);l[a]==="#";)++a;t.maximumFractionDigits=Math.min(Math.max(a,0),20)}return t}},parseDatePattern:function(i){if(i){for(var t={},e=0;e<i.length;){for(var n=i[e],o=1;i[++e]===n;)++o;switch(n){case"G":t.era=o===5?dh:o===4?Ao:Nn;break;case"y":case"Y":t.year=o===2?Pn:Rt;break;case"M":case"L":o=Math.min(Math.max(o-1,0),4),t.month=[Rt,Pn,Nn,Ao,dh][o];break;case"E":case"e":case"c":t.weekday=o===5?dh:o===4?Ao:Nn;break;case"d":case"D":t.day=o===2?Pn:Rt;break;case"h":case"K":t.hour12=!0,t.hour=o===2?Pn:Rt;break;case"H":case"k":t.hour12=!1,t.hour=o===2?Pn:Rt;break;case"m":t.minute=o===2?Pn:Rt;break;case"s":case"S":t.second=o===2?Pn:Rt;break;case"z":case"Z":case"v":case"V":t.timeZoneName=o===1?Nn:Ao;break}}return Object.keys(t).length?t:void 0}}}});var A_=eo((PX,L_)=>{L_.exports=function(t,e){if(typeof t=="string"&&e[t])return t;for(var n=[].concat(t||[]),o=0,s=n.length;o<s;++o)for(var r=n[o].split("-");r.length;){var a=r.join("-");if(e[a])return a;r.pop()}}});var M_=eo(($X,S_)=>{"use strict";var mh="one",Yk="two",C_="few",Zk="many",ph="other";function Kk(i){var t=Math.floor(Math.abs(+i)),e=(i+".").split(".")[1].length;return t===1&&e===0?mh:ph}function Xk(i){var t=Math.floor(Math.abs(+i)),e=(i+".").split(".")[1].length;return e===0&&t%10===1&&t%100!==11?mh:e===0&&2<=t%10&&t%10<=4&&(t%100<12||14<t%100)?C_:e===0&&t%10===0||e===0&&5<=t%10&&t%10<=9||e===0&&11<=t%100&&t%100<=14?Zk:ph}function Qk(i){var t=+i;return t%10===1&&t%100!==11?mh:t%10===2&&t%100!==12?Yk:t%10===3&&t%100!==13?C_:ph}S_.exports={en:{cardinal:Kk,ordinal:Qk},ru:{cardinal:Xk}}});var H_=eo((qc,D_)=>{"use strict";var $n=w_(),tN=A_(),R_=M_();qc=D_.exports=function(t,e,n){return Vc(t,null,e||"en",n||{},!0)};qc.toParts=function(t,e,n){return Vc(t,null,e||"en",n||{},!1)};function Vc(i,t,e,n,o){var s=i.map(function(r){return eN(r,t,e,n,o)});return o?s.length===1?s[0]:function(a){for(var l="",c=0;c<s.length;++c)l+=s[c](a);return l}:function(a){return s.reduce(function(l,c){return l.concat(c(a))},[])}}function eN(i,t,e,n,o){if(typeof i=="string"){var s=i;return function(){return s}}var r=i[0],a=i[1];if(t&&i[0]==="#"){r=t[0];var l=t[2],c=(n.number||uh.number)([r,"number"],e);return function(h){return c(Wc(r,h)-l,h)}}var d;a==="plural"||a==="selectordinal"?(d={},Object.keys(i[3]).forEach(function(m){d[m]=Vc(i[3][m],i,e,n,o)}),i=[i[0],i[1],i[2],d]):i[2]&&typeof i[2]=="object"&&(d={},Object.keys(i[2]).forEach(function(m){d[m]=Vc(i[2][m],i,e,n,o)}),i=[i[0],i[1],d]);var p=a&&(n[a]||uh[a]);if(p){var u=p(i,e);return function(h){return u(Wc(r,h),h)}}return o?function(h){return String(Wc(r,h))}:function(h){return Wc(r,h)}}function Wc(i,t){if(t&&i in t)return t[i];for(var e=i.split("."),n=t,o=0,s=e.length;n&&o<s;++o)n=n[e[o]];return n}function hh(i,t){var e=i[2],n=$n.number[e]||$n.parseNumberPattern(e)||$n.number.default;return new Intl.NumberFormat(t,n).format}function iN(i,t){var e=i[2],n=$n.duration[e]||$n.duration.default,o=new Intl.NumberFormat(t,n.seconds).format,s=new Intl.NumberFormat(t,n.minutes).format,r=new Intl.NumberFormat(t,n.hours).format,a=/^fi$|^fi-|^da/.test(String(t))?".":":";return function(l,c){if(l=+l,!isFinite(l))return o(l);var d=~~(l/60/60),p=~~(l/60%60),u=(d?r(Math.abs(d))+a:"")+s(Math.abs(p))+a+o(Math.abs(l%60));return l<0?r(-1).replace(r(1),u):u}}function I_(i,t){var e=i[1],n=i[2],o=$n[e][n]||$n.parseDatePattern(n)||$n[e].default;return new Intl.DateTimeFormat(t,o).format}function O_(i,t){var e=i[1],n=e==="selectordinal"?"ordinal":"cardinal",o=i[2],s=i[3],r;if(Intl.PluralRules&&Intl.PluralRules.supportedLocalesOf(t).length>0)r=new Intl.PluralRules(t,{type:n});else{var a=tN(t,R_),l=a&&R_[a][n]||nN;r={select:l}}return function(c,d){var p=s["="+ +c]||s[r.select(c-o)]||s.other;return p(d)}}function nN(){return"other"}function oN(i,t){var e=i[2];return function(n,o){var s=e[n]||e.other;return s(o)}}var uh={number:hh,ordinal:hh,spellout:hh,duration:iN,date:I_,time:I_,plural:O_,selectordinal:O_,select:oN};qc.types=uh});var P_=eo((yh,N_)=>{"use strict";var Gi="{",we="}",Co=",",_s="#",jr="<",qi=">",Ii="</",Gc="/>",Fn="'",fh="offset:",sN=["number","date","time","ordinal","duration","spellout"],rN=["plural","select","selectordinal"];yh=N_.exports=function(t,e){return Eh({pattern:String(t),index:0,tagsType:e&&e.tagsType||null,tokens:e&&e.tokens||null},"")};function Eh(i,t){var e=i.pattern,n=e.length,o=[],s=i.index,r=vh(i,t);for(r&&o.push(r),r&&i.tokens&&i.tokens.push(["text",e.slice(s,i.index)]);i.index<n;){if(e[i.index]===we){if(!t)throw ee(i);break}if(t&&i.tagsType&&e.slice(i.index,i.index+Ii.length)===Ii)break;o.push(aN(i)),s=i.index,r=vh(i,t),r&&o.push(r),r&&i.tokens&&i.tokens.push(["text",e.slice(s,i.index)])}return o}function vh(i,t){for(var e=i.pattern,n=e.length,o=t==="plural"||t==="selectordinal",s=!!i.tagsType,r=t==="{style}",a="";i.index<n;){var l=e[i.index];if(l===Gi||l===we||o&&l===_s||s&&l===jr||r&&bh(l.charCodeAt(0)))break;if(l===Fn)if(l=e[++i.index],l===Fn)a+=l,++i.index;else if(l===Gi||l===we||o&&l===_s||s&&l===jr||r)for(a+=l;++i.index<n;)if(l=e[i.index],l===Fn&&e[i.index+1]===Fn)a+=Fn,++i.index;else if(l===Fn){++i.index;break}else a+=l;else a+=Fn;else a+=l,++i.index}return a}function bh(i){return i>=9&&i<=13||i===32||i===133||i===160||i===6158||i>=8192&&i<=8205||i===8232||i===8233||i===8239||i===8287||i===8288||i===12288||i===65279}function ei(i){for(var t=i.pattern,e=t.length,n=i.index;i.index<e&&bh(t.charCodeAt(i.index));)++i.index;n<i.index&&i.tokens&&i.tokens.push(["space",i.pattern.slice(n,i.index)])}function aN(i){var t=i.pattern;if(t[i.index]===_s)return i.tokens&&i.tokens.push(["syntax",_s]),++i.index,[_s];var e=lN(i);if(e)return e;if(t[i.index]!==Gi)throw ee(i,Gi);i.tokens&&i.tokens.push(["syntax",Gi]),++i.index,ei(i);var n=ys(i);if(!n)throw ee(i,"placeholder id");i.tokens&&i.tokens.push(["id",n]),ei(i);var o=t[i.index];if(o===we)return i.tokens&&i.tokens.push(["syntax",we]),++i.index,[n];if(o!==Co)throw ee(i,Co+" or "+we);i.tokens&&i.tokens.push(["syntax",Co]),++i.index,ei(i);var s=ys(i);if(!s)throw ee(i,"placeholder type");if(i.tokens&&i.tokens.push(["type",s]),ei(i),o=t[i.index],o===we){if(i.tokens&&i.tokens.push(["syntax",we]),s==="plural"||s==="selectordinal"||s==="select")throw ee(i,s+" sub-messages");return++i.index,[n,s]}if(o!==Co)throw ee(i,Co+" or "+we);i.tokens&&i.tokens.push(["syntax",Co]),++i.index,ei(i);var r;if(s==="plural"||s==="selectordinal"){var a=cN(i);ei(i),r=[n,s,a,gh(i,s)]}else if(s==="select")r=[n,s,gh(i,s)];else if(sN.indexOf(s)>=0)r=[n,s,k_(i)];else{var l=i.index,c=k_(i);ei(i),t[i.index]===Gi&&(i.index=l,c=gh(i,s)),r=[n,s,c]}if(ei(i),t[i.index]!==we)throw ee(i,we);return i.tokens&&i.tokens.push(["syntax",we]),++i.index,r}function lN(i){var t=i.tagsType;if(!(!t||i.pattern[i.index]!==jr)){if(i.pattern.slice(i.index,i.index+Ii.length)===Ii)throw ee(i,null,"closing tag without matching opening tag");i.tokens&&i.tokens.push(["syntax",jr]),++i.index;var e=ys(i,!0);if(!e)throw ee(i,"placeholder id");if(i.tokens&&i.tokens.push(["id",e]),ei(i),i.pattern.slice(i.index,i.index+Gc.length)===Gc)return i.tokens&&i.tokens.push(["syntax",Gc]),i.index+=Gc.length,[e,t];if(i.pattern[i.index]!==qi)throw ee(i,qi);i.tokens&&i.tokens.push(["syntax",qi]),++i.index;var n=Eh(i,t),o=i.index;if(i.pattern.slice(i.index,i.index+Ii.length)!==Ii)throw ee(i,Ii+e+qi);i.tokens&&i.tokens.push(["syntax",Ii]),i.index+=Ii.length;var s=ys(i,!0);if(s&&i.tokens&&i.tokens.push(["id",s]),e!==s)throw i.index=o,ee(i,Ii+e+qi,Ii+s+qi);if(ei(i),i.pattern[i.index]!==qi)throw ee(i,qi);return i.tokens&&i.tokens.push(["syntax",qi]),++i.index,[e,t,{children:n}]}}function ys(i,t){for(var e=i.pattern,n=e.length,o="";i.index<n;){var s=e[i.index];if(s===Gi||s===we||s===Co||s===_s||s===Fn||bh(s.charCodeAt(0))||t&&(s===jr||s===qi||s==="/"))break;o+=s,++i.index}return o}function k_(i){var t=i.index,e=vh(i,"{style}");if(!e)throw ee(i,"placeholder style name");return i.tokens&&i.tokens.push(["style",i.pattern.slice(t,i.index)]),e}function cN(i){var t=i.pattern,e=t.length,n=0;if(t.slice(i.index,i.index+fh.length)===fh){i.tokens&&i.tokens.push(["offset","offset"],["syntax",":"]),i.index+=fh.length,ei(i);for(var o=i.index;i.index<e&&dN(t.charCodeAt(i.index));)++i.index;if(o===i.index)throw ee(i,"offset number");i.tokens&&i.tokens.push(["number",t.slice(o,i.index)]),n=+t.slice(o,i.index)}return n}function dN(i){return i>=48&&i<=57}function gh(i,t){for(var e=i.pattern,n=e.length,o={};i.index<n&&e[i.index]!==we;){var s=ys(i);if(!s)throw ee(i,"sub-message selector");i.tokens&&i.tokens.push(["selector",s]),ei(i),o[s]=mN(i,t),ei(i)}if(!o.other&&rN.indexOf(t)>=0)throw ee(i,null,null,'"other" sub-message must be specified in '+t);return o}function mN(i,t){if(i.pattern[i.index]!==Gi)throw ee(i,Gi+" to start sub-message");i.tokens&&i.tokens.push(["syntax",Gi]),++i.index;var e=Eh(i,t);if(i.pattern[i.index]!==we)throw ee(i,we+" to end sub-message");return i.tokens&&i.tokens.push(["syntax",we]),++i.index,e}function ee(i,t,e,n){var o=i.pattern,s=o.slice(0,i.index).split(/\r?\n/),r=i.index,a=s.length,l=s.slice(-1)[0].length;return e=e||(i.index>=o.length?"end of message pattern":ys(i)||o[i.index]),n||(n=pN(t,e)),n+=" in "+o.replace(/\r?\n/g,`
`),new _h(n,t,e,r,a,l)}function pN(i,t){return i?"Expected "+i+" but found "+t:"Unexpected "+t+" found"}function _h(i,t,e,n,o,s){Error.call(this,i),this.name="SyntaxError",this.message=i,this.expected=t,this.found=e,this.offset=n,this.line=o,this.column=s}_h.prototype=Object.create(Error.prototype);yh.SyntaxError=_h});var $_,F_,it,Me=v(()=>{"use strict";$_=io(H_(),1),F_=io(P_(),1),it=(i,t)=>(0,$_.default)((0,F_.default)(i),"ru")(t)});var U_,wh,xh,Lh,z_=v(()=>{"use strict";Hr();G();U_=340,wh=class{constructor(t,e){this.urlPattern=t;this.isPost=e;this.cache=new Map;this.lastRequest=Date.now()}get(t,e){return A(this,null,function*(){if(this.cache.has(t))return this.cache.get(t);let n=Date.now(),o=n-this.lastRequest;if(o<U_)return yield ji(U_-o),this.get(t,e);this.lastRequest=n;let s=yield R(this.urlPattern.replace("{key}",t),{method:this.isPost?"POST":"GET",anchorEl:e});return this.cache.set(t,s),s})}},xh=new Map,Lh=(i,t)=>(xh.has(i)||xh.set(i,new wh(i,t)),xh.get(i))});var So,j_,Wr=v(()=>{"use strict";z_();So=Lh("/ajax/brand.models.cshtml?brand={key}"),j_=Lh("/ajax/geo.cshtml?_=p&c={key}")});var Ts,ii,Ji=v(()=>{"use strict";vt();Ts=(i,t="")=>C`<x-icon class="${t}" name="${i}"></x-icon>`,ii=i=>{if(i._$litPart$===void 0){let t=i.firstChild;for(;t;){let e=t.nextSibling;t.remove(),t=e}}}});var Jc,uN,Ah,Et,Pe=v(()=>{"use strict";Z();Jc=new WeakMap,uN=i=>{let t=document.createElement("div");return t.style.overflowY="hidden",t.style.overflowX="visible",i.parentElement.replaceChild(t,i),t.appendChild(i),t},Ah=class extends EventTarget{constructor(e,n){super();this.element=e;this.duration=500;this.enableInterruption=!0;this.height=0;this.inProgress=!1;n!==void 0&&(e.style.display=n?"":"none"),this.expanded=n||Je(e,"display")!=="none"}toggle(e){this.expand(!this.expanded,e)}hideAndRemove(e){this.addEventListener("end",()=>{this.element.remove()},{once:!0}),this.expand(!1,e)}expand(e,n){!n&&!this.enableInterruption&&this.inProgress||e!==this.expanded&&(this.expanded=e,this.dispatchEvent(new CustomEvent("start")),n?this.finish():this.animate())}finish(){this.element.style.transition="",this.element.style.display=this.expanded?"":"none",this.wrapperEl&&(this.wrapperEl.parentNode.replaceChild(this.element,this.wrapperEl),this.wrapperEl=void 0),this.dispatchEvent(new CustomEvent("end")),this.dispatchEvent(new CustomEvent(this.expanded?"show":"hide"))}animationFinish(){this.element.style.marginTop=this.marginTop||"",this.marginTop=void 0,this.finish()}animate(){let e=()=>{clearTimeout(this.backupTimeout),this.animationFinish()};clearTimeout(this.backupTimeout),this.inProgress=!0,setTimeout(()=>{this.inProgress=!1},this.duration+100);let n=this.wrapperEl!==void 0;this.element.removeEventListener("transitionend",e),this.marginTop===void 0&&(this.marginTop=this.element.style.marginTop||""),this.createWrapper(),this.element.addEventListener("transitionend",e,{once:!0}),setTimeout(()=>{if(!this.wrapperEl)return;n||(this.element.style.transition=`margin-top ${this.duration}ms cubic-bezier(0.445, 0.05, 0.55, 0.95)`);let o=this.expanded?0:-this.height;this.element.style.marginTop=`${o}px`,this.backupTimeout=setTimeout(()=>{this.animationFinish()},this.duration+100)})}createWrapper(){if(this.wrapperEl)return;let{element:e}=this,n=e.parentElement;e.style.display="";let o=e.offsetTop;this.wrapperEl=uN(e);let s=n.offsetHeight;this.height=this.wrapperEl.offsetHeight,e.style.marginTop="0";let r=e.offsetTop-o;r!==0&&(this.wrapperEl.style.marginTop=`${-r}px`);let a=n.offsetHeight-s;a!==0&&(this.wrapperEl.style.marginBottom=`${-a}px`);let l=this.expanded?-this.height:0;e.style.marginTop=`${l}px`}},Et=(i,t)=>(Jc.has(i)?t!==void 0&&Jc.get(i).expand(t):Jc.set(i,new Ah(i,t)),Jc.get(i))});var Zc,Ch=v(()=>{"use strict";Zc=i=>{let t=i.text||i.textContent||i.innerHTML||"",e=document.getElementsByTagName("head")[0]||document.documentElement,n=document.createElement("script");n.type="text/javascript",i.src?n.src=i.src:n.appendChild(document.createTextNode(t)),e.insertBefore(n,e.firstChild),e.removeChild(n),i.parentNode&&i.parentNode.removeChild(i)}});var Yr=eo(Sh=>{"use strict";Sh.__esModule=!0;var bN=function(i){var t=function(){i.cancelToken=!1},e=function(n,o){for(var s=[],r=2;r<arguments.length;r++)s[r-2]=arguments[r];i.callbackThis=n,i.args=s,!i.cancelToken&&("requestAnimationFrame"in window?i.cancelToken=window.requestAnimationFrame(function(){o.apply(i.callbackThis,i.args),t()}):(o.apply(i.callbackThis,i.args),i.cancelToken=window.setTimeout(t,16.666666666666668)))};return e.cancel=function(){"requestAnimationFrame"in window&&window.cancelAnimationFrame(i.cancelToken),window.clearTimeout(i.cancelToken),t()},e},ay=function(i,t){for(var e=[],n=2;n<arguments.length;n++)e[n-2]=arguments[n];var o=bN({}),s=arguments.length,r=function(){for(var a=[],l=0;l<arguments.length;l++)a[l]=arguments[l];o.apply(void 0,[s>1?t:this,i].concat(e,a))};return r.cancel=function(){return o.cancel()},r};Sh.throttle=function(i){var t=ay(i);return t.bind=ay.bind(null,i),t}});var my,_N,ly,cy,dy,Rh,Mh,je,ws=v(()=>{"use strict";my=io(Yr(),1),_N=1e3,ly=0,Rh=class extends EventTarget{constructor(){super(),window.addEventListener("scroll",(0,my.throttle)(this.handleScroll).bind(this),{passive:!0})}handleScroll(){let{clientHeight:t,scrollHeight:e}=document.documentElement,{scrollTop:n}=document.scrollingElement;if(dy!==e&&e-n-t<=600){dy=e;let o=Math.max(0,_N-(Date.now()-ly));clearTimeout(cy),cy=setTimeout(()=>{ly=Date.now(),this.dispatchEvent(new Event("scroll"))},o)}}},je=()=>(Mh||(Mh=new Rh),Mh)});var Kc,fy=v(()=>{"use strict";Kc=class{constructor(){this.key=1;this.pendingKeys=[];this.publishDepth=0;this.subscriptions=[];this.topics={}}subscribe(t,e,n){let o=this.topics[t];o||(o=this.topics[t]=[]);let{key:s}=this;return this.subscriptions[s]=t,this.subscriptions[s+1]=e,this.subscriptions[s+2]=n,this.key=s+3,o.push(s),s}subscribeOnce(t,e,n){let o=!1,s=this.subscribe(t,()=>{o||(o=!0,this.unsubscribeByKey(s),e.apply(n,arguments))},this);return s}unsubscribe(t,e,n){let o=this.topics[t];if(o){let{subscriptions:s}=this,r=o.find(a=>s[a+1]===e&&s[a+2]===n);if(r)return this.unsubscribeByKey(r)}return!1}unsubscribeByKey(t){let e=this.subscriptions[t];if(e){let n=this.topics[e];if(this.publishDepth!==0)this.pendingKeys.push(t),this.subscriptions[t+1]=()=>{};else{if(n){let o=n.indexOf(t);o!==-1&&n.splice(o,1)}delete this.subscriptions[t],delete this.subscriptions[t+1],delete this.subscriptions[t+2]}}return!!e}publish(t,...e){let n=this.topics[t];if(n){this.publishDepth++;let o=0;try{for(o=0;o<n.length;o++){let s=n[o];this.subscriptions[s+1].apply(this.subscriptions[s+2],e)}}finally{if(this.publishDepth--,this.pendingKeys.length>0&&this.publishDepth===0){let s;for(;s=this.pendingKeys.pop();)this.unsubscribeByKey(s)}}return o!==0}return!1}clear(t){if(t){let e=this.topics[t];e&&(e.forEach(n=>this.unsubscribeByKey(n)),delete this.topics[t])}else this.subscriptions.length=0,this.topics={}}dispose(){this.clear(),this.pendingKeys.length=0}}});var st,Le=v(()=>{"use strict";fy();st=new Kc});var uT,fT,Tt,Hh,gT,xN,ve=v(()=>{"use strict";uT=[],fT=[],Tt=(i,t)=>{if(!d2Env.isApp)if(window.ym)try{window.ym(33911514,"reachGoal",i,t)}catch(e){}else uT.push([i,t])},Hh=i=>{if(!d2Env.isApp)if(window.ym)try{window.ym(33911514,"params",i)}catch(t){}else fT.push(i)},gT=()=>{document.removeEventListener("yacounter33911514inited",gT),uT.forEach(i=>{Tt(i[0],i[1])}),fT.forEach(Hh)},xN=i=>{let e=i.target.closest("[data-ym-target]");if(!e)return;e.dataset.ymTarget.split(/\s+/).forEach((s,r)=>{let a,l=e.dataset[r===0?"ymParams":`ymParams${r+1}`];if(l)try{a=JSON.parse(l)}catch(c){}Tt(s,a)})};d2Env.isApp||(document.addEventListener("yacounter33911514inited",gT),document.documentElement.addEventListener("click",xN))});var ta,ni,ea=v(()=>{vt();ps();ta=class extends vi{constructor(t){if(super(t),this.it=F,t.type!==He.CHILD)throw Error(this.constructor.directiveName+"() can only be used in child bindings")}render(t){if(t===F||t==null)return this._t=void 0,this.it=t;if(t===ge)return t;if(typeof t!="string")throw Error(this.constructor.directiveName+"() called with a non-string value");if(t===this.it)return this._t;this.it=t;let e=[t];return e.raw=e,this._t={_$litType$:this.constructor.resultType,strings:e,values:[]}}};ta.directiveName="unsafeHTML",ta.resultType=1;ni=Wi(ta)});var id,ia,Bh=v(()=>{"use strict";id="Ой!",ia="Хорошо, я понял"});var zn,od=v(()=>{"use strict";Pi();zn=class extends EventTarget{constructor(e,n,o){super();this.element=e;this.height=0;this.element.rows=1,n&&(this.element.style.minHeight=`${n}px`),o&&(this.element.style.maxHeight=`${o}px`),this.handleEvent(),this.element.addEventListener("focus",this),this.element.addEventListener("input",this),this.element.addEventListener("blur",this),pe(this.element,{onEnter:()=>this.handleEvent()})}handleEvent(e){let n=0;e&&(n=document.scrollingElement.scrollTop);let{element:o}=this;o.style.height="auto";let{scrollHeight:s}=o;o.style.height=`${s}px`;let r=s>o.offsetHeight?"auto":"hidden";r!==o.style.overflowY&&(o.style.overflowY=r),e&&(document.scrollingElement.scrollTop=n),s!==this.height&&(this.height=s,this.dispatchEvent(new CustomEvent("resize")))}setContent(e){this.element.value=e,this.handleEvent()}setEnabled(e){this.element.disabled=!e,this.handleEvent()}dispose(){this.element.removeEventListener("focus",this),this.element.removeEventListener("input",this),this.element.removeEventListener("blur",this)}}});var NT,PT,$T,FT,Uh,BT=v(()=>{"use strict";NT="Слишком большой файл{SIZE}. Максимально допустимый размер {MAX_SIZE}.",PT="Неизвестный формат изображения. Поддерживаемые форматы: JPEG, PNG.",$T="Неизвестная ошибка при добавлении фотографии ({CODE}).",FT="Ошибочный ответ сервера ({STATUS}).",Uh="Загрузить фотографи{NUM_FILES, plural, one {ю} other {и}}"});var UT,Bt,sa,$e,jn,Re=v(()=>{"use strict";UT=i=>i.replace(/[\s]+/g," ").trim(),Bt=i=>i.replace(/&/g,"&amp;").replace(/</g,"&lt;").replace(/>/g,"&gt;").replace(/"/g,"&quot;").replace(/'/g,"&#39;").replace(/\x00/g,"&#0;"),sa=i=>String(i).replace(/([-()[\]{}+?*.$^|,:#<!\\])/g,"\\$1").replace(/\x08/g,"\\x08"),$e=i=>{let t={"&amp;":"&","&lt;":"<","&gt;":">","&quot;":'"'},e=document.createElement("div");return i.replace(/&([^;\s<&]+);?/g,(n,o)=>{let s=t[n];if(s)return s;if(o.charAt(0)==="#"){let r=Number("0"+o.substr(1));Number.isNaN(r)||(s=String.fromCharCode(r))}return s||(e.innerHTML=n+" ",s=e.firstChild.nodeValue.slice(0,-1)),t[n]=s,s})},jn=(i,t=" ")=>{i=String(i);let e=i.length,n=e>3?e%3:0;return(n?i.substring(0,n)+t:"")+i.substring(n).replace(/(\d{3})(?=\d)/g,`$1${t}`)}});var zT,Oi,ra=v(()=>{"use strict";BT();V();Me();Re();Z();Vi();Sc();gt();zT="23MB",Oi=class extends EventTarget{constructor(e,n){super();this.entityType_=e;this.buttonClass_=n;this.buttonId_=this.makeId("b"),this.containerId_=this.makeId("c"),this.errors_=[],this.uploadUrl_="/ajax/upload.cshtml",this.action_="upload",this.maxFiles_=1,this.dataAttributes_={},this.buttonCaption_=Uh}getCssClass(){return"uploader"}getElement(){return this.element_}getAction(){return this.action_}setAction(e){this.action_=e}setDataAttribute(e,n){this.dataAttributes_[e]=n}getUploadUrl(){return this.uploadUrl_}setUploadUrl(e){e&&(this.uploadUrl_=e,this.uploader_&&this.pluploadInit_())}setMaxFiles(e){this.maxFiles_=e,this.uploader_&&this.pluploadInit_(),this.buttonEl_&&(this.buttonEl_.innerHTML=it(Uh,{NUM_FILES:e}))}getButton(){return this.buttonEl_}getMaxFiles(){return this.maxFiles_}setButtonCaption(e){this.buttonCaption_=e}getButtonCaption(){return this.buttonCaption_}getId(){return this.id_||(this.id_=de())}makeId(e){return this.getId()+"."+e}createDom(){this.element_=document.createElement("div");let e=this.element_,n=`${this.getCssClass()}-progress`;e.classList.add(this.getCssClass());let o=P("div",`${this.getCssClass()}-button`,this.buttonEl_=P("button",{className:`${this.getCssClass()}-button-text${this.buttonClass_?` ${this.buttonClass_}`:""}`,type:"button"}));o.id=this.containerId_,e.append(o,this.progressEl_=P("div",n,this.progressBarEl_=P("div",`${n}-bar`)),this.progressNumEl_=P("div",`${n}-num`)),this.buttonEl_.innerHTML=it(this.buttonCaption_,{NUM_FILES:this.maxFiles_}),this.buttonEl_.id=this.buttonId_,Object.entries(this.dataAttributes_).forEach(([s,r])=>this.buttonEl_.setAttribute(`data-${s}`,r)),this.setProgress_(0,0,0),this.enableProgress_(!1),this.setVisible(!!this.isVisible_)}render(e){if(this.inDocument_)throw new Error("Component already rendered");this.element_||this.createDom(),e?e.insertBefore(this.element_,null):document.body.appendChild(this.element_),this.enterDocument()}enterDocument(){this.inDocument_=!0,this.pluploadInit_()}pluploadInit_(){this.uploader_&&(this.uploader_.destroy(),this.uploader_=void 0);let e=N({type:this.entityType_,_:this.action_},d2Env.formContext);this.uuid_=as(),this.uploader_=new plupload.Uploader({container:this.containerId_,runtimes:"html5",browse_button:this.buttonId_,url:this.uploadUrl_,filters:{max_file_size:zT,mime_types:[{title:"Image files",extensions:"jpeg,jpg,png"}]},multi_selection:this.maxFiles_>1,required_features:{send_binary_string:!0},multipart:!0,multipart_params:e,headers:{"X-Origin-Request-ID":d2Env.requestId,"X-Client-Request-ID":this.uuid_}}),this.uploader_.init(),this.uploader_.bind("Init",this.plInit_,this),this.uploader_.bind("FilesAdded",this.plFilesAdded_,this),this.uploader_.bind("StateChanged",this.plStateChanged_,this),this.uploader_.bind("UploadProgress",this.plUploadProgress_,this),this.uploader_.bind("Error",this.plError_,this),this.uploader_.bind("FileUploaded",this.plFileUploaded_,this),this.uploader_.bind("UploadComplete",this.plUploadComplete_,this)}dispose(){this.inDocument_=!1,this.uploader_&&(this.uploader_.destroy(),this.uploader_=void 0),this.element_&&this.element_.remove()}setVisible(e){this.isVisible_=e,this.element_&&M(this.element_,e)}enableProgress_(e){M(this.buttonEl_,!e),M(this.progressEl_,e),M(this.progressNumEl_,e)}setProgress_(e,n,o){this.progressBarEl_.style.width=`${e}%`,this.progressNumEl_.textContent=`${n}/${o}`}showErrors_(){this.errors_.length&&this.isVisible_&&$t(`<ul><li>${this.errors_.join("<li>")}</ul>`,this.element_,{classNames:["c-bubble--xhr"]}),this.errors_.length=0}plInit_(){this.dispatchEvent(new Event("init"))}plFilesAdded_(e){clearTimeout(this.errorTm_),setTimeout(()=>{let n=this.getMaxFiles(),o=e.files.length-n;o>0&&e.splice(n,o),this.setProgress_(0,0,e.files.length),e.start()},300)}plStateChanged_(e){let n=e.state===plupload.STARTED;n&&this.dispatchEvent(new Event("started")),this.enableProgress_(n)}plUploadProgress_(e){this.setProgress_(e.total.percent,e.total.uploaded+e.total.failed,e.total.failed+e.total.queued+e.total.uploaded)}plError_(e,n){let o;if(n.code===plupload.FILE_SIZE_ERROR)o=it(NT,{SIZE:n.file&&n.file.size?` (${plupload.formatSize(n.file.size)})`:"",MAX_SIZE:zT});else if(n.code===plupload.IMAGE_FORMAT_ERROR||n.code===plupload.FILE_EXTENSION_ERROR)o=PT;else{let r=this.uuid_||n.status;o=it($T,{CODE:n.code+(r?`; ${r}`:"")})}let s=n.file?`<strong>${Bt(n.file.name)}</strong>: `:"";this.errors_.push(s+o),clearTimeout(this.errorTm_),this.errorTm_=setTimeout(this.showErrors_.bind(this),100)}plFileUploaded_(e,n,o){try{n.info=JSON.parse(o.response)}catch(s){n.info={},n.info.error=it(FT,{STATUS:this.uuid_||o.status}),n.status=plupload.FAILED}(n.info.error||n.info.notification)&&(n.status=plupload.FAILED)}plUploadComplete_(e,n){let o=[];for(let s=0,r;r=n[s];s++)r.status===plupload.FAILED?r.info&&this.errors_.push((r.name?`<strong>${Bt(r.name)}</strong>: `:"")+(r.info.error||r.info.notification)):o.push(r.info);o.length&&this.dispatchEvent(new CustomEvent("ready",{detail:o})),this.showErrors_(),e.splice()}}});var bi,pa=v(()=>{"use strict";bi=(i,t,e)=>Math.min(Math.max(i,t),e)});var Gh,gx,Jh=v(()=>{"use strict";Gh=class extends Error{};Gh.prototype.name="AssertionError";gx=(i,t)=>(i!=null,i)});var ad,vx=v(()=>{"use strict";Jh();ad=class extends EventTarget{constructor(e,n,o){super();this.token_=null;this.rows_=[];this.hiliteId_=-1;this.firstRowId_=0;this.inputToAnchorMap_=new WeakMap;this.maxMatches_=10;this.autoHilite_=!0;this.allowFreeSelect_=!1;this.wrap_=!1;this.triggerSuggestionsOnUpdate_=!1;this.matcher_=e,this.selectionHandler_=o,this.renderer_=n,n.addEventListener("hilite",this),n.addEventListener("select",this),n.addEventListener("dismiss",this)}getMatcher(){return this.matcher_,void 0}setMatcher(e){this.matcher_=e}getSelectionHandler(){return this.selectionHandler_,void 0}getRenderer(){return this.renderer_}setRenderer(e){this.renderer_=e}getToken(){return this.token_}getSuggestion(e){return this.rows_[e]}getAllSuggestions(){return this.rows_,void 0}getSuggestionCount(){return this.rows_.length}getHighlightedId(){return this.hiliteId_}handleEvent(e){let n=this.matcher_;if(e.target===this.renderer_)switch(e.type){case"hilite":this.hiliteId(e.detail.row);break;case"select":let o=!1;if(typeof e.detail.row=="number"){let s=e.detail.row,r=this.getIndexOfId(s),a=this.rows_[r];o=!!a&&n.isRowDisabled&&n.isRowDisabled(a),a&&!o&&this.hiliteId_!==s&&this.hiliteId(s)}o||this.selectHilited();break;case"dismiss":this.dismissOnDelay()}}setMaxMatches(e){this.maxMatches_=e}setAutoHilite(e){this.autoHilite_=e}setAllowFreeSelect(e){this.allowFreeSelect_=e}setWrap(e){this.wrap_=e}setTriggerSuggestionsOnUpdate(e){this.triggerSuggestionsOnUpdate_=e}setToken(e){this.token_!=e&&(this.token_=e,this.matcher_.requestMatchingRows(this.token_,this.maxMatches_,this.matchListener_.bind(this)),this.cancelDelayedDismiss())}getTarget(){return this.target_}setTarget(e){this.target_=e}isOpen(){return this.renderer_.isVisible()}getRowCount(){return this.getSuggestionCount()}hiliteNext(){let e=this.firstRowId_+this.rows_.length-1,n=this.hiliteId_;for(let o=0;o<this.rows_.length;o++){if(n>=this.firstRowId_&&n<e)n++;else if(n===-1)n=this.firstRowId_;else{if(this.allowFreeSelect_&&n===e)return this.hiliteId(-1),!1;if(this.wrap_&&n===e)n=this.firstRowId_;else return!1}if(this.hiliteId(n))return!0}return!1}hilitePrev(){let e=this.firstRowId_+this.rows_.length-1,n=this.hiliteId_;for(let o=0;o<this.rows_.length;o++){if(n>this.firstRowId_)n--;else{if(this.allowFreeSelect_&&n==this.firstRowId_)return this.hiliteId(-1),!1;if(this.wrap_&&(n==-1||n==this.firstRowId_))n=e;else return!1}if(this.hiliteId(n))return!0}return!1}hiliteId(e){let n=this.getIndexOfId(e),o=this.rows_[n];return!!o&&this.matcher_.isRowDisabled&&this.matcher_.isRowDisabled(o)?!1:(this.hiliteId_=e,this.renderer_.hiliteId(e),n!==-1)}hiliteIndex(e){return this.hiliteId(this.getIdOfIndex_(e))}selectHilited(){let e=this.getIndexOfId(this.hiliteId_);if(e!==-1){let n=this.rows_[e],o=this.selectionHandler_.selectRow(n);return this.triggerSuggestionsOnUpdate_?(this.token_=null,this.dismissOnDelay()):this.dismiss(),o||(this.dispatchEvent(new CustomEvent("update",{detail:{row:n,index:e}})),this.triggerSuggestionsOnUpdate_&&this.selectionHandler_.update(!0)),!0}return this.dismiss(),this.dispatchEvent(new CustomEvent("update",{detail:{row:null,index:null}})),!1}hasHighlight(){return this.isOpen()&&this.getIndexOfId(this.hiliteId_)!=-1}dismiss(){this.hiliteId_=-1,this.token_=null,this.firstRowId_+=this.rows_.length,this.rows_=[],clearTimeout(this.dismissTimer_),this.dismissTimer_=void 0,this.renderer_.dismiss(),this.dispatchEvent(new Event("suggestionsupdate")),this.dispatchEvent(new Event("dismiss"))}dismissOnDelay(){this.dismissTimer_||(this.dismissTimer_=setTimeout(()=>this.dismiss(),100))}immediatelyCancelDelayedDismiss_(){return this.dismissTimer_?(window.clearTimeout(this.dismissTimer_),this.dismissTimer_=void 0,!0):!1}cancelDelayedDismiss(){this.immediatelyCancelDelayedDismiss_()||window.setTimeout(this.immediatelyCancelDelayedDismiss_.bind(this),10)}dispose(){this.renderer_.dispose(),this.selectionHandler_.dispose()}matchListener_(e,n,o){this.token_===e&&this.renderRows(n,o)}renderRows(e,n){let o=typeof n=="object"&&n,r=(o?o.getPreserveHilited():n)?this.getIndexOfId(this.hiliteId_):-1;this.firstRowId_+=this.rows_.length,this.rows_=e;let a=[];for(let d=0;d<e.length;++d)a.push({id:this.getIdOfIndex_(d),data:e[d]});let l;this.target_&&(l=this.inputToAnchorMap_.get(this.target_)||this.target_),this.renderer_.setAnchorElement(l),this.renderer_.renderRows(a,this.token_||"",this.target_);let c=this.autoHilite_;o&&o.getAutoHilite()!==void 0&&(c=o.getAutoHilite()),this.hiliteId_=-1,(c||r>=0)&&a.length!==0&&this.token_&&(r>=0?this.hiliteId(this.getIdOfIndex_(r)):this.hiliteNext()),this.dispatchEvent(new Event("suggestionsupdate"))}getIndexOfId(e){let n=e-this.firstRowId_;return n<0||n>=this.rows_.length?-1:n}getIdOfIndex_(e){return this.firstRowId_+e}attachInputs(...e){this.selectionHandler_.attachInputs(...e)}detachInputs(...e){this.selectionHandler_.detachInputs(...e),e.forEach(o=>{this.inputToAnchorMap_.delete(o)})}attachInputWithAnchor(e,n){this.inputToAnchorMap_.set(e,n),this.attachInputs(e)}update(e){this.selectionHandler_.update(e)}}});var MP,ld,Ex=v(()=>{"use strict";pc();Re();Z();Jh();Vi();MP=300,ld=class extends EventTarget{constructor(e,n,o,s){super();this.element_=null;this.token_="";this.rows_=[];this.rowDivs_=[];this.hilitedRow_=-1;this.startRenderingRows_=-1;this.visible_=!1;this.className="ac-renderer";this.rowClassName="ac-row";this.activeClassName="ac-active";this.highlightedClassName="ac-highlighted";this.matchWordBoundary_=!0;this.highlightAllTokens_=!1;this.showScrollbarsIfTooLarge_=!1;this.borderWidth_=0;this.parent_=e||document.body,this.doc_=this.parent_.ownerDocument,this.reposition_=!e,this.customRenderer_=n||null,this.useStandardHighlighting_=s!=null?s:!0,this.rightAlign_=!!o,this.showScrollbarsIfTooLarge_=!1,this.handleClick_=this.handleClick_.bind(this),this.handleMouseDown_=this.handleMouseDown_.bind(this),this.handleMouseOver_=this.handleMouseOver_.bind(this)}getElement(){return this.element_}setWidthProvider(e,n,o){this.widthProvider_=e,n&&(this.borderWidth_=n),o&&(this.maxWidthProvider_=o)}setRightAlign(e){this.rightAlign_=e}getRightAlign(){return this.rightAlign_}setShowScrollbarsIfTooLarge(e){this.showScrollbarsIfTooLarge_=e}setUseStandardHighlighting(e){this.useStandardHighlighting_=e}setMatchWordBoundary(e){this.matchWordBoundary_=e}setHighlightAllTokens(e){this.highlightAllTokens_=e}setAnchorElement(e){this.anchorElement_=e}getAnchorElement(){return this.anchorElement_}renderRows(e,n,o){this.token_=n,this.rows_=e,this.hilitedRow_=-1,this.startRenderingRows_=Date.now(),this.target_=o,this.rowDivs_=[],this.redraw()}dismiss(){this.visible_&&(this.visible_=!1,this.toggleAriaMarkup_(!1),M(this.element_,!1))}show(){this.visible_||(this.visible_=!0,this.toggleAriaMarkup_(!0),M(this.element_,!0))}toggleAriaMarkup_(e){this.target_&&(this.target_.setAttribute("aria-haspopup",String(e)),this.element_.setAttribute("aria-expanded",String(e)),this.target_.setAttribute("aria-expanded",String(e)),e?this.target_.setAttribute("aria-owns",this.element_.id):(this.target_.removeAttribute("aria-owns"),this.target_.setAttribute("aria-activedescendant","")))}isVisible(){return this.visible_}hiliteRow(e){let n=e>=0&&e<this.rows_.length?this.rows_[e]:void 0,o=e>=0&&e<this.rowDivs_.length?this.rowDivs_[e]:void 0,s=new CustomEvent("rowhilite",{detail:{rowNode:o,row:n?n.data:null},cancelable:!0});this.dispatchEvent(s)&&(this.hiliteNone(),this.hilitedRow_=e,o&&(o.classList.add(this.activeClassName),this.target_&&this.target_.setAttribute("aria-activedescendant",o.id),this.element_.scrollIntoView({behavior:"smooth",block:"nearest"})))}hiliteNone(){this.hilitedRow_>=0&&gx(this.rowDivs_[this.hilitedRow_]).classList.remove(this.activeClassName)}hiliteId(e){if(e==-1)this.hiliteRow(-1);else for(let n=0;n<this.rows_.length;n++)if(this.rows_[n].id==e){this.hiliteRow(n);return}}setMenuClasses_(e){e.classList.add(...this.className.split(" "))}maybeCreateElement_(){if(!this.element_){let e=this.doc_.createElement("div");e.style.display="none",this.showScrollbarsIfTooLarge_&&(e.style.overflowY="auto"),this.element_=e,this.setMenuClasses_(e),e.setAttribute("role","listbox"),e.id=de(),this.parent_.appendChild(e),e.addEventListener("click",this.handleClick_),e.addEventListener("mousedown",this.handleMouseDown_),e.addEventListener("mouseover",this.handleMouseOver_)}}redraw(){if(this.maybeCreateElement_(),this.widthProvider_&&(this.element_.style.minWidth=`${this.widthProvider_.clientWidth-this.borderWidth_}px`),this.maxWidthProvider_&&(this.element_.style.maxWidth=`${this.maxWidthProvider_.clientWidth-this.borderWidth_}px`),this.target_&&this.reposition_){let e=this.anchorElement_||this.target_;e&&uo(e,this.element_,{placement:this.rightAlign_?"bottom-end":"bottom-start",modifiers:[{name:"flip",enabled:!1}]})}if(this.rowDivs_.length=0,this.element_.innerHTML="",this.customRenderer_&&this.customRenderer_.render?this.customRenderer_.render(this,this.element_,this.rows_,this.token_):this.rows_.forEach(e=>{this.element_.appendChild(this.renderRowHtml(e,this.token_))}),this.rows_.length===0){this.dismiss();return}this.show()}setAutoPosition(e){this.reposition_=e}getAutoPosition(){return this.reposition_}getTarget(){return this.target_||null}dispose(){this.element_&&(this.element_.removeEventListener("click",this.handleClick_),this.element_.removeEventListener("mousedown",this.handleMouseDown_),this.element_.removeEventListener("mouseover",this.handleMouseOver_),this.element_.remove(),this.element_=null,this.visible_=!1)}renderRowContents_(e,n,o){o.textContent=e.data.toString()}startHiliteMatchingText_(e,n){this.wasHighlightedAtLeastOnce_=!1,this.hiliteMatchingText_(e,n)}hiliteMatchingText_(e,n){if(!(!this.highlightAllTokens_&&this.wasHighlightedAtLeastOnce_))if(e.nodeType===3){let o=null;Array.isArray(n)&&n.length>1&&!this.highlightAllTokens_&&(o=n.slice(1));let s=this.getTokenRegExp_(n);if(s.length===0)return;let r=e.nodeValue,a=this.matchWordBoundary_?new RegExp(`\\b(?:${s})`,"gi"):new RegExp(s,"gi"),l=[],c=0,d=a.exec(r),p=0;for(;d;)p++,l.push(r.substring(c,d.index)),l.push(r.substring(d.index,a.lastIndex)),c=a.lastIndex,d=a.exec(r);if(l.push(r.substring(c)),l.length>1){let u=this.highlightAllTokens_?p:1;for(let h=0;h<u;h++){let g=2*h;e.nodeValue=l[g];let f=this.doc_.createElement("b");f.className=this.highlightedClassName,f.appendChild(this.doc_.createTextNode(l[g+1])),f=e.parentNode.insertBefore(f,e.nextSibling),e.parentNode.insertBefore(this.doc_.createTextNode(""),f.nextSibling),e=f.nextSibling}let m=l.slice(u*2);e.nodeValue=m.join(""),this.wasHighlightedAtLeastOnce_=!0}else o&&this.hiliteMatchingText_(e,o)}else{let o=e.firstChild;for(;o;){let s=o.nextSibling;this.hiliteMatchingText_(o,n),o=s}}}getTokenRegExp_(e){let n="";return e&&(Array.isArray(e)&&(e=e.filter(o=>Boolean((o||"").trim()))),this.highlightAllTokens_?Array.isArray(e)?n=e.map(sa).join("|"):(n=UT(e),n=sa(n),n=n.replace(/ /g,"|")):Array.isArray(e)?n=e.length>0?sa(e[0]):"":/^\W/.test(e)||(n=sa(e))),n}renderRowHtml(e,n){let o=this.doc_.createElement("div");return o.className=this.rowClassName,o.id=de(),o.setAttribute("role","option"),this.customRenderer_&&this.customRenderer_.renderRow?this.customRenderer_.renderRow(e,n,o):this.renderRowContents_(e,n,o),n&&this.useStandardHighlighting_&&this.startHiliteMatchingText_(o,n),o.classList.add(this.rowClassName),this.rowDivs_.push(o),o}getRowFromEventTarget_(e){for(;e&&e!==this.element_&&!e.classList.contains(this.rowClassName);)e=e.parentNode;return e?this.rowDivs_.indexOf(e):-1}handleClick_(e){let n=this.getRowFromEventTarget_(e.target);n>=0&&this.dispatchEvent(new CustomEvent("select",{detail:{row:this.rows_[n].id}})),e.stopPropagation()}handleMouseDown_(e){e.stopPropagation(),e.preventDefault()}handleMouseOver_(e){let n=this.getRowFromEventTarget_(e.target);if(n>=0){if(Date.now()-this.startRenderingRows_<MP)return;this.dispatchEvent(new CustomEvent("hilite",{detail:{row:this.rows_[n].id}}))}}}});var fa,bx=v(()=>{"use strict";fa=class extends EventTarget{constructor(e=1){super();this.interval_=e;this.tick_=this.tick_.bind(this),this.last_=Date.now(),this.enabled=!1}getInterval(){return this.interval_}setInterval(e){this.interval_=e,this.timer_&&this.enabled?(this.stop(),this.start()):this.timer_&&this.stop()}tick_(){if(this.enabled){let e=Date.now()-this.last_;if(e>0&&e<this.interval_*.8){this.timer_=setTimeout(this.tick_,this.interval_-e);return}this.timer_&&(clearTimeout(this.timer_),this.timer_=void 0),this.dispatchTick(),this.enabled&&(this.stop(),this.start())}}dispatchTick(){this.dispatchEvent(new Event("tick"))}start(){this.enabled=!0,this.timer_||(this.timer_=setTimeout(this.tick_,this.interval_),this.last_=Date.now())}stop(){this.enabled=!1,this.timer_&&(clearTimeout(this.timer_),this.timer_=void 0)}dispose(){this.stop()}}});var RP,cd,_x=v(()=>{"use strict";bx();RP=",;",cd=class{constructor(t=RP,e="",n=!0,o=150){this.preventSelectionOnTab_=!1;this.lastKeyCode_=-1;this.whitespaceWrapEntries_=!0;this.generateNewTokenOnLiteral_=!0;this.upsideDown_=!1;this.separatorUpdates_=!0;this.separatorSelects_=!0;this.lastValue_="";this.waitingForIme_=!1;this.rowJustSelected_=!1;this.updateDuringTyping_=!0;this.attachedInputs_=[];this.multi_=n,this.setSeparators(t),this.literals_=e,this.preventDefaultOnTab_=n,this.timer_=o>0?new fa(o):void 0,this.handleFocus=this.handleFocus.bind(this),this.handleBlur=this.handleBlur.bind(this),this.onKey_=this.onKey_.bind(this),this.onKeyUp_=this.onKeyUp_.bind(this),this.onKeyPress_=this.onKeyPress_.bind(this),this.onTick_=this.onTick_.bind(this),this.onKeyDownOnInactiveElement_=this.onKeyDownOnInactiveElement_.bind(this)}attachAutoComplete(t){this.ac_=t}getAutoComplete(){return this.ac_}getActiveElement(){return this.activeElement_}getValue(){return this.activeElement_.value}setValue(t){this.activeElement_.value=t}getCursorPosition(){return this.activeElement_.selectionStart}setCursorPosition(t){this.activeElement_.selectionStart=t,this.activeElement_.selectionEnd=t}attachInput(t){if(this.attachedInputs_.push(t),t&&t.nodeType===1){let e=t;e.setAttribute("role","combobox"),e.setAttribute("aria-autocomplete","list")}t.addEventListener("focus",this.handleFocus),t.addEventListener("blur",this.handleBlur),this.activeElement_||(t.addEventListener("keydown",this.onKeyDownOnInactiveElement_),t&&t.nodeType===1&&t.ownerDocument.activeElement===t&&this.processFocus(t))}detachInput(t){let e=this.attachedInputs_.indexOf(t);e!==-1&&this.attachedInputs_.splice(e,1),this.attachedInputs_.push(t),t&&t.nodeType===1&&(t.removeAttribute("role"),t.removeAttribute("aria-autocomplete")),t==this.activeElement_&&this.handleBlur(),t.removeEventListener("focus",this.handleFocus),t.removeEventListener("blur",this.handleBlur),this.activeElement_||t.removeEventListener("keydown",this.onKeyDownOnInactiveElement_)}attachInputs(...t){t.forEach(e=>this.attachInput(e))}detachInputs(...t){t.forEach(e=>this.detachInput(e))}selectRow(t,e){return this.activeElement_&&this.setTokenText(t.toString(),e),!1}setTokenText(t,e){if(e!==void 0?e:this.multi_){let n=this.getTokenIndex_(this.getValue(),this.getCursorPosition()),o=this.splitInput_(this.getValue()),s=t;if(this.separatorCheck_&&!this.separatorCheck_.test(s)&&(s=s.trimRight()+this.defaultSeparator_),this.whitespaceWrapEntries_&&(n!==0&&o[n-1].trim()!==""&&(s=" "+s),n===o.length-1&&(s+=" ")),s!==o[n]){o[n]=s;let r=this.activeElement_;r.value=o.join("");let a=0;for(let l=0;l<=n;l++)a+=o[l].length;r.focus(),this.setCursorPosition(a)}}else this.setValue(t);this.rowJustSelected_=!0}dispose(){this.activeTimeoutId_!=null&&clearTimeout(this.activeTimeoutId_),this.attachedInputs_.forEach(t=>{t.removeEventListener("focus",this.handleFocus),t.removeEventListener("blur",this.handleBlur),t.removeEventListener("keydown",this.onKeyDownOnInactiveElement_)}),this.removeEventHandlers_(),this.timer_&&this.timer_.dispose()}setSeparators(t,e){this.separators_=t,this.defaultSeparator_=e!=null?e:this.separators_.substring(0,1);let n=this.multi_?`[\\s${this.separators_}]+`:"[\\s]+";this.trimmer_=new RegExp(`^${n}|${n}$`,"g"),this.separatorCheck_=new RegExp(`\\s*[${this.separators_}]$`)}setUpsideDown(t){this.upsideDown_=t}setWhitespaceWrapEntries(t){this.whitespaceWrapEntries_=t}setGenerateNewTokenOnLiteral(t){this.generateNewTokenOnLiteral_=t}setTrimmingRegExp(t){this.trimmer_=t}setEndsWithSeparatorRegExp(t){this.separatorCheck_=t}setPreventDefaultOnTab(t){this.preventDefaultOnTab_=t}setPreventSelectionOnTab(t){this.preventSelectionOnTab_=t}setSeparatorCompletes(t){this.separatorUpdates_=t,this.separatorSelects_=t}setSeparatorSelects(t){this.separatorSelects_=t}getThrottleTime(){return this.timer_?this.timer_.getInterval():-1}setRowJustSelected(t){this.rowJustSelected_=t}setThrottleTime(t){if(t<0){this.timer_.dispose(),this.timer_=void 0;return}this.timer_?this.timer_.setInterval(t):this.timer_=new fa(t)}getUpdateDuringTyping(){return this.updateDuringTyping_}setUpdateDuringTyping(t){this.updateDuringTyping_=t}handleKeyEvent(t){switch(t.keyCode){case 40:if(this.ac_.isOpen())return this.moveDown_(),t.preventDefault(),!0;if(!this.multi_)return this.update(!0),t.preventDefault(),!0;break;case 38:if(this.ac_.isOpen())return this.moveUp_(),t.preventDefault(),!0;break;case 9:if(this.ac_.isOpen()&&!t.shiftKey&&!this.preventSelectionOnTab_){if(this.update(),this.ac_.selectHilited()&&this.preventDefaultOnTab_)return t.preventDefault(),!0}else this.ac_.dismiss();break;case 13:if(this.ac_.isOpen()){if(this.update(),this.ac_.selectHilited())return t.preventDefault(),t.stopPropagation(),!0}else this.ac_.dismiss();break;case 27:if(this.ac_.isOpen())return this.ac_.dismiss(),t.preventDefault(),t.stopPropagation(),!0;break;case 229:if(!this.waitingForIme_)return this.startWaitingForIme_(),!0;break;default:this.timer_&&!this.updateDuringTyping_&&(this.timer_.stop(),this.timer_.start())}return this.handleSeparator_(t)}handleSeparator_(t){let e=this.multi_&&t.charCode&&this.separators_.includes(String.fromCharCode(t.charCode));return this.separatorUpdates_&&e&&this.update(),this.separatorSelects_&&e&&this.ac_.selectHilited()?(t.preventDefault(),!0):!1}addEventHandlers_(){this.activeElement_.addEventListener("keydown",this.onKey_)}removeEventHandlers_(){this.activeElement_&&this.activeElement_.removeEventListener("keydown",this.onKey_),this.waitingForIme_&&this.stopWaitingForIme_()}handleFocus(t){this.processFocus(t.target)}processFocus(t){this.activeElement_||t.removeEventListener("keydown",this.onKeyDownOnInactiveElement_),this.ac_&&this.ac_.cancelDelayedDismiss(),t!=this.activeElement_&&(this.activeElement_=t,this.timer_&&(this.timer_.start(),this.timer_.addEventListener("tick",this.onTick_)),this.lastValue_=this.getValue(),this.addEventHandlers_())}handleBlur(){this.processBlur()}processBlur(){this.activeElement_&&(this.removeEventHandlers_(),this.activeElement_=void 0,this.timer_&&(this.timer_.stop(),this.timer_.removeEventListener("tick",this.onTick_)),this.ac_&&this.ac_.dismissOnDelay())}onTick_(){this.update()}onKeyDownOnInactiveElement_(t){this.handleFocus(t)}onKey_(t){this.lastKeyCode_=t.keyCode,this.ac_&&this.handleKeyEvent(t)}onKeyPress_(){this.waitingForIme_&&this.lastKeyCode_!=229&&this.stopWaitingForIme_()}onKeyUp_(t){this.waitingForIme_&&(t.keyCode==13||t.keyCode==77&&t.ctrlKey)&&this.stopWaitingForIme_()}startWaitingForIme_(){this.waitingForIme_||(this.activeElement_.addEventListener("keyup",this.onKeyUp_),this.activeElement_.addEventListener("keypress",this.onKeyPress_),this.waitingForIme_=!0)}stopWaitingForIme_(){this.waitingForIme_&&(this.waitingForIme_=!1,this.activeElement_.removeEventListener("keyup",this.onKeyUp_),this.activeElement_.removeEventListener("keypress",this.onKeyPress_))}update(t){if(this.activeElement_&&(t||this.getValue()!=this.lastValue_)){if(t||!this.rowJustSelected_){let e=this.parseToken();this.ac_&&(this.ac_.setTarget(this.activeElement_),this.ac_.setToken(e))}this.lastValue_=this.getValue()}this.rowJustSelected_=!1}parseToken(){return this.parseToken_()}moveUp_(){return this.upsideDown_?this.ac_.hiliteNext():this.ac_.hilitePrev()}moveDown_(){return this.upsideDown_?this.ac_.hilitePrev():this.ac_.hiliteNext()}parseToken_(){let t=this.getCursorPosition(),e=this.getValue();return this.trim_(this.splitInput_(e)[this.getTokenIndex_(e,t)])}trim_(t){return this.trimmer_?String(t).replace(this.trimmer_,""):t}getTokenIndex_(t,e){let n=this.splitInput_(t);if(e==t.length)return n.length-1;let o=0;for(let s=0,r=0;s<n.length&&r<=e;s++)r+=n[s].length,o=s;return o}splitInput_(t){if(!this.multi_)return[t];let e=String(t).split(""),n=[],o=[];for(let s=0,r=!1;s<e.length;s++)this.literals_&&this.literals_.includes(e[s])?(this.generateNewTokenOnLiteral_&&!r&&(n.push(o.join("")),o.length=0),o.push(e[s]),r=!r):!r&&this.separators_.includes(e[s])?(o.push(e[s]),n.push(o.join("")),o.length=0):o.push(e[s]);return n.push(o.join("")),n}}});var dd,yx=v(()=>{"use strict";_x();dd=class extends cd{selectRow(t){let e=super.selectRow.call(this,t);return t.select(this.ac_.getTarget()),e}}});var Rs,Tx=v(()=>{"use strict";Rs=class{constructor(t,e){this.xhr_=new XMLHttpRequest;this.method_="GET";this.eventAttached_=!1;this.url_=t,this.useSimilar_=!e}setMethod(t){this.method_=t}setContent(t){this.content_=t}setHeaders(t){this.headers_=t}getXhr(){return this.xhr_}static buildUrl(t,e,n,o){let s=new URL(t,window.location.href),{searchParams:r}=s;return r.append("token",e),r.append("max_matches",String(n)),r.append("use_similar",String(Number(o))),s.href}parseResponseText(t){let e=[];if(t)try{e=JSON.parse(t)}catch(n){}return e}xhrCallback(t,e){let n=this.xhr_.responseText;e(t,this.parseResponseText(n))}requestMatchingRows(t,e,n){let o=Rs.buildUrl(this.url_,t,e,this.useSimilar_);if(!o)return;let s=()=>this.xhrCallback(t,n);this.xhr_.abort(),this.eventAttached_&&this.xhr_.removeEventListener("load",s),this.eventAttached_=!0,this.xhr_.open(this.method_,o,!0),this.xhr_.addEventListener("load",s,{once:!0}),Object.entries(this.headers_||{}).forEach(([r,a])=>this.xhr_.setRequestHeader(r,a)),this.xhr_.send(this.content_)}}});var md,xx=v(()=>{"use strict";Tx();md=class extends Rs{setRowFilter(e){this.rowFilter_=e}setRowBuilder(e){this.rowBuilder_=e}requestMatchingRows(e,n,o){let s=(r,a)=>{try{let l=[];for(let c=0;c<a.length;c++)for(let d=1;d<a[c].length;d++){let p=this.rowBuilder_(a[c][0],a[c][d]);l.push(p),typeof p.render=="undefined"&&(p.render=u=>{u.textContent=p.toString()}),typeof p.select=="undefined"&&(p.select=u=>{u.value=p.toString()})}this.rowFilter_&&(l=this.rowFilter_(l)),o(r,l)}catch(l){o(r,[])}};super.requestMatchingRows(e,n,s)}}});var Fe,Ro=v(()=>{"use strict";vx();Ex();yx();xx();Fe=class extends ad{constructor(t,e,n,o,s){let r={renderRow:(d,p,u)=>d.data.render(u,p)},a=new ld(s,r),l=new md(t,!o),c=new dd(void 0,void 0,!!n,300);s&&d2Env.isApp&&(c.processBlur=()=>{}),super(l,a,c),c.attachAutoComplete(this),c.attachInputs(e)}getXhr(){return this.matcher_.getXhr()}setRowFilter(t){this.matcher_.setRowFilter(t)}setRowBuilder(t){this.matcher_.setRowBuilder(t)}setUseStandardHighlighting(t){this.renderer_.setUseStandardHighlighting(t)}getInputHandler(){return this.selectionHandler_}setMethodn(t){this.matcher_.setMethod(t)}setContent(t){this.matcher_.setContent(t)}setHeaders(t){this.matcher_.setHeaders(t)}}});var Is,pd=v(()=>{"use strict";V();Is=(i,t)=>wt(N({},t),{render(e){let n=P("span",t.kind==="country"?"ac-imp":void 0,t.caption);if(e.appendChild(n),t.extra){let o=P("span","ac-desc",t.extra);e.appendChild(o)}},select(e){e.value=t.caption}})});function si(i,t,e){let n=document.createElement(t);return i&&(n.className=i),e&&e.appendChild(n),n}function ie(i,t){return i.x=t.x,i.y=t.y,t.id!==void 0&&(i.id=t.id),i}function Ew(i){i.x=Math.round(i.x),i.y=Math.round(i.y)}function Qh(i,t){let e=Math.abs(i.x-t.x),n=Math.abs(i.y-t.y);return Math.sqrt(e*e+n*n)}function Ma(i,t){return i.x===t.x&&i.y===t.y}function Ia(i,t,e){return Math.min(Math.max(i,t),e)}function Ra(i,t,e){let n=`translate3d(${i}px,${t||0}px,0)`;return e!==void 0&&(n+=` scale3d(${e},${e},1)`),n}function Do(i,t,e,n){i.style.transform=Ra(t,e,n)}function bw(i,t,e,n){i.style.transition=t?`${t} ${e}ms ${n||t1}`:"none"}function tu(i,t,e){i.style.width=typeof t=="number"?`${t}px`:t,i.style.height=typeof e=="number"?`${e}px`:e}function e1(i){bw(i)}function i1(i){return"decode"in i?i.decode().catch(()=>{}):i.complete?Promise.resolve(i):new Promise((t,e)=>{i.onload=()=>t(i),i.onerror=e})}function n1(i){return"button"in i&&i.button===1||i.ctrlKey||i.metaKey||i.altKey||i.shiftKey}function o1(i,t,e=document){let n=[];if(i instanceof Element)n=[i];else if(i instanceof NodeList||Array.isArray(i))n=Array.from(i);else{let o=typeof i=="string"?i:t;o&&(n=Array.from(e.querySelectorAll(o)))}return n}function mw(){return!!(navigator.vendor&&navigator.vendor.match(/apple/i))}function yw(i,t){if(i.getViewportSizeFn){let e=i.getViewportSizeFn(i,t);if(e)return e}return{x:document.documentElement.clientWidth,y:window.innerHeight}}function Sa(i,t,e,n,o){let s=0;if(t.paddingFn)s=t.paddingFn(e,n,o)[i];else if(t.padding)s=t.padding[i];else{let r="padding"+i[0].toUpperCase()+i.slice(1);t[r]&&(s=t[r])}return Number(s)||0}function Tw(i,t,e,n){return{x:t.x-Sa("left",i,t,e,n)-Sa("right",i,t,e,n),y:t.y-Sa("top",i,t,e,n)-Sa("bottom",i,t,e,n)}}function a1(i,t){return i*t/(1-t)}function fw(i,t,e){return i.x=(t.x+e.x)/2,i.y=(t.y+e.y)/2,i}function gw(i){return!!i.target.closest(".pswp__container")}function E1(i){if(typeof i=="string")return i;if(!i||!i.isCustomSVG)return"";let t=i,e='<svg aria-hidden="true" class="pswp__icn" viewBox="0 0 %d %d" width="%d" height="%d">';return e=e.split("%d").join(t.size||32),t.outlineID&&(e+='<use class="pswp__icn-shadow" xlink:href="#'+t.outlineID+'"/>'),e+=t.inner,e+="</svg>",e}function xw(i,t,e){i.classList.add("pswp__button--arrow"),i.setAttribute("aria-controls","pswp__items"),t.on("change",()=>{t.options.loop||(e?i.disabled=!(t.currIndex<t.getNumItems()-1):i.disabled=!(t.currIndex>0))})}function vw(i,t){i.classList[t?"add":"remove"]("pswp--zoomed-in")}function L1(i){let t=i.getBoundingClientRect();return{x:t.left,y:t.top,w:t.width}}function A1(i,t,e){let n=i.getBoundingClientRect(),o=n.width/t,s=n.height/e,r=o>s?o:s,a=(n.width-t*r)/2,l=(n.height-e*r)/2,c={x:n.left+a,y:n.top+l,w:t*r};return c.innerRect={w:n.width,h:n.height,x:a,y:l},c}function C1(i,t,e){let n=e.dispatch("thumbBounds",{index:i,itemData:t,instance:e});if(n.thumbBounds)return n.thumbBounds;let{element:o}=t,s,r;if(o&&e.options.thumbSelector!==!1){let a=e.options.thumbSelector||"img";r=o.matches(a)?o:o.querySelector(a)}return r=e.applyFilters("thumbEl",r,t,i),r&&(t.thumbCropped?s=A1(r,t.width||t.w||0,t.height||t.h||0):s=L1(r)),e.applyFilters("thumbBounds",s,t,i)}function ww(i,t,e){let n=t.createContentFromData(i,e),o,{options:s}=t;if(s&&(o=new Ed(s,i,-1),t.pswp)){let r=t.pswp.viewportSize||yw(s,t.pswp),a=Tw(s,r,i,e);o.update(n.width,n.height,a)}return n.lazyLoad(),o&&n.setDisplayedSize(Math.ceil(n.width*o.initial),Math.ceil(n.height*o.initial)),n}function M1(i,t){let e=t.getItemData(i);if(!t.dispatch("lazyLoadSlide",{index:i,itemData:e}).defaultPrevented)return ww(e,t,i)}var t1,_i,_w,eu,iu,pw,Ed,nu,s1,r1,hw,uw,ou,l1,c1,su,ru,d1,m1,p1,au,h1,lu,u1,Oo,cu,f1,du,g1,v1,mu,pu,hu,uu,fu,b1,_1,y1,T1,x1,w1,gu,vu,Eu,bu,_u,S1,yu,Tu,Ca,xu,R1,bd,Lw=v(()=>{t1="cubic-bezier(.4,0,.22,1)";_i={IDLE:"idle",LOADING:"loading",LOADED:"loaded",ERROR:"error"};_w=!1;try{window.addEventListener("test",null,Object.defineProperty({},"passive",{get:()=>{_w=!0}}))}catch(i){}eu=class{constructor(){this._pool=[]}add(t,e,n,o){this._toggleListener(t,e,n,o)}remove(t,e,n,o){this._toggleListener(t,e,n,o,!0)}removeAll(){this._pool.forEach(t=>{this._toggleListener(t.target,t.type,t.listener,t.passive,!0,!0)}),this._pool=[]}_toggleListener(t,e,n,o,s,r){if(!t)return;let a=s?"removeEventListener":"addEventListener";e.split(" ").forEach(c=>{if(c){r||(s?this._pool=this._pool.filter(p=>p.type!==c||p.listener!==n||p.target!==t):this._pool.push({target:t,type:c,listener:n,passive:o}));let d=_w?{passive:o||!1}:!1;t[a](c,n,d)}})}};iu=class{constructor(t){this.slide=t,this.currZoomLevel=1,this.center={x:0,y:0},this.max={x:0,y:0},this.min={x:0,y:0}}update(t){this.currZoomLevel=t,this.slide.width?(this._updateAxis("x"),this._updateAxis("y"),this.slide.pswp.dispatch("calcBounds",{slide:this.slide})):this.reset()}_updateAxis(t){let{pswp:e}=this.slide,n=this.slide[t==="x"?"width":"height"]*this.currZoomLevel,s=Sa(t==="x"?"left":"top",e.options,e.viewportSize,this.slide.data,this.slide.index),r=this.slide.panAreaSize[t];this.center[t]=Math.round((r-n)/2)+s,this.max[t]=n>r?Math.round(r-n)+s:this.center[t],this.min[t]=n>r?s:this.center[t]}reset(){this.center.x=0,this.center.y=0,this.max.x=0,this.max.y=0,this.min.x=0,this.min.y=0}correctPan(t,e){return Ia(e,this.max[t],this.min[t])}},pw=4e3,Ed=class{constructor(t,e,n,o){this.pswp=o,this.options=t,this.itemData=e,this.index=n,this.panAreaSize=null,this.elementSize=null,this.fit=1,this.fill=1,this.vFill=1,this.initial=1,this.secondary=1,this.max=1,this.min=1}update(t,e,n){let o={x:t,y:e};this.elementSize=o,this.panAreaSize=n;let s=n.x/o.x,r=n.y/o.y;this.fit=Math.min(1,s<r?s:r),this.fill=Math.min(1,s>r?s:r),this.vFill=Math.min(1,r),this.initial=this._getInitial(),this.secondary=this._getSecondary(),this.max=Math.max(this.initial,this.secondary,this._getMax()),this.min=Math.min(this.fit,this.initial,this.secondary),this.pswp&&this.pswp.dispatch("zoomLevelsUpdate",{zoomLevels:this,slideData:this.itemData})}_parseZoomLevelOption(t){let e=t+"ZoomLevel",n=this.options[e];if(n)return typeof n=="function"?n(this):n==="fill"?this.fill:n==="fit"?this.fit:Number(n)}_getSecondary(){let t=this._parseZoomLevelOption("secondary");return t||(t=Math.min(1,this.fit*3),this.elementSize&&t*this.elementSize.x>pw&&(t=pw/this.elementSize.x),t)}_getInitial(){return this._parseZoomLevelOption("initial")||this.fit}_getMax(){return this._parseZoomLevelOption("max")||Math.max(1,this.fit*4)}},nu=class{constructor(t,e,n){this.data=t,this.index=e,this.pswp=n,this.isActive=e===n.currIndex,this.currentResolution=0,this.panAreaSize={x:0,y:0},this.pan={x:0,y:0},this.isFirstSlide=this.isActive&&!n.opener.isOpen,this.zoomLevels=new Ed(n.options,t,e,n),this.pswp.dispatch("gettingData",{slide:this,data:this.data,index:e}),this.content=this.pswp.contentLoader.getContentBySlide(this),this.container=si("pswp__zoom-wrap","div"),this.holderElement=null,this.currZoomLevel=1,this.width=this.content.width,this.height=this.content.height,this.heavyAppended=!1,this.bounds=new iu(this),this.prevDisplayedWidth=-1,this.prevDisplayedHeight=-1,this.pswp.dispatch("slideInit",{slide:this})}setIsActive(t){t&&!this.isActive?this.activate():!t&&this.isActive&&this.deactivate()}append(t){this.holderElement=t,this.container.style.transformOrigin="0 0",this.data&&(this.calculateSize(),this.load(),this.updateContentSize(),this.appendHeavy(),this.holderElement.appendChild(this.container),this.zoomAndPanToInitial(),this.pswp.dispatch("firstZoomPan",{slide:this}),this.applyCurrentZoomPan(),this.pswp.dispatch("afterSetContent",{slide:this}),this.isActive&&this.activate())}load(){this.content.load(!1),this.pswp.dispatch("slideLoad",{slide:this})}appendHeavy(){let{pswp:t}=this,e=!0;this.heavyAppended||!t.opener.isOpen||t.mainScroll.isShifted()||!this.isActive&&!e||this.pswp.dispatch("appendHeavy",{slide:this}).defaultPrevented||(this.heavyAppended=!0,this.content.append(),this.pswp.dispatch("appendHeavyContent",{slide:this}))}activate(){this.isActive=!0,this.appendHeavy(),this.content.activate(),this.pswp.dispatch("slideActivate",{slide:this})}deactivate(){this.isActive=!1,this.content.deactivate(),this.currZoomLevel!==this.zoomLevels.initial&&this.calculateSize(),this.currentResolution=0,this.zoomAndPanToInitial(),this.applyCurrentZoomPan(),this.updateContentSize(),this.pswp.dispatch("slideDeactivate",{slide:this})}destroy(){this.content.hasSlide=!1,this.content.remove(),this.container.remove(),this.pswp.dispatch("slideDestroy",{slide:this})}resize(){this.currZoomLevel===this.zoomLevels.initial||!this.isActive?(this.calculateSize(),this.currentResolution=0,this.zoomAndPanToInitial(),this.applyCurrentZoomPan(),this.updateContentSize()):(this.calculateSize(),this.bounds.update(this.currZoomLevel),this.panTo(this.pan.x,this.pan.y))}updateContentSize(t){let e=this.currentResolution||this.zoomLevels.initial;if(!e)return;let n=Math.round(this.width*e)||this.pswp.viewportSize.x,o=Math.round(this.height*e)||this.pswp.viewportSize.y;!this.sizeChanged(n,o)&&!t||this.content.setDisplayedSize(n,o)}sizeChanged(t,e){return t!==this.prevDisplayedWidth||e!==this.prevDisplayedHeight?(this.prevDisplayedWidth=t,this.prevDisplayedHeight=e,!0):!1}getPlaceholderElement(){var t;return(t=this.content.placeholder)==null?void 0:t.element}zoomTo(t,e,n,o){let{pswp:s}=this;if(!this.isZoomable()||s.mainScroll.isShifted())return;s.dispatch("beforeZoomTo",{destZoomLevel:t,centerPoint:e,transitionDuration:n}),s.animations.stopAllPan();let r=this.currZoomLevel;o||(t=Ia(t,this.zoomLevels.min,this.zoomLevels.max)),this.setZoomLevel(t),this.pan.x=this.calculateZoomToPanOffset("x",e,r),this.pan.y=this.calculateZoomToPanOffset("y",e,r),Ew(this.pan);let a=()=>{this._setResolution(t),this.applyCurrentZoomPan()};n?s.animations.startTransition({isPan:!0,name:"zoomTo",target:this.container,transform:this.getCurrentTransform(),onComplete:a,duration:n,easing:s.options.easing}):a()}toggleZoom(t){this.zoomTo(this.currZoomLevel===this.zoomLevels.initial?this.zoomLevels.secondary:this.zoomLevels.initial,t,this.pswp.options.zoomAnimationDuration)}setZoomLevel(t){this.currZoomLevel=t,this.bounds.update(this.currZoomLevel)}calculateZoomToPanOffset(t,e,n){if(this.bounds.max[t]-this.bounds.min[t]===0)return this.bounds.center[t];e||(e=this.pswp.getViewportCenterPoint()),n||(n=this.zoomLevels.initial);let s=this.currZoomLevel/n;return this.bounds.correctPan(t,(this.pan[t]-e[t])*s+e[t])}panTo(t,e){this.pan.x=this.bounds.correctPan("x",t),this.pan.y=this.bounds.correctPan("y",e),this.applyCurrentZoomPan()}isPannable(){return Boolean(this.width)&&this.currZoomLevel>this.zoomLevels.fit}isZoomable(){return Boolean(this.width)&&this.content.isZoomable()}applyCurrentZoomPan(){this._applyZoomTransform(this.pan.x,this.pan.y,this.currZoomLevel),this===this.pswp.currSlide&&this.pswp.dispatch("zoomPanUpdate",{slide:this})}zoomAndPanToInitial(){this.currZoomLevel=this.zoomLevels.initial,this.bounds.update(this.currZoomLevel),ie(this.pan,this.bounds.center),this.pswp.dispatch("initialZoomPan",{slide:this})}_applyZoomTransform(t,e,n){n/=this.currentResolution||this.zoomLevels.initial,Do(this.container,t,e,n)}calculateSize(){let{pswp:t}=this;ie(this.panAreaSize,Tw(t.options,t.viewportSize,this.data,this.index)),this.zoomLevels.update(this.width,this.height,this.panAreaSize),t.dispatch("calcSlideSize",{slide:this})}getCurrentTransform(){let t=this.currZoomLevel/(this.currentResolution||this.zoomLevels.initial);return Ra(this.pan.x,this.pan.y,t)}_setResolution(t){t!==this.currentResolution&&(this.currentResolution=t,this.updateContentSize(),this.pswp.dispatch("resolutionChanged"))}},s1=.35,r1=.6,hw=.4,uw=.5;ou=class{constructor(t){this.gestures=t,this.pswp=t.pswp,this.startPan={x:0,y:0}}start(){this.pswp.currSlide&&ie(this.startPan,this.pswp.currSlide.pan),this.pswp.animations.stopAll()}change(){let{p1:t,prevP1:e,dragAxis:n}=this.gestures,{currSlide:o}=this.pswp;if(n==="y"&&this.pswp.options.closeOnVerticalDrag&&o&&o.currZoomLevel<=o.zoomLevels.fit&&!this.gestures.isMultitouch){let s=o.pan.y+(t.y-e.y);if(!this.pswp.dispatch("verticalDrag",{panY:s}).defaultPrevented){this._setPanWithFriction("y",s,r1);let r=1-Math.abs(this._getVerticalDragRatio(o.pan.y));this.pswp.applyBgOpacity(r),o.applyCurrentZoomPan()}}else this._panOrMoveMainScroll("x")||(this._panOrMoveMainScroll("y"),o&&(Ew(o.pan),o.applyCurrentZoomPan()))}end(){let{velocity:t}=this.gestures,{mainScroll:e,currSlide:n}=this.pswp,o=0;if(this.pswp.animations.stopAll(),e.isShifted()){let r=(e.x-e.getCurrSlideX())/this.pswp.viewportSize.x;t.x<-uw&&r<0||t.x<.1&&r<-.5?(o=1,t.x=Math.min(t.x,0)):(t.x>uw&&r>0||t.x>-.1&&r>.5)&&(o=-1,t.x=Math.max(t.x,0)),e.moveIndexBy(o,!0,t.x)}n&&n.currZoomLevel>n.zoomLevels.max||this.gestures.isMultitouch?this.gestures.zoomLevels.correctZoomPan(!0):(this._finishPanGestureForAxis("x"),this._finishPanGestureForAxis("y"))}_finishPanGestureForAxis(t){let{velocity:e}=this.gestures,{currSlide:n}=this.pswp;if(!n)return;let{pan:o,bounds:s}=n,r=o[t],a=this.pswp.bgOpacity<1&&t==="y",l=.995,c=r+a1(e[t],l);if(a){let h=this._getVerticalDragRatio(r),g=this._getVerticalDragRatio(c);if(h<0&&g<-hw||h>0&&g>hw){this.pswp.close();return}}let d=s.correctPan(t,c);if(r===d)return;let p=d===c?1:.82,u=this.pswp.bgOpacity,m=d-r;this.pswp.animations.startSpring({name:"panGesture"+t,isPan:!0,start:r,end:d,velocity:e[t],dampingRatio:p,onUpdate:h=>{if(a&&this.pswp.bgOpacity<1){let g=1-(d-h)/m;this.pswp.applyBgOpacity(Ia(u+(1-u)*g,0,1))}o[t]=Math.floor(h),n.applyCurrentZoomPan()}})}_panOrMoveMainScroll(t){let{p1:e,dragAxis:n,prevP1:o,isMultitouch:s}=this.gestures,{currSlide:r,mainScroll:a}=this.pswp,l=e[t]-o[t],c=a.x+l;if(!l||!r)return!1;if(t==="x"&&!r.isPannable()&&!s)return a.moveTo(c,!0),!0;let{bounds:d}=r,p=r.pan[t]+l;if(this.pswp.options.allowPanToNext&&n==="x"&&t==="x"&&!s){let u=a.getCurrSlideX(),m=a.x-u,h=l>0,g=!h;if(p>d.min[t]&&h){if(d.min[t]<=this.startPan[t])return a.moveTo(c,!0),!0;this._setPanWithFriction(t,p)}else if(p<d.max[t]&&g){if(this.startPan[t]<=d.max[t])return a.moveTo(c,!0),!0;this._setPanWithFriction(t,p)}else if(m!==0){if(m>0)return a.moveTo(Math.max(c,u),!0),!0;if(m<0)return a.moveTo(Math.min(c,u),!0),!0}else this._setPanWithFriction(t,p)}else t==="y"?!a.isShifted()&&d.min.y!==d.max.y&&this._setPanWithFriction(t,p):this._setPanWithFriction(t,p);return!1}_getVerticalDragRatio(t){var e,n;return(t-((n=(e=this.pswp.currSlide)==null?void 0:e.bounds.center.y)!=null?n:0))/(this.pswp.viewportSize.y/3)}_setPanWithFriction(t,e,n){let{currSlide:o}=this.pswp;if(!o)return;let{pan:s,bounds:r}=o;if(r.correctPan(t,e)!==e||n){let l=Math.round(e-s[t]);s[t]+=l*(n||s1)}else s[t]=e}},l1=.05,c1=.15;su=class{constructor(t){this.gestures=t,this._startPan={x:0,y:0},this._startZoomPoint={x:0,y:0},this._zoomPoint={x:0,y:0},this._wasOverFitZoomLevel=!1,this._startZoomLevel=1}start(){let{currSlide:t}=this.gestures.pswp;t&&(this._startZoomLevel=t.currZoomLevel,ie(this._startPan,t.pan)),this.gestures.pswp.animations.stopAllPan(),this._wasOverFitZoomLevel=!1}change(){let{p1:t,startP1:e,p2:n,startP2:o,pswp:s}=this.gestures,{currSlide:r}=s;if(!r)return;let a=r.zoomLevels.min,l=r.zoomLevels.max;if(!r.isZoomable()||s.mainScroll.isShifted())return;fw(this._startZoomPoint,e,o),fw(this._zoomPoint,t,n);let c=1/Qh(e,o)*Qh(t,n)*this._startZoomLevel;if(c>r.zoomLevels.initial+r.zoomLevels.initial/15&&(this._wasOverFitZoomLevel=!0),c<a)if(s.options.pinchToClose&&!this._wasOverFitZoomLevel&&this._startZoomLevel<=r.zoomLevels.initial){let d=1-(a-c)/(a/1.2);s.dispatch("pinchClose",{bgOpacity:d}).defaultPrevented||s.applyBgOpacity(d)}else c=a-(a-c)*c1;else c>l&&(c=l+(c-l)*l1);r.pan.x=this._calculatePanForZoomLevel("x",c),r.pan.y=this._calculatePanForZoomLevel("y",c),r.setZoomLevel(c),r.applyCurrentZoomPan()}end(){let{pswp:t}=this.gestures,{currSlide:e}=t;(!e||e.currZoomLevel<e.zoomLevels.initial)&&!this._wasOverFitZoomLevel&&t.options.pinchToClose?t.close():this.correctZoomPan()}_calculatePanForZoomLevel(t,e){let n=e/this._startZoomLevel;return this._zoomPoint[t]-(this._startZoomPoint[t]-this._startPan[t])*n}correctZoomPan(t){let{pswp:e}=this.gestures,{currSlide:n}=e;if(!(n!=null&&n.isZoomable()))return;this._zoomPoint.x===0&&(t=!0);let o=n.currZoomLevel,s,r=!0;o<n.zoomLevels.initial?s=n.zoomLevels.initial:o>n.zoomLevels.max?s=n.zoomLevels.max:(r=!1,s=o);let a=e.bgOpacity,l=e.bgOpacity<1,c=ie({x:0,y:0},n.pan),d=ie({x:0,y:0},c);t&&(this._zoomPoint.x=0,this._zoomPoint.y=0,this._startZoomPoint.x=0,this._startZoomPoint.y=0,this._startZoomLevel=o,ie(this._startPan,c)),r&&(d={x:this._calculatePanForZoomLevel("x",s),y:this._calculatePanForZoomLevel("y",s)}),n.setZoomLevel(s),d={x:n.bounds.correctPan("x",d.x),y:n.bounds.correctPan("y",d.y)},n.setZoomLevel(o);let p=!Ma(d,c);if(!p&&!r&&!l){n._setResolution(s),n.applyCurrentZoomPan();return}e.animations.stopAllPan(),e.animations.startSpring({isPan:!0,start:0,end:1e3,velocity:0,dampingRatio:1,naturalFrequency:40,onUpdate:u=>{if(u/=1e3,p||r){if(p&&(n.pan.x=c.x+(d.x-c.x)*u,n.pan.y=c.y+(d.y-c.y)*u),r){let m=o+(s-o)*u;n.setZoomLevel(m)}n.applyCurrentZoomPan()}l&&e.bgOpacity<1&&e.applyBgOpacity(Ia(a+(1-a)*u,0,1))},onComplete:()=>{n._setResolution(s),n.applyCurrentZoomPan()}})}};ru=class{constructor(t){this.gestures=t}click(t,e){let n=e.target.classList,o=n.contains("pswp__img"),s=n.contains("pswp__item")||n.contains("pswp__zoom-wrap");o?this._doClickOrTapAction("imageClick",t,e):s&&this._doClickOrTapAction("bgClick",t,e)}tap(t,e){gw(e)&&this._doClickOrTapAction("tap",t,e)}doubleTap(t,e){gw(e)&&this._doClickOrTapAction("doubleTap",t,e)}_doClickOrTapAction(t,e,n){var l;let{pswp:o}=this.gestures,{currSlide:s}=o,r=t+"Action",a=o.options[r];if(!o.dispatch(r,{point:e,originalEvent:n}).defaultPrevented){if(typeof a=="function"){a.call(o,e,n);return}switch(a){case"close":case"next":o[a]();break;case"zoom":s==null||s.toggleZoom(e);break;case"zoom-or-close":s!=null&&s.isZoomable()&&s.zoomLevels.secondary!==s.zoomLevels.initial?s.toggleZoom(e):o.options.clickToCloseNonZoomable&&o.close();break;case"toggle-controls":(l=this.gestures.pswp.element)==null||l.classList.toggle("pswp--ui-visible");break}}}},d1=10,m1=300,p1=25,au=class{constructor(t){this.pswp=t,this.dragAxis=null,this.p1={x:0,y:0},this.p2={x:0,y:0},this.prevP1={x:0,y:0},this.prevP2={x:0,y:0},this.startP1={x:0,y:0},this.startP2={x:0,y:0},this.velocity={x:0,y:0},this._lastStartP1={x:0,y:0},this._intervalP1={x:0,y:0},this._numActivePoints=0,this._ongoingPointers=[],this._touchEventEnabled="ontouchstart"in window,this._pointerEventEnabled=!!window.PointerEvent,this.supportsTouch=this._touchEventEnabled||this._pointerEventEnabled&&navigator.maxTouchPoints>1,this._numActivePoints=0,this._intervalTime=0,this._velocityCalculated=!1,this.isMultitouch=!1,this.isDragging=!1,this.isZooming=!1,this.raf=null,this._tapTimer=null,this.supportsTouch||(t.options.allowPanToNext=!1),this.drag=new ou(this),this.zoomLevels=new su(this),this.tapHandler=new ru(this),t.on("bindEvents",()=>{t.events.add(t.scrollWrap,"click",this._onClick.bind(this)),this._pointerEventEnabled?this._bindEvents("pointer","down","up","cancel"):this._touchEventEnabled?(this._bindEvents("touch","start","end","cancel"),t.scrollWrap&&(t.scrollWrap.ontouchmove=()=>{},t.scrollWrap.ontouchend=()=>{})):this._bindEvents("mouse","down","up")})}_bindEvents(t,e,n,o){let{pswp:s}=this,{events:r}=s,a=o?t+o:"";r.add(s.scrollWrap,t+e,this.onPointerDown.bind(this)),r.add(window,t+"move",this.onPointerMove.bind(this)),r.add(window,t+n,this.onPointerUp.bind(this)),a&&r.add(s.scrollWrap,a,this.onPointerUp.bind(this))}onPointerDown(t){let e=t.type==="mousedown"||t.pointerType==="mouse";if(e&&t.button>0)return;let{pswp:n}=this;if(!n.opener.isOpen){t.preventDefault();return}n.dispatch("pointerDown",{originalEvent:t}).defaultPrevented||(e&&(n.mouseDetected(),this._preventPointerEventBehaviour(t)),n.animations.stopAll(),this._updatePoints(t,"down"),this._numActivePoints===1&&(this.dragAxis=null,ie(this.startP1,this.p1)),this._numActivePoints>1?(this._clearTapTimer(),this.isMultitouch=!0):this.isMultitouch=!1)}onPointerMove(t){t.preventDefault(),this._numActivePoints&&(this._updatePoints(t,"move"),!this.pswp.dispatch("pointerMove",{originalEvent:t}).defaultPrevented&&(this._numActivePoints===1&&!this.isDragging?(this.dragAxis||this._calculateDragDirection(),this.dragAxis&&!this.isDragging&&(this.isZooming&&(this.isZooming=!1,this.zoomLevels.end()),this.isDragging=!0,this._clearTapTimer(),this._updateStartPoints(),this._intervalTime=Date.now(),this._velocityCalculated=!1,ie(this._intervalP1,this.p1),this.velocity.x=0,this.velocity.y=0,this.drag.start(),this._rafStopLoop(),this._rafRenderLoop())):this._numActivePoints>1&&!this.isZooming&&(this._finishDrag(),this.isZooming=!0,this._updateStartPoints(),this.zoomLevels.start(),this._rafStopLoop(),this._rafRenderLoop())))}_finishDrag(){this.isDragging&&(this.isDragging=!1,this._velocityCalculated||this._updateVelocity(!0),this.drag.end(),this.dragAxis=null)}onPointerUp(t){this._numActivePoints&&(this._updatePoints(t,"up"),!this.pswp.dispatch("pointerUp",{originalEvent:t}).defaultPrevented&&(this._numActivePoints===0&&(this._rafStopLoop(),this.isDragging?this._finishDrag():!this.isZooming&&!this.isMultitouch&&this._finishTap(t)),this._numActivePoints<2&&this.isZooming&&(this.isZooming=!1,this.zoomLevels.end(),this._numActivePoints===1&&(this.dragAxis=null,this._updateStartPoints()))))}_rafRenderLoop(){(this.isDragging||this.isZooming)&&(this._updateVelocity(),this.isDragging?Ma(this.p1,this.prevP1)||this.drag.change():(!Ma(this.p1,this.prevP1)||!Ma(this.p2,this.prevP2))&&this.zoomLevels.change(),this._updatePrevPoints(),this.raf=requestAnimationFrame(this._rafRenderLoop.bind(this)))}_updateVelocity(t){let e=Date.now(),n=e-this._intervalTime;n<50&&!t||(this.velocity.x=this._getVelocity("x",n),this.velocity.y=this._getVelocity("y",n),this._intervalTime=e,ie(this._intervalP1,this.p1),this._velocityCalculated=!0)}_finishTap(t){let{mainScroll:e}=this.pswp;if(e.isShifted()){e.moveIndexBy(0,!0);return}if(t.type.indexOf("cancel")>0)return;if(t.type==="mouseup"||t.pointerType==="mouse"){this.tapHandler.click(this.startP1,t);return}let n=this.pswp.options.doubleTapAction?m1:0;this._tapTimer?(this._clearTapTimer(),Qh(this._lastStartP1,this.startP1)<p1&&this.tapHandler.doubleTap(this.startP1,t)):(ie(this._lastStartP1,this.startP1),this._tapTimer=setTimeout(()=>{this.tapHandler.tap(this.startP1,t),this._clearTapTimer()},n))}_clearTapTimer(){this._tapTimer&&(clearTimeout(this._tapTimer),this._tapTimer=null)}_getVelocity(t,e){let n=this.p1[t]-this._intervalP1[t];return Math.abs(n)>1&&e>5?n/e:0}_rafStopLoop(){this.raf&&(cancelAnimationFrame(this.raf),this.raf=null)}_preventPointerEventBehaviour(t){t.preventDefault()}_updatePoints(t,e){if(this._pointerEventEnabled){let n=t,o=this._ongoingPointers.findIndex(s=>s.id===n.pointerId);e==="up"&&o>-1?this._ongoingPointers.splice(o,1):e==="down"&&o===-1?this._ongoingPointers.push(this._convertEventPosToPoint(n,{x:0,y:0})):o>-1&&this._convertEventPosToPoint(n,this._ongoingPointers[o]),this._numActivePoints=this._ongoingPointers.length,this._numActivePoints>0&&ie(this.p1,this._ongoingPointers[0]),this._numActivePoints>1&&ie(this.p2,this._ongoingPointers[1])}else{let n=t;this._numActivePoints=0,n.type.indexOf("touch")>-1?n.touches&&n.touches.length>0&&(this._convertEventPosToPoint(n.touches[0],this.p1),this._numActivePoints++,n.touches.length>1&&(this._convertEventPosToPoint(n.touches[1],this.p2),this._numActivePoints++)):(this._convertEventPosToPoint(t,this.p1),e==="up"?this._numActivePoints=0:this._numActivePoints++)}}_updatePrevPoints(){ie(this.prevP1,this.p1),ie(this.prevP2,this.p2)}_updateStartPoints(){ie(this.startP1,this.p1),ie(this.startP2,this.p2),this._updatePrevPoints()}_calculateDragDirection(){if(this.pswp.mainScroll.isShifted())this.dragAxis="x";else{let t=Math.abs(this.p1.x-this.startP1.x)-Math.abs(this.p1.y-this.startP1.y);if(t!==0){let e=t>0?"x":"y";Math.abs(this.p1[e]-this.startP1[e])>=d1&&(this.dragAxis=e)}}}_convertEventPosToPoint(t,e){return e.x=t.pageX-this.pswp.offset.x,e.y=t.pageY-this.pswp.offset.y,"pointerId"in t?e.id=t.pointerId:t.identifier!==void 0&&(e.id=t.identifier),e}_onClick(t){this.pswp.mainScroll.isShifted()&&(t.preventDefault(),t.stopPropagation())}},h1=.35,lu=class{constructor(t){this.pswp=t,this.x=0,this.slideWidth=0,this._currPositionIndex=0,this._prevPositionIndex=0,this._containerShiftIndex=-1,this.itemHolders=[]}resize(t){let{pswp:e}=this,n=Math.round(e.viewportSize.x+e.viewportSize.x*e.options.spacing),o=n!==this.slideWidth;o&&(this.slideWidth=n,this.moveTo(this.getCurrSlideX())),this.itemHolders.forEach((s,r)=>{o&&Do(s.el,(r+this._containerShiftIndex)*this.slideWidth),t&&s.slide&&s.slide.resize()})}resetPosition(){this._currPositionIndex=0,this._prevPositionIndex=0,this.slideWidth=0,this._containerShiftIndex=-1}appendHolders(){this.itemHolders=[];for(let t=0;t<3;t++){let e=si("pswp__item","div",this.pswp.container);e.setAttribute("role","group"),e.setAttribute("aria-roledescription","slide"),e.setAttribute("aria-hidden","true"),e.style.display=t===1?"block":"none",this.itemHolders.push({el:e})}}canBeSwiped(){return this.pswp.getNumItems()>1}moveIndexBy(t,e,n){let{pswp:o}=this,s=o.potentialIndex+t,r=o.getNumItems();if(o.canLoop()){s=o.getLoopedIndex(s);let l=(t+r)%r;l<=r/2?t=l:t=l-r}else s<0?s=0:s>=r&&(s=r-1),t=s-o.potentialIndex;o.potentialIndex=s,this._currPositionIndex-=t,o.animations.stopMainScroll();let a=this.getCurrSlideX();if(!e)this.moveTo(a),this.updateCurrItem();else{o.animations.startSpring({isMainScroll:!0,start:this.x,end:a,velocity:n||0,naturalFrequency:30,dampingRatio:1,onUpdate:c=>{this.moveTo(c)},onComplete:()=>{this.updateCurrItem(),o.appendHeavy()}});let l=o.potentialIndex-o.currIndex;if(o.canLoop()){let c=(l+r)%r;c<=r/2?l=c:l=c-r}Math.abs(l)>1&&this.updateCurrItem()}return Boolean(t)}getCurrSlideX(){return this.slideWidth*this._currPositionIndex}isShifted(){return this.x!==this.getCurrSlideX()}updateCurrItem(){var s;let{pswp:t}=this,e=this._prevPositionIndex-this._currPositionIndex;if(!e)return;this._prevPositionIndex=this._currPositionIndex,t.currIndex=t.potentialIndex;let n=Math.abs(e),o;n>=3&&(this._containerShiftIndex+=e+(e>0?-3:3),n=3);for(let r=0;r<n;r++)e>0?(o=this.itemHolders.shift(),o&&(this.itemHolders[2]=o,this._containerShiftIndex++,Do(o.el,(this._containerShiftIndex+2)*this.slideWidth),t.setContent(o,t.currIndex-n+r+2))):(o=this.itemHolders.pop(),o&&(this.itemHolders.unshift(o),this._containerShiftIndex--,Do(o.el,this._containerShiftIndex*this.slideWidth),t.setContent(o,t.currIndex+n-r-2)));Math.abs(this._containerShiftIndex)>50&&!this.isShifted()&&(this.resetPosition(),this.resize()),t.animations.stopAllPan(),this.itemHolders.forEach((r,a)=>{r.slide&&r.slide.setIsActive(a===1)}),t.currSlide=(s=this.itemHolders[1])==null?void 0:s.slide,t.contentLoader.updateLazy(e),t.currSlide&&t.currSlide.applyCurrentZoomPan(),t.dispatch("change")}moveTo(t,e){if(!this.pswp.canLoop()&&e){let n=(this.slideWidth*this._currPositionIndex-t)/this.slideWidth;n+=this.pswp.currIndex;let o=Math.round(t-this.x);(n<0&&o>0||n>=this.pswp.getNumItems()-1&&o<0)&&(t=this.x+o*h1)}this.x=t,this.pswp.container&&Do(this.pswp.container,t),this.pswp.dispatch("moveMainScroll",{x:t,dragging:e!=null?e:!1})}},u1={Escape:27,z:90,ArrowLeft:37,ArrowUp:38,ArrowRight:39,ArrowDown:40,Tab:9},Oo=(i,t)=>t?i:u1[i],cu=class{constructor(t){this.pswp=t,this._wasFocused=!1,t.on("bindEvents",()=>{t.options.initialPointerPos||this._focusRoot(),t.events.add(document,"focusin",this._onFocusIn.bind(this)),t.events.add(document,"keydown",this._onKeyDown.bind(this))});let e=document.activeElement;t.on("destroy",()=>{t.options.returnFocus&&e&&this._wasFocused&&e.focus()})}_focusRoot(){!this._wasFocused&&this.pswp.element&&(this.pswp.element.focus(),this._wasFocused=!0)}_onKeyDown(t){let{pswp:e}=this;if(e.dispatch("keydown",{originalEvent:t}).defaultPrevented||n1(t))return;let n,o,s=!1,r="key"in t;switch(r?t.key:t.keyCode){case Oo("Escape",r):e.options.escKey&&(n="close");break;case Oo("z",r):n="toggleZoom";break;case Oo("ArrowLeft",r):o="x";break;case Oo("ArrowUp",r):o="y";break;case Oo("ArrowRight",r):o="x",s=!0;break;case Oo("ArrowDown",r):s=!0,o="y";break;case Oo("Tab",r):this._focusRoot();break}if(o){t.preventDefault();let{currSlide:a}=e;e.options.arrowKeys&&o==="x"&&e.getNumItems()>1?n=s?"next":"prev":a&&a.currZoomLevel>a.zoomLevels.fit&&(a.pan[o]+=s?-80:80,a.panTo(a.pan.x,a.pan.y))}n&&(t.preventDefault(),e[n]())}_onFocusIn(t){let{template:e}=this.pswp;e&&document!==t.target&&e!==t.target&&!e.contains(t.target)&&e.focus()}},f1="cubic-bezier(.4,0,.22,1)",du=class{constructor(t){var d;this.props=t;let{target:e,onComplete:n,transform:o,onFinish:s=()=>{},duration:r=333,easing:a=f1}=t;this.onFinish=s;let l=o?"transform":"opacity",c=(d=t[l])!=null?d:"";this._target=e,this._onComplete=n,this._finished=!1,this._onTransitionEnd=this._onTransitionEnd.bind(this),this._helperTimeout=setTimeout(()=>{bw(e,l,r,a),this._helperTimeout=setTimeout(()=>{e.addEventListener("transitionend",this._onTransitionEnd,!1),e.addEventListener("transitioncancel",this._onTransitionEnd,!1),this._helperTimeout=setTimeout(()=>{this._finalizeAnimation()},r+500),e.style[l]=c},30)},0)}_onTransitionEnd(t){t.target===this._target&&this._finalizeAnimation()}_finalizeAnimation(){this._finished||(this._finished=!0,this.onFinish(),this._onComplete&&this._onComplete())}destroy(){this._helperTimeout&&clearTimeout(this._helperTimeout),e1(this._target),this._target.removeEventListener("transitionend",this._onTransitionEnd,!1),this._target.removeEventListener("transitioncancel",this._onTransitionEnd,!1),this._finished||this._finalizeAnimation()}},g1=12,v1=.75,mu=class{constructor(t,e,n){this.velocity=t*1e3,this._dampingRatio=e||v1,this._naturalFrequency=n||g1,this._dampedFrequency=this._naturalFrequency,this._dampingRatio<1&&(this._dampedFrequency*=Math.sqrt(1-this._dampingRatio*this._dampingRatio))}easeFrame(t,e){let n=0,o;e/=1e3;let s=Gm(Math.E,-this._dampingRatio*this._naturalFrequency*e);if(this._dampingRatio===1)o=this.velocity+this._naturalFrequency*t,n=(t+o*e)*s,this.velocity=n*-this._naturalFrequency+o*s;else if(this._dampingRatio<1){o=1/this._dampedFrequency*(this._dampingRatio*this._naturalFrequency*t+this.velocity);let r=Math.cos(this._dampedFrequency*e),a=Math.sin(this._dampedFrequency*e);n=s*(t*r+o*a),this.velocity=n*-this._naturalFrequency*this._dampingRatio+s*(-this._dampedFrequency*t*a+this._dampedFrequency*o*r)}return n}},pu=class{constructor(t){this.props=t,this._raf=0;let{start:e,end:n,velocity:o,onUpdate:s,onComplete:r,onFinish:a=()=>{},dampingRatio:l,naturalFrequency:c}=t;this.onFinish=a;let d=new mu(o,l,c),p=Date.now(),u=e-n,m=()=>{this._raf&&(u=d.easeFrame(u,Date.now()-p),Math.abs(u)<1&&Math.abs(d.velocity)<50?(s(n),r&&r(),this.onFinish()):(p=Date.now(),s(u+n),this._raf=requestAnimationFrame(m)))};this._raf=requestAnimationFrame(m)}destroy(){this._raf>=0&&cancelAnimationFrame(this._raf),this._raf=0}},hu=class{constructor(){this.activeAnimations=[]}startSpring(t){this._start(t,!0)}startTransition(t){this._start(t)}_start(t,e){let n=e?new pu(t):new du(t);return this.activeAnimations.push(n),n.onFinish=()=>this.stop(n),n}stop(t){t.destroy();let e=this.activeAnimations.indexOf(t);e>-1&&this.activeAnimations.splice(e,1)}stopAll(){this.activeAnimations.forEach(t=>{t.destroy()}),this.activeAnimations=[]}stopAllPan(){this.activeAnimations=this.activeAnimations.filter(t=>t.props.isPan?(t.destroy(),!1):!0)}stopMainScroll(){this.activeAnimations=this.activeAnimations.filter(t=>t.props.isMainScroll?(t.destroy(),!1):!0)}isPanRunning(){return this.activeAnimations.some(t=>t.props.isPan)}},uu=class{constructor(t){this.pswp=t,t.events.add(t.element,"wheel",this._onWheel.bind(this))}_onWheel(t){t.preventDefault();let{currSlide:e}=this.pswp,{deltaX:n,deltaY:o}=t;if(e&&!this.pswp.dispatch("wheel",{originalEvent:t}).defaultPrevented)if(t.ctrlKey||this.pswp.options.wheelToZoom){if(e.isZoomable()){let s=-o;t.deltaMode===1?s*=.05:s*=t.deltaMode?1:.002,s=Gm(2,s);let r=e.currZoomLevel*s;e.zoomTo(r,{x:t.clientX,y:t.clientY})}}else e.isPannable()&&(t.deltaMode===1&&(n*=18,o*=18),e.panTo(e.pan.x-n,e.pan.y-o))}};fu=class{constructor(t,e){let n=e.name||e.className,o=e.html;if(t.options[n]===!1)return;typeof t.options[n+"SVG"]=="string"&&(o=t.options[n+"SVG"]),t.dispatch("uiElementCreate",{data:e});let s="";e.isButton?(s+="pswp__button ",s+=e.className||`pswp__button--${e.name}`):s+=e.className||`pswp__${e.name}`;let r=e.isButton?e.tagName||"button":e.tagName||"div";r=r.toLowerCase();let a=si(s,r);if(e.isButton){r==="button"&&(a.type="button");let{title:d}=e,{ariaLabel:p}=e;typeof t.options[n+"Title"]=="string"&&(d=t.options[n+"Title"]),d&&(a.title=d);let u=p||d;u&&a.setAttribute("aria-label",u)}a.innerHTML=E1(o),e.onInit&&e.onInit(a,t),e.onClick&&(a.onclick=d=>{typeof e.onClick=="string"?t[e.onClick]():typeof e.onClick=="function"&&e.onClick(d,a,t)});let l=e.appendTo||"bar",c=t.element;l==="bar"?(t.topBar||(t.topBar=si("pswp__top-bar pswp__hide-on-close","div",t.scrollWrap)),c=t.topBar):(a.classList.add("pswp__hide-on-close"),l==="wrapper"&&(c=t.scrollWrap)),c==null||c.appendChild(t.applyFilters("uiElement",a,e))}};b1={name:"arrowPrev",className:"pswp__button--arrow--prev",title:"Previous",order:10,isButton:!0,appendTo:"wrapper",html:{isCustomSVG:!0,size:60,inner:'<path d="M29 43l-3 3-16-16 16-16 3 3-13 13 13 13z" id="pswp__icn-arrow"/>',outlineID:"pswp__icn-arrow"},onClick:"prev",onInit:xw},_1={name:"arrowNext",className:"pswp__button--arrow--next",title:"Next",order:11,isButton:!0,appendTo:"wrapper",html:{isCustomSVG:!0,size:60,inner:'<use xlink:href="#pswp__icn-arrow"/>',outlineID:"pswp__icn-arrow"},onClick:"next",onInit:(i,t)=>{xw(i,t,!0)}},y1={name:"close",title:"Close",order:20,isButton:!0,html:{isCustomSVG:!0,inner:'<path d="M24 10l-2-2-6 6-6-6-2 2 6 6-6 6 2 2 6-6 6 6 2-2-6-6z" id="pswp__icn-close"/>',outlineID:"pswp__icn-close"},onClick:"close"},T1={name:"zoom",title:"Zoom",order:10,isButton:!0,html:{isCustomSVG:!0,inner:'<path d="M17.426 19.926a6 6 0 1 1 1.5-1.5L23 22.5 21.5 24l-4.074-4.074z" id="pswp__icn-zoom"/><path fill="currentColor" class="pswp__zoom-icn-bar-h" d="M11 16v-2h6v2z"/><path fill="currentColor" class="pswp__zoom-icn-bar-v" d="M13 12h2v6h-2z"/>',outlineID:"pswp__icn-zoom"},onClick:"toggleZoom"},x1={name:"preloader",appendTo:"bar",order:7,html:{isCustomSVG:!0,inner:'<path fill-rule="evenodd" clip-rule="evenodd" d="M21.2 16a5.2 5.2 0 1 1-5.2-5.2V8a8 8 0 1 0 8 8h-2.8Z" id="pswp__icn-loading"/>',outlineID:"pswp__icn-loading"},onInit:(i,t)=>{let e,n=null,o=(a,l)=>{i.classList[l?"add":"remove"]("pswp__preloader--"+a)},s=a=>{e!==a&&(e=a,o("active",a))},r=()=>{var a;if(!((a=t.currSlide)!=null&&a.content.isLoading())){s(!1),n&&(clearTimeout(n),n=null);return}n||(n=setTimeout(()=>{var l;s(Boolean((l=t.currSlide)==null?void 0:l.content.isLoading())),n=null},t.options.preloaderDelay))};t.on("change",r),t.on("loadComplete",a=>{t.currSlide===a.slide&&r()}),t.ui&&(t.ui.updatePreloaderVisibility=r)}},w1={name:"counter",order:5,onInit:(i,t)=>{t.on("change",()=>{i.innerText=t.currIndex+1+t.options.indexIndicatorSep+t.getNumItems()})}};gu=class{constructor(t){this.pswp=t,this.isRegistered=!1,this.uiElementsData=[],this.items=[],this.updatePreloaderVisibility=()=>{},this._lastUpdatedZoomLevel=void 0}init(){let{pswp:t}=this;this.isRegistered=!1,this.uiElementsData=[y1,b1,_1,T1,x1,w1],t.dispatch("uiRegister"),this.uiElementsData.sort((e,n)=>(e.order||0)-(n.order||0)),this.items=[],this.isRegistered=!0,this.uiElementsData.forEach(e=>{this.registerElement(e)}),t.on("change",()=>{var e;(e=t.element)==null||e.classList[t.getNumItems()===1?"add":"remove"]("pswp--one-slide")}),t.on("zoomPanUpdate",()=>this._onZoomPanUpdate())}registerElement(t){this.isRegistered?this.items.push(new fu(this.pswp,t)):this.uiElementsData.push(t)}_onZoomPanUpdate(){let{template:t,currSlide:e,options:n}=this.pswp;if(this.pswp.opener.isClosing||!t||!e)return;let{currZoomLevel:o}=e;if(this.pswp.opener.isOpen||(o=e.zoomLevels.initial),o===this._lastUpdatedZoomLevel)return;this._lastUpdatedZoomLevel=o;let s=e.zoomLevels.initial-e.zoomLevels.secondary;if(Math.abs(s)<.01||!e.isZoomable()){vw(t,!1),t.classList.remove("pswp--zoom-allowed");return}t.classList.add("pswp--zoom-allowed");let r=o===e.zoomLevels.initial?e.zoomLevels.secondary:e.zoomLevels.initial;vw(t,r<=o),(n.imageClickAction==="zoom"||n.imageClickAction==="zoom-or-close")&&t.classList.add("pswp--click-to-zoom")}};vu=class{constructor(t,e){this.type=t,this.defaultPrevented=!1,e&&Object.assign(this,e)}preventDefault(){this.defaultPrevented=!0}},Eu=class{constructor(){this._listeners={},this._filters={},this.pswp=void 0,this.options=void 0}addFilter(t,e,n=100){var o,s,r;this._filters[t]||(this._filters[t]=[]),(o=this._filters[t])==null||o.push({fn:e,priority:n}),(s=this._filters[t])==null||s.sort((a,l)=>a.priority-l.priority),(r=this.pswp)==null||r.addFilter(t,e,n)}removeFilter(t,e){this._filters[t]&&(this._filters[t]=this._filters[t].filter(n=>n.fn!==e)),this.pswp&&this.pswp.removeFilter(t,e)}applyFilters(t,...e){var n;return(n=this._filters[t])==null||n.forEach(o=>{e[0]=o.fn.apply(this,e)}),e[0]}on(t,e){var n,o;this._listeners[t]||(this._listeners[t]=[]),(n=this._listeners[t])==null||n.push(e),(o=this.pswp)==null||o.on(t,e)}off(t,e){var n;this._listeners[t]&&(this._listeners[t]=this._listeners[t].filter(o=>e!==o)),(n=this.pswp)==null||n.off(t,e)}dispatch(t,e){var o;if(this.pswp)return this.pswp.dispatch(t,e);let n=new vu(t,e);return(o=this._listeners[t])==null||o.forEach(s=>{s.call(this,n)}),n}},bu=class{constructor(t,e){if(this.element=si("pswp__img pswp__img--placeholder",t?"img":"div",e),t){let n=this.element;n.decoding="async",n.alt="",n.src=t,n.setAttribute("role","presentation")}this.element.setAttribute("aria-hidden","true")}setDisplayedSize(t,e){this.element&&(this.element.tagName==="IMG"?(tu(this.element,250,"auto"),this.element.style.transformOrigin="0 0",this.element.style.transform=Ra(0,0,t/250)):tu(this.element,t,e))}destroy(){var t;(t=this.element)!=null&&t.parentNode&&this.element.remove(),this.element=null}},_u=class{constructor(t,e,n){this.instance=e,this.data=t,this.index=n,this.element=void 0,this.placeholder=void 0,this.slide=void 0,this.displayedImageWidth=0,this.displayedImageHeight=0,this.width=Number(this.data.w)||Number(this.data.width)||0,this.height=Number(this.data.h)||Number(this.data.height)||0,this.isAttached=!1,this.hasSlide=!1,this.isDecoding=!1,this.state=_i.IDLE,this.data.type?this.type=this.data.type:this.data.src?this.type="image":this.type="html",this.instance.dispatch("contentInit",{content:this})}removePlaceholder(){this.placeholder&&!this.keepPlaceholder()&&setTimeout(()=>{this.placeholder&&(this.placeholder.destroy(),this.placeholder=void 0)},1e3)}load(t,e){if(this.slide&&this.usePlaceholder())if(this.placeholder){let n=this.placeholder.element;n&&!n.parentElement&&this.slide.container.prepend(n)}else{let n=this.instance.applyFilters("placeholderSrc",this.data.msrc&&this.slide.isFirstSlide?this.data.msrc:!1,this);this.placeholder=new bu(n,this.slide.container)}this.element&&!e||this.instance.dispatch("contentLoad",{content:this,isLazy:t}).defaultPrevented||(this.isImageContent()?(this.element=si("pswp__img","img"),this.displayedImageWidth&&this.loadImage(t)):(this.element=si("pswp__content","div"),this.element.innerHTML=this.data.html||""),e&&this.slide&&this.slide.updateContentSize(!0))}loadImage(t){var n,o;if(!this.isImageContent()||!this.element||this.instance.dispatch("contentLoadImage",{content:this,isLazy:t}).defaultPrevented)return;let e=this.element;this.updateSrcsetSizes(),this.data.srcset&&(e.srcset=this.data.srcset),e.src=(n=this.data.src)!=null?n:"",e.alt=(o=this.data.alt)!=null?o:"",this.state=_i.LOADING,e.complete?this.onLoaded():(e.onload=()=>{this.onLoaded()},e.onerror=()=>{this.onError()})}setSlide(t){this.slide=t,this.hasSlide=!0,this.instance=t.pswp}onLoaded(){this.state=_i.LOADED,this.slide&&this.element&&(this.instance.dispatch("loadComplete",{slide:this.slide,content:this}),this.slide.isActive&&this.slide.heavyAppended&&!this.element.parentNode&&(this.append(),this.slide.updateContentSize(!0)),(this.state===_i.LOADED||this.state===_i.ERROR)&&this.removePlaceholder())}onError(){this.state=_i.ERROR,this.slide&&(this.displayError(),this.instance.dispatch("loadComplete",{slide:this.slide,isError:!0,content:this}),this.instance.dispatch("loadError",{slide:this.slide,content:this}))}isLoading(){return this.instance.applyFilters("isContentLoading",this.state===_i.LOADING,this)}isError(){return this.state===_i.ERROR}isImageContent(){return this.type==="image"}setDisplayedSize(t,e){if(this.element&&(this.placeholder&&this.placeholder.setDisplayedSize(t,e),!this.instance.dispatch("contentResize",{content:this,width:t,height:e}).defaultPrevented&&(tu(this.element,t,e),this.isImageContent()&&!this.isError()))){let n=!this.displayedImageWidth&&t;this.displayedImageWidth=t,this.displayedImageHeight=e,n?this.loadImage(!1):this.updateSrcsetSizes(),this.slide&&this.instance.dispatch("imageSizeChange",{slide:this.slide,width:t,height:e,content:this})}}isZoomable(){return this.instance.applyFilters("isContentZoomable",this.isImageContent()&&this.state!==_i.ERROR,this)}updateSrcsetSizes(){if(!this.isImageContent()||!this.element||!this.data.srcset)return;let t=this.element,e=this.instance.applyFilters("srcsetSizesWidth",this.displayedImageWidth,this);(!t.dataset.largestUsedSize||e>parseInt(t.dataset.largestUsedSize,10))&&(t.sizes=e+"px",t.dataset.largestUsedSize=String(e))}usePlaceholder(){return this.instance.applyFilters("useContentPlaceholder",this.isImageContent(),this)}lazyLoad(){this.instance.dispatch("contentLazyLoad",{content:this}).defaultPrevented||this.load(!0)}keepPlaceholder(){return this.instance.applyFilters("isKeepingPlaceholder",this.isLoading(),this)}destroy(){this.hasSlide=!1,this.slide=void 0,!this.instance.dispatch("contentDestroy",{content:this}).defaultPrevented&&(this.remove(),this.placeholder&&(this.placeholder.destroy(),this.placeholder=void 0),this.isImageContent()&&this.element&&(this.element.onload=null,this.element.onerror=null,this.element=void 0))}displayError(){var t,e;if(this.slide){let n=si("pswp__error-msg","div");n.innerText=(e=(t=this.instance.options)==null?void 0:t.errorMsg)!=null?e:"",n=this.instance.applyFilters("contentErrorElement",n,this),this.element=si("pswp__content pswp__error-msg-container","div"),this.element.appendChild(n),this.slide.container.innerText="",this.slide.container.appendChild(this.element),this.slide.updateContentSize(!0),this.removePlaceholder()}}append(){if(this.isAttached||!this.element)return;if(this.isAttached=!0,this.state===_i.ERROR){this.displayError();return}if(this.instance.dispatch("contentAppend",{content:this}).defaultPrevented)return;let t="decode"in this.element;this.isImageContent()?t&&this.slide&&(!this.slide.isActive||mw())?(this.isDecoding=!0,this.element.decode().catch(()=>{}).finally(()=>{this.isDecoding=!1,this.appendImage()})):this.appendImage():this.slide&&!this.element.parentNode&&this.slide.container.appendChild(this.element)}activate(){this.instance.dispatch("contentActivate",{content:this}).defaultPrevented||!this.slide||(this.isImageContent()&&this.isDecoding&&!mw()?this.appendImage():this.isError()&&this.load(!1,!0),this.slide.holderElement&&this.slide.holderElement.setAttribute("aria-hidden","false"))}deactivate(){this.instance.dispatch("contentDeactivate",{content:this}),this.slide&&this.slide.holderElement&&this.slide.holderElement.setAttribute("aria-hidden","true")}remove(){this.isAttached=!1,!this.instance.dispatch("contentRemove",{content:this}).defaultPrevented&&(this.element&&this.element.parentNode&&this.element.remove(),this.placeholder&&this.placeholder.element&&this.placeholder.element.remove())}appendImage(){this.isAttached&&(this.instance.dispatch("contentAppendImage",{content:this}).defaultPrevented||(this.slide&&this.element&&!this.element.parentNode&&this.slide.container.appendChild(this.element),(this.state===_i.LOADED||this.state===_i.ERROR)&&this.removePlaceholder()))}},S1=5;yu=class{constructor(t){this.pswp=t,this.limit=Math.max(t.options.preload[0]+t.options.preload[1]+1,S1),this._cachedItems=[]}updateLazy(t){let{pswp:e}=this;if(e.dispatch("lazyLoad").defaultPrevented)return;let{preload:n}=e.options,o=t===void 0?!0:t>=0,s;for(s=0;s<=n[1];s++)this.loadSlideByIndex(e.currIndex+(o?s:-s));for(s=1;s<=n[0];s++)this.loadSlideByIndex(e.currIndex+(o?-s:s))}loadSlideByIndex(t){let e=this.pswp.getLoopedIndex(t),n=this.getContentByIndex(e);n||(n=M1(e,this.pswp),n&&this.addToCache(n))}getContentBySlide(t){let e=this.getContentByIndex(t.index);return e||(e=this.pswp.createContentFromData(t.data,t.index),this.addToCache(e)),e.setSlide(t),e}addToCache(t){if(this.removeByIndex(t.index),this._cachedItems.push(t),this._cachedItems.length>this.limit){let e=this._cachedItems.findIndex(n=>!n.isAttached&&!n.hasSlide);e!==-1&&this._cachedItems.splice(e,1)[0].destroy()}}removeByIndex(t){let e=this._cachedItems.findIndex(n=>n.index===t);e!==-1&&this._cachedItems.splice(e,1)}getContentByIndex(t){return this._cachedItems.find(e=>e.index===t)}destroy(){this._cachedItems.forEach(t=>t.destroy()),this._cachedItems=[]}},Tu=class extends Eu{getNumItems(){var o;let t=0,e=(o=this.options)==null?void 0:o.dataSource;e&&"length"in e?t=e.length:e&&"gallery"in e&&(e.items||(e.items=this._getGalleryDOMElements(e.gallery)),e.items&&(t=e.items.length));let n=this.dispatch("numItems",{dataSource:e,numItems:t});return this.applyFilters("numItems",n.numItems,e)}createContentFromData(t,e){return new _u(t,this,e)}getItemData(t){var r;let e=(r=this.options)==null?void 0:r.dataSource,n={};Array.isArray(e)?n=e[t]:e&&"gallery"in e&&(e.items||(e.items=this._getGalleryDOMElements(e.gallery)),n=e.items[t]);let o=n;o instanceof Element&&(o=this._domElementToItemData(o));let s=this.dispatch("itemData",{itemData:o||{},index:t});return this.applyFilters("itemData",s.itemData,t)}_getGalleryDOMElements(t){var e,n;return(e=this.options)!=null&&e.children||(n=this.options)!=null&&n.childSelector?o1(this.options.children,this.options.childSelector,t)||[]:[t]}_domElementToItemData(t){var o;let e={element:t},n=t.tagName==="A"?t:t.querySelector("a");if(n){e.src=n.dataset.pswpSrc||n.href,n.dataset.pswpSrcset&&(e.srcset=n.dataset.pswpSrcset),e.width=n.dataset.pswpWidth?parseInt(n.dataset.pswpWidth,10):0,e.height=n.dataset.pswpHeight?parseInt(n.dataset.pswpHeight,10):0,e.w=e.width,e.h=e.height,n.dataset.pswpType&&(e.type=n.dataset.pswpType);let s=t.querySelector("img");s&&(e.msrc=s.currentSrc||s.src,e.alt=(o=s.getAttribute("alt"))!=null?o:""),(n.dataset.pswpCropped||n.dataset.cropped)&&(e.thumbCropped=!0)}return this.applyFilters("domItemData",e,t,n)}lazyLoadData(t,e){return ww(t,this,e)}},Ca=.003,xu=class{constructor(t){this.pswp=t,this.isClosed=!0,this.isOpen=!1,this.isClosing=!1,this.isOpening=!1,this._duration=void 0,this._useAnimation=!1,this._croppedZoom=!1,this._animateRootOpacity=!1,this._animateBgOpacity=!1,this._placeholder=void 0,this._opacityElement=void 0,this._cropContainer1=void 0,this._cropContainer2=void 0,this._thumbBounds=void 0,this._prepareOpen=this._prepareOpen.bind(this),t.on("firstZoomPan",this._prepareOpen)}open(){this._prepareOpen(),this._start()}close(){if(this.isClosed||this.isClosing||this.isOpening)return;let t=this.pswp.currSlide;this.isOpen=!1,this.isOpening=!1,this.isClosing=!0,this._duration=this.pswp.options.hideAnimationDuration,t&&t.currZoomLevel*t.width>=this.pswp.options.maxWidthToAnimate&&(this._duration=0),this._applyStartProps(),setTimeout(()=>{this._start()},this._croppedZoom?30:0)}_prepareOpen(){if(this.pswp.off("firstZoomPan",this._prepareOpen),!this.isOpening){let t=this.pswp.currSlide;this.isOpening=!0,this.isClosing=!1,this._duration=this.pswp.options.showAnimationDuration,t&&t.zoomLevels.initial*t.width>=this.pswp.options.maxWidthToAnimate&&(this._duration=0),this._applyStartProps()}}_applyStartProps(){var o,s;let{pswp:t}=this,e=this.pswp.currSlide,{options:n}=t;if(n.showHideAnimationType==="fade"?(n.showHideOpacity=!0,this._thumbBounds=void 0):n.showHideAnimationType==="none"?(n.showHideOpacity=!1,this._duration=0,this._thumbBounds=void 0):this.isOpening&&t._initialThumbBounds?this._thumbBounds=t._initialThumbBounds:this._thumbBounds=this.pswp.getThumbBounds(),this._placeholder=e==null?void 0:e.getPlaceholderElement(),t.animations.stopAll(),this._useAnimation=Boolean(this._duration&&this._duration>50),this._animateZoom=Boolean(this._thumbBounds)&&(e==null?void 0:e.content.usePlaceholder())&&(!this.isClosing||!t.mainScroll.isShifted()),this._animateZoom?this._animateRootOpacity=(o=n.showHideOpacity)!=null?o:!1:(this._animateRootOpacity=!0,this.isOpening&&e&&(e.zoomAndPanToInitial(),e.applyCurrentZoomPan())),this._animateBgOpacity=!this._animateRootOpacity&&this.pswp.options.bgOpacity>Ca,this._opacityElement=this._animateRootOpacity?t.element:t.bg,!this._useAnimation){this._duration=0,this._animateZoom=!1,this._animateBgOpacity=!1,this._animateRootOpacity=!0,this.isOpening&&(t.element&&(t.element.style.opacity=String(Ca)),t.applyBgOpacity(1));return}this._animateZoom&&this._thumbBounds&&this._thumbBounds.innerRect?(this._croppedZoom=!0,this._cropContainer1=this.pswp.container,this._cropContainer2=(s=this.pswp.currSlide)==null?void 0:s.holderElement,t.container&&(t.container.style.overflow="hidden",t.container.style.width=t.viewportSize.x+"px")):this._croppedZoom=!1,this.isOpening?(this._animateRootOpacity?(t.element&&(t.element.style.opacity=String(Ca)),t.applyBgOpacity(1)):(this._animateBgOpacity&&t.bg&&(t.bg.style.opacity=String(Ca)),t.element&&(t.element.style.opacity="1")),this._animateZoom&&(this._setClosedStateZoomPan(),this._placeholder&&(this._placeholder.style.willChange="transform",this._placeholder.style.opacity=String(Ca)))):this.isClosing&&(t.mainScroll.itemHolders[0]&&(t.mainScroll.itemHolders[0].el.style.display="none"),t.mainScroll.itemHolders[2]&&(t.mainScroll.itemHolders[2].el.style.display="none"),this._croppedZoom&&t.mainScroll.x!==0&&(t.mainScroll.resetPosition(),t.mainScroll.resize()))}_start(){this.isOpening&&this._useAnimation&&this._placeholder&&this._placeholder.tagName==="IMG"?new Promise(t=>{let e=!1,n=!0;i1(this._placeholder).finally(()=>{e=!0,n||t(!0)}),setTimeout(()=>{n=!1,e&&t(!0)},50),setTimeout(t,250)}).finally(()=>this._initiate()):this._initiate()}_initiate(){var t,e;(t=this.pswp.element)==null||t.style.setProperty("--pswp-transition-duration",this._duration+"ms"),this.pswp.dispatch(this.isOpening?"openingAnimationStart":"closingAnimationStart"),this.pswp.dispatch("initialZoom"+(this.isOpening?"In":"Out")),(e=this.pswp.element)==null||e.classList[this.isOpening?"add":"remove"]("pswp--ui-visible"),this.isOpening?(this._placeholder&&(this._placeholder.style.opacity="1"),this._animateToOpenState()):this.isClosing&&this._animateToClosedState(),this._useAnimation||this._onAnimationComplete()}_onAnimationComplete(){var e;let{pswp:t}=this;this.isOpen=this.isOpening,this.isClosed=this.isClosing,this.isOpening=!1,this.isClosing=!1,t.dispatch(this.isOpen?"openingAnimationEnd":"closingAnimationEnd"),t.dispatch("initialZoom"+(this.isOpen?"InEnd":"OutEnd")),this.isClosed?t.destroy():this.isOpen&&(this._animateZoom&&t.container&&(t.container.style.overflow="visible",t.container.style.width="100%"),(e=t.currSlide)==null||e.applyCurrentZoomPan())}_animateToOpenState(){let{pswp:t}=this;this._animateZoom&&(this._croppedZoom&&this._cropContainer1&&this._cropContainer2&&(this._animateTo(this._cropContainer1,"transform","translate3d(0,0,0)"),this._animateTo(this._cropContainer2,"transform","none")),t.currSlide&&(t.currSlide.zoomAndPanToInitial(),this._animateTo(t.currSlide.container,"transform",t.currSlide.getCurrentTransform()))),this._animateBgOpacity&&t.bg&&this._animateTo(t.bg,"opacity",String(t.options.bgOpacity)),this._animateRootOpacity&&t.element&&this._animateTo(t.element,"opacity","1")}_animateToClosedState(){let{pswp:t}=this;this._animateZoom&&this._setClosedStateZoomPan(!0),this._animateBgOpacity&&t.bgOpacity>.01&&t.bg&&this._animateTo(t.bg,"opacity","0"),this._animateRootOpacity&&t.element&&this._animateTo(t.element,"opacity","0")}_setClosedStateZoomPan(t){if(!this._thumbBounds)return;let{pswp:e}=this,{innerRect:n}=this._thumbBounds,{currSlide:o,viewportSize:s}=e;if(this._croppedZoom&&n&&this._cropContainer1&&this._cropContainer2){let r=-s.x+(this._thumbBounds.x-n.x)+n.w,a=-s.y+(this._thumbBounds.y-n.y)+n.h,l=s.x-n.w,c=s.y-n.h;t?(this._animateTo(this._cropContainer1,"transform",Ra(r,a)),this._animateTo(this._cropContainer2,"transform",Ra(l,c))):(Do(this._cropContainer1,r,a),Do(this._cropContainer2,l,c))}o&&(ie(o.pan,n||this._thumbBounds),o.currZoomLevel=this._thumbBounds.w/o.width,t?this._animateTo(o.container,"transform",o.getCurrentTransform()):o.applyCurrentZoomPan())}_animateTo(t,e,n){if(!this._duration){t.style[e]=n;return}let{animations:o}=this.pswp,s={duration:this._duration,easing:this.pswp.options.easing,onComplete:()=>{o.activeAnimations.length||this._onAnimationComplete()},target:t};s[e]=n,o.startTransition(s)}},R1={allowPanToNext:!0,spacing:.1,loop:!0,pinchToClose:!0,closeOnVerticalDrag:!0,hideAnimationDuration:333,showAnimationDuration:333,zoomAnimationDuration:333,escKey:!0,arrowKeys:!0,returnFocus:!0,maxWidthToAnimate:4e3,clickToCloseNonZoomable:!0,imageClickAction:"zoom-or-close",bgClickAction:"close",tapAction:"toggle-controls",doubleTapAction:"zoom",indexIndicatorSep:" / ",preloaderDelay:2e3,bgOpacity:.8,index:0,errorMsg:"The image cannot be loaded",preload:[1,2],easing:"cubic-bezier(.4,0,.22,1)"},bd=class extends Tu{constructor(t){super(),this.options=this._prepareOptions(t||{}),this.offset={x:0,y:0},this._prevViewportSize={x:0,y:0},this.viewportSize={x:0,y:0},this.bgOpacity=1,this.currIndex=0,this.potentialIndex=0,this.isOpen=!1,this.isDestroying=!1,this.hasMouse=!1,this._initialItemData={},this._initialThumbBounds=void 0,this.topBar=void 0,this.element=void 0,this.template=void 0,this.container=void 0,this.scrollWrap=void 0,this.currSlide=void 0,this.events=new eu,this.animations=new hu,this.mainScroll=new lu(this),this.gestures=new au(this),this.opener=new xu(this),this.keyboard=new cu(this),this.contentLoader=new yu(this)}init(){if(this.isOpen||this.isDestroying)return!1;this.isOpen=!0,this.dispatch("init"),this.dispatch("beforeOpen"),this._createMainStructure();let t="pswp--open";return this.gestures.supportsTouch&&(t+=" pswp--touch"),this.options.mainClass&&(t+=" "+this.options.mainClass),this.element&&(this.element.className+=" "+t),this.currIndex=this.options.index||0,this.potentialIndex=this.currIndex,this.dispatch("firstUpdate"),this.scrollWheel=new uu(this),(Number.isNaN(this.currIndex)||this.currIndex<0||this.currIndex>=this.getNumItems())&&(this.currIndex=0),this.gestures.supportsTouch||this.mouseDetected(),this.updateSize(),this.offset.y=window.pageYOffset,this._initialItemData=this.getItemData(this.currIndex),this.dispatch("gettingData",{index:this.currIndex,data:this._initialItemData,slide:void 0}),this._initialThumbBounds=this.getThumbBounds(),this.dispatch("initialLayout"),this.on("openingAnimationEnd",()=>{let{itemHolders:e}=this.mainScroll;e[0]&&(e[0].el.style.display="block",this.setContent(e[0],this.currIndex-1)),e[2]&&(e[2].el.style.display="block",this.setContent(e[2],this.currIndex+1)),this.appendHeavy(),this.contentLoader.updateLazy(),this.events.add(window,"resize",this._handlePageResize.bind(this)),this.events.add(window,"scroll",this._updatePageScrollOffset.bind(this)),this.dispatch("bindEvents")}),this.mainScroll.itemHolders[1]&&this.setContent(this.mainScroll.itemHolders[1],this.currIndex),this.dispatch("change"),this.opener.open(),this.dispatch("afterInit"),!0}getLoopedIndex(t){let e=this.getNumItems();return this.options.loop&&(t>e-1&&(t-=e),t<0&&(t+=e)),Ia(t,0,e-1)}appendHeavy(){this.mainScroll.itemHolders.forEach(t=>{var e;(e=t.slide)==null||e.appendHeavy()})}goTo(t){this.mainScroll.moveIndexBy(this.getLoopedIndex(t)-this.potentialIndex)}next(){this.goTo(this.potentialIndex+1)}prev(){this.goTo(this.potentialIndex-1)}zoomTo(...t){var e;(e=this.currSlide)==null||e.zoomTo(...t)}toggleZoom(){var t;(t=this.currSlide)==null||t.toggleZoom()}close(){!this.opener.isOpen||this.isDestroying||(this.isDestroying=!0,this.dispatch("close"),this.events.removeAll(),this.opener.close())}destroy(){var t;if(!this.isDestroying){this.options.showHideAnimationType="none",this.close();return}this.dispatch("destroy"),this._listeners={},this.scrollWrap&&(this.scrollWrap.ontouchmove=null,this.scrollWrap.ontouchend=null),(t=this.element)==null||t.remove(),this.mainScroll.itemHolders.forEach(e=>{var n;(n=e.slide)==null||n.destroy()}),this.contentLoader.destroy(),this.events.removeAll()}refreshSlideContent(t){this.contentLoader.removeByIndex(t),this.mainScroll.itemHolders.forEach((e,n)=>{var s,r,a;let o=((r=(s=this.currSlide)==null?void 0:s.index)!=null?r:0)-1+n;this.canLoop()&&(o=this.getLoopedIndex(o)),o===t&&(this.setContent(e,t,!0),n===1&&(this.currSlide=e.slide,(a=e.slide)==null||a.setIsActive(!0)))}),this.dispatch("change")}setContent(t,e,n){if(this.canLoop()&&(e=this.getLoopedIndex(e)),t.slide){if(t.slide.index===e&&!n)return;t.slide.destroy(),t.slide=void 0}if(!this.canLoop()&&(e<0||e>=this.getNumItems()))return;let o=this.getItemData(e);t.slide=new nu(o,e,this),e===this.currIndex&&(this.currSlide=t.slide),t.slide.append(t.el)}getViewportCenterPoint(){return{x:this.viewportSize.x/2,y:this.viewportSize.y/2}}updateSize(t){if(this.isDestroying)return;let e=yw(this.options,this);!t&&Ma(e,this._prevViewportSize)||(ie(this._prevViewportSize,e),this.dispatch("beforeResize"),ie(this.viewportSize,this._prevViewportSize),this._updatePageScrollOffset(),this.dispatch("viewportSize"),this.mainScroll.resize(this.opener.isOpen),!this.hasMouse&&window.matchMedia("(any-hover: hover)").matches&&this.mouseDetected(),this.dispatch("resize"))}applyBgOpacity(t){this.bgOpacity=Math.max(t,0),this.bg&&(this.bg.style.opacity=String(this.bgOpacity*this.options.bgOpacity))}mouseDetected(){var t;this.hasMouse||(this.hasMouse=!0,(t=this.element)==null||t.classList.add("pswp--has_mouse"))}_handlePageResize(){this.updateSize(),/iPhone|iPad|iPod/i.test(window.navigator.userAgent)&&setTimeout(()=>{this.updateSize()},500)}_updatePageScrollOffset(){this.setScrollOffset(0,window.pageYOffset)}setScrollOffset(t,e){this.offset.x=t,this.offset.y=e,this.dispatch("updateScrollOffset")}_createMainStructure(){this.element=si("pswp","div"),this.element.setAttribute("tabindex","-1"),this.element.setAttribute("role","dialog"),this.template=this.element,this.bg=si("pswp__bg","div",this.element),this.scrollWrap=si("pswp__scroll-wrap","section",this.element),this.container=si("pswp__container","div",this.scrollWrap),this.scrollWrap.setAttribute("aria-roledescription","carousel"),this.container.setAttribute("aria-live","off"),this.container.setAttribute("id","pswp__items"),this.mainScroll.appendHolders(),this.ui=new gu(this),this.ui.init(),(this.options.appendToEl||document.body).appendChild(this.element)}getThumbBounds(){return C1(this.currIndex,this.currSlide?this.currSlide.data:this._initialItemData,this)}canLoop(){return this.options.loop&&this.getNumItems()>2}_prepareOptions(t){return window.matchMedia("(prefers-reduced-motion), (update: slow)").matches&&(t.showHideAnimationType="none",t.zoomAnimationDuration=0),N(N({},R1),t)}}});var Aw,Cw=v(()=>{"use strict";Aw=" из "});var Mw={};ut(Mw,{openPhotoswipe:()=>O1});var Sw,O1,Rw=v(()=>{"use strict";Lw();Cw();ve();O1=(i,t,e,n)=>{let o=i.map(a=>({src:a.images[0].url,width:a.images[0].width,height:a.images[0].height,msrc:a.inline})),s='<div class="pswp__arrow"></div>',r=new bd(N({dataSource:o,index:t,closeSVG:'<x-icon name="menu-close"></x-icon>',arrowPrevSVG:s,arrowNextSVG:s,zoom:!1,spacing:.03,bgOpacity:1,indexIndicatorSep:Aw},d2Env.isDesktop&&{maxZoomLevel:1}));r.addFilter("thumbEl",(a,l,c)=>n?n[c]:a),r.addFilter("placeholderSrc",(a,l)=>l.slide.data.msrc||a),r.on("destroy",()=>{document.documentElement.style.overflowY="",document.scrollingElement.scrollTop=Sw}),!d2Env.isApp&&e&&r.on("contentActivate",()=>{Tt(e)}),Sw=document.scrollingElement.scrollTop,document.documentElement.style.overflowY="hidden",r.init()}});var Ha,Pw,Su=v(()=>{"use strict";Ha=(i,t)=>{let e=`${i}=`,n=(document.cookie||"").split(";");for(let o of n){let s=o.trim();if(s.lastIndexOf(e,0)===0)return s.substring(e.length);if(s===i)return""}return t},Pw=(i,t,e={})=>{let{maxAge:n=-1,path:o,domain:s,secure:r=!1,sameSite:a}=e,l;n<0?l="":n===0?l=`;expires=${new Date(1970,1,1).toUTCString()}`:l=`;expires=${new Date(Date.now()+n*1e3).toUTCString()}`;let c=o?`;path=${o}`:"",d=s?`;domain=${s}`:"",p=r?";secure":"",u=a!=null?`;samesite=${a}`:"";document.cookie=i+"="+t+d+c+l+p+u}});var Di,V1,$w,Ho=v(()=>{"use strict";$();Su();Su();Di=(i,t,e)=>{Pw(i,String(t),{maxAge:Number(e)===-1?-1:Number(e)*24*60*60,sameSite:"lax",path:"/",secure:window.location.protocol==="https:"})},V1=i=>{let t=i.node();t.dataset.cookieParams&&Di(...t.dataset.cookieParams.split(","))},$w=()=>{T.registerHandlers("cookie",{set:V1})}});var Mu,Vw,G1,J1,Y1,Z1,qw,Gw,K1,X1,ks,_d=v(()=>{"use strict";_p();X();Mu="toast",Vw="is-active",G1=3e3,J1=400,Y1=d2Env.isApp&&hc?66:10,Z1=10,qw=new WeakMap,Gw=()=>{let i=Y1;ft(Mu,"item").forEach(e=>{let n=e.offsetHeight;e.style.top=`${i}px`,i+=n+Z1})},K1=i=>ft(Mu,"item").some(e=>qw.get(e)===i),X1=i=>{i.classList.remove(Vw),setTimeout(()=>{i.remove(),Gw()},J1)},ks=(i,t={})=>{let{duration:e=G1,type:n}=t;if(n&&K1(n))return;let o=document.createElement("div");n&&qw.set(o,n),jl(o,Mu,"item"),o.className=`c-toast ctx-dark ${Vw}`,o.innerHTML=i,document.body.prepend(o),Gw(),e>0&&setTimeout(()=>{X1(o)},e)}});var h0,Fu,$u,Fs,Ld=v(()=>{"use strict";h0=io(Yr(),1);Mn();Fu=class extends EventTarget{constructor(e=window){super();this.win=e;this.win.addEventListener("resize",(0,h0.throttle)(this.handleResize).bind(this),{passive:!0});let{clientWidth:n,clientHeight:o}=this.win.document.documentElement;this.size=new Ot(n,o)}getSize(){return this.size?this.size.clone():null}handleResize(){let e=this.win.document.documentElement,n=new Ot(e.clientWidth,e.clientHeight);Ot.equals(n,this.size)||(this.size=n,this.dispatchEvent(new CustomEvent("resize")))}},$u=new WeakMap,Fs=(i=window)=>($u.has(i)||$u.set(i,new Fu(i)),$u.get(i))});var Ws,Od=v(()=>{"use strict";Vi();Ws=(i=[],t="purchase")=>{let e={ecommerce:{currencyCode:"RUB",[t]:wt(N({},t==="purchase"&&{actionField:{id:de()}}),{products:i})}};window.dataLayer=window.dataLayer||[],window.dataLayer.push(e)}});var PF,Dd,Ju=v(()=>{"use strict";gt();PF="js-deposit-rebilling",Dd=(i,t)=>{if((i&&i.data&&i.data.status)!=="PaymentInstrumentRequired")return;let n=document.querySelector(`.${PF}`);if(!n)return;let o=n.value||"";n.addEventListener("click",()=>{zt(),t(o)},{once:!0})}});var fn,el=v(()=>{"use strict";fn=(i,t)=>{let e=Math.ceil(i.length/t),n=[];for(let o=0;o<t;o+=1)n[o]=i.slice(o*e,(o+1)*e);return n}});var eC,XB,Gs,af=v(()=>{"use strict";Yl();eC="__sak",XB=i=>{try{return i.setItem(eC,"1"),i.removeItem(eC),!0}catch(t){return!1}},Gs=qo(()=>XB(window.sessionStorage))});function aC(i,t){this.scrollLeft=i,this.scrollTop=t}var $d,cf,Fd,Js,Bd,Ys,df,Zs,sl,Ks=v(()=>{$d=i=>i===void 0||i==="auto"||i==="instant"||i==="smooth";cf=(i,t,e="cannot convert to dictionary.")=>`Failed to execute '${i}' on '${t}': ${e}`,Fd=(i,t,e)=>cf(i,t,`The provided value '${e}' is not a valid enum value of type ScrollBehavior.`),Js=(i,t,e)=>{var n;let o=`__SEAMLESS.BACKUP$${t}`;return!i[o]&&i[t]&&!(!((n=i[t])===null||n===void 0)&&n.__isPolyfill)&&(i[o]=i[t]),i[o]||e},Bd=i=>{let t=typeof i;return i!==null&&(t==="object"||t==="function")},Ys=i=>"scrollBehavior"in window.document.documentElement.style&&(i==null?void 0:i.forcePolyfill)!==!0,df=i=>{Object.defineProperty(i,"__isPolyfill",{value:!0})},Zs=(i,t)=>{df(t),[HTMLElement.prototype,SVGElement.prototype,Element.prototype].forEach(e=>{Js(e,i),e[i]=t})},sl=i=>i.ownerDocument.scrollingElement||i.ownerDocument.documentElement});function lC(i){if(typeof Event=="function")return new Event("scrollend",{bubbles:i,cancelable:!1});let t=document.createEvent("Event");return t.initEvent("scrollend",i,!1),t}var cC=v(()=>{});function Ud(){var i;let t;return!((i=window.performance)===null||i===void 0)&&i.now?t=()=>window.performance.now():t=()=>window.Date.now(),Ud=t,t()}var eU,iU,mf,dC=v(()=>{eU=i=>.5*(1-Math.cos(Math.PI*i));iU=500,mf=i=>{let e=(Ud()-i.timeStamp)/(i.duration||iU);if(e>1){i.method(i.targetX,i.targetY),i.callback();return}let n=(i.timingFunc||eU)(e),o=i.startX+(i.targetX-i.startX)*n,s=i.startY+(i.targetY-i.startY)*n;i.method(o,s),i.rafId=window.requestAnimationFrame(()=>{mf(i)})}});var zd,nU,oU,sU,pf,rl,al,ll,hf,rU,aU,lU,cU,dU,jd=v(()=>{Ks();cC();dC();zd=i=>isFinite(i)?Number(i):0,nU=i=>{var t;return(t=i.isConnected)!==null&&t!==void 0?t:!i.ownerDocument||!(i.ownerDocument.compareDocumentPosition(i)&1)},oU=(i,t,e)=>{var n,o;if(!nU(i))return;let s=i.scrollLeft,r=i.scrollTop,a=zd((n=t.left)!==null&&n!==void 0?n:s),l=zd((o=t.top)!==null&&o!==void 0?o:r);if(a===s&&l===r)return;let c=Js(HTMLElement.prototype,"scroll",aC),d=Js(Object.getPrototypeOf(i),"scroll",c).bind(i);if(t.behavior!=="smooth"){d(a,l);return}let p=()=>{window.removeEventListener("wheel",h),window.removeEventListener("touchmove",h)},u=()=>{p();let g=i.nodeType===9;i.dispatchEvent(lC(g))},m=Object.assign(Object.assign({},e),{timeStamp:Ud(),startX:s,startY:r,targetX:a,targetY:l,rafId:0,method:d,callback:u}),h=()=>{window.cancelAnimationFrame(m.rafId),p()};window.addEventListener("wheel",h,{passive:!0,once:!0}),window.addEventListener("touchmove",h,{passive:!0,once:!0}),mf(m)},sU=i=>i.window===i,pf=i=>(t,e,n)=>{let[o,s]=sU(t)?[sl(t.document.documentElement),"Window"]:[t,"Element"],r=e!=null?e:{};if(!Bd(r))throw new TypeError(cf(i,s));if(!$d(r.behavior))throw new TypeError(Fd(i,s,r.behavior));i==="scrollBy"&&(r.left=zd(r.left)+o.scrollLeft,r.top=zd(r.top)+o.scrollTop),oU(o,r,n)},rl=pf("scroll"),al=pf("scrollTo"),ll=pf("scrollBy"),hf=rl,rU=al,aU=ll,lU=rl,cU=al,dU=ll});var uC,fC,mU,pU,mC,pC,hU,uU,hC,uf,fU,gU,Wd,vU,EU,gC,ff,gf=v(()=>{Ks();jd();uC=i=>{switch(i){case"horizontal-tb":case"lr":case"lr-tb":case"rl":case"rl-tb":return 0;case"vertical-rl":case"tb":case"tb-rl":return 1;case"vertical-lr":case"tb-lr":return 2;case"sideways-rl":return 3;case"sideways-lr":return 4}return 0},fC=(i,t,e,n)=>{let o=0;switch(t||(o^=2),i){case 0:o=o>>1|(o&1)<<1,[e,n]=[n,e];break;case 1:case 3:o^=1;break;case 4:o^=2;break}return[o,e,n]},mU=i=>(fC(uC(i.writingMode),i.direction!=="rtl",void 0,void 0)[0]&1)===1,pU=(i,t,e)=>{let[n,o,s]=fC(t,e,i.block||"start",i.inline||"nearest");return[o,s].map((r,a)=>{switch(r){case"center":return 1;case"nearest":return 0;default:{let l=n>>a&1;return r==="start"==!l?2:3}}})},mC=(i,t,e,n,o,s,r)=>i!==0?i:o<t&&s>e||o>t&&s<e?null:o<=t&&r<=n||s>=e&&r>=n?2:s>e&&r<n||o<t&&r>n?3:null,pC=i=>i!=="visible"&&i!=="clip",hU=i=>{var t;try{return((t=i.ownerDocument.defaultView)===null||t===void 0?void 0:t.frameElement)||null}catch(e){return null}},uU=(i,t)=>i.clientHeight<i.scrollHeight||i.clientWidth<i.scrollWidth?pC(t.overflowY)||pC(t.overflowX)||i===sl(i):!1,hC=i=>{let t=i.parentNode,e=i.parentElement;if(e===null&&t!==null){if(t.nodeType===11)return t.host;if(t.nodeType===9)return hU(i)}return e},uf=(i,t,e)=>i<t?t:i>e?e:i,fU=i=>["scroll-margin","scroll-snap-margin"].filter(t=>t in i.documentElement.style)[0],gU=(i,t,e)=>{let{top:n,right:o,bottom:s,left:r}=t,a=fU(i.ownerDocument);if(!a)return[n,o,s,r];let l=c=>{let d=e.getPropertyValue(`${a}-${c}`);return parseInt(d,10)||0};return[n-l("top"),o+l("right"),s+l("bottom"),r-l("left")]},Wd=(i,t,e)=>{switch(i){case 1:return(t+e)/2;case 3:return e;case 2:case 0:return t}},vU=(i,t)=>{var e,n,o;let s=(e=i.ownerDocument.defaultView)===null||e===void 0?void 0:e.visualViewport,[r,a,l,c]=i===sl(i)?[0,0,(n=s==null?void 0:s.width)!==null&&n!==void 0?n:i.clientWidth,(o=s==null?void 0:s.height)!==null&&o!==void 0?o:i.clientHeight]:[t.left,t.top,i.clientWidth,i.clientHeight],d=r+i.clientLeft,p=a+i.clientTop,u=d+l,m=p+c;return[p,u,m,d]},EU=(i,t)=>{let e=[],n=i.ownerDocument,o=n.defaultView;if(!o)return e;let s=window.getComputedStyle(i),r=s.direction!=="rtl",a=uC(s.writingMode||s.getPropertyValue("-webkit-writing-mode")||s.getPropertyValue("-ms-writing-mode")),[l,c]=pU(t,a,r),[d,p,u,m]=gU(i,i.getBoundingClientRect(),s);for(let h=hC(i);h!==null;h=hC(h)){if(n!==h.ownerDocument){if(n=h.ownerDocument,o=n.defaultView,!o)break;let{left:j,top:W}=h.getBoundingClientRect();d+=W,p+=j,u+=W,m+=j}let g=o.getComputedStyle(h);if(g.position==="fixed")break;if(!uU(h,g))continue;let f=h.getBoundingClientRect(),[E,b,L,S]=vU(h,f),y=mC(l,S,b,h.clientWidth,m,p,p-m),_=mC(c,E,L,h.clientHeight,d,u,u-d),w=y===null?0:Wd(y,m,p)-Wd(y,S,b),O=_===null?0:Wd(_,d,u)-Wd(_,E,L),D=mU(g)?uf(w,-h.scrollWidth+h.clientWidth-h.scrollLeft,-h.scrollLeft):uf(w,-h.scrollLeft,h.scrollWidth-h.clientWidth-h.scrollLeft),z=uf(O,-h.scrollTop,h.scrollHeight-h.clientHeight-h.scrollTop);e.push([h,{left:h.scrollLeft+D,top:h.scrollTop+z,behavior:t.behavior}]),d=Math.max(d-z,E),p=Math.min(p-D,b),u=Math.min(u-z,L),m=Math.max(m-D,S)}return e},gC=(i,t,e)=>{let n=t||{};if(!$d(n.behavior))throw new TypeError(Fd("scrollIntoView","Element",n.behavior));EU(i,n).forEach(([s,r])=>{hf(s,r,e)})},ff=gC});var Xs,vf,Ef,bf,Vd,_f,yf,Tf,xf=v(()=>{Ks();jd();Xs=(i,t)=>e=>{if(Ys(e))return;let n={scroll:rl,scrollTo:al,scrollBy:ll}[i];t(i,function(){let o=arguments;if(arguments.length===1){n(this,o[0],e);return}let s=o[0],r=o[1];n(this,{left:s,top:r})})},vf=Xs("scroll",Zs),Ef=Xs("scrollTo",Zs),bf=Xs("scrollBy",Zs),Vd=(i,t)=>{df(t),Js(window,i),window[i]=t},_f=Xs("scroll",Vd),yf=Xs("scrollTo",Vd),Tf=Xs("scrollBy",Vd)});var wf,Lf=v(()=>{Ks();gf();wf=i=>{Ys(i)||Zs("scrollIntoView",function(){let e=arguments,n=e.length===0?{}:e.length===1&&!Bd(e[0])?{block:e[0]?"start":"end"}:e[0];ff(this,n,i)})}});var bU,vC=v(()=>{Ks();xf();Lf();xf();Lf();bU=i=>{Ys(i)||(vf(i),Ef(i),bf(i),wf(i),_f(i),yf(i),Tf(i))}});var EC={};ut(EC,{elementScroll:()=>hf,elementScrollBy:()=>aU,elementScrollByPolyfill:()=>bf,elementScrollIntoView:()=>ff,elementScrollIntoViewPolyfill:()=>wf,elementScrollPolyfill:()=>vf,elementScrollTo:()=>rU,elementScrollToPolyfill:()=>Ef,modifyWindow:()=>Vd,polyfill:()=>bU,scroll:()=>rl,scrollBy:()=>ll,scrollIntoView:()=>gC,scrollTo:()=>al,windowScroll:()=>lU,windowScrollBy:()=>dU,windowScrollByPolyfill:()=>Tf,windowScrollPolyfill:()=>_f,windowScrollTo:()=>cU,windowScrollToPolyfill:()=>yf});var bC=v(()=>{jd();gf();vC()});var _C=eo(()=>{(function(){var i={},t={};(function(e,n){function o(k){if(typeof k=="number")return k;var tt={};for(var Q in k)tt[Q]=k[Q];return tt}function s(){this._delay=0,this._endDelay=0,this._fill="none",this._iterationStart=0,this._iterations=1,this._duration=0,this._playbackRate=1,this._direction="normal",this._easing="linear",this._easingFunction=D}function r(){return e.isDeprecated("Invalid timing inputs","2016-03-02","TypeError exceptions will be thrown instead.",!0)}function a(k,tt,Q){var ht=new s;return tt&&(ht.fill="both",ht.duration="auto"),typeof k!="number"||isNaN(k)?k!==void 0&&Object.getOwnPropertyNames(k).forEach(function(at){if(k[at]!="auto"){if((typeof ht[at]=="number"||at=="duration")&&(typeof k[at]!="number"||isNaN(k[at]))||at=="fill"&&w.indexOf(k[at])==-1||at=="direction"&&O.indexOf(k[at])==-1||at=="playbackRate"&&k[at]!==1&&e.isDeprecated("AnimationEffectTiming.playbackRate","2014-11-28","Use Animation.playbackRate instead."))return;ht[at]=k[at]}}):ht.duration=k,ht}function l(k){return typeof k=="number"&&(k=isNaN(k)?{duration:0}:{duration:k}),k}function c(k,tt){return k=e.numericTimingToObject(k),a(k,tt)}function d(k,tt,Q,ht){return k<0||k>1||Q<0||Q>1?D:function(at){function Dt(Vm,Fl,di){return 3*Vm*(1-di)*(1-di)*di+3*Fl*(1-di)*di*di+di*di*di}if(at<=0){var Zt=0;return k>0?Zt=tt/k:!tt&&Q>0&&(Zt=ht/Q),Zt*at}if(at>=1){var Ni=0;return Q<1?Ni=(ht-1)/(Q-1):Q==1&&k<1&&(Ni=(tt-1)/(k-1)),1+Ni*(at-1)}for(var Ti=0,Qn=1;Ti<Qn;){var yn=(Ti+Qn)/2,$l=Dt(k,Q,yn);if(Math.abs(at-$l)<1e-5)return Dt(tt,ht,yn);$l<at?Ti=yn:Qn=yn}return Dt(tt,ht,yn)}}function p(k,tt){return function(Q){if(Q>=1)return 1;var ht=1/k;return(Q+=tt*ht)-Q%ht}}function u(k){K||(K=document.createElement("div").style),K.animationTimingFunction="",K.animationTimingFunction=k;var tt=K.animationTimingFunction;if(tt==""&&r())throw new TypeError(k+" is not a valid value for easing");return tt}function m(k){if(k=="linear")return D;var tt=_t.exec(k);if(tt)return d.apply(this,tt.slice(1).map(Number));var Q=nt.exec(k);if(Q)return p(Number(Q[1]),W);var ht=Nt.exec(k);return ht?p(Number(ht[1]),{start:z,middle:j,end:W}[ht[2]]):I[k]||D}function h(k){return Math.abs(g(k)/k.playbackRate)}function g(k){return k.duration===0||k.iterations===0?0:k.duration*k.iterations}function f(k,tt,Q){if(tt==null)return Ut;var ht=Q.delay+k+Q.endDelay;return tt<Math.min(Q.delay,ht)?Ee:tt>=Math.min(Q.delay+k,ht)?oe:qe}function E(k,tt,Q,ht,at){switch(ht){case Ee:return tt=="backwards"||tt=="both"?0:null;case qe:return Q-at;case oe:return tt=="forwards"||tt=="both"?k:null;case Ut:return null}}function b(k,tt,Q,ht,at){var Dt=at;return k===0?tt!==Ee&&(Dt+=Q):Dt+=ht/k,Dt}function L(k,tt,Q,ht,at,Dt){var Zt=k===1/0?tt%1:k%1;return Zt!==0||Q!==oe||ht===0||at===0&&Dt!==0||(Zt=1),Zt}function S(k,tt,Q,ht){return k===oe&&tt===1/0?1/0:Q===1?Math.floor(ht)-1:Math.floor(ht)}function y(k,tt,Q){var ht=k;if(k!=="normal"&&k!=="reverse"){var at=tt;k==="alternate-reverse"&&(at+=1),ht="normal",at!==1/0&&at%2!=0&&(ht="reverse")}return ht==="normal"?Q:1-Q}function _(k,tt,Q){var ht=f(k,tt,Q),at=E(k,Q.fill,tt,ht,Q.delay);if(at===null)return null;var Dt=b(Q.duration,ht,Q.iterations,at,Q.iterationStart),Zt=L(Dt,Q.iterationStart,ht,Q.iterations,at,Q.duration),Ni=S(ht,Q.iterations,Zt,Dt),Ti=y(Q.direction,Ni,Zt);return Q._easingFunction(Ti)}var w="backwards|forwards|both|none".split("|"),O="reverse|alternate|alternate-reverse".split("|"),D=function(k){return k};s.prototype={_setMember:function(k,tt){this["_"+k]=tt,this._effect&&(this._effect._timingInput[k]=tt,this._effect._timing=e.normalizeTimingInput(this._effect._timingInput),this._effect.activeDuration=e.calculateActiveDuration(this._effect._timing),this._effect._animation&&this._effect._animation._rebuildUnderlyingAnimation())},get playbackRate(){return this._playbackRate},set delay(k){this._setMember("delay",k)},get delay(){return this._delay},set endDelay(k){this._setMember("endDelay",k)},get endDelay(){return this._endDelay},set fill(k){this._setMember("fill",k)},get fill(){return this._fill},set iterationStart(k){if((isNaN(k)||k<0)&&r())throw new TypeError("iterationStart must be a non-negative number, received: "+k);this._setMember("iterationStart",k)},get iterationStart(){return this._iterationStart},set duration(k){if(k!="auto"&&(isNaN(k)||k<0)&&r())throw new TypeError("duration must be non-negative or auto, received: "+k);this._setMember("duration",k)},get duration(){return this._duration},set direction(k){this._setMember("direction",k)},get direction(){return this._direction},set easing(k){this._easingFunction=m(u(k)),this._setMember("easing",k)},get easing(){return this._easing},set iterations(k){if((isNaN(k)||k<0)&&r())throw new TypeError("iterations must be non-negative, received: "+k);this._setMember("iterations",k)},get iterations(){return this._iterations}};var z=1,j=.5,W=0,I={ease:d(.25,.1,.25,1),"ease-in":d(.42,0,1,1),"ease-out":d(0,0,.58,1),"ease-in-out":d(.42,0,.58,1),"step-start":p(1,z),"step-middle":p(1,j),"step-end":p(1,W)},K=null,ot="\\s*(-?\\d+\\.?\\d*|-?\\.\\d+)\\s*",_t=new RegExp("cubic-bezier\\("+ot+","+ot+","+ot+","+ot+"\\)"),nt=/steps\(\s*(\d+)\s*\)/,Nt=/steps\(\s*(\d+)\s*,\s*(start|middle|end)\s*\)/,Ut=0,Ee=1,oe=2,qe=3;e.cloneTimingInput=o,e.makeTiming=a,e.numericTimingToObject=l,e.normalizeTimingInput=c,e.calculateActiveDuration=h,e.calculateIterationProgress=_,e.calculatePhase=f,e.normalizeEasing=u,e.parseEasingFunction=m})(i),function(e,n){function o(m,h){return m in u&&u[m][h]||h}function s(m){return m==="display"||m.lastIndexOf("animation",0)===0||m.lastIndexOf("transition",0)===0}function r(m,h,g){if(!s(m)){var f=c[m];if(f){d.style[m]=h;for(var E in f){var b=f[E],L=d.style[b];g[b]=o(b,L)}}else g[m]=o(m,h)}}function a(m){var h=[];for(var g in m)if(!(g in["easing","offset","composite"])){var f=m[g];Array.isArray(f)||(f=[f]);for(var E,b=f.length,L=0;L<b;L++)E={},E.offset="offset"in m?m.offset:b==1?1:L/(b-1),"easing"in m&&(E.easing=m.easing),"composite"in m&&(E.composite=m.composite),E[g]=f[L],h.push(E)}return h.sort(function(S,y){return S.offset-y.offset}),h}function l(m){function h(){var S=g.length;g[S-1].offset==null&&(g[S-1].offset=1),S>1&&g[0].offset==null&&(g[0].offset=0);for(var y=0,_=g[0].offset,w=1;w<S;w++){var O=g[w].offset;if(O!=null){for(var D=1;D<w-y;D++)g[y+D].offset=_+(O-_)*D/(w-y);y=w,_=O}}}if(m==null)return[];window.Symbol&&Symbol.iterator&&Array.prototype.from&&m[Symbol.iterator]&&(m=Array.from(m)),Array.isArray(m)||(m=a(m));for(var g=m.map(function(S){var y={};for(var _ in S){var w=S[_];if(_=="offset"){if(w!=null){if(w=Number(w),!isFinite(w))throw new TypeError("Keyframe offsets must be numbers.");if(w<0||w>1)throw new TypeError("Keyframe offsets must be between 0 and 1.")}}else if(_=="composite"){if(w=="add"||w=="accumulate")throw{type:DOMException.NOT_SUPPORTED_ERR,name:"NotSupportedError",message:"add compositing is not supported"};if(w!="replace")throw new TypeError("Invalid composite mode "+w+".")}else w=_=="easing"?e.normalizeEasing(w):""+w;r(_,w,y)}return y.offset==null&&(y.offset=null),y.easing==null&&(y.easing="linear"),y}),f=!0,E=-1/0,b=0;b<g.length;b++){var L=g[b].offset;if(L!=null){if(L<E)throw new TypeError("Keyframes are not loosely sorted by offset. Sort or specify offsets.");E=L}else f=!1}return g=g.filter(function(S){return S.offset>=0&&S.offset<=1}),f||h(),g}var c={background:["backgroundImage","backgroundPosition","backgroundSize","backgroundRepeat","backgroundAttachment","backgroundOrigin","backgroundClip","backgroundColor"],border:["borderTopColor","borderTopStyle","borderTopWidth","borderRightColor","borderRightStyle","borderRightWidth","borderBottomColor","borderBottomStyle","borderBottomWidth","borderLeftColor","borderLeftStyle","borderLeftWidth"],borderBottom:["borderBottomWidth","borderBottomStyle","borderBottomColor"],borderColor:["borderTopColor","borderRightColor","borderBottomColor","borderLeftColor"],borderLeft:["borderLeftWidth","borderLeftStyle","borderLeftColor"],borderRadius:["borderTopLeftRadius","borderTopRightRadius","borderBottomRightRadius","borderBottomLeftRadius"],borderRight:["borderRightWidth","borderRightStyle","borderRightColor"],borderTop:["borderTopWidth","borderTopStyle","borderTopColor"],borderWidth:["borderTopWidth","borderRightWidth","borderBottomWidth","borderLeftWidth"],flex:["flexGrow","flexShrink","flexBasis"],font:["fontFamily","fontSize","fontStyle","fontVariant","fontWeight","lineHeight"],margin:["marginTop","marginRight","marginBottom","marginLeft"],outline:["outlineColor","outlineStyle","outlineWidth"],padding:["paddingTop","paddingRight","paddingBottom","paddingLeft"]},d=document.createElementNS("http://www.w3.org/1999/xhtml","div"),p={thin:"1px",medium:"3px",thick:"5px"},u={borderBottomWidth:p,borderLeftWidth:p,borderRightWidth:p,borderTopWidth:p,fontSize:{"xx-small":"60%","x-small":"75%",small:"89%",medium:"100%",large:"120%","x-large":"150%","xx-large":"200%"},fontWeight:{normal:"400",bold:"700"},outlineWidth:p,textShadow:{none:"0px 0px 0px transparent"},boxShadow:{none:"0px 0px 0px 0px transparent"}};e.convertToArrayForm=a,e.normalizeKeyframes=l}(i),function(e){var n={};e.isDeprecated=function(o,s,r,a){var l=a?"are":"is",c=new Date,d=new Date(s);return d.setMonth(d.getMonth()+3),!(c<d&&(o in n||console.warn("Web Animations: "+o+" "+l+" deprecated and will stop working on "+d.toDateString()+". "+r),n[o]=!0,1))},e.deprecated=function(o,s,r,a){var l=a?"are":"is";if(e.isDeprecated(o,s,r,a))throw new Error(o+" "+l+" no longer supported. "+r)}}(i),function(){if(document.documentElement.animate){var e=document.documentElement.animate([],0),n=!0;if(e&&(n=!1,"play|currentTime|pause|reverse|playbackRate|cancel|finish|startTime|playState".split("|").forEach(function(o){e[o]===void 0&&(n=!0)})),!n)return}(function(o,s,r){function a(c){for(var d={},p=0;p<c.length;p++)for(var u in c[p])if(u!="offset"&&u!="easing"&&u!="composite"){var m={offset:c[p].offset,easing:c[p].easing,value:c[p][u]};d[u]=d[u]||[],d[u].push(m)}for(var h in d){var g=d[h];if(g[0].offset!=0||g[g.length-1].offset!=1)throw{type:DOMException.NOT_SUPPORTED_ERR,name:"NotSupportedError",message:"Partial keyframes are not supported"}}return d}function l(c){var d=[];for(var p in c)for(var u=c[p],m=0;m<u.length-1;m++){var h=m,g=m+1,f=u[h].offset,E=u[g].offset,b=f,L=E;m==0&&(b=-1/0,E==0&&(g=h)),m==u.length-2&&(L=1/0,f==1&&(h=g)),d.push({applyFrom:b,applyTo:L,startOffset:u[h].offset,endOffset:u[g].offset,easingFunction:o.parseEasingFunction(u[h].easing),property:p,interpolation:s.propertyInterpolation(p,u[h].value,u[g].value)})}return d.sort(function(S,y){return S.startOffset-y.startOffset}),d}s.convertEffectInput=function(c){var d=o.normalizeKeyframes(c),p=a(d),u=l(p);return function(m,h){if(h!=null)u.filter(function(f){return h>=f.applyFrom&&h<f.applyTo}).forEach(function(f){var E=h-f.startOffset,b=f.endOffset-f.startOffset,L=b==0?0:f.easingFunction(E/b);s.apply(m,f.property,f.interpolation(L))});else for(var g in p)g!="offset"&&g!="easing"&&g!="composite"&&s.clear(m,g)}}})(i,t),function(o,s,r){function a(m){return m.replace(/-(.)/g,function(h,g){return g.toUpperCase()})}function l(m,h,g){p[g]=p[g]||[],p[g].push([m,h])}function c(m,h,g){for(var f=0;f<g.length;f++)l(m,h,a(g[f]))}function d(m,h,g){var f=m;/-/.test(m)&&!o.isDeprecated("Hyphenated property names","2016-03-22","Use camelCase instead.",!0)&&(f=a(m)),h!="initial"&&g!="initial"||(h=="initial"&&(h=u[f]),g=="initial"&&(g=u[f]));for(var E=h==g?[]:p[f],b=0;E&&b<E.length;b++){var L=E[b][0](h),S=E[b][0](g);if(L!==void 0&&S!==void 0){var y=E[b][1](L,S);if(y){var _=s.Interpolation.apply(null,y);return function(w){return w==0?h:w==1?g:_(w)}}}}return s.Interpolation(!1,!0,function(w){return w?g:h})}var p={};s.addPropertiesHandler=c;var u={backgroundColor:"transparent",backgroundPosition:"0% 0%",borderBottomColor:"currentColor",borderBottomLeftRadius:"0px",borderBottomRightRadius:"0px",borderBottomWidth:"3px",borderLeftColor:"currentColor",borderLeftWidth:"3px",borderRightColor:"currentColor",borderRightWidth:"3px",borderSpacing:"2px",borderTopColor:"currentColor",borderTopLeftRadius:"0px",borderTopRightRadius:"0px",borderTopWidth:"3px",bottom:"auto",clip:"rect(0px, 0px, 0px, 0px)",color:"black",fontSize:"100%",fontWeight:"400",height:"auto",left:"auto",letterSpacing:"normal",lineHeight:"120%",marginBottom:"0px",marginLeft:"0px",marginRight:"0px",marginTop:"0px",maxHeight:"none",maxWidth:"none",minHeight:"0px",minWidth:"0px",opacity:"1.0",outlineColor:"invert",outlineOffset:"0px",outlineWidth:"3px",paddingBottom:"0px",paddingLeft:"0px",paddingRight:"0px",paddingTop:"0px",right:"auto",strokeDasharray:"none",strokeDashoffset:"0px",textIndent:"0px",textShadow:"0px 0px 0px transparent",top:"auto",transform:"",verticalAlign:"0px",visibility:"visible",width:"auto",wordSpacing:"normal",zIndex:"auto"};s.propertyInterpolation=d}(i,t),function(o,s,r){function a(l){var c=o.calculateActiveDuration(l),d=function(p){return o.calculateIterationProgress(c,p,l)};return d._totalDuration=l.delay+c+l.endDelay,d}s.KeyframeEffect=function(l,c,d,p){var u,m=a(o.normalizeTimingInput(d)),h=s.convertEffectInput(c),g=function(){h(l,u)};return g._update=function(f){return(u=m(f))!==null},g._clear=function(){h(l,null)},g._hasSameTarget=function(f){return l===f},g._target=l,g._totalDuration=m._totalDuration,g._id=p,g}}(i,t),function(o,s){function r(f,E){return!(!E.namespaceURI||E.namespaceURI.indexOf("/svg")==-1)&&(d in f||(f[d]=/Trident|MSIE|IEMobile|Edge|Android 4/i.test(f.navigator.userAgent)),f[d])}function a(f,E,b){b.enumerable=!0,b.configurable=!0,Object.defineProperty(f,E,b)}function l(f){this._element=f,this._surrogateStyle=document.createElementNS("http://www.w3.org/1999/xhtml","div").style,this._style=f.style,this._length=0,this._isAnimatedProperty={},this._updateSvgTransformAttr=r(window,f),this._savedTransformAttr=null;for(var E=0;E<this._style.length;E++){var b=this._style[E];this._surrogateStyle[b]=this._style[b]}this._updateIndices()}function c(f){if(!f._webAnimationsPatchedStyle){var E=new l(f);try{a(f,"style",{get:function(){return E}})}catch(b){f.style._set=function(L,S){f.style[L]=S},f.style._clear=function(L){f.style[L]=""}}f._webAnimationsPatchedStyle=f.style}}var d="_webAnimationsUpdateSvgTransformAttr",p={cssText:1,length:1,parentRule:1},u={getPropertyCSSValue:1,getPropertyPriority:1,getPropertyValue:1,item:1,removeProperty:1,setProperty:1},m={removeProperty:1,setProperty:1};l.prototype={get cssText(){return this._surrogateStyle.cssText},set cssText(f){for(var E={},b=0;b<this._surrogateStyle.length;b++)E[this._surrogateStyle[b]]=!0;this._surrogateStyle.cssText=f,this._updateIndices();for(var b=0;b<this._surrogateStyle.length;b++)E[this._surrogateStyle[b]]=!0;for(var L in E)this._isAnimatedProperty[L]||this._style.setProperty(L,this._surrogateStyle.getPropertyValue(L))},get length(){return this._surrogateStyle.length},get parentRule(){return this._style.parentRule},_updateIndices:function(){for(;this._length<this._surrogateStyle.length;)Object.defineProperty(this,this._length,{configurable:!0,enumerable:!1,get:function(f){return function(){return this._surrogateStyle[f]}}(this._length)}),this._length++;for(;this._length>this._surrogateStyle.length;)this._length--,Object.defineProperty(this,this._length,{configurable:!0,enumerable:!1,value:void 0})},_set:function(f,E){this._style[f]=E,this._isAnimatedProperty[f]=!0,this._updateSvgTransformAttr&&o.unprefixedPropertyName(f)=="transform"&&(this._savedTransformAttr==null&&(this._savedTransformAttr=this._element.getAttribute("transform")),this._element.setAttribute("transform",o.transformToSvgMatrix(E)))},_clear:function(f){this._style[f]=this._surrogateStyle[f],this._updateSvgTransformAttr&&o.unprefixedPropertyName(f)=="transform"&&(this._savedTransformAttr?this._element.setAttribute("transform",this._savedTransformAttr):this._element.removeAttribute("transform"),this._savedTransformAttr=null),delete this._isAnimatedProperty[f]}};for(var h in u)l.prototype[h]=function(f,E){return function(){var b=this._surrogateStyle[f].apply(this._surrogateStyle,arguments);return E&&(this._isAnimatedProperty[arguments[0]]||this._style[f].apply(this._style,arguments),this._updateIndices()),b}}(h,h in m);for(var g in document.documentElement.style)g in p||g in u||function(f){a(l.prototype,f,{get:function(){return this._surrogateStyle[f]},set:function(E){this._surrogateStyle[f]=E,this._updateIndices(),this._isAnimatedProperty[f]||(this._style[f]=E)}})}(g);o.apply=function(f,E,b){c(f),f.style._set(o.propertyName(E),b)},o.clear=function(f,E){f._webAnimationsPatchedStyle&&f.style._clear(o.propertyName(E))}}(t),function(o){window.Element.prototype.animate=function(s,r){var a="";return r&&r.id&&(a=r.id),o.timeline._play(o.KeyframeEffect(this,s,r,a))}}(t),function(o,s){function r(a,l,c){if(typeof a=="number"&&typeof l=="number")return a*(1-c)+l*c;if(typeof a=="boolean"&&typeof l=="boolean")return c<.5?a:l;if(a.length==l.length){for(var d=[],p=0;p<a.length;p++)d.push(r(a[p],l[p],c));return d}throw"Mismatched interpolation arguments "+a+":"+l}o.Interpolation=function(a,l,c){return function(d){return c(r(a,l,d))}}}(t),function(o,s){function r(c,d,p){return Math.max(Math.min(c,p),d)}function a(c,d,p){var u=o.dot(c,d);u=r(u,-1,1);var m=[];if(u===1)m=c;else for(var h=Math.acos(u),g=1*Math.sin(p*h)/Math.sqrt(1-u*u),f=0;f<4;f++)m.push(c[f]*(Math.cos(p*h)-u*g)+d[f]*g);return m}var l=function(){function c(u,m){for(var h=[[0,0,0,0],[0,0,0,0],[0,0,0,0],[0,0,0,0]],g=0;g<4;g++)for(var f=0;f<4;f++)for(var E=0;E<4;E++)h[g][f]+=m[g][E]*u[E][f];return h}function d(u){return u[0][2]==0&&u[0][3]==0&&u[1][2]==0&&u[1][3]==0&&u[2][0]==0&&u[2][1]==0&&u[2][2]==1&&u[2][3]==0&&u[3][2]==0&&u[3][3]==1}function p(u,m,h,g,f){for(var E=[[1,0,0,0],[0,1,0,0],[0,0,1,0],[0,0,0,1]],b=0;b<4;b++)E[b][3]=f[b];for(var b=0;b<3;b++)for(var L=0;L<3;L++)E[3][b]+=u[L]*E[L][b];var S=g[0],y=g[1],_=g[2],w=g[3],O=[[1,0,0,0],[0,1,0,0],[0,0,1,0],[0,0,0,1]];O[0][0]=1-2*(y*y+_*_),O[0][1]=2*(S*y-_*w),O[0][2]=2*(S*_+y*w),O[1][0]=2*(S*y+_*w),O[1][1]=1-2*(S*S+_*_),O[1][2]=2*(y*_-S*w),O[2][0]=2*(S*_-y*w),O[2][1]=2*(y*_+S*w),O[2][2]=1-2*(S*S+y*y),E=c(E,O);var D=[[1,0,0,0],[0,1,0,0],[0,0,1,0],[0,0,0,1]];h[2]&&(D[2][1]=h[2],E=c(E,D)),h[1]&&(D[2][1]=0,D[2][0]=h[0],E=c(E,D)),h[0]&&(D[2][0]=0,D[1][0]=h[0],E=c(E,D));for(var b=0;b<3;b++)for(var L=0;L<3;L++)E[b][L]*=m[b];return d(E)?[E[0][0],E[0][1],E[1][0],E[1][1],E[3][0],E[3][1]]:E[0].concat(E[1],E[2],E[3])}return p}();o.composeMatrix=l,o.quat=a}(t),function(o,s,r){o.sequenceNumber=0;var a=function(l,c,d){this.target=l,this.currentTime=c,this.timelineTime=d,this.type="finish",this.bubbles=!1,this.cancelable=!1,this.currentTarget=l,this.defaultPrevented=!1,this.eventPhase=Event.AT_TARGET,this.timeStamp=Date.now()};s.Animation=function(l){this.id="",l&&l._id&&(this.id=l._id),this._sequenceNumber=o.sequenceNumber++,this._currentTime=0,this._startTime=null,this._paused=!1,this._playbackRate=1,this._inTimeline=!0,this._finishedFlag=!0,this.onfinish=null,this._finishHandlers=[],this._effect=l,this._inEffect=this._effect._update(0),this._idle=!0,this._currentTimePending=!1},s.Animation.prototype={_ensureAlive:function(){this.playbackRate<0&&this.currentTime===0?this._inEffect=this._effect._update(-1):this._inEffect=this._effect._update(this.currentTime),this._inTimeline||!this._inEffect&&this._finishedFlag||(this._inTimeline=!0,s.timeline._animations.push(this))},_tickCurrentTime:function(l,c){l!=this._currentTime&&(this._currentTime=l,this._isFinished&&!c&&(this._currentTime=this._playbackRate>0?this._totalDuration:0),this._ensureAlive())},get currentTime(){return this._idle||this._currentTimePending?null:this._currentTime},set currentTime(l){l=+l,isNaN(l)||(s.restart(),this._paused||this._startTime==null||(this._startTime=this._timeline.currentTime-l/this._playbackRate),this._currentTimePending=!1,this._currentTime!=l&&(this._idle&&(this._idle=!1,this._paused=!0),this._tickCurrentTime(l,!0),s.applyDirtiedAnimation(this)))},get startTime(){return this._startTime},set startTime(l){l=+l,isNaN(l)||this._paused||this._idle||(this._startTime=l,this._tickCurrentTime((this._timeline.currentTime-this._startTime)*this.playbackRate),s.applyDirtiedAnimation(this))},get playbackRate(){return this._playbackRate},set playbackRate(l){if(l!=this._playbackRate){var c=this.currentTime;this._playbackRate=l,this._startTime=null,this.playState!="paused"&&this.playState!="idle"&&(this._finishedFlag=!1,this._idle=!1,this._ensureAlive(),s.applyDirtiedAnimation(this)),c!=null&&(this.currentTime=c)}},get _isFinished(){return!this._idle&&(this._playbackRate>0&&this._currentTime>=this._totalDuration||this._playbackRate<0&&this._currentTime<=0)},get _totalDuration(){return this._effect._totalDuration},get playState(){return this._idle?"idle":this._startTime==null&&!this._paused&&this.playbackRate!=0||this._currentTimePending?"pending":this._paused?"paused":this._isFinished?"finished":"running"},_rewind:function(){if(this._playbackRate>=0)this._currentTime=0;else{if(!(this._totalDuration<1/0))throw new DOMException("Unable to rewind negative playback rate animation with infinite duration","InvalidStateError");this._currentTime=this._totalDuration}},play:function(){this._paused=!1,(this._isFinished||this._idle)&&(this._rewind(),this._startTime=null),this._finishedFlag=!1,this._idle=!1,this._ensureAlive(),s.applyDirtiedAnimation(this)},pause:function(){this._isFinished||this._paused||this._idle?this._idle&&(this._rewind(),this._idle=!1):this._currentTimePending=!0,this._startTime=null,this._paused=!0},finish:function(){this._idle||(this.currentTime=this._playbackRate>0?this._totalDuration:0,this._startTime=this._totalDuration-this.currentTime,this._currentTimePending=!1,s.applyDirtiedAnimation(this))},cancel:function(){this._inEffect&&(this._inEffect=!1,this._idle=!0,this._paused=!1,this._finishedFlag=!0,this._currentTime=0,this._startTime=null,this._effect._update(null),s.applyDirtiedAnimation(this))},reverse:function(){this.playbackRate*=-1,this.play()},addEventListener:function(l,c){typeof c=="function"&&l=="finish"&&this._finishHandlers.push(c)},removeEventListener:function(l,c){if(l=="finish"){var d=this._finishHandlers.indexOf(c);d>=0&&this._finishHandlers.splice(d,1)}},_fireEvents:function(l){if(this._isFinished){if(!this._finishedFlag){var c=new a(this,this._currentTime,l),d=this._finishHandlers.concat(this.onfinish?[this.onfinish]:[]);setTimeout(function(){d.forEach(function(p){p.call(c.target,c)})},0),this._finishedFlag=!0}}else this._finishedFlag=!1},_tick:function(l,c){this._idle||this._paused||(this._startTime==null?c&&(this.startTime=l-this._currentTime/this.playbackRate):this._isFinished||this._tickCurrentTime((l-this._startTime)*this.playbackRate)),c&&(this._currentTimePending=!1,this._fireEvents(l))},get _needsTick(){return this.playState in{pending:1,running:1}||!this._finishedFlag},_targetAnimations:function(){var l=this._effect._target;return l._activeAnimations||(l._activeAnimations=[]),l._activeAnimations},_markTarget:function(){var l=this._targetAnimations();l.indexOf(this)===-1&&l.push(this)},_unmarkTarget:function(){var l=this._targetAnimations(),c=l.indexOf(this);c!==-1&&l.splice(c,1)}}}(i,t),function(o,s,r){function a(y){var _=m;m=[],y<S.currentTime&&(y=S.currentTime),S._animations.sort(l),S._animations=p(y,!0,S._animations)[0],_.forEach(function(w){w[1](y)}),d(),g=void 0}function l(y,_){return y._sequenceNumber-_._sequenceNumber}function c(){this._animations=[],this.currentTime=window.performance&&performance.now?performance.now():0}function d(){b.forEach(function(y){y()}),b.length=0}function p(y,_,w){L=!0,E=!1,s.timeline.currentTime=y,f=!1;var O=[],D=[],z=[],j=[];return w.forEach(function(W){W._tick(y,_),W._inEffect?(D.push(W._effect),W._markTarget()):(O.push(W._effect),W._unmarkTarget()),W._needsTick&&(f=!0);var I=W._inEffect||W._needsTick;W._inTimeline=I,I?z.push(W):j.push(W)}),b.push.apply(b,O),b.push.apply(b,D),f&&requestAnimationFrame(function(){}),L=!1,[z,j]}var u=window.requestAnimationFrame,m=[],h=0;window.requestAnimationFrame=function(y){var _=h++;return m.length==0&&u(a),m.push([_,y]),_},window.cancelAnimationFrame=function(y){m.forEach(function(_){_[0]==y&&(_[1]=function(){})})},c.prototype={_play:function(y){y._timing=o.normalizeTimingInput(y.timing);var _=new s.Animation(y);return _._idle=!1,_._timeline=this,this._animations.push(_),s.restart(),s.applyDirtiedAnimation(_),_}};var g=void 0,f=!1,E=!1;s.restart=function(){return f||(f=!0,requestAnimationFrame(function(){}),E=!0),E},s.applyDirtiedAnimation=function(y){if(!L){y._markTarget();var _=y._targetAnimations();_.sort(l),p(s.timeline.currentTime,!1,_.slice())[1].forEach(function(w){var O=S._animations.indexOf(w);O!==-1&&S._animations.splice(O,1)}),d()}};var b=[],L=!1,S=new c;s.timeline=S}(i,t),function(o,s){function r(m,h){for(var g=0,f=0;f<m.length;f++)g+=m[f]*h[f];return g}function a(m,h){return[m[0]*h[0]+m[4]*h[1]+m[8]*h[2]+m[12]*h[3],m[1]*h[0]+m[5]*h[1]+m[9]*h[2]+m[13]*h[3],m[2]*h[0]+m[6]*h[1]+m[10]*h[2]+m[14]*h[3],m[3]*h[0]+m[7]*h[1]+m[11]*h[2]+m[15]*h[3],m[0]*h[4]+m[4]*h[5]+m[8]*h[6]+m[12]*h[7],m[1]*h[4]+m[5]*h[5]+m[9]*h[6]+m[13]*h[7],m[2]*h[4]+m[6]*h[5]+m[10]*h[6]+m[14]*h[7],m[3]*h[4]+m[7]*h[5]+m[11]*h[6]+m[15]*h[7],m[0]*h[8]+m[4]*h[9]+m[8]*h[10]+m[12]*h[11],m[1]*h[8]+m[5]*h[9]+m[9]*h[10]+m[13]*h[11],m[2]*h[8]+m[6]*h[9]+m[10]*h[10]+m[14]*h[11],m[3]*h[8]+m[7]*h[9]+m[11]*h[10]+m[15]*h[11],m[0]*h[12]+m[4]*h[13]+m[8]*h[14]+m[12]*h[15],m[1]*h[12]+m[5]*h[13]+m[9]*h[14]+m[13]*h[15],m[2]*h[12]+m[6]*h[13]+m[10]*h[14]+m[14]*h[15],m[3]*h[12]+m[7]*h[13]+m[11]*h[14]+m[15]*h[15]]}function l(m){var h=m.rad||0;return((m.deg||0)/360+(m.grad||0)/400+(m.turn||0))*(2*Math.PI)+h}function c(m){switch(m.t){case"rotatex":var y=l(m.d[0]);return[1,0,0,0,0,Math.cos(y),Math.sin(y),0,0,-Math.sin(y),Math.cos(y),0,0,0,0,1];case"rotatey":var y=l(m.d[0]);return[Math.cos(y),0,-Math.sin(y),0,0,1,0,0,Math.sin(y),0,Math.cos(y),0,0,0,0,1];case"rotate":case"rotatez":var y=l(m.d[0]);return[Math.cos(y),Math.sin(y),0,0,-Math.sin(y),Math.cos(y),0,0,0,0,1,0,0,0,0,1];case"rotate3d":var _=m.d[0],w=m.d[1],O=m.d[2],y=l(m.d[3]),h=_*_+w*w+O*O;if(h===0)_=1,w=0,O=0;else if(h!==1){var g=Math.sqrt(h);_/=g,w/=g,O/=g}var f=Math.sin(y/2),E=f*Math.cos(y/2),b=f*f;return[1-2*(w*w+O*O)*b,2*(_*w*b+O*E),2*(_*O*b-w*E),0,2*(_*w*b-O*E),1-2*(_*_+O*O)*b,2*(w*O*b+_*E),0,2*(_*O*b+w*E),2*(w*O*b-_*E),1-2*(_*_+w*w)*b,0,0,0,0,1];case"scale":return[m.d[0],0,0,0,0,m.d[1],0,0,0,0,1,0,0,0,0,1];case"scalex":return[m.d[0],0,0,0,0,1,0,0,0,0,1,0,0,0,0,1];case"scaley":return[1,0,0,0,0,m.d[0],0,0,0,0,1,0,0,0,0,1];case"scalez":return[1,0,0,0,0,1,0,0,0,0,m.d[0],0,0,0,0,1];case"scale3d":return[m.d[0],0,0,0,0,m.d[1],0,0,0,0,m.d[2],0,0,0,0,1];case"skew":var L=l(m.d[0]),S=l(m.d[1]);return[1,Math.tan(S),0,0,Math.tan(L),1,0,0,0,0,1,0,0,0,0,1];case"skewx":var y=l(m.d[0]);return[1,0,0,0,Math.tan(y),1,0,0,0,0,1,0,0,0,0,1];case"skewy":var y=l(m.d[0]);return[1,Math.tan(y),0,0,0,1,0,0,0,0,1,0,0,0,0,1];case"translate":var _=m.d[0].px||0,w=m.d[1].px||0;return[1,0,0,0,0,1,0,0,0,0,1,0,_,w,0,1];case"translatex":var _=m.d[0].px||0;return[1,0,0,0,0,1,0,0,0,0,1,0,_,0,0,1];case"translatey":var w=m.d[0].px||0;return[1,0,0,0,0,1,0,0,0,0,1,0,0,w,0,1];case"translatez":var O=m.d[0].px||0;return[1,0,0,0,0,1,0,0,0,0,1,0,0,0,O,1];case"translate3d":var _=m.d[0].px||0,w=m.d[1].px||0,O=m.d[2].px||0;return[1,0,0,0,0,1,0,0,0,0,1,0,_,w,O,1];case"perspective":return[1,0,0,0,0,1,0,0,0,0,1,m.d[0].px?-1/m.d[0].px:0,0,0,0,1];case"matrix":return[m.d[0],m.d[1],0,0,m.d[2],m.d[3],0,0,0,0,1,0,m.d[4],m.d[5],0,1];case"matrix3d":return m.d}}function d(m){return m.length===0?[1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1]:m.map(c).reduce(a)}function p(m){return[u(d(m))]}var u=function(){function m(_){return _[0][0]*_[1][1]*_[2][2]+_[1][0]*_[2][1]*_[0][2]+_[2][0]*_[0][1]*_[1][2]-_[0][2]*_[1][1]*_[2][0]-_[1][2]*_[2][1]*_[0][0]-_[2][2]*_[0][1]*_[1][0]}function h(_){for(var w=1/m(_),O=_[0][0],D=_[0][1],z=_[0][2],j=_[1][0],W=_[1][1],I=_[1][2],K=_[2][0],ot=_[2][1],_t=_[2][2],nt=[[(W*_t-I*ot)*w,(z*ot-D*_t)*w,(D*I-z*W)*w,0],[(I*K-j*_t)*w,(O*_t-z*K)*w,(z*j-O*I)*w,0],[(j*ot-W*K)*w,(K*D-O*ot)*w,(O*W-D*j)*w,0]],Nt=[],Ut=0;Ut<3;Ut++){for(var Ee=0,oe=0;oe<3;oe++)Ee+=_[3][oe]*nt[oe][Ut];Nt.push(Ee)}return Nt.push(1),nt.push(Nt),nt}function g(_){return[[_[0][0],_[1][0],_[2][0],_[3][0]],[_[0][1],_[1][1],_[2][1],_[3][1]],[_[0][2],_[1][2],_[2][2],_[3][2]],[_[0][3],_[1][3],_[2][3],_[3][3]]]}function f(_,w){for(var O=[],D=0;D<4;D++){for(var z=0,j=0;j<4;j++)z+=_[j]*w[j][D];O.push(z)}return O}function E(_){var w=b(_);return[_[0]/w,_[1]/w,_[2]/w]}function b(_){return Math.sqrt(_[0]*_[0]+_[1]*_[1]+_[2]*_[2])}function L(_,w,O,D){return[O*_[0]+D*w[0],O*_[1]+D*w[1],O*_[2]+D*w[2]]}function S(_,w){return[_[1]*w[2]-_[2]*w[1],_[2]*w[0]-_[0]*w[2],_[0]*w[1]-_[1]*w[0]]}function y(_){var w=[_.slice(0,4),_.slice(4,8),_.slice(8,12),_.slice(12,16)];if(w[3][3]!==1)return null;for(var O=[],D=0;D<4;D++)O.push(w[D].slice());for(var D=0;D<3;D++)O[D][3]=0;if(m(O)===0)return null;var z,j=[];w[0][3]||w[1][3]||w[2][3]?(j.push(w[0][3]),j.push(w[1][3]),j.push(w[2][3]),j.push(w[3][3]),z=f(j,g(h(O)))):z=[0,0,0,1];var W=w[3].slice(0,3),I=[];I.push(w[0].slice(0,3));var K=[];K.push(b(I[0])),I[0]=E(I[0]);var ot=[];I.push(w[1].slice(0,3)),ot.push(r(I[0],I[1])),I[1]=L(I[1],I[0],1,-ot[0]),K.push(b(I[1])),I[1]=E(I[1]),ot[0]/=K[1],I.push(w[2].slice(0,3)),ot.push(r(I[0],I[2])),I[2]=L(I[2],I[0],1,-ot[1]),ot.push(r(I[1],I[2])),I[2]=L(I[2],I[1],1,-ot[2]),K.push(b(I[2])),I[2]=E(I[2]),ot[1]/=K[2],ot[2]/=K[2];var _t=S(I[1],I[2]);if(r(I[0],_t)<0)for(var D=0;D<3;D++)K[D]*=-1,I[D][0]*=-1,I[D][1]*=-1,I[D][2]*=-1;var nt,Nt,Ut=I[0][0]+I[1][1]+I[2][2]+1;return Ut>1e-4?(nt=.5/Math.sqrt(Ut),Nt=[(I[2][1]-I[1][2])*nt,(I[0][2]-I[2][0])*nt,(I[1][0]-I[0][1])*nt,.25/nt]):I[0][0]>I[1][1]&&I[0][0]>I[2][2]?(nt=2*Math.sqrt(1+I[0][0]-I[1][1]-I[2][2]),Nt=[.25*nt,(I[0][1]+I[1][0])/nt,(I[0][2]+I[2][0])/nt,(I[2][1]-I[1][2])/nt]):I[1][1]>I[2][2]?(nt=2*Math.sqrt(1+I[1][1]-I[0][0]-I[2][2]),Nt=[(I[0][1]+I[1][0])/nt,.25*nt,(I[1][2]+I[2][1])/nt,(I[0][2]-I[2][0])/nt]):(nt=2*Math.sqrt(1+I[2][2]-I[0][0]-I[1][1]),Nt=[(I[0][2]+I[2][0])/nt,(I[1][2]+I[2][1])/nt,.25*nt,(I[1][0]-I[0][1])/nt]),[W,K,ot,Nt,z]}return y}();o.dot=r,o.makeMatrixDecomposition=p,o.transformListToMatrix=d}(t),function(o){function s(g,f){var E=g.exec(f);if(E)return E=g.ignoreCase?E[0].toLowerCase():E[0],[E,f.substr(E.length)]}function r(g,f){f=f.replace(/^\s*/,"");var E=g(f);if(E)return[E[0],E[1].replace(/^\s*/,"")]}function a(g,f,E){g=r.bind(null,g);for(var b=[];;){var L=g(E);if(!L)return[b,E];if(b.push(L[0]),E=L[1],!(L=s(f,E))||L[1]=="")return[b,E];E=L[1]}}function l(g,f){for(var E=0,b=0;b<f.length&&(!/\s|,/.test(f[b])||E!=0);b++)if(f[b]=="(")E++;else if(f[b]==")"&&(E--,E==0&&b++,E<=0))break;var L=g(f.substr(0,b));return L==null?void 0:[L,f.substr(b)]}function c(g,f){for(var E=g,b=f;E&&b;)E>b?E%=b:b%=E;return E=g*f/(E+b)}function d(g){return function(f){var E=g(f);return E&&(E[0]=void 0),E}}function p(g,f){return function(E){return g(E)||[f,E]}}function u(g,f){for(var E=[],b=0;b<g.length;b++){var L=o.consumeTrimmed(g[b],f);if(!L||L[0]=="")return;L[0]!==void 0&&E.push(L[0]),f=L[1]}if(f=="")return E}function m(g,f,E,b,L){for(var S=[],y=[],_=[],w=c(b.length,L.length),O=0;O<w;O++){var D=f(b[O%b.length],L[O%L.length]);if(!D)return;S.push(D[0]),y.push(D[1]),_.push(D[2])}return[S,y,function(z){var j=z.map(function(W,I){return _[I](W)}).join(E);return g?g(j):j}]}function h(g,f,E){for(var b=[],L=[],S=[],y=0,_=0;_<E.length;_++)if(typeof E[_]=="function"){var w=E[_](g[y],f[y++]);b.push(w[0]),L.push(w[1]),S.push(w[2])}else(function(O){b.push(!1),L.push(!1),S.push(function(){return E[O]})})(_);return[b,L,function(O){for(var D="",z=0;z<O.length;z++)D+=S[z](O[z]);return D}]}o.consumeToken=s,o.consumeTrimmed=r,o.consumeRepeated=a,o.consumeParenthesised=l,o.ignore=d,o.optional=p,o.consumeList=u,o.mergeNestedRepeated=m.bind(null,null),o.mergeWrappedNestedRepeated=m,o.mergeList=h}(t),function(o){function s(d){function p(h){var g=o.consumeToken(/^inset/i,h);return g?(u.inset=!0,g):(g=o.consumeLengthOrPercent(h))?(u.lengths.push(g[0]),g):(g=o.consumeColor(h),g?(u.color=g[0],g):void 0)}var u={inset:!1,lengths:[],color:null},m=o.consumeRepeated(p,/^/,d);if(m&&m[0].length)return[u,m[1]]}function r(d){var p=o.consumeRepeated(s,/^,/,d);if(p&&p[1]=="")return p[0]}function a(d,p){for(;d.lengths.length<Math.max(d.lengths.length,p.lengths.length);)d.lengths.push({px:0});for(;p.lengths.length<Math.max(d.lengths.length,p.lengths.length);)p.lengths.push({px:0});if(d.inset==p.inset&&!!d.color==!!p.color){for(var u,m=[],h=[[],0],g=[[],0],f=0;f<d.lengths.length;f++){var E=o.mergeDimensions(d.lengths[f],p.lengths[f],f==2);h[0].push(E[0]),g[0].push(E[1]),m.push(E[2])}if(d.color&&p.color){var b=o.mergeColors(d.color,p.color);h[1]=b[0],g[1]=b[1],u=b[2]}return[h,g,function(L){for(var S=d.inset?"inset ":" ",y=0;y<m.length;y++)S+=m[y](L[0][y])+" ";return u&&(S+=u(L[1])),S}]}}function l(d,p,u,m){function h(S){return{inset:S,color:[0,0,0,0],lengths:[{px:0},{px:0},{px:0},{px:0}]}}for(var g=[],f=[],E=0;E<u.length||E<m.length;E++){var b=u[E]||h(m[E].inset),L=m[E]||h(u[E].inset);g.push(b),f.push(L)}return o.mergeNestedRepeated(d,p,g,f)}var c=l.bind(null,a,", ");o.addPropertiesHandler(r,c,["box-shadow","text-shadow"])}(t),function(o,s){function r(f){return f.toFixed(3).replace(/0+$/,"").replace(/\.$/,"")}function a(f,E,b){return Math.min(E,Math.max(f,b))}function l(f){if(/^\s*[-+]?(\d*\.)?\d+\s*$/.test(f))return Number(f)}function c(f,E){return[f,E,r]}function d(f,E){if(f!=0)return u(0,1/0)(f,E)}function p(f,E){return[f,E,function(b){return Math.round(a(1,1/0,b))}]}function u(f,E){return function(b,L){return[b,L,function(S){return r(a(f,E,S))}]}}function m(f){var E=f.trim().split(/\s*[\s,]\s*/);if(E.length!==0){for(var b=[],L=0;L<E.length;L++){var S=l(E[L]);if(S===void 0)return;b.push(S)}return b}}function h(f,E){if(f.length==E.length)return[f,E,function(b){return b.map(r).join(" ")}]}function g(f,E){return[f,E,Math.round]}o.clamp=a,o.addPropertiesHandler(m,h,["stroke-dasharray"]),o.addPropertiesHandler(l,u(0,1/0),["border-image-width","line-height"]),o.addPropertiesHandler(l,u(0,1),["opacity","shape-image-threshold"]),o.addPropertiesHandler(l,d,["flex-grow","flex-shrink"]),o.addPropertiesHandler(l,p,["orphans","widows"]),o.addPropertiesHandler(l,g,["z-index"]),o.parseNumber=l,o.parseNumberList=m,o.mergeNumbers=c,o.numberToString=r}(t),function(o,s){function r(a,l){if(a=="visible"||l=="visible")return[0,1,function(c){return c<=0?a:c>=1?l:"visible"}]}o.addPropertiesHandler(String,r,["visibility"])}(t),function(o,s){function r(d){d=d.trim(),c.fillStyle="#000",c.fillStyle=d;var p=c.fillStyle;if(c.fillStyle="#fff",c.fillStyle=d,p==c.fillStyle){c.fillRect(0,0,1,1);var u=c.getImageData(0,0,1,1).data;c.clearRect(0,0,1,1);var m=u[3]/255;return[u[0]*m,u[1]*m,u[2]*m,m]}}function a(d,p){return[d,p,function(u){function m(g){return Math.max(0,Math.min(255,g))}if(u[3])for(var h=0;h<3;h++)u[h]=Math.round(m(u[h]/u[3]));return u[3]=o.numberToString(o.clamp(0,1,u[3])),"rgba("+u.join(",")+")"}]}var l=document.createElementNS("http://www.w3.org/1999/xhtml","canvas");l.width=l.height=1;var c=l.getContext("2d");o.addPropertiesHandler(r,a,["background-color","border-bottom-color","border-left-color","border-right-color","border-top-color","color","fill","flood-color","lighting-color","outline-color","stop-color","stroke","text-decoration-color"]),o.consumeColor=o.consumeParenthesised.bind(null,r),o.mergeColors=a}(t),function(o,s){function r(S){function y(){var W=j.exec(S);z=W?W[0]:void 0}function _(){var W=Number(z);return y(),W}function w(){if(z!=="(")return _();y();var W=D();return z!==")"?NaN:(y(),W)}function O(){for(var W=w();z==="*"||z==="/";){var I=z;y();var K=w();I==="*"?W*=K:W/=K}return W}function D(){for(var W=O();z==="+"||z==="-";){var I=z;y();var K=O();I==="+"?W+=K:W-=K}return W}var z,j=/([\+\-\w\.]+|[\(\)\*\/])/g;return y(),D()}function a(S,y){if((y=y.trim().toLowerCase())=="0"&&"px".search(S)>=0)return{px:0};if(/^[^(]*$|^calc/.test(y)){y=y.replace(/calc\(/g,"(");var _={};y=y.replace(S,function(I){return _[I]=null,"U"+I});for(var w="U("+S.source+")",O=y.replace(/[-+]?(\d*\.)?\d+([Ee][-+]?\d+)?/g,"N").replace(new RegExp("N"+w,"g"),"D").replace(/\s[+-]\s/g,"O").replace(/\s/g,""),D=[/N\*(D)/g,/(N|D)[*\/]N/g,/(N|D)O\1/g,/\((N|D)\)/g],z=0;z<D.length;)D[z].test(O)?(O=O.replace(D[z],"$1"),z=0):z++;if(O=="D"){for(var j in _){var W=r(y.replace(new RegExp("U"+j,"g"),"").replace(new RegExp(w,"g"),"*0"));if(!isFinite(W))return;_[j]=W}return _}}}function l(S,y){return c(S,y,!0)}function c(S,y,_){var w,O=[];for(w in S)O.push(w);for(w in y)O.indexOf(w)<0&&O.push(w);return S=O.map(function(D){return S[D]||0}),y=O.map(function(D){return y[D]||0}),[S,y,function(D){var z=D.map(function(j,W){return D.length==1&&_&&(j=Math.max(j,0)),o.numberToString(j)+O[W]}).join(" + ");return D.length>1?"calc("+z+")":z}]}var d="px|em|ex|ch|rem|vw|vh|vmin|vmax|cm|mm|in|pt|pc",p=a.bind(null,new RegExp(d,"g")),u=a.bind(null,new RegExp(d+"|%","g")),m=a.bind(null,/deg|rad|grad|turn/g);o.parseLength=p,o.parseLengthOrPercent=u,o.consumeLengthOrPercent=o.consumeParenthesised.bind(null,u),o.parseAngle=m,o.mergeDimensions=c;var h=o.consumeParenthesised.bind(null,p),g=o.consumeRepeated.bind(void 0,h,/^/),f=o.consumeRepeated.bind(void 0,g,/^,/);o.consumeSizePairList=f;var E=function(S){var y=f(S);if(y&&y[1]=="")return y[0]},b=o.mergeNestedRepeated.bind(void 0,l," "),L=o.mergeNestedRepeated.bind(void 0,b,",");o.mergeNonNegativeSizePair=b,o.addPropertiesHandler(E,L,["background-size"]),o.addPropertiesHandler(u,l,["border-bottom-width","border-image-width","border-left-width","border-right-width","border-top-width","flex-basis","font-size","height","line-height","max-height","max-width","outline-width","width"]),o.addPropertiesHandler(u,c,["border-bottom-left-radius","border-bottom-right-radius","border-top-left-radius","border-top-right-radius","bottom","left","letter-spacing","margin-bottom","margin-left","margin-right","margin-top","min-height","min-width","outline-offset","padding-bottom","padding-left","padding-right","padding-top","perspective","right","shape-margin","stroke-dashoffset","text-indent","top","vertical-align","word-spacing"])}(t),function(o,s){function r(p){return o.consumeLengthOrPercent(p)||o.consumeToken(/^auto/,p)}function a(p){var u=o.consumeList([o.ignore(o.consumeToken.bind(null,/^rect/)),o.ignore(o.consumeToken.bind(null,/^\(/)),o.consumeRepeated.bind(null,r,/^,/),o.ignore(o.consumeToken.bind(null,/^\)/))],p);if(u&&u[0].length==4)return u[0]}function l(p,u){return p=="auto"||u=="auto"?[!0,!1,function(m){var h=m?p:u;if(h=="auto")return"auto";var g=o.mergeDimensions(h,h);return g[2](g[0])}]:o.mergeDimensions(p,u)}function c(p){return"rect("+p+")"}var d=o.mergeWrappedNestedRepeated.bind(null,c,l,", ");o.parseBox=a,o.mergeBoxes=d,o.addPropertiesHandler(a,d,["clip"])}(t),function(o,s){function r(b){return function(L){var S=0;return b.map(function(y){return y===h?L[S++]:y})}}function a(b){return b}function l(b){if((b=b.toLowerCase().trim())=="none")return[];for(var L,S=/\s*(\w+)\(([^)]*)\)/g,y=[],_=0;L=S.exec(b);){if(L.index!=_)return;_=L.index+L[0].length;var w=L[1],O=E[w];if(!O)return;var D=L[2].split(","),z=O[0];if(z.length<D.length)return;for(var j=[],W=0;W<z.length;W++){var I,K=D[W],ot=z[W];if((I=K?{A:function(_t){return _t.trim()=="0"?f:o.parseAngle(_t)},N:o.parseNumber,T:o.parseLengthOrPercent,L:o.parseLength}[ot.toUpperCase()](K):{a:f,n:j[0],t:g}[ot])===void 0)return;j.push(I)}if(y.push({t:w,d:j}),S.lastIndex==b.length)return y}}function c(b){return b.toFixed(6).replace(".000000","")}function d(b,L){if(b.decompositionPair!==L){b.decompositionPair=L;var S=o.makeMatrixDecomposition(b)}if(L.decompositionPair!==b){L.decompositionPair=b;var y=o.makeMatrixDecomposition(L)}return S[0]==null||y[0]==null?[[!1],[!0],function(_){return _?L[0].d:b[0].d}]:(S[0].push(0),y[0].push(1),[S,y,function(_){var w=o.quat(S[0][3],y[0][3],_[5]);return o.composeMatrix(_[0],_[1],_[2],w,_[4]).map(c).join(",")}])}function p(b){return b.replace(/[xy]/,"")}function u(b){return b.replace(/(x|y|z|3d)?$/,"3d")}function m(b,L){var S=o.makeMatrixDecomposition&&!0,y=!1;if(!b.length||!L.length){b.length||(y=!0,b=L,L=[]);for(var _=0;_<b.length;_++){var w=b[_].t,O=b[_].d,D=w.substr(0,5)=="scale"?1:0;L.push({t:w,d:O.map(function(at){if(typeof at=="number")return D;var Dt={};for(var Zt in at)Dt[Zt]=D;return Dt})})}}var z=function(at,Dt){return at=="perspective"&&Dt=="perspective"||(at=="matrix"||at=="matrix3d")&&(Dt=="matrix"||Dt=="matrix3d")},j=[],W=[],I=[];if(b.length!=L.length){if(!S)return;var K=d(b,L);j=[K[0]],W=[K[1]],I=[["matrix",[K[2]]]]}else for(var _=0;_<b.length;_++){var w,ot=b[_].t,_t=L[_].t,nt=b[_].d,Nt=L[_].d,Ut=E[ot],Ee=E[_t];if(z(ot,_t)){if(!S)return;var K=d([b[_]],[L[_]]);j.push(K[0]),W.push(K[1]),I.push(["matrix",[K[2]]])}else{if(ot==_t)w=ot;else if(Ut[2]&&Ee[2]&&p(ot)==p(_t))w=p(ot),nt=Ut[2](nt),Nt=Ee[2](Nt);else{if(!Ut[1]||!Ee[1]||u(ot)!=u(_t)){if(!S)return;var K=d(b,L);j=[K[0]],W=[K[1]],I=[["matrix",[K[2]]]];break}w=u(ot),nt=Ut[1](nt),Nt=Ee[1](Nt)}for(var oe=[],qe=[],k=[],tt=0;tt<nt.length;tt++){var Q=typeof nt[tt]=="number"?o.mergeNumbers:o.mergeDimensions,K=Q(nt[tt],Nt[tt]);oe[tt]=K[0],qe[tt]=K[1],k.push(K[2])}j.push(oe),W.push(qe),I.push([w,k])}}if(y){var ht=j;j=W,W=ht}return[j,W,function(at){return at.map(function(Dt,Zt){var Ni=Dt.map(function(Ti,Qn){return I[Zt][1][Qn](Ti)}).join(",");return I[Zt][0]=="matrix"&&Ni.split(",").length==16&&(I[Zt][0]="matrix3d"),I[Zt][0]+"("+Ni+")"}).join(" ")}]}var h=null,g={px:0},f={deg:0},E={matrix:["NNNNNN",[h,h,0,0,h,h,0,0,0,0,1,0,h,h,0,1],a],matrix3d:["NNNNNNNNNNNNNNNN",a],rotate:["A"],rotatex:["A"],rotatey:["A"],rotatez:["A"],rotate3d:["NNNA"],perspective:["L"],scale:["Nn",r([h,h,1]),a],scalex:["N",r([h,1,1]),r([h,1])],scaley:["N",r([1,h,1]),r([1,h])],scalez:["N",r([1,1,h])],scale3d:["NNN",a],skew:["Aa",null,a],skewx:["A",null,r([h,f])],skewy:["A",null,r([f,h])],translate:["Tt",r([h,h,g]),a],translatex:["T",r([h,g,g]),r([h,g])],translatey:["T",r([g,h,g]),r([g,h])],translatez:["L",r([g,g,h])],translate3d:["TTL",a]};o.addPropertiesHandler(l,m,["transform"]),o.transformToSvgMatrix=function(b){var L=o.transformListToMatrix(l(b));return"matrix("+c(L[0])+" "+c(L[1])+" "+c(L[4])+" "+c(L[5])+" "+c(L[12])+" "+c(L[13])+")"}}(t),function(o){function s(l){var c=Number(l);if(!(isNaN(c)||c<100||c>900||c%100!=0))return c}function r(l){return l=100*Math.round(l/100),l=o.clamp(100,900,l),l===400?"normal":l===700?"bold":String(l)}function a(l,c){return[l,c,r]}o.addPropertiesHandler(s,a,["font-weight"])}(t),function(o){function s(m){var h={};for(var g in m)h[g]=-m[g];return h}function r(m){return o.consumeToken(/^(left|center|right|top|bottom)\b/i,m)||o.consumeLengthOrPercent(m)}function a(m,h){var g=o.consumeRepeated(r,/^/,h);if(g&&g[1]==""){var f=g[0];if(f[0]=f[0]||"center",f[1]=f[1]||"center",m==3&&(f[2]=f[2]||{px:0}),f.length==m){if(/top|bottom/.test(f[0])||/left|right/.test(f[1])){var E=f[0];f[0]=f[1],f[1]=E}if(/left|right|center|Object/.test(f[0])&&/top|bottom|center|Object/.test(f[1]))return f.map(function(b){return typeof b=="object"?b:d[b]})}}}function l(m){var h=o.consumeRepeated(r,/^/,m);if(h){for(var g=h[0],f=[{"%":50},{"%":50}],E=0,b=!1,L=0;L<g.length;L++){var S=g[L];typeof S=="string"?(b=/bottom|right/.test(S),E={left:0,right:0,center:E,top:1,bottom:1}[S],f[E]=d[S],S=="center"&&E++):(b&&(S=s(S),S["%"]=(S["%"]||0)+100),f[E]=S,E++,b=!1)}return[f,h[1]]}}function c(m){var h=o.consumeRepeated(l,/^,/,m);if(h&&h[1]=="")return h[0]}var d={left:{"%":0},center:{"%":50},right:{"%":100},top:{"%":0},bottom:{"%":100}},p=o.mergeNestedRepeated.bind(null,o.mergeDimensions," ");o.addPropertiesHandler(a.bind(null,3),p,["transform-origin"]),o.addPropertiesHandler(a.bind(null,2),p,["perspective-origin"]),o.consumePosition=l,o.mergeOffsetList=p;var u=o.mergeNestedRepeated.bind(null,p,", ");o.addPropertiesHandler(c,u,["background-position","object-position"])}(t),function(o){function s(p){var u=o.consumeToken(/^circle/,p);if(u&&u[0])return["circle"].concat(o.consumeList([o.ignore(o.consumeToken.bind(void 0,/^\(/)),a,o.ignore(o.consumeToken.bind(void 0,/^at/)),o.consumePosition,o.ignore(o.consumeToken.bind(void 0,/^\)/))],u[1]));var m=o.consumeToken(/^ellipse/,p);if(m&&m[0])return["ellipse"].concat(o.consumeList([o.ignore(o.consumeToken.bind(void 0,/^\(/)),l,o.ignore(o.consumeToken.bind(void 0,/^at/)),o.consumePosition,o.ignore(o.consumeToken.bind(void 0,/^\)/))],m[1]));var h=o.consumeToken(/^polygon/,p);return h&&h[0]?["polygon"].concat(o.consumeList([o.ignore(o.consumeToken.bind(void 0,/^\(/)),o.optional(o.consumeToken.bind(void 0,/^nonzero\s*,|^evenodd\s*,/),"nonzero,"),o.consumeSizePairList,o.ignore(o.consumeToken.bind(void 0,/^\)/))],h[1])):void 0}function r(p,u){if(p[0]===u[0])return p[0]=="circle"?o.mergeList(p.slice(1),u.slice(1),["circle(",o.mergeDimensions," at ",o.mergeOffsetList,")"]):p[0]=="ellipse"?o.mergeList(p.slice(1),u.slice(1),["ellipse(",o.mergeNonNegativeSizePair," at ",o.mergeOffsetList,")"]):p[0]=="polygon"&&p[1]==u[1]?o.mergeList(p.slice(2),u.slice(2),["polygon(",p[1],d,")"]):void 0}var a=o.consumeParenthesised.bind(null,o.parseLengthOrPercent),l=o.consumeRepeated.bind(void 0,a,/^/),c=o.mergeNestedRepeated.bind(void 0,o.mergeDimensions," "),d=o.mergeNestedRepeated.bind(void 0,c,",");o.addPropertiesHandler(s,r,["shape-outside"])}(t),function(o,s){function r(c,d){d.concat([c]).forEach(function(p){p in document.documentElement.style&&(a[c]=p),l[p]=c})}var a={},l={};r("transform",["webkitTransform","msTransform"]),r("transformOrigin",["webkitTransformOrigin"]),r("perspective",["webkitPerspective"]),r("perspectiveOrigin",["webkitPerspectiveOrigin"]),o.propertyName=function(c){return a[c]||c},o.unprefixedPropertyName=function(c){return l[c]||c}}(t)}(),function(){if(document.createElement("div").animate([]).oncancel===void 0){var e;if(window.performance&&performance.now)var e=function(){return performance.now()};else var e=function(){return Date.now()};var n=function(s,r,a){this.target=s,this.currentTime=r,this.timelineTime=a,this.type="cancel",this.bubbles=!1,this.cancelable=!1,this.currentTarget=s,this.defaultPrevented=!1,this.eventPhase=Event.AT_TARGET,this.timeStamp=Date.now()},o=window.Element.prototype.animate;window.Element.prototype.animate=function(s,r){var a=o.call(this,s,r);a._cancelHandlers=[],a.oncancel=null;var l=a.cancel;a.cancel=function(){l.call(this);var p=new n(this,null,e()),u=this._cancelHandlers.concat(this.oncancel?[this.oncancel]:[]);setTimeout(function(){u.forEach(function(m){m.call(p.target,p)})},0)};var c=a.addEventListener;a.addEventListener=function(p,u){typeof u=="function"&&p=="cancel"?this._cancelHandlers.push(u):c.call(this,p,u)};var d=a.removeEventListener;return a.removeEventListener=function(p,u){if(p=="cancel"){var m=this._cancelHandlers.indexOf(u);m>=0&&this._cancelHandlers.splice(m,1)}else d.call(this,p,u)},a}}}(),function(e){var n=document.documentElement,o=null,s=!1;try{var r=getComputedStyle(n).getPropertyValue("opacity"),a=r=="0"?"1":"0";o=n.animate({opacity:[a,a]},{duration:1}),o.currentTime=0,s=getComputedStyle(n).getPropertyValue("opacity")==a}catch(c){}finally{o&&o.cancel()}if(!s){var l=window.Element.prototype.animate;window.Element.prototype.animate=function(c,d){return window.Symbol&&Symbol.iterator&&Array.prototype.from&&c[Symbol.iterator]&&(c=Array.from(c)),Array.isArray(c)||c===null||(c=e.convertToArrayForm(c)),l.call(this,c,d)}}}(i)})()});var $o,yC=v(()=>{"use strict";Mn();$o=class{constructor(t,e,n,o){this.left=t;this.top=e;this.width=n;this.height=o}clone(){return new $o(this.left,this.top,this.width,this.height)}getSize(){return new Ot(this.width,this.height)}ceil(){return this.left=Math.ceil(this.left),this.top=Math.ceil(this.top),this.width=Math.ceil(this.width),this.height=Math.ceil(this.height),this}floor(){return this.left=Math.floor(this.left),this.top=Math.floor(this.top),this.width=Math.floor(this.width),this.height=Math.floor(this.height),this}round(){return this.left=Math.round(this.left),this.top=Math.round(this.top),this.width=Math.round(this.width),this.height=Math.round(this.height),this}translate(t,e){return this.left+=t,this.top+=e,this}scale(t,e){return e=typeof e=="number"?e:t,this.left*=t,this.width*=t,this.top*=e,this.height*=e,this}}});var TC={};ut(TC,{XCrop:()=>qd,default:()=>_U});var qd,_U,xC=v(()=>{"use strict";yC();Mn();pa();qd=class extends HTMLElement{connectedCallback(){if(this.image)return;this.innerHTML=`
      <img class="part-image">
      <div class="part-box">
        <div data-dir="nw" class="part-handle nw"></div>
        <div data-dir="ne" class="part-handle ne"></div>
        <div data-dir="sw" class="part-handle sw"></div>
        <div data-dir="se" class="part-handle se"></div>
      </div>`;let e=this.getAttribute("aspect-ratio");this.aspectRatio=e?new Ot(...e.split("/").map(Number)):void 0,this.naturalSize=new Ot(Number(this.getAttribute("width"))||0,Number(this.getAttribute("height"))||0),this.minSize=new Ot(Number(this.getAttribute("min-width"))||20,Number(this.getAttribute("min-height"))||20),this.box=this.querySelector(".part-box"),this.image=this.querySelector("img"),this.src=this.getAttribute("src"),this.updateCropArea=this.updateCropArea.bind(this),this.stopUpdate=this.stopUpdate.bind(this),this.naturalSize.area()||(this.image.width=this.naturalSize.width,this.image.height=this.naturalSize.height),this.image.onload=()=>{let{naturalWidth:n,naturalHeight:o}=this.image;this.naturalSize.width=n,this.naturalSize.height=o;let s=this.offsetWidth,r=Math.round(s*o/n);this.size=new Ot(s,r),this.crop=new $o(0,0,s,r);let a=s/n;if(this.minSize.scale(a),this.image.style.width=`${s}px`,this.image.style.height=`${r}px`,this.style.width=`${s}px`,this.style.height=`${r}px`,this.updateImageRotation(),this.pendingRect){this.naturalCrop=this.pendingRect,delete this.pendingRect;return}this.setInitialPosition()},this.box.addEventListener("mousedown",n=>this.startUpdate(n)),this.box.addEventListener("touchstart",n=>this.startUpdate(n),{passive:!0}),this.box.addEventListener("dblclick",()=>this.setInitialPosition()),this.image.src=this.src}static get observedAttributes(){return["rotate"]}get rotate(){return Number(this.getAttribute("rotate")||0)%360}set rotate(e){e%=360,e?this.setAttribute("rotate",String(e)):this.removeAttribute("rotate")}get naturalCrop(){return this.crop.clone().scale(this.naturalSize.width/this.size.width).round()}set naturalCrop(e){let n=new $o(e.left,e.top,e.width,e.height);if(!this.size){this.pendingRect=n;return}this.crop=n.scale(this.size.width/this.naturalSize.width).round(),this.update()}attributeChangedCallback(e,n){this.image&&e==="rotate"&&(this.updateImageRotation(Number(n||0)),this.setInitialPosition())}updateImageRotation(e=0){(this.rotate-e)%180!==0&&([this.naturalSize.width,this.naturalSize.height]=[this.naturalSize.height,this.naturalSize.width],[this.size.width,this.size.height]=[this.size.height,this.size.width],[this.minSize.width,this.minSize.height]=[this.minSize.height,this.minSize.width],this.style.width=`${this.size.width}px`,this.style.height=`${this.size.height}px`),this.image.style.transform=this.rotate?`rotate(${this.rotate}deg)`:""}setInitialPosition(){let{crop:e,size:n}=this,o=this.aspectRatio?this.aspectRatio.clone().scaleToFit(this.size):n.clone();e.left=(n.width-o.width)/2,e.top=(n.height-o.height)/2,e.width=o.width,e.height=o.height,this.update()}update(){let{box:e,crop:n}=this;e.style.left=`${n.left}px`,e.style.top=`${n.top}px`,e.style.width=`${n.width}px`,e.style.height=`${n.height}px`,this.dispatchEvent(new Event("change"))}startUpdate(e){if(!(e.currentTarget instanceof HTMLElement&&e.target instanceof HTMLElement))return;let n=e instanceof MouseEvent,{pageX:o,pageY:s}=n?e:e.touches[0];if(this.pointerX=o,this.pointerY=s,this.tempCrop=this.crop.clone(),this.isResize=e.target.hasAttribute("data-dir"),this.isResize){let r=e.target.dataset.dir||"";this.isLeft=["nw","sw"].includes(r),this.isTop=["nw","ne"].includes(r),this.style.cursor=this.isLeft===this.isTop?"nwse-resize":"nesw-resize"}this.classList.add("is-active"),this.ownerDocument.body.addEventListener("mouseup",this.stopUpdate),this.ownerDocument.body.addEventListener("mouseleave",this.stopUpdate),this.ownerDocument.body.addEventListener("mousemove",this.updateCropArea),this.addEventListener("touchend",this.stopUpdate),this.addEventListener("touchmove",this.updateCropArea,{passive:!0})}stopUpdate(){this.style.cursor="",this.classList.remove("is-active"),this.ownerDocument.body.removeEventListener("mouseup",this.stopUpdate),this.ownerDocument.body.removeEventListener("mouseleave",this.stopUpdate),this.ownerDocument.body.removeEventListener("mousemove",this.updateCropArea),this.removeEventListener("touchend",this.stopUpdate),this.removeEventListener("touchmove",this.updateCropArea)}updateCropArea(e){let{pageX:n,pageY:o}=e instanceof MouseEvent?e:e.touches[0],s=n-this.pointerX,r=o-this.pointerY,{crop:a,size:l,minSize:c,aspectRatio:d,isLeft:p,isTop:u,isResize:m}=this,{left:h,top:g,width:f,height:E}=this.tempCrop;if(m){let b=f+(p?-s:s),L=E+(u?-r:r);if(b=bi(b,c.width,p?h+f:l.width-h),L=bi(L,c.height,u?g+E:l.height-g),d){let S=d.width/d.height;b/L>S?b=L*S:L=b/S}a.left-=p?b-a.width:0,a.top-=u?L-a.height:0,a.width=b,a.height=L}else a.left=bi(h+s,0,l.width-f),a.top=bi(g+r,0,l.height-E);this.update()}},_U=()=>{customElements.define("x-crop",qd)}});var wC={};ut(wC,{default:()=>Gd});var yU,TU,Gd,LC=v(()=>{"use strict";V();Y();Z();yU="c-charcounter",TU="is-warning",Gd=class extends H{init(){let{element:t}=this,e=Number(t.getAttribute("maxlength"));if(!e)return;t.dataset.maxlength=String(e),t.removeAttribute("maxlength");let n=P("div"),o=P("div",{className:yU,style:`margin-bottom:${Je(t,"margin-bottom")}`},n);t.after(o);let s=()=>{let r=t.value.length,a=e-r,l=a<0;n.textContent=String(a).replace("-","−"),o.classList.toggle(TU,l);let c=Tn(t,"border-left-width"),d=Tn(t,"border-right-width"),u=(t instanceof HTMLTextAreaElement?Math.max(0,t.offsetWidth-t.scrollWidth):0)-c-d;n.style.right=`${u}px`};t.addEventListener("input",s),s()}}});var CC={};ut(CC,{default:()=>Qi});var AC,Qi,SC=v(()=>{"use strict";V();Y();G();Z();Ro();zi();Pe();pd();AC="/ajax/geo.cshtml",Qi=class extends H{parsedInit(){this.form=this.element.closest("form");let{country:e="country",city:n="city"}=this.element.dataset;this.countrySelect=this.form[e],this.citySelect=this.form[n],this.filter=this.form.filter,this.filter.setAttribute("autocomplete","nope"),this.visibility=this.filter.style.visibility==="hidden";let o=ct(".city-wrapper",this.form);if(o){this.optional=!0;let s=this.countrySelect.value!=="";this.cityZippy=Et(o,s),this.cityZippy.duration=400}this.addCity=this.addCity.bind(this),this.acXhrStop=this.acXhrStop.bind(this),this.onCountryChange=this.onCountryChange.bind(this),this.onCityChange=this.onCityChange.bind(this),this.onFocusIn=this.onFocusIn.bind(this),this.onFocusOut=this.onFocusOut.bind(this),this.countrySelect.addEventListener("change",this.onCountryChange),this.citySelect.addEventListener("change",this.onCityChange),d2Env.isMobile&&(this.filter.addEventListener("focus",this.onFocusIn),this.filter.addEventListener("blur",this.onFocusOut)),this.onCityChange()}onCountryChange(){return A(this,null,function*(){this.showFilter(!1);let e=this.countrySelect.value,n=e==="0";if(this.optional&&this.cityZippy.expand(e!==""||!n),e!==""){let o=N({_:n?"c":"l"},!n&&{c:e}),s=yield R(AC,this.role,{anchorEl:this.countrySelect,body:o});n?(this.renderCountry(s),this.onCountryChange()):(this.renderCity(s),this.onCityChange())}})}onCityChange(){let n=this.citySelect.value==="0";this.showFilter(n),this.acXhr&&(this.acXhr.removeEventListener("loadstart",this.acXhrStart),this.acXhr.removeEventListener("loadend",this.acXhrStop)),this.spin&&this.spin.stop(),this.ac&&(this.ac.removeEventListener("update",this.addCity),this.ac.dispose()),n&&(this.ac=new Fe(`${AC}?_=l&c=${this.countrySelect.value}`,this.filter),this.ac.setRowBuilder(Is),this.ac.addEventListener("update",this.addCity),this.spin=new fe(ct(".cityselect-spin")),this.acXhr=this.ac.getXhr(),this.acXhr.addEventListener("loadstart",this.acXhrStart),this.acXhr.addEventListener("loadend",this.acXhrStop))}acXhrStart(){this.spin&&this.spin.start()}acXhrStop(){this.spin&&this.spin.stop()}addCity(e){this.showFilter(!1),d2Env.isMobile&&this.onFocusOut();let{id:n,caption:o}=e.detail.row,s=Array.from(this.citySelect.options).findIndex(a=>a.value===n);if(s!==-1){this.citySelect.selectedIndex=s;return}let r=this.citySelect.lastElementChild;r.remove(),Qi.appendOption(this.citySelect,n,o,!0),Qi.appendOption(this.citySelect,r.value,r.text)}showFilter(e){if(this.filter.value="",e||this.filter.blur(),this.visibility)this.filter.style.visibility=e?"visible":"hidden";else{let n=this.closestSlot(this.filter,"filter");M(n||this.filter,e)}e&&this.filter.focus()}onFocusIn(){let{clientHeight:e}=document.documentElement,n=sn(this.filter);setTimeout(()=>{d2Env.isMobile||(document.body.style.minHeight=`${n.top-5-40+e}px`),document.scrollingElement.scrollTop=n.top+(d2Env.isMobile?-60:-5)},100)}onFocusOut(){setTimeout(()=>{document.body.style.minHeight="0"},100)}renderCountry(e,n){this.countrySelect.innerHTML="",this.optional&&Qi.appendOption(this.countrySelect,"",""),e.forEach(o=>Qi.appendOption(this.countrySelect,o.isocode,o.caption,o.isocode===n))}renderCity(e,n){this.citySelect.innerHTML="";let o=e.length===1;e.forEach(s=>Qi.appendOption(this.citySelect,s.id,s.caption,o||s.id===n))}static appendOption(e,n="",o=" ",s){let r=document.createElement("option");e.appendChild(r),r.value=n,r.textContent=o,r.selected=!!s}}});function MC(i,t){var e=Object.keys(i);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(i);t&&(n=n.filter(function(o){return Object.getOwnPropertyDescriptor(i,o).enumerable})),e.push.apply(e,n)}return e}function nn(i){for(var t=1;t<arguments.length;t++){var e=arguments[t]!=null?arguments[t]:{};t%2?MC(Object(e),!0).forEach(function(n){xU(i,n,e[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(i,Object.getOwnPropertyDescriptors(e)):MC(Object(e)).forEach(function(n){Object.defineProperty(i,n,Object.getOwnPropertyDescriptor(e,n))})}return i}function Xd(i){return typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?Xd=function(t){return typeof t}:Xd=function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},Xd(i)}function xU(i,t,e){return t in i?Object.defineProperty(i,t,{value:e,enumerable:!0,configurable:!0,writable:!0}):i[t]=e,i}function vn(){return vn=Object.assign||function(i){for(var t=1;t<arguments.length;t++){var e=arguments[t];for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(i[n]=e[n])}return i},vn.apply(this,arguments)}function wU(i,t){if(i==null)return{};var e={},n=Object.keys(i),o,s;for(s=0;s<n.length;s++)o=n[s],!(t.indexOf(o)>=0)&&(e[o]=i[o]);return e}function LU(i,t){if(i==null)return{};var e=wU(i,t),n,o;if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(i);for(o=0;o<s.length;o++)n=s[o],!(t.indexOf(n)>=0)&&Object.prototype.propertyIsEnumerable.call(i,n)&&(e[n]=i[n])}return e}function gn(i){if(typeof window!="undefined"&&window.navigator)return!!navigator.userAgent.match(i)}function It(i,t,e){i.addEventListener(t,e,!En&&BC)}function St(i,t,e){i.removeEventListener(t,e,!En&&BC)}function nm(i,t){if(t){if(t[0]===">"&&(t=t.substring(1)),i)try{if(i.matches)return i.matches(t);if(i.msMatchesSelector)return i.msMatchesSelector(t);if(i.webkitMatchesSelector)return i.webkitMatchesSelector(t)}catch(e){return!1}return!1}}function CU(i){return i.host&&i!==document&&i.host.nodeType?i.host:i.parentNode}function tn(i,t,e,n){if(i){e=e||document;do{if(t!=null&&(t[0]===">"?i.parentNode===e&&nm(i,t):nm(i,t))||n&&i===e)return i;if(i===e)break}while(i=CU(i))}return null}function ri(i,t,e){if(i&&t)if(i.classList)i.classList[e?"add":"remove"](t);else{var n=(" "+i.className+" ").replace(IC," ").replace(" "+t+" "," ");i.className=(n+(e?" "+t:"")).replace(IC," ")}}function mt(i,t,e){var n=i&&i.style;if(n){if(e===void 0)return document.defaultView&&document.defaultView.getComputedStyle?e=document.defaultView.getComputedStyle(i,""):i.currentStyle&&(e=i.currentStyle),t===void 0?e:e[t];!(t in n)&&t.indexOf("webkit")===-1&&(t="-webkit-"+t),n[t]=e+(typeof e=="string"?"":"px")}}function nr(i,t){var e="";if(typeof i=="string")e=i;else do{var n=mt(i,"transform");n&&n!=="none"&&(e=n+" "+e)}while(!t&&(i=i.parentNode));var o=window.DOMMatrix||window.WebKitCSSMatrix||window.CSSMatrix||window.MSCSSMatrix;return o&&new o(e)}function UC(i,t,e){if(i){var n=i.getElementsByTagName(t),o=0,s=n.length;if(e)for(;o<s;o++)e(n[o],o);return n}return[]}function en(){var i=document.scrollingElement;return i||document.documentElement}function me(i,t,e,n,o){if(!(!i.getBoundingClientRect&&i!==window)){var s,r,a,l,c,d,p;if(i!==window&&i.parentNode&&i!==en()?(s=i.getBoundingClientRect(),r=s.top,a=s.left,l=s.bottom,c=s.right,d=s.height,p=s.width):(r=0,a=0,l=window.innerHeight,c=window.innerWidth,d=window.innerHeight,p=window.innerWidth),(t||e)&&i!==window&&(o=o||i.parentNode,!En))do if(o&&o.getBoundingClientRect&&(mt(o,"transform")!=="none"||e&&mt(o,"position")!=="static")){var u=o.getBoundingClientRect();r-=u.top+parseInt(mt(o,"border-top-width")),a-=u.left+parseInt(mt(o,"border-left-width")),l=r+s.height,c=a+s.width;break}while(o=o.parentNode);if(n&&i!==window){var m=nr(o||i),h=m&&m.a,g=m&&m.d;m&&(r/=g,a/=h,p/=h,d/=g,l=r+d,c=a+p)}return{top:r,left:a,bottom:l,right:c,width:p,height:d}}}function OC(i,t,e){for(var n=Yn(i,!0),o=me(i)[t];n;){var s=me(n)[e],r=void 0;if(e==="top"||e==="left"?r=o>=s:r=o<=s,!r)return n;if(n===en())break;n=Yn(n,!1)}return!1}function or(i,t,e,n){for(var o=0,s=0,r=i.children;s<r.length;){if(r[s].style.display!=="none"&&r[s]!==pt.ghost&&(n||r[s]!==pt.dragged)&&tn(r[s],e.draggable,i,!1)){if(o===t)return r[s];o++}s++}return null}function Ff(i,t){for(var e=i.lastElementChild;e&&(e===pt.ghost||mt(e,"display")==="none"||t&&!nm(e,t));)e=e.previousElementSibling;return e||null}function yi(i,t){var e=0;if(!i||!i.parentNode)return-1;for(;i=i.previousElementSibling;)i.nodeName.toUpperCase()!=="TEMPLATE"&&i!==pt.clone&&(!t||nm(i,t))&&e++;return e}function DC(i){var t=0,e=0,n=en();if(i)do{var o=nr(i),s=o.a,r=o.d;t+=i.scrollLeft*s,e+=i.scrollTop*r}while(i!==n&&(i=i.parentNode));return[t,e]}function SU(i,t){for(var e in i)if(i.hasOwnProperty(e)){for(var n in t)if(t.hasOwnProperty(n)&&t[n]===i[e][n])return Number(e)}return-1}function Yn(i,t){if(!i||!i.getBoundingClientRect)return en();var e=i,n=!1;do if(e.clientWidth<e.scrollWidth||e.clientHeight<e.scrollHeight){var o=mt(e);if(e.clientWidth<e.scrollWidth&&(o.overflowX=="auto"||o.overflowX=="scroll")||e.clientHeight<e.scrollHeight&&(o.overflowY=="auto"||o.overflowY=="scroll")){if(!e.getBoundingClientRect||e===document.body)return en();if(n||t)return e;n=!0}}while(e=e.parentNode);return en()}function MU(i,t){if(i&&t)for(var e in t)t.hasOwnProperty(e)&&(i[e]=t[e]);return i}function Af(i,t){return Math.round(i.top)===Math.round(t.top)&&Math.round(i.left)===Math.round(t.left)&&Math.round(i.height)===Math.round(t.height)&&Math.round(i.width)===Math.round(t.width)}function zC(i,t){return function(){if(!hl){var e=arguments,n=this;e.length===1?i.call(n,e[0]):i.apply(n,e),hl=setTimeout(function(){hl=void 0},t)}}}function RU(){clearTimeout(hl),hl=void 0}function jC(i,t,e){i.scrollLeft+=t,i.scrollTop+=e}function WC(i){var t=window.Polymer,e=window.jQuery||window.Zepto;return t&&t.dom?t.dom(i).cloneNode(!0):e?e(i).clone(!0)[0]:i.cloneNode(!0)}function IU(){var i=[],t;return{captureAnimationState:function(){if(i=[],!!this.options.animation){var n=[].slice.call(this.el.children);n.forEach(function(o){if(!(mt(o,"display")==="none"||o===pt.ghost)){i.push({target:o,rect:me(o)});var s=nn({},i[i.length-1].rect);if(o.thisAnimationDuration){var r=nr(o,!0);r&&(s.top-=r.f,s.left-=r.e)}o.fromRect=s}})}},addAnimationState:function(n){i.push(n)},removeAnimationState:function(n){i.splice(SU(i,{target:n}),1)},animateAll:function(n){var o=this;if(!this.options.animation){clearTimeout(t),typeof n=="function"&&n();return}var s=!1,r=0;i.forEach(function(a){var l=0,c=a.target,d=c.fromRect,p=me(c),u=c.prevFromRect,m=c.prevToRect,h=a.rect,g=nr(c,!0);g&&(p.top-=g.f,p.left-=g.e),c.toRect=p,c.thisAnimationDuration&&Af(u,p)&&!Af(d,p)&&(h.top-p.top)/(h.left-p.left)===(d.top-p.top)/(d.left-p.left)&&(l=DU(h,u,m,o.options)),Af(p,d)||(c.prevFromRect=d,c.prevToRect=p,l||(l=o.options.animation),o.animate(c,h,p,l)),l&&(s=!0,r=Math.max(r,l),clearTimeout(c.animationResetTimer),c.animationResetTimer=setTimeout(function(){c.animationTime=0,c.prevFromRect=null,c.fromRect=null,c.prevToRect=null,c.thisAnimationDuration=null},l),c.thisAnimationDuration=l)}),clearTimeout(t),s?t=setTimeout(function(){typeof n=="function"&&n()},r):typeof n=="function"&&n(),i=[]},animate:function(n,o,s,r){if(r){mt(n,"transition",""),mt(n,"transform","");var a=nr(this.el),l=a&&a.a,c=a&&a.d,d=(o.left-s.left)/(l||1),p=(o.top-s.top)/(c||1);n.animatingX=!!d,n.animatingY=!!p,mt(n,"transform","translate3d("+d+"px,"+p+"px,0)"),this.forRepaintDummy=OU(n),mt(n,"transition","transform "+r+"ms"+(this.options.easing?" "+this.options.easing:"")),mt(n,"transform","translate3d(0,0,0)"),typeof n.animated=="number"&&clearTimeout(n.animated),n.animated=setTimeout(function(){mt(n,"transition",""),mt(n,"transform",""),n.animated=!1,n.animatingX=!1,n.animatingY=!1},r)}}}}function OU(i){return i.offsetWidth}function DU(i,t,e,n){return Math.sqrt(Math.pow(t.top-i.top,2)+Math.pow(t.left-i.left,2))/Math.sqrt(Math.pow(t.top-e.top,2)+Math.pow(t.left-e.left,2))*n.animation}function HU(i){var t=i.sortable,e=i.rootEl,n=i.name,o=i.targetEl,s=i.cloneEl,r=i.toEl,a=i.fromEl,l=i.oldIndex,c=i.newIndex,d=i.oldDraggableIndex,p=i.newDraggableIndex,u=i.originalEvent,m=i.putSortable,h=i.extraEventProperties;if(t=t||e&&e[li],!!t){var g,f=t.options,E="on"+n.charAt(0).toUpperCase()+n.substr(1);window.CustomEvent&&!En&&!vl?g=new CustomEvent(n,{bubbles:!0,cancelable:!0}):(g=document.createEvent("Event"),g.initEvent(n,!0,!0)),g.to=r||e,g.from=a||e,g.item=o||e,g.clone=s,g.oldIndex=l,g.newIndex=c,g.oldDraggableIndex=d,g.newDraggableIndex=p,g.originalEvent=u,g.pullMode=m?m.lastPutMode:void 0;var b=nn(nn({},h),El.getEventProperties(n,t));for(var L in b)g[L]=b[L];e&&e.dispatchEvent(g),f[E]&&f[E].call(t,g)}}function Be(i){HU(nn({putSortable:Ae,cloneEl:Gt,targetEl:q,rootEl:jt,oldIndex:ir,oldDraggableIndex:ul,newIndex:ai,newDraggableIndex:Gn},i))}function pt(i,t){if(!(i&&i.nodeType&&i.nodeType===1))throw"Sortable: `el` must be an HTMLElement, not ".concat({}.toString.call(i));this.el=i,this.options=t=vn({},t),i[li]=this;var e={group:null,sort:!0,disabled:!1,store:null,handle:null,draggable:/^[uo]l$/i.test(i.nodeName)?">li":">*",swapThreshold:1,invertSwap:!1,invertedSwapThreshold:null,removeCloneOnHide:!0,direction:function(){return qC(i,this.options)},ghostClass:"sortable-ghost",chosenClass:"sortable-chosen",dragClass:"sortable-drag",ignore:"a, img",filter:null,preventOnFilter:!0,animation:0,easing:null,setData:function(r,a){r.setData("Text",a.textContent)},dropBubble:!1,dragoverBubble:!1,dataIdAttr:"data-id",delay:0,delayOnTouchOnly:!1,touchStartThreshold:(Number.parseInt?Number:window).parseInt(window.devicePixelRatio,10)||1,forceFallback:!1,fallbackClass:"sortable-fallback",fallbackOnBody:!1,fallbackTolerance:0,fallbackOffset:{x:0,y:0},supportPointer:pt.supportPointer!==!1&&"PointerEvent"in window&&!pl,emptyInsertThreshold:5};El.initializePlugins(this,i,e);for(var n in e)!(n in t)&&(t[n]=e[n]);GC(t);for(var o in this)o.charAt(0)==="_"&&typeof this[o]=="function"&&(this[o]=this[o].bind(this));this.nativeDraggable=t.forceFallback?!1:NU,this.nativeDraggable&&(this.options.touchStartThreshold=1),t.supportPointer?It(i,"pointerdown",this._onTapStart):(It(i,"mousedown",this._onTapStart),It(i,"touchstart",this._onTapStart)),this.nativeDraggable&&(It(i,"dragover",this),It(i,"dragenter",this)),sm.push(this.el),t.store&&t.store.get&&this.sort(t.store.get(this)||[]),vn(this,IU())}function BU(i){i.dataTransfer&&(i.dataTransfer.dropEffect="move"),i.cancelable&&i.preventDefault()}function Kd(i,t,e,n,o,s,r,a){var l,c=i[li],d=c.options.onMove,p;return window.CustomEvent&&!En&&!vl?l=new CustomEvent("move",{bubbles:!0,cancelable:!0}):(l=document.createEvent("Event"),l.initEvent("move",!0,!0)),l.to=t,l.from=i,l.dragged=e,l.draggedRect=n,l.related=o||t,l.relatedRect=s||me(t),l.willInsertAfter=a,l.originalEvent=r,i.dispatchEvent(l),d&&(p=d.call(c,l,r)),p}function If(i){i.draggable=!1}function UU(){kf=!1}function zU(i,t,e){var n=me(or(e.el,0,e.options,!0)),o=10;return t?i.clientX<n.left-o||i.clientY<n.top&&i.clientX<n.right:i.clientY<n.top-o||i.clientY<n.bottom&&i.clientX<n.left}function jU(i,t,e){var n=me(Ff(e.el,e.options.draggable)),o=10;return t?i.clientX>n.right+o||i.clientX<=n.right&&i.clientY>n.bottom&&i.clientX>=n.left:i.clientX>n.right&&i.clientY>n.top||i.clientX<=n.right&&i.clientY>n.bottom+o}function WU(i,t,e,n,o,s,r,a){var l=n?i.clientY:i.clientX,c=n?e.height:e.width,d=n?e.top:e.left,p=n?e.bottom:e.right,u=!1;if(!r){if(a&&tm<c*o){if(!gl&&(fl===1?l>d+c*s/2:l<p-c*s/2)&&(gl=!0),gl)u=!0;else if(fl===1?l<d+tm:l>p-tm)return-fl}else if(l>d+c*(1-o)/2&&l<p-c*(1-o)/2)return VU(t)}return u=u||r,u&&(l<d+c*s/2||l>p-c*s/2)?l>d+c/2?1:-1:0}function VU(i){return yi(q)<yi(i)?1:-1}function qU(i){for(var t=i.tagName+i.className+i.src+i.href+i.textContent,e=t.length,n=0;e--;)n+=t.charCodeAt(e);return n.toString(36)}function GU(i){rm.length=0;for(var t=i.getElementsByTagName("input"),e=t.length;e--;){var n=t[e];n.checked&&rm.push(n)}}function em(i){return setTimeout(i,0)}function Nf(i){return clearTimeout(i)}function JU(){function i(){this.defaults={scroll:!0,forceAutoScrollFallback:!1,scrollSensitivity:30,scrollSpeed:10,bubbleScroll:!0};for(var t in this)t.charAt(0)==="_"&&typeof this[t]=="function"&&(this[t]=this[t].bind(this))}return i.prototype={dragStarted:function(e){var n=e.originalEvent;this.sortable.nativeDraggable?It(document,"dragover",this._handleAutoScroll):this.options.supportPointer?It(document,"pointermove",this._handleFallbackAutoScroll):n.touches?It(document,"touchmove",this._handleFallbackAutoScroll):It(document,"mousemove",this._handleFallbackAutoScroll)},dragOverCompleted:function(e){var n=e.originalEvent;!this.options.dragOverBubble&&!n.rootEl&&this._handleAutoScroll(n)},drop:function(){this.sortable.nativeDraggable?St(document,"dragover",this._handleAutoScroll):(St(document,"pointermove",this._handleFallbackAutoScroll),St(document,"touchmove",this._handleFallbackAutoScroll),St(document,"mousemove",this._handleFallbackAutoScroll)),PC(),im(),RU()},nulling:function(){am=Pf=dl=$f=ml=Of=Df=null,ne.length=0},_handleFallbackAutoScroll:function(e){this._handleAutoScroll(e,!0)},_handleAutoScroll:function(e,n){var o=this,s=(e.touches?e.touches[0]:e).clientX,r=(e.touches?e.touches[0]:e).clientY,a=document.elementFromPoint(s,r);if(am=e,n||this.options.forceAutoScrollFallback||vl||En||pl){Hf(e,this.options,a,n);var l=Yn(a,!0);$f&&(!ml||s!==Of||r!==Df)&&(ml&&PC(),ml=setInterval(function(){var c=Yn(document.elementFromPoint(s,r),!0);c!==l&&(l=c,im()),Hf(e,o.options,c,n)},10),Of=s,Df=r)}else{if(!this.options.bubbleScroll||Yn(a,!0)===en()){im();return}Hf(e,this.options,Yn(a,!1),!1)}}},vn(i,{pluginName:"scroll",initializeByDefault:!0})}function im(){ne.forEach(function(i){clearInterval(i.pid)}),ne=[]}function PC(){clearInterval(ml)}function Bf(){}function Uf(){}var AU,En,vl,RC,pl,$C,FC,BC,IC,hl,li,Qs,Cf,El,kU,Ve,q,Yt,bt,jt,Uo,Qd,Gt,Jn,ir,ai,ul,Gn,Jd,Ae,er,om,sm,Fo,ki,Sf,Mf,HC,kC,cl,tr,fl,gl,Yd,tm,Ie,Rf,kf,rm,lm,Zd,NC,NU,VC,qC,PU,$U,GC,JC,YC,Bo,FU,ne,dl,Pf,$f,Of,Df,am,ml,Hf,ZC,sr,cm=v(()=>{AU="1.15.0";En=gn(/(?:Trident.*rv[ :]?11\.|msie|iemobile|Windows Phone)/i),vl=gn(/Edge/i),RC=gn(/firefox/i),pl=gn(/safari/i)&&!gn(/chrome/i)&&!gn(/android/i),$C=gn(/iP(ad|od|hone)/i),FC=gn(/chrome/i)&&gn(/android/i),BC={capture:!1,passive:!1};IC=/\s+/g;li="Sortable"+new Date().getTime();Qs=[],Cf={initializeByDefault:!0},El={mount:function(t){for(var e in Cf)Cf.hasOwnProperty(e)&&!(e in t)&&(t[e]=Cf[e]);Qs.forEach(function(n){if(n.pluginName===t.pluginName)throw"Sortable: Cannot mount plugin ".concat(t.pluginName," more than once")}),Qs.push(t)},pluginEvent:function(t,e,n){var o=this;this.eventCanceled=!1,n.cancel=function(){o.eventCanceled=!0};var s=t+"Global";Qs.forEach(function(r){e[r.pluginName]&&(e[r.pluginName][s]&&e[r.pluginName][s](nn({sortable:e},n)),e.options[r.pluginName]&&e[r.pluginName][t]&&e[r.pluginName][t](nn({sortable:e},n)))})},initializePlugins:function(t,e,n,o){Qs.forEach(function(a){var l=a.pluginName;if(!(!t.options[l]&&!a.initializeByDefault)){var c=new a(t,e,t.options);c.sortable=t,c.options=t.options,t[l]=c,vn(n,c.defaults)}});for(var s in t.options)if(t.options.hasOwnProperty(s)){var r=this.modifyOption(t,s,t.options[s]);typeof r!="undefined"&&(t.options[s]=r)}},getEventProperties:function(t,e){var n={};return Qs.forEach(function(o){typeof o.eventProperties=="function"&&vn(n,o.eventProperties.call(e[o.pluginName],t))}),n},modifyOption:function(t,e,n){var o;return Qs.forEach(function(s){t[s.pluginName]&&s.optionListeners&&typeof s.optionListeners[e]=="function"&&(o=s.optionListeners[e].call(t[s.pluginName],n))}),o}};kU=["evt"],Ve=function(t,e){var n=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{},o=n.evt,s=LU(n,kU);El.pluginEvent.bind(pt)(t,e,nn({dragEl:q,parentEl:Yt,ghostEl:bt,rootEl:jt,nextEl:Uo,lastDownEl:Qd,cloneEl:Gt,cloneHidden:Jn,dragStarted:cl,putSortable:Ae,activeSortable:pt.active,originalEvent:o,oldIndex:ir,oldDraggableIndex:ul,newIndex:ai,newDraggableIndex:Gn,hideGhostForTarget:JC,unhideGhostForTarget:YC,cloneNowHidden:function(){Jn=!0},cloneNowShown:function(){Jn=!1},dispatchSortableEvent:function(a){Be({sortable:e,name:a,originalEvent:o})}},s))};er=!1,om=!1,sm=[],gl=!1,Yd=!1,Rf=[],kf=!1,rm=[],lm=typeof document!="undefined",Zd=$C,NC=vl||En?"cssFloat":"float",NU=lm&&!FC&&!$C&&"draggable"in document.createElement("div"),VC=function(){if(lm){if(En)return!1;var i=document.createElement("x");return i.style.cssText="pointer-events:auto",i.style.pointerEvents==="auto"}}(),qC=function(t,e){var n=mt(t),o=parseInt(n.width)-parseInt(n.paddingLeft)-parseInt(n.paddingRight)-parseInt(n.borderLeftWidth)-parseInt(n.borderRightWidth),s=or(t,0,e),r=or(t,1,e),a=s&&mt(s),l=r&&mt(r),c=a&&parseInt(a.marginLeft)+parseInt(a.marginRight)+me(s).width,d=l&&parseInt(l.marginLeft)+parseInt(l.marginRight)+me(r).width;if(n.display==="flex")return n.flexDirection==="column"||n.flexDirection==="column-reverse"?"vertical":"horizontal";if(n.display==="grid")return n.gridTemplateColumns.split(" ").length<=1?"vertical":"horizontal";if(s&&a.float&&a.float!=="none"){var p=a.float==="left"?"left":"right";return r&&(l.clear==="both"||l.clear===p)?"vertical":"horizontal"}return s&&(a.display==="block"||a.display==="flex"||a.display==="table"||a.display==="grid"||c>=o&&n[NC]==="none"||r&&n[NC]==="none"&&c+d>o)?"vertical":"horizontal"},PU=function(t,e,n){var o=n?t.left:t.top,s=n?t.right:t.bottom,r=n?t.width:t.height,a=n?e.left:e.top,l=n?e.right:e.bottom,c=n?e.width:e.height;return o===a||s===l||o+r/2===a+c/2},$U=function(t,e){var n;return sm.some(function(o){var s=o[li].options.emptyInsertThreshold;if(!(!s||Ff(o))){var r=me(o),a=t>=r.left-s&&t<=r.right+s,l=e>=r.top-s&&e<=r.bottom+s;if(a&&l)return n=o}}),n},GC=function(t){function e(s,r){return function(a,l,c,d){var p=a.options.group.name&&l.options.group.name&&a.options.group.name===l.options.group.name;if(s==null&&(r||p))return!0;if(s==null||s===!1)return!1;if(r&&s==="clone")return s;if(typeof s=="function")return e(s(a,l,c,d),r)(a,l,c,d);var u=(r?a:l).options.group.name;return s===!0||typeof s=="string"&&s===u||s.join&&s.indexOf(u)>-1}}var n={},o=t.group;(!o||Xd(o)!="object")&&(o={name:o}),n.name=o.name,n.checkPull=e(o.pull,!0),n.checkPut=e(o.put),n.revertClone=o.revertClone,t.group=n},JC=function(){!VC&&bt&&mt(bt,"display","none")},YC=function(){!VC&&bt&&mt(bt,"display","")};lm&&!FC&&document.addEventListener("click",function(i){if(om)return i.preventDefault(),i.stopPropagation&&i.stopPropagation(),i.stopImmediatePropagation&&i.stopImmediatePropagation(),om=!1,!1},!0);Bo=function(t){if(q){t=t.touches?t.touches[0]:t;var e=$U(t.clientX,t.clientY);if(e){var n={};for(var o in t)t.hasOwnProperty(o)&&(n[o]=t[o]);n.target=n.rootEl=e,n.preventDefault=void 0,n.stopPropagation=void 0,e[li]._onDragOver(n)}}},FU=function(t){q&&q.parentNode[li]._isOutsideThisEl(t.target)};pt.prototype={constructor:pt,_isOutsideThisEl:function(t){!this.el.contains(t)&&t!==this.el&&(tr=null)},_getDirection:function(t,e){return typeof this.options.direction=="function"?this.options.direction.call(this,t,e,q):this.options.direction},_onTapStart:function(t){if(t.cancelable){var e=this,n=this.el,o=this.options,s=o.preventOnFilter,r=t.type,a=t.touches&&t.touches[0]||t.pointerType&&t.pointerType==="touch"&&t,l=(a||t).target,c=t.target.shadowRoot&&(t.path&&t.path[0]||t.composedPath&&t.composedPath()[0])||l,d=o.filter;if(GU(n),!q&&!(/mousedown|pointerdown/.test(r)&&t.button!==0||o.disabled)&&!c.isContentEditable&&!(!this.nativeDraggable&&pl&&l&&l.tagName.toUpperCase()==="SELECT")&&(l=tn(l,o.draggable,n,!1),!(l&&l.animated)&&Qd!==l)){if(ir=yi(l),ul=yi(l,o.draggable),typeof d=="function"){if(d.call(this,t,l,this)){Be({sortable:e,rootEl:c,name:"filter",targetEl:l,toEl:n,fromEl:n}),Ve("filter",e,{evt:t}),s&&t.cancelable&&t.preventDefault();return}}else if(d&&(d=d.split(",").some(function(p){if(p=tn(c,p.trim(),n,!1),p)return Be({sortable:e,rootEl:p,name:"filter",targetEl:l,fromEl:n,toEl:n}),Ve("filter",e,{evt:t}),!0}),d)){s&&t.cancelable&&t.preventDefault();return}o.handle&&!tn(c,o.handle,n,!1)||this._prepareDragStart(t,a,l)}}},_prepareDragStart:function(t,e,n){var o=this,s=o.el,r=o.options,a=s.ownerDocument,l;if(n&&!q&&n.parentNode===s){var c=me(n);if(jt=s,q=n,Yt=q.parentNode,Uo=q.nextSibling,Qd=n,Jd=r.group,pt.dragged=q,Fo={target:q,clientX:(e||t).clientX,clientY:(e||t).clientY},HC=Fo.clientX-c.left,kC=Fo.clientY-c.top,this._lastX=(e||t).clientX,this._lastY=(e||t).clientY,q.style["will-change"]="all",l=function(){if(Ve("delayEnded",o,{evt:t}),pt.eventCanceled){o._onDrop();return}o._disableDelayedDragEvents(),!RC&&o.nativeDraggable&&(q.draggable=!0),o._triggerDragStart(t,e),Be({sortable:o,name:"choose",originalEvent:t}),ri(q,r.chosenClass,!0)},r.ignore.split(",").forEach(function(d){UC(q,d.trim(),If)}),It(a,"dragover",Bo),It(a,"mousemove",Bo),It(a,"touchmove",Bo),It(a,"mouseup",o._onDrop),It(a,"touchend",o._onDrop),It(a,"touchcancel",o._onDrop),RC&&this.nativeDraggable&&(this.options.touchStartThreshold=4,q.draggable=!0),Ve("delayStart",this,{evt:t}),r.delay&&(!r.delayOnTouchOnly||e)&&(!this.nativeDraggable||!(vl||En))){if(pt.eventCanceled){this._onDrop();return}It(a,"mouseup",o._disableDelayedDrag),It(a,"touchend",o._disableDelayedDrag),It(a,"touchcancel",o._disableDelayedDrag),It(a,"mousemove",o._delayedDragTouchMoveHandler),It(a,"touchmove",o._delayedDragTouchMoveHandler),r.supportPointer&&It(a,"pointermove",o._delayedDragTouchMoveHandler),o._dragStartTimer=setTimeout(l,r.delay)}else l()}},_delayedDragTouchMoveHandler:function(t){var e=t.touches?t.touches[0]:t;Math.max(Math.abs(e.clientX-this._lastX),Math.abs(e.clientY-this._lastY))>=Math.floor(this.options.touchStartThreshold/(this.nativeDraggable&&window.devicePixelRatio||1))&&this._disableDelayedDrag()},_disableDelayedDrag:function(){q&&If(q),clearTimeout(this._dragStartTimer),this._disableDelayedDragEvents()},_disableDelayedDragEvents:function(){var t=this.el.ownerDocument;St(t,"mouseup",this._disableDelayedDrag),St(t,"touchend",this._disableDelayedDrag),St(t,"touchcancel",this._disableDelayedDrag),St(t,"mousemove",this._delayedDragTouchMoveHandler),St(t,"touchmove",this._delayedDragTouchMoveHandler),St(t,"pointermove",this._delayedDragTouchMoveHandler)},_triggerDragStart:function(t,e){e=e||t.pointerType=="touch"&&t,!this.nativeDraggable||e?this.options.supportPointer?It(document,"pointermove",this._onTouchMove):e?It(document,"touchmove",this._onTouchMove):It(document,"mousemove",this._onTouchMove):(It(q,"dragend",this),It(jt,"dragstart",this._onDragStart));try{document.selection?em(function(){document.selection.empty()}):window.getSelection().removeAllRanges()}catch(n){}},_dragStarted:function(t,e){if(er=!1,jt&&q){Ve("dragStarted",this,{evt:e}),this.nativeDraggable&&It(document,"dragover",FU);var n=this.options;!t&&ri(q,n.dragClass,!1),ri(q,n.ghostClass,!0),pt.active=this,t&&this._appendGhost(),Be({sortable:this,name:"start",originalEvent:e})}else this._nulling()},_emulateDragOver:function(){if(ki){this._lastX=ki.clientX,this._lastY=ki.clientY,JC();for(var t=document.elementFromPoint(ki.clientX,ki.clientY),e=t;t&&t.shadowRoot&&(t=t.shadowRoot.elementFromPoint(ki.clientX,ki.clientY),t!==e);)e=t;if(q.parentNode[li]._isOutsideThisEl(t),e)do{if(e[li]){var n=void 0;if(n=e[li]._onDragOver({clientX:ki.clientX,clientY:ki.clientY,target:t,rootEl:e}),n&&!this.options.dragoverBubble)break}t=e}while(e=e.parentNode);YC()}},_onTouchMove:function(t){if(Fo){var e=this.options,n=e.fallbackTolerance,o=e.fallbackOffset,s=t.touches?t.touches[0]:t,r=bt&&nr(bt,!0),a=bt&&r&&r.a,l=bt&&r&&r.d,c=Zd&&Ie&&DC(Ie),d=(s.clientX-Fo.clientX+o.x)/(a||1)+(c?c[0]-Rf[0]:0)/(a||1),p=(s.clientY-Fo.clientY+o.y)/(l||1)+(c?c[1]-Rf[1]:0)/(l||1);if(!pt.active&&!er){if(n&&Math.max(Math.abs(s.clientX-this._lastX),Math.abs(s.clientY-this._lastY))<n)return;this._onDragStart(t,!0)}if(bt){r?(r.e+=d-(Sf||0),r.f+=p-(Mf||0)):r={a:1,b:0,c:0,d:1,e:d,f:p};var u="matrix(".concat(r.a,",").concat(r.b,",").concat(r.c,",").concat(r.d,",").concat(r.e,",").concat(r.f,")");mt(bt,"webkitTransform",u),mt(bt,"mozTransform",u),mt(bt,"msTransform",u),mt(bt,"transform",u),Sf=d,Mf=p,ki=s}t.cancelable&&t.preventDefault()}},_appendGhost:function(){if(!bt){var t=this.options.fallbackOnBody?document.body:jt,e=me(q,!0,Zd,!0,t),n=this.options;if(Zd){for(Ie=t;mt(Ie,"position")==="static"&&mt(Ie,"transform")==="none"&&Ie!==document;)Ie=Ie.parentNode;Ie!==document.body&&Ie!==document.documentElement?(Ie===document&&(Ie=en()),e.top+=Ie.scrollTop,e.left+=Ie.scrollLeft):Ie=en(),Rf=DC(Ie)}bt=q.cloneNode(!0),ri(bt,n.ghostClass,!1),ri(bt,n.fallbackClass,!0),ri(bt,n.dragClass,!0),mt(bt,"transition",""),mt(bt,"transform",""),mt(bt,"box-sizing","border-box"),mt(bt,"margin",0),mt(bt,"top",e.top),mt(bt,"left",e.left),mt(bt,"width",e.width),mt(bt,"height",e.height),mt(bt,"opacity","0.8"),mt(bt,"position",Zd?"absolute":"fixed"),mt(bt,"zIndex","100000"),mt(bt,"pointerEvents","none"),pt.ghost=bt,t.appendChild(bt),mt(bt,"transform-origin",HC/parseInt(bt.style.width)*100+"% "+kC/parseInt(bt.style.height)*100+"%")}},_onDragStart:function(t,e){var n=this,o=t.dataTransfer,s=n.options;if(Ve("dragStart",this,{evt:t}),pt.eventCanceled){this._onDrop();return}Ve("setupClone",this),pt.eventCanceled||(Gt=WC(q),Gt.removeAttribute("id"),Gt.draggable=!1,Gt.style["will-change"]="",this._hideClone(),ri(Gt,this.options.chosenClass,!1),pt.clone=Gt),n.cloneId=em(function(){Ve("clone",n),!pt.eventCanceled&&(n.options.removeCloneOnHide||jt.insertBefore(Gt,q),n._hideClone(),Be({sortable:n,name:"clone"}))}),!e&&ri(q,s.dragClass,!0),e?(om=!0,n._loopId=setInterval(n._emulateDragOver,50)):(St(document,"mouseup",n._onDrop),St(document,"touchend",n._onDrop),St(document,"touchcancel",n._onDrop),o&&(o.effectAllowed="move",s.setData&&s.setData.call(n,o,q)),It(document,"drop",n),mt(q,"transform","translateZ(0)")),er=!0,n._dragStartId=em(n._dragStarted.bind(n,e,t)),It(document,"selectstart",n),cl=!0,pl&&mt(document.body,"user-select","none")},_onDragOver:function(t){var e=this.el,n=t.target,o,s,r,a=this.options,l=a.group,c=pt.active,d=Jd===l,p=a.sort,u=Ae||c,m,h=this,g=!1;if(kf)return;function f(Nt,Ut){Ve(Nt,h,nn({evt:t,isOwner:d,axis:m?"vertical":"horizontal",revert:r,dragRect:o,targetRect:s,canSort:p,fromSortable:u,target:n,completed:b,onMove:function(oe,qe){return Kd(jt,e,q,o,oe,me(oe),t,qe)},changed:L},Ut))}function E(){f("dragOverAnimationCapture"),h.captureAnimationState(),h!==u&&u.captureAnimationState()}function b(Nt){return f("dragOverCompleted",{insertion:Nt}),Nt&&(d?c._hideClone():c._showClone(h),h!==u&&(ri(q,Ae?Ae.options.ghostClass:c.options.ghostClass,!1),ri(q,a.ghostClass,!0)),Ae!==h&&h!==pt.active?Ae=h:h===pt.active&&Ae&&(Ae=null),u===h&&(h._ignoreWhileAnimating=n),h.animateAll(function(){f("dragOverAnimationComplete"),h._ignoreWhileAnimating=null}),h!==u&&(u.animateAll(),u._ignoreWhileAnimating=null)),(n===q&&!q.animated||n===e&&!n.animated)&&(tr=null),!a.dragoverBubble&&!t.rootEl&&n!==document&&(q.parentNode[li]._isOutsideThisEl(t.target),!Nt&&Bo(t)),!a.dragoverBubble&&t.stopPropagation&&t.stopPropagation(),g=!0}function L(){ai=yi(q),Gn=yi(q,a.draggable),Be({sortable:h,name:"change",toEl:e,newIndex:ai,newDraggableIndex:Gn,originalEvent:t})}if(t.preventDefault!==void 0&&t.cancelable&&t.preventDefault(),n=tn(n,a.draggable,e,!0),f("dragOver"),pt.eventCanceled)return g;if(q.contains(t.target)||n.animated&&n.animatingX&&n.animatingY||h._ignoreWhileAnimating===n)return b(!1);if(om=!1,c&&!a.disabled&&(d?p||(r=Yt!==jt):Ae===this||(this.lastPutMode=Jd.checkPull(this,c,q,t))&&l.checkPut(this,c,q,t))){if(m=this._getDirection(t,n)==="vertical",o=me(q),f("dragOverValid"),pt.eventCanceled)return g;if(r)return Yt=jt,E(),this._hideClone(),f("revert"),pt.eventCanceled||(Uo?jt.insertBefore(q,Uo):jt.appendChild(q)),b(!0);var S=Ff(e,a.draggable);if(!S||jU(t,m,this)&&!S.animated){if(S===q)return b(!1);if(S&&e===t.target&&(n=S),n&&(s=me(n)),Kd(jt,e,q,o,n,s,t,!!n)!==!1)return E(),S&&S.nextSibling?e.insertBefore(q,S.nextSibling):e.appendChild(q),Yt=e,L(),b(!0)}else if(S&&zU(t,m,this)){var y=or(e,0,a,!0);if(y===q)return b(!1);if(n=y,s=me(n),Kd(jt,e,q,o,n,s,t,!1)!==!1)return E(),e.insertBefore(q,y),Yt=e,L(),b(!0)}else if(n.parentNode===e){s=me(n);var _=0,w,O=q.parentNode!==e,D=!PU(q.animated&&q.toRect||o,n.animated&&n.toRect||s,m),z=m?"top":"left",j=OC(n,"top","top")||OC(q,"top","top"),W=j?j.scrollTop:void 0;tr!==n&&(w=s[z],gl=!1,Yd=!D&&a.invertSwap||O),_=WU(t,n,s,m,D?1:a.swapThreshold,a.invertedSwapThreshold==null?a.swapThreshold:a.invertedSwapThreshold,Yd,tr===n);var I;if(_!==0){var K=yi(q);do K-=_,I=Yt.children[K];while(I&&(mt(I,"display")==="none"||I===bt))}if(_===0||I===n)return b(!1);tr=n,fl=_;var ot=n.nextElementSibling,_t=!1;_t=_===1;var nt=Kd(jt,e,q,o,n,s,t,_t);if(nt!==!1)return(nt===1||nt===-1)&&(_t=nt===1),kf=!0,setTimeout(UU,30),E(),_t&&!ot?e.appendChild(q):n.parentNode.insertBefore(q,_t?ot:n),j&&jC(j,0,W-j.scrollTop),Yt=q.parentNode,w!==void 0&&!Yd&&(tm=Math.abs(w-me(n)[z])),L(),b(!0)}if(e.contains(q))return b(!1)}return!1},_ignoreWhileAnimating:null,_offMoveEvents:function(){St(document,"mousemove",this._onTouchMove),St(document,"touchmove",this._onTouchMove),St(document,"pointermove",this._onTouchMove),St(document,"dragover",Bo),St(document,"mousemove",Bo),St(document,"touchmove",Bo)},_offUpEvents:function(){var t=this.el.ownerDocument;St(t,"mouseup",this._onDrop),St(t,"touchend",this._onDrop),St(t,"pointerup",this._onDrop),St(t,"touchcancel",this._onDrop),St(document,"selectstart",this)},_onDrop:function(t){var e=this.el,n=this.options;if(ai=yi(q),Gn=yi(q,n.draggable),Ve("drop",this,{evt:t}),Yt=q&&q.parentNode,ai=yi(q),Gn=yi(q,n.draggable),pt.eventCanceled){this._nulling();return}er=!1,Yd=!1,gl=!1,clearInterval(this._loopId),clearTimeout(this._dragStartTimer),Nf(this.cloneId),Nf(this._dragStartId),this.nativeDraggable&&(St(document,"drop",this),St(e,"dragstart",this._onDragStart)),this._offMoveEvents(),this._offUpEvents(),pl&&mt(document.body,"user-select",""),mt(q,"transform",""),t&&(cl&&(t.cancelable&&t.preventDefault(),!n.dropBubble&&t.stopPropagation()),bt&&bt.parentNode&&bt.parentNode.removeChild(bt),(jt===Yt||Ae&&Ae.lastPutMode!=="clone")&&Gt&&Gt.parentNode&&Gt.parentNode.removeChild(Gt),q&&(this.nativeDraggable&&St(q,"dragend",this),If(q),q.style["will-change"]="",cl&&!er&&ri(q,Ae?Ae.options.ghostClass:this.options.ghostClass,!1),ri(q,this.options.chosenClass,!1),Be({sortable:this,name:"unchoose",toEl:Yt,newIndex:null,newDraggableIndex:null,originalEvent:t}),jt!==Yt?(ai>=0&&(Be({rootEl:Yt,name:"add",toEl:Yt,fromEl:jt,originalEvent:t}),Be({sortable:this,name:"remove",toEl:Yt,originalEvent:t}),Be({rootEl:Yt,name:"sort",toEl:Yt,fromEl:jt,originalEvent:t}),Be({sortable:this,name:"sort",toEl:Yt,originalEvent:t})),Ae&&Ae.save()):ai!==ir&&ai>=0&&(Be({sortable:this,name:"update",toEl:Yt,originalEvent:t}),Be({sortable:this,name:"sort",toEl:Yt,originalEvent:t})),pt.active&&((ai==null||ai===-1)&&(ai=ir,Gn=ul),Be({sortable:this,name:"end",toEl:Yt,originalEvent:t}),this.save()))),this._nulling()},_nulling:function(){Ve("nulling",this),jt=q=Yt=bt=Uo=Gt=Qd=Jn=Fo=ki=cl=ai=Gn=ir=ul=tr=fl=Ae=Jd=pt.dragged=pt.ghost=pt.clone=pt.active=null,rm.forEach(function(t){t.checked=!0}),rm.length=Sf=Mf=0},handleEvent:function(t){switch(t.type){case"drop":case"dragend":this._onDrop(t);break;case"dragenter":case"dragover":q&&(this._onDragOver(t),BU(t));break;case"selectstart":t.preventDefault();break}},toArray:function(){for(var t=[],e,n=this.el.children,o=0,s=n.length,r=this.options;o<s;o++)e=n[o],tn(e,r.draggable,this.el,!1)&&t.push(e.getAttribute(r.dataIdAttr)||qU(e));return t},sort:function(t,e){var n={},o=this.el;this.toArray().forEach(function(s,r){var a=o.children[r];tn(a,this.options.draggable,o,!1)&&(n[s]=a)},this),e&&this.captureAnimationState(),t.forEach(function(s){n[s]&&(o.removeChild(n[s]),o.appendChild(n[s]))}),e&&this.animateAll()},save:function(){var t=this.options.store;t&&t.set&&t.set(this)},closest:function(t,e){return tn(t,e||this.options.draggable,this.el,!1)},option:function(t,e){var n=this.options;if(e===void 0)return n[t];var o=El.modifyOption(this,t,e);typeof o!="undefined"?n[t]=o:n[t]=e,t==="group"&&GC(n)},destroy:function(){Ve("destroy",this);var t=this.el;t[li]=null,St(t,"mousedown",this._onTapStart),St(t,"touchstart",this._onTapStart),St(t,"pointerdown",this._onTapStart),this.nativeDraggable&&(St(t,"dragover",this),St(t,"dragenter",this)),Array.prototype.forEach.call(t.querySelectorAll("[draggable]"),function(e){e.removeAttribute("draggable")}),this._onDrop(),this._disableDelayedDragEvents(),sm.splice(sm.indexOf(this.el),1),this.el=t=null},_hideClone:function(){if(!Jn){if(Ve("hideClone",this),pt.eventCanceled)return;mt(Gt,"display","none"),this.options.removeCloneOnHide&&Gt.parentNode&&Gt.parentNode.removeChild(Gt),Jn=!0}},_showClone:function(t){if(t.lastPutMode!=="clone"){this._hideClone();return}if(Jn){if(Ve("showClone",this),pt.eventCanceled)return;q.parentNode==jt&&!this.options.group.revertClone?jt.insertBefore(Gt,q):Uo?jt.insertBefore(Gt,Uo):jt.appendChild(Gt),this.options.group.revertClone&&this.animate(q,Gt),mt(Gt,"display",""),Jn=!1}}};lm&&It(document,"touchmove",function(i){(pt.active||er)&&i.cancelable&&i.preventDefault()});pt.utils={on:It,off:St,css:mt,find:UC,is:function(t,e){return!!tn(t,e,t,!1)},extend:MU,throttle:zC,closest:tn,toggleClass:ri,clone:WC,index:yi,nextTick:em,cancelNextTick:Nf,detectDirection:qC,getChild:or};pt.get=function(i){return i[li]};pt.mount=function(){for(var i=arguments.length,t=new Array(i),e=0;e<i;e++)t[e]=arguments[e];t[0].constructor===Array&&(t=t[0]),t.forEach(function(n){if(!n.prototype||!n.prototype.constructor)throw"Sortable: Mounted plugin must be a constructor function, not ".concat({}.toString.call(n));n.utils&&(pt.utils=nn(nn({},pt.utils),n.utils)),El.mount(n)})};pt.create=function(i,t){return new pt(i,t)};pt.version=AU;ne=[],$f=!1;Hf=zC(function(i,t,e,n){if(t.scroll){var o=(i.touches?i.touches[0]:i).clientX,s=(i.touches?i.touches[0]:i).clientY,r=t.scrollSensitivity,a=t.scrollSpeed,l=en(),c=!1,d;Pf!==e&&(Pf=e,im(),dl=t.scroll,d=t.scrollFn,dl===!0&&(dl=Yn(e,!0)));var p=0,u=dl;do{var m=u,h=me(m),g=h.top,f=h.bottom,E=h.left,b=h.right,L=h.width,S=h.height,y=void 0,_=void 0,w=m.scrollWidth,O=m.scrollHeight,D=mt(m),z=m.scrollLeft,j=m.scrollTop;m===l?(y=L<w&&(D.overflowX==="auto"||D.overflowX==="scroll"||D.overflowX==="visible"),_=S<O&&(D.overflowY==="auto"||D.overflowY==="scroll"||D.overflowY==="visible")):(y=L<w&&(D.overflowX==="auto"||D.overflowX==="scroll"),_=S<O&&(D.overflowY==="auto"||D.overflowY==="scroll"));var W=y&&(Math.abs(b-o)<=r&&z+L<w)-(Math.abs(E-o)<=r&&!!z),I=_&&(Math.abs(f-s)<=r&&j+S<O)-(Math.abs(g-s)<=r&&!!j);if(!ne[p])for(var K=0;K<=p;K++)ne[K]||(ne[K]={});(ne[p].vx!=W||ne[p].vy!=I||ne[p].el!==m)&&(ne[p].el=m,ne[p].vx=W,ne[p].vy=I,clearInterval(ne[p].pid),(W!=0||I!=0)&&(c=!0,ne[p].pid=setInterval(function(){n&&this.layer===0&&pt.active._onTouchMove(am);var ot=ne[this.layer].vy?ne[this.layer].vy*a:0,_t=ne[this.layer].vx?ne[this.layer].vx*a:0;typeof d=="function"&&d.call(pt.dragged.parentNode[li],_t,ot,i,am,ne[this.layer].el)!=="continue"||jC(ne[this.layer].el,_t,ot)}.bind({layer:p}),24))),p++}while(t.bubbleScroll&&u!==l&&(u=Yn(u,!1)));$f=c}},30),ZC=function(t){var e=t.originalEvent,n=t.putSortable,o=t.dragEl,s=t.activeSortable,r=t.dispatchSortableEvent,a=t.hideGhostForTarget,l=t.unhideGhostForTarget;if(e){var c=n||s;a();var d=e.changedTouches&&e.changedTouches.length?e.changedTouches[0]:e,p=document.elementFromPoint(d.clientX,d.clientY);l(),c&&!c.el.contains(p)&&(r("spill"),this.onSpill({dragEl:o,putSortable:n}))}};Bf.prototype={startIndex:null,dragStart:function(t){var e=t.oldDraggableIndex;this.startIndex=e},onSpill:function(t){var e=t.dragEl,n=t.putSortable;this.sortable.captureAnimationState(),n&&n.captureAnimationState();var o=or(this.sortable.el,this.startIndex,this.options);o?this.sortable.el.insertBefore(e,o):this.sortable.el.appendChild(e),this.sortable.animateAll(),n&&n.animateAll()},drop:ZC};vn(Bf,{pluginName:"revertOnSpill"});Uf.prototype={onSpill:function(t){var e=t.dragEl,n=t.putSortable,o=n||this.sortable;o.captureAnimationState(),e.parentNode&&e.parentNode.removeChild(e),o.animateAll()},drop:ZC};vn(Uf,{pluginName:"removeOnSpill"});pt.mount(new JU);pt.mount(Uf,Bf);sr=pt});var KC,XC,QC,tS,eS,dm,iS,nS,oS,zf=v(()=>{"use strict";KC="Кадрирование",XC="Двойной клик выделяет максимально возможный фрагмент.",QC="Если {MAX_IMAGES, plural, one {изображение} other {какое-то из изображений}} нужно скадрировать, сделайте это сейчас. После сохранения формы такой возможности уже не будет.{MAX_IMAGES, plural, one {} other { Также вы можете поменять порядок вывода изображений, перетаскивая их мышкой.}}",tS="Кадрировать",eS="Вставить в текст",dm="Заменить",iS="Удалить",nS="Вы уверены?",oS="Готово"});var jf,YU,bl,rS=v(()=>{"use strict";jf=`uid_${Math.random()*1e9>>>0}`,YU=0,bl=i=>Object.prototype.hasOwnProperty.call(i,jf)&&i[jf]||(i[jf]=++YU)});var mm,pm,aS=v(()=>{"use strict";cm();$();Le();zf();V();Ce();Me();Mn();G();Z();rS();Vi();Vt();gt();zi();ra();mm=i=>i?i.split(",").map(t=>Number(t)):[],pm=class{constructor(t,e,n){this.container_=n,this.form_=t,this.type_=e,this.fieldName_=e,this.ilgNamespace_=`ilg${this.getId()}`,this.replaceUploaders_=new Map,this.allowCrop_=!0,this.allowReplace_=!0,this.showNumbers_=!1,this.buttonClassName_="c-button",this.maxImages_=1,this.showCropInfo_=!0,this.removeConfirm_=this.removeConfirm_.bind(this),this.handleReplaceFileUploaded_=this.handleReplaceFileUploaded_.bind(this),this.handleFilesUploaded_=this.handleFilesUploaded_.bind(this),T.registerHandlers(this.ilgNamespace_,{remove:this.remove_,link:this.externalLink_,crop:this.showCrop_,cropsubmit:this.updateCrop_},this)}getId(){return this.id_||(this.id_=de())}getAllowCrop(){return this.allowCrop_}setAllowCrop(t){this.allowCrop_=t}setUploadUrl(t){this.uploadUrl_=t}setFieldName(t){this.fieldName_=t}getAllowLink(){return this.allowLink_}setAllowLink(t){this.allowLink_=t}getAllowReplace(){return this.allowReplace_}setAllowReplace(t){this.allowReplace_=t}getAspectRatio(){return this.aspectRatio_}setAspectRatio(t,e){this.aspectRatio_=new Ot(t,e)}setShowNumbers(t){this.showNumbers_=t}getShowNumbers(){return this.showNumbers_}setButtonClass(t){this.buttonClassName_=t}getButtonClass(){return this.buttonClassName_}getMaxImages(){return this.maxImages_}setMaxImages(t){this.maxImages_=t}getShowCropInfo(){return this.showCropInfo_}setShowCropInfo(t){this.showCropInfo_=t}getUploader(){return this.uploader_}init(){this.container_.className="imagelist";let t=document.createElement("div");t.style.position="absolute",this.container_.after(t),this.hidden_=t;let e=0,n;for(;n=this.form_[`${this.fieldName_}-${e+1}`];e++)t.appendChild(n),this.renderThumbnail_(this.getItemInfo_(n));this.imagesNumber_=e,e>0&&(this.CropInfoRendered_=!0);let o=document.createElement("div");this.container_.after(o),this.uploader_=new Oi(this.type_,this.buttonClassName_),this.uploadUrl_&&this.uploader_.setUploadUrl(this.uploadUrl_),this.updateUploaderMaxFiles_(),this.uploader_.render(o),this.uploader_.addEventListener("ready",this.handleFilesUploaded_),this.getMaxImages()!==1&&(this.container_.classList.add("imagelist-drag"),sr.create(this.container_,{draggable:".imagelist-item",onSort:this.sync_.bind(this),animation:150,forceFallback:!0,ghostClass:"imagelist-ghost",handle:".imagelist-pic-wrapper"}))}prepareFileInfo_(t,e){let{thumbnail:n,preview:o}=t;return this.allowCrop_&&o&&this.renderCropInfo_(),N({id:t.id,index:e||++this.imagesNumber_,thumbnail:n[0],thumbnailSize:[n[1],n[2]]},this.allowCrop_&&o&&{preview:o[0],previewSize:[o[1],o[2]],crop:t.crop,cropMinSize:t.cropMinSize})}addItem_(t){let e=this.prepareFileInfo_(t);this.createHiddenField_(e);let n=this.renderThumbnail_(e);this.container_.appendChild(n)}replaceItem_(t,e){let n=Number(e.dataset.index),o=this.prepareFileInfo_(t,n),s=this.replaceUploaders_.get(bl(e));s&&s.dispose(),e.querySelector(".imagelist-pic-wrapper").innerHTML=this.getThumbnailWrapperHtml_(o);let r="imagelist-controls";e.querySelector(`.${r}`).innerHTML=this.getThumbnailControlsHtml_(o),this.initReplaceUploader_(e),this.resizeThumbnailCrop_(e,o),this.createHiddenField_(o),st.publish("imagelist-replace")}removeItem_(t){let e=this.replaceUploaders_.get(bl(t));e&&e.dispose(),t.remove(),this.imagesNumber_--}handleFilesUploaded_(t){t.detail.forEach(e=>this.addItem_(e)),this.updateUploaderMaxFiles_()}handleReplaceFileUploaded_(t){var e;if(t.detail.length>0){let n=(e=t.target.getElement())==null?void 0:e.closest(".imagelist-item");this.replaceItem_(t.detail[0],n)}}removeConfirm_(t){if(!this.removeConfirmItem_)return;document.removeEventListener("mousedown",this.removeConfirm_,!0),document.removeEventListener("touchstart",this.removeConfirm_,!0);let e=t.target;if(this.removeConfirmItem_.nextSibling.contains(e)){let o=e.closest(".imagelist-item"),s=this.replaceUploaders_.get(bl(o));s&&s.dispose(),this.removeItem_(o),this.sync_(),this.updateUploaderMaxFiles_()}this.showRemoveConfirm_(this.removeConfirmItem_,!1),this.removeConfirmItem_=void 0}remove_(t){let n=t.node().closest(".imagelist-control-remove");this.removeConfirmItem_=n,this.showRemoveConfirm_(n,!0),document.addEventListener("mousedown",this.removeConfirm_,!0),document.addEventListener("touchstart",this.removeConfirm_,!0)}showRemoveConfirm_(t,e){M(t,!e),M(t.nextSibling,e)}externalLink_(t){let n=t.node().closest(".imagelist-item"),{index:o}=n.dataset,s=this.getItemInfo_(this.form_[`${this.fieldName_}-${o}`]);st.publish("imagelist-link",this.type_,s)}updateUploaderMaxFiles_(){let t=Math.max(0,this.getMaxImages()-this.imagesNumber_);this.uploader_.setVisible(t>0),this.uploader_.setMaxFiles(t),st.publish("imagelist-update")}renderThumbnail_(t){let e=Fi(this.getThumbnailHtml_(t));return this.container_.appendChild(e),this.initReplaceUploader_(e),this.resizeThumbnailCrop_(e,t),e}initReplaceUploader_(t){if(!this.allowReplace_)return;let e=U("imagelist-control-replace",t),n=new Oi(this.type_,"r-button-unstyled c-link c-link--text");this.uploadUrl_&&n.setUploadUrl(this.uploadUrl_),n.setButtonCaption(dm),n.render(e),n.setVisible(!0),this.replaceUploaders_.set(bl(t),n),n.addEventListener("ready",this.handleReplaceFileUploaded_)}resizeThumbnailCrop_(t,e){if(!e.preview)return;let n=e.previewSize[0]>e.previewSize[1]?e.thumbnailSize[0]/e.previewSize[0]:e.thumbnailSize[1]/e.previewSize[1],o=[Math.round(e.crop[1]*n),Math.round((e.crop[0]+e.crop[2])*n),Math.round((e.crop[1]+e.crop[3])*n),Math.round(e.crop[0]*n)],s=U("imagelist-pic-mask",t);s.style.clip=`rect(${o[0]}px, ${o[1]}px, ${o[2]}px, ${o[3]}px)`}renderCropInfo_(){if(!this.showCropInfo_||this.CropInfoRendered_)return;let t=document.createElement("div");t.className="imagelist-warning",t.innerHTML=it(QC,{MAX_IMAGES:this.maxImages_}),this.container_.before(t),this.CropInfoRendered_=!0}sync_(){let t=this.getItemsInfo_();this.hidden_.innerHTML="";let e=this.container_.children;for(let o=0,s;s=e[o];o++){let r=Number(s.dataset.index),a=t[r-1];if(a&&(a.index=o+1,this.createHiddenField_(a)),s.dataset.index=String(o+1),this.showNumbers_){let l=U("imagelist-number",s);l.textContent=String(o+1)}}let n=this.getItemsInfo_();st.publish("imagelist-sync",this.type_,t,n),st.publish("imagelist-update"),_e(this.form_)}getItemInfo_(t){let{dataset:e}=t,n=e.key||t.name,o={index:Number(/(\d+)$/.exec(n)[1]),id:t.value,thumbnail:e.thumbnail,thumbnailSize:mm(e.thumbnailSize)},{preview:s}=e;return s&&(o.preview=s,o.previewSize=mm(e.previewSize),o.crop=mm(e.crop),o.cropMinSize=mm(e.cropMinSize)),o}getItemsInfo_(){return et("input",this.hidden_).map(this.getItemInfo_).sort((n,o)=>n.index>o.index?1:-1)}createHiddenField_(t){let e=`${this.fieldName_}-${t.index}`,n=P("input",{name:e,type:"hidden",value:t.id});n.dataset.thumbnail=t.thumbnail,n.dataset.thumbnailSize=t.thumbnailSize.join(","),t.preview&&(n.dataset.preview=t.preview,n.dataset.previewSize=t.previewSize.join(","),n.dataset.crop=t.crop.join(","),n.dataset.cropMinSize=t.cropMinSize.join(",")),this.form_[e]&&this.form_[e].remove(),this.hidden_.appendChild(n)}showCrop_(t){let n=t.node().closest(".imagelist-item");this.showCropInternal_(n)}showCropInternal_(t){this.cropItem_=t;let{index:e}=this.cropItem_.dataset,n=this.getItemInfo_(this.form_[`${this.fieldName_}-${e}`]);this.cropInfo_=n,this.cropDialog_=Te({anchor:U("imagelist-pic",this.cropItem_),className:"c-dialog-crop",title:KC,html:this.getCropDialogHtml_(n)}),this.crop_=this.cropDialog_.contentElement.querySelector("x-crop"),this.crop_.addEventListener("change",()=>{n.crop&&n.crop.length&&(this.crop_.naturalCrop={left:n.crop[0],top:n.crop[1],width:n.crop[2],height:n.crop[3]})},{once:!0})}updateCrop_(t){return A(this,null,function*(){yt(t);let e=this.crop_.naturalCrop,n=[e.left,e.top,e.width,e.height],o=new fe(U("c-dialog-buttons__spinner",t.node())),s=yield R(this.uploader_.getUploadUrl(),"upx",{method:"POST",anchorEl:t.node().submit,spinner:o,omitMobileHeader:!0,body:{_:"crop",id:this.cropInfo_.id,crop:n.join(","),type:this.type_}});this.cropInfo_.crop=n;let r=this.form_[`${this.fieldName_}-${this.cropInfo_.index}`];r.value=s.id,r.dataset.crop=n.join(","),this.resizeThumbnailCrop_(this.cropItem_,this.cropInfo_),this.cropInfo_=void 0,this.cropItem_=void 0,this.cropDialog_.hide(),st.publish("imagelist-update")})}getThumbnailHtml_(t){return`<div class="imagelist-item" data-index="${t.index}"><div class="imagelist-pic-wrapper">${this.getThumbnailWrapperHtml_(t)}</div><div class="imagelist-controls">${this.getThumbnailControlsHtml_(t)}</div></div>`}getThumbnailWrapperHtml_(t){return`<div class="imagelist-pic" style="width:${t.thumbnailSize[0]}px;height:${t.thumbnailSize[1]}px"><img src="${t.thumbnail}" width=${t.thumbnailSize[0]} height=${t.thumbnailSize[1]}><div class="imagelist-pic-overlay"></div><img src="${t.thumbnail}" class="imagelist-pic-mask"></div>${this.showNumbers_?`<span class="imagelist-number">${t.index}</span>`:""}`}getThumbnailControlsHtml_(t){let e="imagelist-control",n=`${e}-caption c-link c-link--text`;return`${(this.allowCrop_&&t.preview?`<div class="${e} ${e}-crop"><span class="${n}" data-action="${this.ilgNamespace_}.crop" onclick="">${tS}</span></div>`:"")+(this.allowLink_?`<div class="${e} ${e}-link"><span class="${n}" data-action="${this.ilgNamespace_}.link" onclick="">${eS}</span></div>`:"")+(this.allowReplace_?`<div class="${e}-replace"></div>`:"")}<div class="${e} ${e}-remove"><span class="${n}" data-action="${this.ilgNamespace_}.remove" onclick="">${iS}</span></div><div style="display:none" class="${e} ${e}-remove-confirm">${nS}</div>`}getCropDialogHtml_(t){return`
<form data-keysubmit data-action="submit:${this.ilgNamespace_}.cropsubmit">
  <div class="c-dialog-desc" style="width:${t.previewSize[0]}px">${XC}</div>
  <x-crop class="c-dialog-crop__preview" src="${t.preview}" style="width:${t.previewSize[0]}px;height:${t.previewSize[1]}px"
    min-width="${t.cropMinSize[0]}" min-height="${t.cropMinSize[1]}"
    ${this.aspectRatio_?`aspect-ratio="${this.aspectRatio_.width}/${this.aspectRatio_.height}"`:""}></x-crop>
  <div class="c-dialog-buttons">
    <span class="c-dialog-buttons__spinner"></span>
    <button name="submit" class="c-button" type="submit">${oS}</button>
  </div>
</form>`}}});var lS={};ut(lS,{default:()=>hm});var hm,cS=v(()=>{"use strict";Y();aS();hm=class extends H{parsedInit(){let{dataset:t}=this.element,e=this.element.closest("form"),n=t.type||"",{fieldName:o}=t,s=Number(t.max)||1,r=t.ar?t.ar.split(",").map(Number):void 0,a=t.allowlink==="",l=new pm(e,n,this.element);o&&l.setFieldName(o),l.setUploadUrl(d2Env.uploadUrl),l.setAllowLink(a),l.setMaxImages(s),l.setShowNumbers(s>1),d2Env.isMobile&&l.setAllowCrop(!1),r&&r.length===2&&l.setAspectRatio(r[0],r[1]),l.init()}}});var hS={};ut(hS,{default:()=>fm});var ZU,pS,KU,dS,XU,QU,um,mS,fm,uS=v(()=>{"use strict";V();Y();pa();ZU="is-active",pS="Пн Вт Ср Чт Пт Сб Вс".split(" "),KU=i=>{let t=Array.from({length:24},(n,o)=>1<<o);return(i?i.split(",").map(n=>Number(n)):[0,0,0,0,0,0,0]).map(n=>t.map(o=>(n&o)!==0))},dS=i=>i.map(e=>e.map((n,o)=>n?1<<o:0).reduce((n,o)=>n|o)).join(","),XU=i=>{let t=Array.from({length:25},(s,r)=>`<th><i>${r}</i></th>`).join(""),e=Array.from({length:24},()=>"<td></td>").join(""),n=pS.map(s=>`<tr><th class="c-hselect__weekday"><span>${s}</span></th>${e}</tr>`).join(""),o=`<table class="c-hselect"><tr class="c-hselect__hours">${t}</tr>${n}</table>`;i.innerHTML=o},QU=i=>{let t=pS.map(s=>`<th><i>${s}</i></th>`),e=Array.from({length:7},()=>"<td></td>").join(""),o=`<table class="c-hselect">${Array.from({length:25},(s,r)=>`<tr${r===0?' class="c-hselect__weekdays"':""}>
      <th class="c-hselect__hour"><span>${r}</span>${r===0?t:e}</th>
    </tr>`).join("")}</table>`;i.innerHTML=o},um=(i,t)=>{d2Env.isMobile&&(t=t[0].map((n,o)=>t.map(s=>s[o])));let e=t.reduce((n,o)=>n.concat(o));i.forEach((n,o)=>n.classList.toggle(ZU,e[o]))},mS=(i,t,e,n,o,s)=>{let r=Math.min(t,n),a=Math.min(e,o),l=Math.max(t,n),c=Math.max(e,o),d=(p,u)=>u>=r&&u<=l&&p>=a&&p<=c;return i.map((p,u)=>p.map((m,h)=>{let g=d(u,h);return s?m&&!g:m||g}))},fm=class extends H{init(){this.container=document.createElement("div"),this.element.before(this.container),d2Env.isMobile?QU(this.container):XU(this.container),this.grid=et("td",this.container);let{width:e,height:n}=this.grid[0].getBoundingClientRect();this.gridWidth=e,this.gridHeight=n,this.data=KU(this.element.value),um(this.grid,this.data),this.pointerDown=this.pointerDown.bind(this),this.pointerMove=this.pointerMove.bind(this),this.pointerUp=this.pointerUp.bind(this),this.pointerClick=this.pointerClick.bind(this),this.pointerDown=this.pointerDown.bind(this),this.attachEvents()}getPosition(e){let n=this.container.getBoundingClientRect(),o=Math.max(0,Math.ceil((bi(e.clientX,n.left,n.left+n.width)-n.left)/this.gridWidth)-2),s=Math.max(0,Math.ceil((bi(e.clientY,n.top,n.top+n.height)-n.top)/this.gridHeight)-2);return{x:o,y:s}}pointerClick(e){let{x:n,y:o}=this.getPosition(e);this.data=mS(this.data,o,n,o,n,this.data[n][o]),um(this.grid,this.data),this.element.value=dS(this.data)}pointerDown(e){this.startHour=void 0,this.startDay=void 0,this.isClearMode=void 0,this.curData=void 0,document.addEventListener("mousemove",this.pointerMove),this.pointerMove(e)}pointerMove(e){e.preventDefault();let{x:n,y:o}=this.getPosition(e);this.startHour=this.startHour!==void 0?this.startHour:n,this.startDay=this.startDay!==void 0?this.startDay:o,this.isClearMode===void 0&&(this.isClearMode=this.data[o][n]||!1),this.curData=mS(this.data,this.startHour,this.startDay,n,o,this.isClearMode),um(this.grid,this.curData),document.addEventListener("mouseup",this.pointerUp)}pointerUp(){this.curData&&(this.data=this.curData,um(this.grid,this.data),this.element.value=dS(this.data)),this.attachEvents()}attachEvents(){this.container.removeEventListener("mousedown",this.pointerDown),document.removeEventListener("mousemove",this.pointerMove),document.removeEventListener("mouseup",this.pointerUp),d2Env.isMobile?this.container.addEventListener("click",this.pointerClick,{once:!0}):this.container.addEventListener("mousedown",this.pointerDown)}}});var fS={};ut(fS,{default:()=>e2});var _l,Wf,t2,e2,gS=v(()=>{"use strict";$();X();Z();_l="quick-filter",Wf=new Map,t2=i=>{let t=x(_l,"root");if(!t)return;Wf.size===0&&ft(_l,"item",t).forEach(s=>{Wf.set(s,x(_l,"text",s).textContent.toLowerCase())});let e=i.node().value.toLowerCase(),n=!0;for(let[s,r]of Wf){let a=r.includes(e);a&&(n=!1),M(s,a)}let o=x(_l,"empty",t);o&&M(o,n)},e2=()=>{T.registerHandlers(_l,{filter:t2})}});var Vf,vS,qf,Gf,ES=v(()=>{"use strict";Vf="Редактировать",vS="Скопировать ссылку",qf="Удалить из Истории",Gf="Очистить историю"});var bS={};ut(bS,{default:()=>s2});var Jf,n2,o2,s2,_S=v(()=>{"use strict";$();te();ES();X();G();Hr();Hn();gt();Jf="history",n2=i=>A(void 0,null,function*(){let t=i.node(),e=[{action:"delete",text:qf,confirmTitle:`${qf}?`,confirm:qt,delete:!0}];"clipboard"in navigator&&e.unshift({action:"copy",text:vS}),new xe(t,e,Vf).addEventListener("select",o=>A(void 0,null,function*(){zt();let s=o.detail;s==="copy"?yield navigator.clipboard.writeText(lt(t,"quick-filter","item").querySelector("a").href):s==="delete"&&(yield R("/my/history/delete",`${Jf}.delete`,{method:"POST",anchorEl:t,body:{id:t.dataset.id,kind:t.dataset.kind}}),lt(t,"quick-filter","item").remove())}))}),o2=i=>A(void 0,null,function*(){let t=i.node();new xe(t,[{action:"delete",text:Gf,confirmTitle:`${Gf}?`,confirm:qt,delete:!0}],Vf).addEventListener("select",n=>A(void 0,null,function*(){zt(),n.detail==="delete"&&(yield R("/my/history/clear",`${Jf}.delete-all`,{method:"POST",anchorEl:t,body:""}),Mt(),d2Env.isApp&&(yield ji(50)),window.location.reload())}))}),s2=()=>{T.registerHandlers(Jf,{menu:n2,"top-menu":o2})}});var yS,TS,yl,xS,r2,a2,l2,c2,wS,LS=v(()=>{"use strict";$();Le();V();G();Vt();gt();yS="albums",TS="/ajax/albums.cshtml",xS=(i,t)=>A(void 0,null,function*(){let e=t?t.key.value:i.dataset.key,n=N({_:"picadd",key:e},t&&{album:t.album.value,caption:t.caption.value,delete:t.delete.value}),o=yield R(TS,yS,{method:"POST",anchorEl:i,body:n});Mt();let s=yl&&At(yl,"albums-pics-item");if(s&&o.delete&&s.dataset.isowner===""){s.remove(),st.publish("albums-grid");return}let r=Fi(o.html);if(yl.replaceWith(r),s){let l=U("js-album-caption",s).innerHTML,c=U("albums-pics-item-caption",s);c||(c=document.createElement("div"),c.className="albums-pics-item-caption",U("albums-pics-item-i",s).after(c)),l?c.innerHTML=l:c.remove(),st.publish("albums-grid")}}),r2=i=>{let t=i.node();yl=t,xS(t)},a2=i=>A(void 0,null,function*(){let t=i.node(),e={_:"geteditform",key:t.dataset.key},n=yield R(TS,`${yS}-edit`,{method:"POST",anchorEl:t,body:e}),{html:o}=n;o&&(yl=t,Te({anchor:t,title:n.header,html:o}))}),l2=i=>{yt(i);let t=i.node();xS(t.submitbtn,t)},c2=i=>{let t=i.node();t.form.delete.value="1",Go(t.form)},wS=()=>{T.registerHandlers("albums",{add:r2,edit:a2,submit:l2,delete:c2})}});var AS,CS,SS=v(()=>{"use strict";AS="Удалить содержимое?",CS="Содержимое Альбома будет утеряно навсегда. Вы уверены?"});var m2,Tl,MS=v(()=>{"use strict";$();SS();te();V();Y();G();Re();Z();Vt();gt();m2="/ajax/albums.cshtml",Tl=class extends H{parsedInit(){this.maxAlbums_=Number(this.element.dataset.maxAlbums||100),this.listEl_=U("albums-list"),this.newEl_=U("albums-new"),T.registerHandlers("albumslist",{sortname:this.onSort_,sortsize:this.onSort_,sortupdate:this.onSort_,edit:this.onEdit_,submit:this.onSubmit_,update:this.onAction_,create:this.onAction_,delete:this.onDelete_,cancel:this.cancel_},this)}onEdit_(e){this.cancel_();let n=e.node(),o=At(n,"albums-list-row"),s=U("albums-list-title-i",o),r=n.dataset.public==="1",a=n.dataset.protected==="1";this.active_=!0,this.activeRow_=o;let l=this.getForm_(!0,a,r,$e(s.innerHTML));o.after(l),M(o,!1),U("albums-form-input",l).focus()}onDelete_(e){return A(this,null,function*(){let n=e.node();(yield dt(AS,CS,n,qt))&&this.onAction_(e)})}onSubmit_(e){yt(e);let n=e.node(),o=n.dataset.mode||"create";this.request_(o,n)}onAction_(e){let n=e.node(),o=e.actionName();this.request_(o,n)}onSort_(e){let n=e.actionName();this.cancel_();let o=Pt("albums-list-row",this.listEl_),s=[],r;for(let l=0;r=o[l];l++){let c=U("c-counter",r);s[l]=[r,U("albums-list-title-i",r).textContent,c?Number(c.innerHTML):0,Number(r.dataset.update)]}let a=n==="sortname"?0:n==="sortsize"?1:2;s.sort((l,c)=>{let d=l[a+1],p=c[a+1];return a===0?d>p?1:-1:d<p?1:-1}),this.listEl_.append(...s.map(l=>l[0]))}cancel_(){if(!this.active_)return;this.active_=!1;let e=At(this.element,"albums-list-row");e&&e.remove(),M(this.element,!1),this.newEl_.after(this.element),this.activeRow_&&(M(this.activeRow_,!0),this.activeRow_=void 0);let n=Pt("albums-list-row",this.listEl_);M(this.newEl_,!(n&&n.length&&n.length>=this.maxAlbums_))}request_(e,n){return A(this,null,function*(){let o=this.element.title.value;if(!o)return;let s=this.element.public.value==="public",r=N(N({_:e},e!=="delete"&&{title:o,public:s}),e!=="create"&&{id:At(this.element,"albums-list-row").previousElementSibling.dataset.id}),{html:a}=yield R(m2,"albums",{method:"POST",anchorEl:n,body:r}),c=At(this.element,"albums-list-row").previousElementSibling;e!=="delete"&&(c?c.insertAdjacentHTML("afterend",a||""):this.listEl_.insertAdjacentHTML("beforeend",a||"")),this.cancel_(),e!=="create"&&c&&c.remove()})}getForm_(e,n,o,s){this.element.dataset.mode=e?"update":"create",M(this.element,!0),M(U("albums-form-newbtns",this.element),!e),M(U("albums-form-editbtns",this.element),e),M(U("albums-form-delete",this.element),!n),this.element.public.value=o?"public":"private",this.element.title.value=s||"";let r=document.createElement("div");return r.className="albums-list-row albums-list-row-new",r.appendChild(this.element),r}}});var p2,xl,RS=v(()=>{"use strict";Le();V();Y();p2="albums-pics-item",xl=class extends H{parsedInit(){this.update(),this.element.style.visibility="visible",st.subscribe("albums-grid",this.update,this)}update(){let t,e=()=>-t,n=Pt(p2,this.element);if(!n)return;let o=this.element.offsetWidth,s=[],r=[{left:0,top:0}];for(let l=0,c;c=n[l];l++){let{offsetWidth:d,offsetHeight:p}=c,u,m=0,h=0,g=0;t=r[0].top;let f;for(f=1;f<r.length&&r[f].left<d;f++)t=Math.max(t,r[f].top);u=t,h=f,g=e();for(let w=1;w<r.length&&r[w].left+d<=o;w++){for(t=r[w].top,f=w+1;f<r.length&&r[f].left-r[w].left<d;f++)t=Math.max(t,r[f].top);let O=e();O>g&&(m=w,h=f,u=t,g=O)}let{offsetLeft:E,offsetTop:b}=c,L={left:r[m].left,top:u};(b!==L.top||E!==L.left)&&s.push([c,L]);let S=r[h-1].top,y=r[h]?r[h].left:o,_=r[m].left+d;r[m].top=u+p,_<y?r.splice(m+1,h-m-1,{left:_,top:S}):r.splice(m+1,h-m-1)}for(let l=0,c;c=s[l];l++)c[0].style.top=`${c[1].top}px`,c[0].style.left=`${c[1].left}px`;let a=0;for(let l=0;l<r.length;l++)a=Math.max(a,r[l].top);this.element.style.height=`${a+20}px`}}});var IS={};ut(IS,{default:()=>h2});var h2,OS=v(()=>{"use strict";Y();LS();MS();RS();h2=()=>{wS(),B("albums",Tl),d2Env.isMobile||B("albumsgrid",xl)}});var DS,HS,kS,NS,PS=v(()=>{"use strict";DS="скрытая",HS="заблокирована",kS="Все записи",NS="Подходящих записей нет. Попробуйте изменить или переформулировать запрос."});var FS={};ut(FS,{default:()=>_2});var wl,$S,f2,g2,v2,E2,b2,Yf,_2,BS=v(()=>{"use strict";vt();us();Xt();$();PS();X();Ji();G();Re();Eo();In();Mi();Ic();wl="logbook-search",$S=(i,t)=>C`
<a class="x-box c-logbook-card c-darkening-hover-container" href=${i.link} data-track=${Ei(t)}>
  <div class="c-logbook-card__pic">
    ${Se({images:[i.photo]},2,{size:{width:1,height:1},className:"is-rounded has-darkening-hover"})}
    ${i.mediaPreview?C`<div class="c-logbook-card__media-preview c-darkening-hover" style="background-image: url(${i.mediaPreview})"></div>`:F}
  </div>
  <div class="c-logbook-card__body">
    <div class="c-logbook-card__caption">
      ${i.title&&!i.public?C`<span class="c-entity-hidden">${DS}</span>`:F}
      ${i.title&&!i.moderatorAllowed?C`<span class="c-entity-hidden">${HS}</span>`:F}
      ${$e(i.title||"")}
    </div>
    <div class="u-text-overflow x-secondary x-secondary-color">
      ${i.category}
    </div>
    <div class="c-logbook-card__meta o-group o-group--baseline x-secondary x-secondary-color">
      <span class="c-icon-counter"><span class="c-icon-counter__icon c-icon c-icon--like"></span> ${i.likeCount}</span>
      <span class="c-icon-counter"><span class="c-icon-counter__icon c-icon c-icon--comments"></span> ${i.commentCount}</span>
      <span>${i.dateOffset}</span>
      ${!d2Env.isMobile&&i.cost?C`<span>${i.cost}</span>`:F}
      ${!d2Env.isMobile&&i.mileage?C`<span data-tt=${i.mileage.altText}>${$e(i.mileage.text)}</span>`:F}
    </div>
  </div>
</a>
`,f2=()=>C`
<div class="c-empty-content">
  <div class="c-empty-content__header">${NS}</div>
</div>
`,g2=i=>rt(i.posts,t=>t.link,t=>$S(t,i.clickMetricToken)),v2=i=>{let t=[];return i.categories.forEach(e=>{t.push(e.category),t.push(...e.posts)}),rt(t,e=>typeof e=="string"?e:e.link,e=>typeof e=="string"?C`<h4 class="x-group-header c-lb-list__caption">${e}</h4>`:$S(e,i.clickMetricToken))},E2=i=>i.moreLink?C`<a class="x-box-more" href=${i.moreLink}>${kS}</a>`:F,b2=i=>"categories"in i,Yf=ls(()=>A(void 0,null,function*(){let i=x(wl,"form"),t=i.sort?i.sort.value:"ByDate",[e,n]=yield gi(()=>R(i.action,wl,{silent:!0,throwError:!0,body:{query:i.query.value.trim(),sort:t}}));if(n){let o=x(wl,"container");ii(o),J(b2(n)?v2(n):n.posts.length===0?f2():g2(n),o);let s=x(wl,"more");ii(s),J(E2(n),s)}else e&&e.request.status===429&&Yf()}),400),_2=()=>{T.registerHandlers(wl,{sort:Yf,search:ze(Yf,300)})}});var US={};ut(US,{default:()=>gm});var y2,T2,x2,gm,zS=v(()=>{"use strict";cm();V();Y();G();y2=".js-car-drag-item",T2=".js-car-drag-handle",x2=".c-car-card[data-id]",gm=class extends H{parsedInit(){sr.create(this.element,N({draggable:y2,onSort:()=>this.save(),animation:150,forceFallback:!0,ghostClass:"c-car-draglist__item--ghost"},d2Env.isMobile&&{handle:T2}))}save(){let t=et(x2,this.element).map(n=>n.dataset.id),e=new URLSearchParams({_:"sort"});t.forEach(n=>e.append("ids",n)),R("/ajax/cars.cshtml",this.role,{method:"POST",silent:!0,body:e.toString()})}}});var WS={};ut(WS,{default:()=>Em});var jS,vm,Em,VS=v(()=>{"use strict";Y();ve();jS={brand:"brand",model:"model",generation:"generation",productionYear:"productionYear",purchaseYear:"purchaseYear",info:"comment",color:"color",belongState:"kind",description:"text_start",engine:"engine",displacement:"displacement",transmission:"transmission",power:"power",wheelDrive:"wheelDrive",licensePlateNumber:"licensePlateNumber",VIN:"vin",text_ok:"text_ok"},vm=i=>{Tt(`car_add_fill_${i}`)},Em=class extends H{init(){this.trackedNames=[],this.element.addEventListener("change",this),this.element.addEventListener("input",this);let e=new MutationObserver(n=>{n.forEach(o=>{Array.from(o.addedNodes).filter(r=>r.nodeType===1).some(r=>r.classList.contains("imagelist-item"))&&(e.disconnect(),vm("photo"))})});e.observe(this.element,{childList:!0,subtree:!0}),vm("start")}handleEvent(e){let n=e.target;if(!this.descriptionTracked&&n.name==="description"){let o=Number(n.dataset.minlength);n.value.length>=o&&(this.descriptionTracked=!0,vm("text_ok"))}n.name&&n.name in jS&&!this.trackedNames.includes(n.name)&&(this.trackedNames.push(n.name),vm(jS[n.name]))}}});var Zf,qS,GS,Kf,JS,Xf,YS,ZS=v(()=>{"use strict";Zf="Убрать машину из профиля",qS="Вы не сможете восстановить страницу машины, все комментарии, фото и записи в бортжурнале после удаления.",GS="Удалить мою машину",Kf="Сделать бывшей",JS="Сохраним бортжурнал, комментарии и подписчиков. Добавим пометку «Бывшая»",Xf="Удалить совсем",YS="Удалим страницу машины, все комментарии, фото и записи в бортжурнале. Без возможности восстановления."});var XS={};ut(XS,{default:()=>M2});var L2,Qf,KS,A2,C2,S2,M2,QS=v(()=>{"use strict";vt();$();ZS();Ne();gt();L2="/ajax/cars.cshtml",Qf=!1,KS=i=>{i.target.form.formaction.value=i.target.value},A2=i=>A(void 0,null,function*(){KS(i),Qf||(i.preventDefault(),(yield dt(Zf,qS,i.target,GS))&&(Qf=!0,i.target.click())),Qf=!1}),C2=(i,t)=>C`
<form action="${L2}" class="x-form o-t-s" novalidate data-role="form">
  <input type="hidden" name="formaction">
  ${i||t?F:C`<div class="x-box">
      <h2 class="x-header o-b-xs">${Kf}</h2>
      <div class="x-text o-b-l">${JS}</div>
      <button class="c-button c-button--primary c-button--l u-100" type="submit" value="ex"
        @click=${KS}>${Kf}</button>
    </div>`}
  <div class="x-box">
    <h2 class="x-header o-b-xs">${Xf}</h2>
    <div class="x-text o-b-l">${YS}</div>
    <button class="c-button ${i||t?"c-button--primary":""} c-button--l u-100" type="submit" value="delete"
      @click=${A2}>${Xf}</button>
  </div>
</form>
`,S2=i=>{let t=i.node(),e=t.dataset.params==="ex",n=t.dataset.params==="delete",o=new Ct({anchor:t,title:Zf,className:"c-modal__content--confirm"});J(C2(e,n),o.element),o.setFormDataTransformer(s=>({_:"archive",archive:s.formaction.value,id:t.dataset.id})),o.addEventListener("submit",()=>{Mt(),window.location.reload()}),o.show()},M2=()=>{T.registerHandlers("cardel",{confirm:S2})}});var tM={};ut(tM,{default:()=>D2});var tg,R2,I2,O2,D2,eM=v(()=>{"use strict";$();X();Pe();tg="caredit",R2=i=>{let t=i.node(),e=x(tg,"autoinfo");e&&(e.textContent=t.value)},I2=i=>{let t=i.node(),e=t.form.purchaseYear,n=Number(t.options[1].value),o=Number(t.value)||n,s=Number(e.value);e.options.length=1;for(let r=n;r>=o;r--){let a=document.createElement("option");e.appendChild(a),a.value=String(r),a.textContent=String(r),a.selected=s===r}},O2=i=>{let t=i.node(),n=t.options[t.selectedIndex].dataset.noTransmission==="",o=x(tg,"transmission");Et(o).expand(!n)},D2=()=>{T.registerHandlers(tg,{info:R2,years:I2,engine:O2})}});var H2,iM,nM=v(()=>{"use strict";H2=i=>String(Math.ceil(i)),iM=(i,t,e,n,o=H2)=>{let s,r=a=>{s||(s=a);let l=Math.min((a-s)/n,1);i.textContent=o(l*(e-t)+t),l<1&&requestAnimationFrame(r)};requestAnimationFrame(r)}});var oM={};ut(oM,{default:()=>P2});var k2,N2,P2,sM=v(()=>{"use strict";X();Pi();nM();k2=1500,N2=i=>`${i.toFixed(2)}%`.replace(".",","),P2=(i,t)=>{let e=(n,o,s)=>{ft(t,o,n).forEach(a=>{let l=Number(a.dataset.value)||0;iM(a,0,l,k2,s)})};pe(i,{onEnter:()=>{i.classList.remove("is-unrevealed"),e(i,"percent",N2),e(i,"num")}})}});var rM,eg,ig,aM,ng,og,lM,cM,dM,mM,pM,sg,rg,ag,lg,cg,dg,hM,uM,fM,gM,vM,mg=v(()=>{"use strict";rM="Вы уверены?",eg="Вы действительно хотите отказать этому пользователю в доступе к сообществу? Укажите причину отказа.",ig="Причина",aM="Принимайте новичка",ng="Вступление в это сообщество требует подтверждения его модераторов. Вы также можете оставить комментарий.",og="Отправить запрос",lM="Покинуть сообщество?",cM="Покинуть",dM="Пригласить в сообщество",mM="Исключить из сообщества",pM="Сменить владельца сообщества",sg="Внимание. После передачи прав владения вы станете обычным участником сообщества.",rg="Ник или URL пользователя",ag="Комментарий пользователю",lg="Пригласить",cg="Выгнать",dg="Сменить",hM="Введите ник или URL пользователя",uM="Оставьте комментарий",fM="Приглашение успешно отправлено",gM="Пользователь успешно выгнан",vM="Сообщество успешно поменяло владельца"});var bM,Ll,_M,yM,TM=v(()=>{"use strict";vt();te();mg();Me();bM=()=>d2Env.isMobile?C`
<form action="/ajax/community.apply.cshtml" class="x-form" novalidate data-keysubmit data-role="form">
  <div class="x-box x-box--ghost o-b-l">
    <div class="x-text">${ng}</div>
  </div>
  <div class="x-box x-box--narrow">
    <div class="x-form__item is-focusable">
      <div class="x-form__body">
        <textarea class="x-textarea" name="text" data-autofocus data-role="taflexible"></textarea>
      </div>
    </div>
  </div>
  <div class="x-form__submit u-extend" data-role="sticky-button">
    <button class="c-button c-button--primary c-button--xl u-100" type="submit"
      name="submitbtn">${og}</button>
  </div>
</form>
`:C`
<div class="c-dialog-desc">${ng}</div>
<form class="c-dialog-form" action="/ajax/community.apply.cshtml" novalidate data-keysubmit>
  <div class="c-dialog-form__field">
    <textarea class="c-textarea" name="text" data-autofocus></textarea>
  </div>
  <div class="o-group o-group--m o-group--end o-group--wide c-dialog-buttons">
    <span class="c-dialog-buttons__spinner is-skip js-spinner"></span>
    <button class="c-button c-button--primary c-button--m-no-padding" type="submit" name="submitbtn">
      ${og}
    </button>
  </div>
</form>
`,Ll=(i,t,e,n)=>i==="invite"?t:i==="suspend"?e:n,_M=i=>d2Env.isMobile?C`
<form action="/ajax/community.${i}.cshtml" class="x-form" novalidate data-keysubmit data-role="form">
${i==="setowner"?C`
      <div class="x-box x-box--ghost o-b-l">
        <div class="x-text">${sg}</div>
      </div>`:F}
<div class="x-box x-box--narrow o-t-s">
  <div class="x-form__item is-focusable">
    <div class="x-form__body">
      <input class="x-input" type="text" name="name" data-autofocus placeholder="${rg}" minlength="3">
    </div>
  </div>
  <div class="x-form__item is-focusable">
    <div class="x-form__body">
      <textarea class="x-textarea" name="text" data-role="taflexible"
        placeholder="${ag}"></textarea>
    </div>
  </div>
</div>
<div class="x-form__submit u-extend" data-role="sticky-button">
  <button class="c-button c-button--primary c-button--xl u-100" type="submit"
    name="submitbtn">${Ll(i,lg,cg,dg)}</button>
</div>
</form>
`:C`
${i==="setowner"?C`<div class="c-dialog-desc">${sg}</div>`:F}
<form class="c-dialog-form" action="/ajax/community.${i}.cshtml" novalidate data-keysubmit>
  <div class="c-dialog-form__field">
    <label class="c-dialog-form__label" for="dlg.u">${rg}</label>
    <input type="text" name="name" id="dlg.u" minlength="3" data-autofocus>
  </div>
  <div class="c-dialog-form__field">
    <label class="c-dialog-form__label" for="dlg.t">
      ${ag}
    </label>
    <textarea class="c-textarea" name="text" id="dlg.t"></textarea>
  </div>
  <div class="o-group o-group--m o-group--end o-group--wide c-dialog-buttons">
    <span class="c-dialog-buttons__spinner is-skip js-spinner"></span>
    <button class="c-button c-button--primary c-button--m-no-padding" type="submit" name="submitbtn">
      ${Ll(i,lg,cg,dg)}
    </button>
  </div>
</form>
`,yM=()=>d2Env.isMobile?C`
<form action="/ajax/community.applicants.cshtml" class="x-form" novalidate data-keysubmit data-role="form">
  <div class="x-box x-box--ghost o-b-l">
    <div class="x-text">${eg}</div>
  </div>
  <div class="x-box x-box--narrow">
    <div class="x-form__item is-focusable">
      <div class="x-form__body">
        <textarea class="x-textarea" name="text" data-autofocus data-role="taflexible"
          placeholder="${ig}"></textarea>
      </div>
    </div>
  </div>
  <div class="x-form__submit u-extend" data-role="sticky-button">
    <button class="c-button c-button--primary c-button--xl u-100" type="submit"
      name="submitbtn">${it(Kp,{Gender:d2Env.gender})}</button>
  </div>
</form>
`:C`
<div class="c-dialog-desc">${eg}</div>
<form class="c-dialog-form" action="/ajax/community.applicants.cshtml" novalidate data-keysubmit>
  <div class="c-dialog-form__field">
    <label for="dlg.t">${ig}</label>
    <textarea class="c-textarea" name="text" id="dlg.t" data-autofocus></textarea>
  </div>
  <div class="o-group o-group--m o-group--end o-group--wide c-dialog-buttons">
    <span class="c-dialog-buttons__spinner is-skip js-spinner"></span>
    <button class="c-button c-button--m-no-padding" type="button" data-action="dialog.close">
      ${it(Jb,{Gender:d2Env.gender})}
    </button>
    <button type="submit" name="submitbtn" class="c-button c-button--primary">
      ${it(Kp,{Gender:d2Env.gender})}
    </button>
  </div>
</form>
`});var CM={};ut(CM,{default:()=>U2});var $2,xM,wM,LM,AM,F2,B2,pg,U2,SM=v(()=>{"use strict";vt();$();mg();V();G();Z();Ne();gt();kn();zi();Xe();TM();$2="community",xM=i=>A(void 0,null,function*(){let t=i.actionName(),e=i.node();yield R("/ajax/community.inviteaccept.cshtml",{method:"POST",body:{_:t,community:e.value},anchorEl:e}),window.location.reload()}),wM=i=>{let t=At(i,"js-request");t.classList.add("is-deleted"),t.querySelectorAll("button").forEach(n=>{n.disabled=!0})},LM=i=>A(void 0,null,function*(){let t=i.actionName(),e=i.node(),n=At(e,"js-request");if(n&&n.classList.contains("is-deleted"))return;let o=At(e,"js-communityid").dataset.id;if(t==="accept"){let s=U("js-spinner",e.parentElement),r=new fe(s);yield R("/ajax/community.applicants.cshtml",{method:"POST",body:{_:"accept",community:o,user:e.value},anchorEl:e,spinner:r}),wM(e)}else{let s=new Ct({anchor:e,className:"c-dialog-comm",title:rM});J(yM(),s.element),s.setFormDataTransformer(r=>({_:"decline",community:o,user:e.value,comment:r.text.value})),s.addEventListener("submit",()=>{wM(e)}),s.show()}}),AM=i=>{let e=i.node().parentElement.nextElementSibling;e&&M(e,e.style.display==="none")},F2=i=>A(void 0,null,function*(){let t=i.node();if(ti(t))return;if(t.dataset.open==="1"){yield R("/ajax/community.apply.cshtml",{method:"POST",body:{community:t.value},anchorEl:t}),window.location.reload();return}let e=new Ct({anchor:t,className:"c-dialog-comm",title:aM});J(bM(),e.element),e.setFormDataTransformer(n=>({community:t.value,text:n.text.value})),e.addEventListener("submit",()=>{window.location.reload()}),e.show()}),B2=i=>A(void 0,null,function*(){let t=i.node();(yield dt(lM,void 0,t,cM))&&(yield R("/ajax/community.leave.cshtml",{method:"POST",body:{community:t.value},anchorEl:t}),window.location.href="/communities/")}),pg=i=>{let t=i.actionName(),e=i.node(),n=Ll(t,dM,mM,pM),o=new Ct({anchor:e,className:"c-dialog-comm",title:n});J(_M(t),o.element),o.setFormDataTransformer(s=>({community:e.value,name:s.name.value,text:s.text.value||""})),o.addEventListener("submit",()=>{setTimeout(()=>{$t(Ll(t,fM,gM,vM),e)})}),o.show(),Bi(o.form,["name",hM,"minlength"]),t!=="invite"&&Bi(o.form,["text",uM,"required"])},U2=()=>{T.registerHandlers($2,{invaccept:xM,invreject:xM,accept:LM,reject:LM,history:AM,requests:AM,join:F2,leave:B2,invite:pg,suspend:pg,setowner:pg})}});var RM={};ut(RM,{default:()=>z2});var Al,MM,z2,IM=v(()=>{"use strict";$();X();Al="comm-search",MM=i=>{let t=x(Al,"list");if(!t)return;let e=ft(Al,"row",t).map(s=>({element:s,title:x(Al,"alpha",s).textContent.toLowerCase(),members:Number(x(Al,"members",s).textContent)||0})),o=i.node().value==="alpha";e.sort((s,r)=>{let a=o?s.title:s.members,l=o?r.title:r.members;return o?a>l?1:-1:a<l?1:-1}),e.forEach(s=>{t.appendChild(s.element)})},z2=()=>{T.registerHandlers(Al,{members:MM,alpha:MM})}});var DM={};ut(DM,{default:()=>bm});var hg,OM,bm,HM=v(()=>{"use strict";Wr();Y();Ce();Re();Z();hg=i=>i.querySelectorAll("input:checked").length>1,OM=i=>{let t=i.querySelector("input:checked");t&&t.scrollIntoView({block:"nearest"})},bm=class extends H{parsedInit(){this.form=this.element.closest("form"),this.text=this.slot("text"),this.defaultModels=(this.element.dataset.models||"").split(","),this.defaultGenerations=(this.element.dataset.generations||"").split(","),this.brand=this.slot("brand"),this.model=this.slot("model"),this.generation=this.slot("generation"),this.brand.addEventListener("click",()=>this.renderModels()),this.model.addEventListener("click",()=>this.renderGenerations()),this.generation.addEventListener("click",()=>this.update()),this.renderModels()}renderModels(){return A(this,arguments,function*(e=xn(this.form,"brand")){if(this.curBrand===e){this.update();return}let n=yield So.get(e,this.brand);this.curBrand=e,M(this.model,n.length>0&&n[0].model!=="selfmade"&&n[0].model!=="other"),this.model.innerHTML=n.map(o=>`
<label class="c-checkbox">
  <input type="checkbox" name="model" value="${o.id}"${this.defaultModels.includes(o.id)?" checked":""}>
  <span class="c-checkbox__check"></span><span class="c-checkbox__label" data-slot="cars-m-select.title">${Bt(o.model)}</span>
</label>
    `).join(""),this.defaultModels.length>0&&OM(this.model),this.defaultModels=[],this.renderGenerations()})}renderGenerations(){return A(this,null,function*(){let e=xn(this.form,"brand"),n=xn(this.form,"model"),o=yield So.get(e,this.brand),s=o.find(a=>a.id===n),r=s?s.generations:[];M(this.generation,r.length>0&&o[0].model!=="selfmade"&&o[0].model!=="other"),this.generation.innerHTML=r.map(a=>`
<label class="c-checkbox">
  <input type="checkbox" name="generation" value="${a[0]}"${this.defaultGenerations.includes(a[0])?" checked":""}>
  <span class="c-checkbox__check"></span><span class="c-checkbox__label" data-slot="cars-m-select.title">${Bt(a[1])}</span>
</label>
    `).join(""),this.defaultGenerations.length>0&&OM(this.generation),this.defaultGenerations=[],this.update()})}update(){let e=hg(this.generation),n=hg(this.model),o=hg(this.brand);this.disableList(this.generation,n||o),this.disableList(this.model,o),this.freezeList(this.model,e),this.freezeList(this.brand,e||n);let s=this.getCaption(this.brand),r=this.getCaption(this.model),a=this.getCaption(this.generation),l=[],c=Math.max(s.length,r.length,a.length);for(let d=0;d<c;d++)a.length>0?l[d]=`${s[0]} ${r[0]} ${a[d]}`:r.length>0?l[d]=`${s[0]} ${r[d]}`:s.length>0&&(l[d]=s[d]),l[d]=Bt(l[d]);this.text.innerHTML=l.length>0?`<span>${l.join("</span>, <span>")}</span>`:"",M(this.text,l.length>0)}freezeList(e,n){e.querySelectorAll("input").forEach(o=>o.disabled=n?!o.checked:!1)}disableList(e,n){e.classList.toggle("is-disabled",n),e.querySelectorAll("input").forEach(o=>{n&&(o.checked=!1),o.disabled=n})}getCaption(e){return Array.from(e.querySelectorAll("input:checked")).map(n=>this.slot("title",n.parentElement).innerHTML)}}});var kM={};ut(kM,{default:()=>_m});var j2,W2,V2,q2,G2,_m,NM=v(()=>{"use strict";$();V();Y();Z();Xe();j2="is-si",W2="is-si-elements",V2="is-si-lownoise",q2="is-si-mint",G2=()=>{["cat-comfort","effect-high-noise","effect-low-noise","type-of-noise","cat-saloon-fixed","cat-saloon"].forEach(t=>{new Image().src=`/assets/images/orders/cats/${t}.png`})},_m=class extends H{parsedInit(){let t=this.element,e=this.slots("step"),n=e.map(h=>Number(h.dataset.step||-1)),o=Math.max(...n),s=()=>ct('input[name="Category"]:checked',t).dataset.soundinsulation==="",r=Number(t.dataset["current-step"]||1),a=s(),l=a?"":t.Description.value,c=()=>{let h=this.slot("submitted",document.body);h&&(M(t,!0),M(h,!1))},d=h=>{r=s()?Math.min(o,Math.max(1,r+(h?1:-1))):h?o:1,e.forEach(f=>{M(f,Number(f.dataset.step||-1)===r)}),this.slot("anchor",document.body).scrollIntoView({behavior:"smooth"})},p=()=>{let h=ct('input[name="SoundInsulationResult"]:checked',t),g=h?h.dataset.lownoise==="":!1;t.classList.toggle(V2,g);let f=ct('input[name="SoundInsulationScope"]:checked',t),E=f?f.dataset.wholeinterior==="":!1;t.classList.toggle(W2,E);let b=ct('input[name="SoundInsulationInterior"]:checked',t),L=b?b.dataset.mint==="":!1;t.classList.toggle(q2,L);let S=s();if(S){let y=[],_=h&&h.value;y.push(`<b>Хочу</b>
${_==="1"?"Максимальной тишины в салоне":_==="2"?"Заметно снизить шум при езде":_==="3"?"Избавиться от конкретного сверчка, скрипа, стука":""}`);let w=f&&f.value;y.push(`<b>Шумоизоляция</b>
${w==="1"?"Всего салона":w==="2"?"Нескольких элементов":w==="3"?"Одного элемента":w==="4"?"На усмотрение мастера":""}`);let O=t.SoundInsulationScopeItems.value;O.trim()!==""&&!E&&y.push(`<b>Элементы</b>
${O.trim()}`);let D=t.SoundInsulationScopeDescription.value;D.trim()!==""&&y.push(`<b>Заметные сверчки, скрипы, стуки</b>
${D.trim()}`);let z=b&&b.value;y.push(`<b>Салон</b>
${z==="1"?"Разбирали полностью":z==="2"?"Разбирали частично":z==="3"?"Никогда не разбирали":z==="4"?"Неизвестно":""}`),a||(l=t.Description.value),t.Description.value=y.join(`

`)}else a!==S&&(t.Description.value=l);a=S,t.classList.toggle(j2,S)},u=()=>{d(!1)},m=()=>{let h=BE(t),g=r===2&&h&&h[0]==="SoundInsulationResult",f=r===3&&h&&h[0]==="SoundInsulationScope",E=r===4&&h&&h[0]==="SoundInsulationInterior";(h===void 0||s()&&!g&&!f&&!E)&&(p(),d(!0))};T.registerHandlers(this.role,{reveal:c,update:p,prev:u,next:m}),p(),G2()}}});var PM,$M,FM,BM,UM,zM,jM,ug,WM,fg,gg,VM,vg,qM,Eg,GM,JM,YM,ZM,KM,XM,QM,tR,eR,iR,nR,ym=v(()=>{"use strict";PM="{Count, plural, =0 {} one {#{HasMore, select, true {+} other {}} новая} other {#{HasMore, select, true {+} other {}} новых}}",$M="Темы заявок: {Count}",FM="Марки машин: {Count}",BM="{State, select, New {Ждёт первого предложения} Awaiting {Ждёт предложений} Accepted {В работе} Completed {Досталась другим} Expired {Больше не актуальна} other {}}",UM="Сделать предложение{Price, select, none {} other { за {Price} ₽}}",zM="Пропустить",jM="Машина",ug="VIN",WM="{Vin, select, none {Не указан} other {{Vin}}}",fg="Район",gg="Выезд или доставка",VM="{TowTruck, select, true {Желательно} other {Не нужно}}",vg="Год выпуска",qM="{ProductionYear, select, none {Не указан} other {{ProductionYear}}}{ModelYear, select, none {} other { (поколение {ModelYear})}}",Eg="Пробег",GM="{Mileage, select, none {Не указан} other {{Mileage} км}}",JM="Срочность",YM="{Urgency, select, Day {Как можно скорее} Week {На неделе} other {Без спешки}}",ZM="Запчасти",KM="{Parts, select, true {Нужны} other {Свои}}",XM="{Number, select, none {б/н} other {№{Number}}}",QM="Не показывать тему «{CategoryName}»",tR="Скрыть все заявки по этой теме?",eR="Чтобы снова видеть их, отметьте тему в настройках наверху страницы",iR="Марки машин",nR="Темы заявок"});var J2,Tm,Y2,xm,oR,sR,Z2,K2,X2,Cl,rR=v(()=>{"use strict";Le();ym();V();Y();Me();Z();Mi();dn();J2="js-order",Tm="is-absolute",Y2="is-empty",xm=300,oR="cubic-bezier(.39,.67,.7,1.13)",sR="cubic-bezier(.12,0,.39,0)",Z2=-200,K2=1.05,X2=.9,Cl=class extends H{parsedInit(){let t=this.element,e=document.querySelector(`.${J2}`),n=document.createElement("div");n.style.position="relative";let o=n.cloneNode(!1);n.style.zIndex="2",e.before(n),t.before(o),n.appendChild(e),o.appendChild(t);let s,r;function a(){let c=e.offsetHeight+Tn(e,"margin-bottom"),p=s.offsetHeight+Tn(s,"margin-bottom")-c;e.animate({transform:["none",`translateY(${Z2}px) scale(${K2})`],opacity:[1,0]},{duration:xm,easing:sR}),s.animate({transform:[`translateY(${c}px)`,"none"],opacity:[0,1]},{duration:xm,easing:oR}),t.animate({transform:["none",`translateY(${-c}px)`],opacity:[1,0]},{duration:xm,easing:oR}),r.animate({transform:[`translateY(${p}px) scale(${X2})`,`translateY(${p}px)`],opacity:[0,1]},{duration:xm,easing:sR}).onfinish=()=>{e.remove(),t.remove(),e=s,t=r,e.classList.remove(Tm),e.style.cssText="",t.classList.remove(Tm),t.style.cssText=""},Ke()}function l(c){function d(m,h){return d2Env.isMobile?`<tr><th>${m}</th><td>${h}</td></tr>`:`<div><strong>${m}</strong> ${h}</div>`}let p=!c,u="<div></div>";if(!p){let m=it(BM,{State:c.state}),h=it(XM,{Number:c.displayNumber||"none"}),g=it(UM,{Price:c.price||"none"}),f=it(QM,{CategoryName:c.categoryName||"none"}),E=it(WM,{Vin:c.vin||"none"}),b=c.locationTags&&c.locationTags.length>0?c.locationTags.join(", "):c.location||"",L=it(VM,{TowTruck:c.services&&c.services.towTruck||""}),S=it(qM,{ProductionYear:c.productionYear||"none",ModelYear:c.modelYear||"none"}),y=it(GM,{Mileage:c.mileage||"none"}),_=it(YM,{Urgency:c.urgency||""}),w=it(KM,{Parts:c.services&&c.services.parts||""}),{photo:O}=c,D="";if(O){let{image:I,thumbnail:K,isFallback:ot}=O;D=`<div class="c-order__pic">
          ${ot?"":`<a class="c-lightbox-anchor" href="${I.url}" data-action="lightbox.zoom" data-size="${I.width},${I.height}">`}
            ${Fr({images:[{url:K.url,width:K.width,height:K.height}],color:K.htmlPrimaryColor},void 0,ot?{className:"u-grayscale"}:void 0)}
          ${ot?"":"</a>"}
        </div>`}let z=c.state==="Awaiting"?"c-order__state--awaiting":c.state==="Accepted"?"c-order__state--accepted":c.state==="Expired"?"c-order__state--expired":c.state==="New"?"c-order__state--new":"",j=`<h3 class="c-header u-break-word">${c.categoryName}<span class="c-order__state ${z}">${m}</span></h3>`,W=`<div class="c-order__text text u-break-word">${c.description||""}</div>`;u=`<div class="c-block c-order js-order">
        <div class="c-order__body">
          ${d2Env.isMobile?`${j}<div class="c-order__info">${W}${D}</div>`:`<div class="c-order__info">${j}${W}</div>${D}`}
        </div>
        <div class="c-order__meta js-orders-meta" data-next>
          ${d2Env.isMobile?'<table class="c-order__meta-table">':'<div class="o-grid o-grid--4 c-order__meta-table">'}
            ${d(jM,c.generation||"")}
            ${d2Env.isMobile?d(vg,S)+d(Eg,y)+d(ug,E)+d(fg,b)+d(gg,L):d(ug,E)+d(fg,b)+d(gg,L)+d(vg,S)+d(Eg,y)}
            ${d(JM,_)}
            ${d(ZM,w)}
          ${d2Env.isMobile?"</table>":"</div>"}
          <div class="o-group o-group--v o-group--justify c-order__bottom">
              <div>${h}</div>
              ${c.dismissLink?`<div>
                  <button class="r-button-unstyled c-link c-link--gray" data-url="${c.dismissLink}" data-action="orders.dismiss" data-ym-target="order_decline_remove_category">${f}</button>
                </div>`:""}
          </div>
        </div>
        <div class="c-block__more c-block__more--block c-order__controls js-orders-controls" data-next>
          <div class="o-group o-group--m o-group--v">
            <button class="c-button c-button--primary c-button--green u-mobile-100" data-action="orders.accept" data-url="${c.acceptLink}">${g}</button>
            <button class="c-button u-mobile-100" data-action="orders.discard" data-url="${c.rejectLink}" data-ym-target="order_decline_skip">${zM}</button>
          </div>
        </div>
      </div>`}s=Fi(u),s.style.opacity="0",s.classList.add(Tm),e.before(s),r=t.cloneNode(!0),r.removeAttribute("data-role"),r.classList.add(Tm),r.classList.toggle(Y2,p),t.before(r),a()}st.subscribe("orders-next",l)}}});function rz(i){return A(this,null,function*(){let t=i.node(),{url:e}=t.dataset;if(!e)return;if(!(t.dataset.confirm==="")||(yield dt(Bc,void 0,t))){let o=yield R(e,Sl,{method:"POST",anchorEl:t});sz(t,o.url,$e(o.replyTemplate))}})}var Sl,aR,lR,Q2,tz,ez,cR,iz,nz,oz,wm,_g,dR,sz,mR,az,lz,cz,pR,hR=v(()=>{"use strict";$();Le();te();ym();Me();G();Re();Z();Vt();gt();Sl="orders",aR=10,lR="js-order-counter",Q2="js-order-categories",tz="js-order-brands",ez="js-orders-form",cR=".js-orders-controls",iz=".js-orders-meta",nz="c-order__controls",oz=["c-block__more","c-block__more--block"],wm=i=>(i.closest(cR)||i.closest(iz)).dataset.next==="",_g=(i,t,e)=>{let n=Number(e),o=document.querySelector(`.${i}`);if(o&&!Number.isNaN(n)){let s=i===lR&&n>=aR;o.textContent=it(t,{Count:s?aR-1:n,HasMore:s})}},dR=i=>{_g(lR,PM,i.awaitingOrderCount),_g(Q2,$M,i.filters.categoryCount),_g(tz,FM,i.filters.brandCount)},sz=(i,t,e)=>{let n=document.querySelector(`.${ez}`),o=i.closest(cR);if(!o||!n)return;let s=n.cloneNode(!0);if(s.action=t,o.innerHTML="",o.classList.remove(nz),o.classList.add(...oz),o.appendChild(s),e){let r=e.replace("[text]",""),a=e.indexOf("[text]");s.text.value=r,s.text.addEventListener("focus",()=>{s.text.setSelectionRange(a,a)},{once:!0})}M(s,!0)};mR=i=>{let t=i.node(),{url:e}=t.dataset;e&&R(e,Sl,{method:"POST",anchorEl:t,body:wm(t)?{next:!0}:{}}).then(n=>{wm(t)&&(dR(n),st.publish("orders-next",n.order))})},az=i=>A(void 0,null,function*(){let t=i.node();(yield dt(tR,eR,t))&&mR(i)}),lz=i=>{yt(i);let t=i.node();t.text.value&&R(t.action,Sl,{method:"POST",anchorEl:t,body:{text:t.text.value,next:wm(t)}}).then(n=>{wm(t)?(dR(n),st.publish("orders-next",n.order)):window.location.href=n.url})},cz=()=>{T.registerHandlers(Sl,{dismiss:az,discard:mR,accept:rz,submit:lz})},pR=()=>{T.registerLoader(Sl,cz)}});var uR,dz,mz,pz,hz,yg,uz,fR,gR=v(()=>{"use strict";vt();Xt();$();te();ym();el();G();Ne();uR="orsettings",dz=3,mz=6,pz=(i,t,e,n)=>C`
<form class="c-dialog-form" data-role="chk" action="${t.updateLink}" novalidate data-keysubmit ?data-next=${n}>
  <div class="o-grid-row">
    <button class="c-button" data-slot="chk.button" type="button"
      data-checkcaption="${Xp}" data-uncheckcaption="${Qp}"></button>
  </div>
  <div class="o-grid o-grid--${Math.min(e,t.items.length)}">
  ${fn(t.items,e).map(o=>C`<div><div class="c-checkbox-group f-item">${rt(o,s=>s.id,s=>C`
      <label class="c-checkbox">
        <input type="checkbox" name="${i}" value="${s.id}" ?checked=${s.selected}>
        <span class="c-checkbox__check"></span><span class="c-checkbox__label">${s.caption}</span>
      </label>
    `)}</div></div>`)}
  </div>
  <div class="c-dialog-buttons">
    <button class="c-button c-button--primary u-mobile-100" name="submitbtn" type="submit">${ke}</button>
  </div>
</form>
`,hz=(i,t,e)=>C`
<form action="${t.updateLink}" class="x-form" novalidate data-keysubmit data-role="form chk" ?data-next=${e}>
  <div class="x-box x-box--narrow o-t-s">
    <div class="o-t-s o-b">
      <button class="c-button" data-slot="chk.button" type="button"
        data-checkcaption="${Xp}" data-uncheckcaption="${Qp}"></button>
    </div>
    <div class="o-grid-row o-grid-row--l c-navlist c-navlist--modal">
      ${rt(t.items,n=>n.id,n=>C`
        <div class="x-form__item">
          <div class="x-form__body">
            <label class="x-choice x-choice--switch">
              <input type="checkbox" name=${i} value=${n.id} ?checked=${n.selected}>
              <span class="x-choice__label">${n.caption}</span>
            </label>
          </div>
        </div>
      `)}
    </div>
  </div>
  <div class="x-form__submit u-extend" data-role="sticky-button">
    <button class="c-button c-button--primary c-button--xl u-100" type="submit"
      name="submitbtn">${ke}</button>
  </div>
</form>
`,yg=i=>A(void 0,null,function*(){let t=i.actionName(),e=i.node(),n=e.dataset.redirect||"",o=e.dataset.url||"";if(!o)return;let{brands:s,categories:r}=yield R(o,uR,{method:"POST",anchorEl:e});if(!s||!r)return;let a=(l,c)=>{let d=l==="categories",p=d?r:s,u=new Ct({anchor:e,title:d?nR:iR,className:"c-orders-dialog"});J(d2Env.isMobile?hz(l,p,c):pz(l,p,d?dz:mz,c),u.element),u.addEventListener("submit",()=>{u.form.dataset.next===""?a("brands"):window.location.href=n}),u.show()};a(t,t==="all")}),uz=()=>{T.registerHandlers("orsettings",{all:yg,brands:yg,categories:yg})},fR=()=>{T.registerLoader(uR,uz)}});var vR={};ut(vR,{default:()=>fz});var fz,ER=v(()=>{"use strict";rR();hR();gR();Y();fz=()=>{fR(),B("orders",Cl),pR()}});var _R={};ut(_R,{default:()=>Lm});var gz,vz,Ez,bz,_z,yz,Tz,xz,bR,wz,Lz,Az,Cz,Sz,Lm,yR=v(()=>{"use strict";V();Y();G();gz="js-snaps-edit",vz="js-item",Ez="js-remove",bz="js-undo",_z="js-title",yz="js-title-input",Tz="js-status",xz="is-editable",bR="is-deleted",wz="is-closed",Lz="c-button--primary",Az=["title","isDeleted","isClosed"],Cz="snaps",Sz=i=>Object.keys(i).reduce((t,e)=>(Az.includes(e)&&(t[e]=i[e]),t),{}),Lm=class extends H{parsedInit(){let t=!1,e=JSON.parse(this.element.dataset.state);this.element.dataset.state&&delete this.element.dataset.state;let n=document.querySelector(`.${gz}`),o=this.element.dataset.url,s=Pt(vz,this.element),r=()=>{if(t=!t,this.element.classList.toggle(xz,t),n.classList.toggle(Lz,t),n.textContent=n.dataset[t?"titleReady":"titleEdit"],t&&s.length>0){let m=e[0].titleInput;m.focus(),setTimeout(()=>{m.selectionStart=9999,m.selectionEnd=9999},0)}};function a(m){let{id:h}=m,g=N({_:"save"},Sz(m));R(o.replace("{id}",h),`${Cz}${h}`,{method:"POST",silent:!0,body:g})}function l(m){let{element:h,titleInput:g}=m;g.readOnly=!1,h.classList.remove(bR),m.isDeleted=!1,a(m)}function c(m){let{element:h,undoButton:g,titleInput:f}=m;f.readOnly=!0,h.classList.add(bR),g.addEventListener("click",()=>{l(m)},{once:!0}),m.isDeleted=!0,a(m)}function d(m){m.isClosed=!m.isClosed,m.statusEl.classList.toggle(wz,m.isClosed),a(m)}function p(m){let{titleEl:h,titleInput:g}=m;m.title=g.value,h.textContent=m.title,a(m)}function u(m,h){let g=h.querySelector(`.${Ez}`),f=h.querySelector(`.${bz}`),E=h.querySelector(`.${_z}`),b=h.querySelector(`.${yz}`),L=h.querySelector(`.${Tz}`),S;m.element=h,m.removeButton=g,m.undoButton=f,m.titleEl=E,m.titleInput=b,m.statusEl=L,b.addEventListener("input",()=>{t&&(clearTimeout(S),S=setTimeout(p,200,m))}),g.addEventListener("click",()=>{t&&c(m)}),m.isDeleted&&f.addEventListener("click",()=>{l(m)},{once:!0}),L.addEventListener("click",()=>{t&&d(m)})}if(e.length!==s.length)throw Error("[Snaps] Initialization failed");e.forEach((m,h)=>{u(m,s[h])}),n.addEventListener("click",r)}}});var Am,TR=v(()=>{"use strict";ra();Am=class extends EventTarget{constructor(e,n,o,s){super();this.target=e;this.target&&(this.uploader=new Oi(n,o),this.uploader.setUploadUrl(d2Env.uploadUrl),s&&this.uploader.setButtonCaption(s),this.uploader.render(this.target),this.uploader.setVisible(!0),this.uploader.addEventListener("ready",this))}handleEvent(e){if(e.detail&&e.detail.length===1){let n=new CustomEvent("ready",{detail:e.detail});this.dispatchEvent(n)}}dispose(){this.uploader.removeEventListener("ready",this),this.uploader.dispose()}}});var wR={};ut(wR,{default:()=>Cm});var Mz,Rz,Iz,Oz,Dz,xR,Cm,LR=v(()=>{"use strict";zf();Y();Mi();TR();Mz="js-snap-description",Rz="js-pic",Iz="js-button",Oz="js-replace",Dz="js-field",xR="is-active",Cm=class extends H{parsedInit(){let t=this.element.dataset.type||"",e=this.element.querySelector(`.${Iz}`),n=this.element.querySelector(`.${Oz}`),o=this.element.querySelector(`.${Dz}`),s=this.element.querySelector(`.${Rz}`);if(!e||!s||!n||!o)return;let r,a=d=>{let p=s;for(;p=s.firstChild;)s.removeChild(p);if(!d)return;o.value=d.id;let u=wo({images:d.images.map(m=>({url:m.url,width:m.w,height:m.h})),color:d.color,inline:d.inline},1,{className:"c-snap-form-pic__pic",isTransparent:!0});s.appendChild(u),this.element.classList.add(xR)};function l(d,p){r&&(r.removeEventListener("ready",c),r.dispose()),r=new Am(d,t,p?"r-button-unstyled c-link c-link--text":`c-button ${d2Env.isMobile?"":"c-button--l"} u-mobile-100`,p?dm:""),r.addEventListener("ready",c)}function c(d){if(d.detail&&d.detail[0]){a(d.detail[0]),l(n,!0);let p=document.querySelector(`.${Mz}`);p&&p.focus()}}this.element.classList.contains(xR)?l(n,!0):l(e)}}});var AR,CR=v(()=>{"use strict";AR="Продвигается"});var Tg,SR,MR=v(()=>{"use strict";Tg=class{constructor(t){this.url=t}get(){if(!this.url)throw new Error("Request URL is not set.");return this.url}set(t){this.url=t}},SR=i=>new Tg(i)});var xt,RR,kz,Nz,IR,Zn,wg,Pz,Lg,OR,$z,DR,xg,Fz,Ag,Bz,Uz,HR,zz,jz,Wz,Vz,qz,Sm,Gz,Jz,Ml,kR,NR=v(()=>{"use strict";vt();Xt();$();CR();V();Y();X();Ce();Ji();G();Od();ve();Z();Ju();gt();Pe();MR();xt="postpromo",RR=SR("/ajax/postpromo"),kz=(i,t,e,n,o)=>C`
<input type="hidden" name=${i} value=${t} data-avatar=${e} data-caption=${n} data-members=${o}>
`,Nz=i=>et('[name*="communities"],[data-name*="communities"]',i).reduce((e,n)=>{let o=!!n.name,s=o?n.name:n.dataset.name,a=(o?[n]:et('[type="hidden"]',n)).map(l=>l.value).join(`
`);return Object.assign(e,{[s]:a})},{}),IR=(i,t)=>{let e=mi(i),n=Nz(i),{submitbtn:o}=i,s=N({_:t,key:o.dataset.key},n),r=["isbusiness"];return e.forEach((a,l)=>{a&&!r.includes(l)&&(s[l]=a)}),s},Zn=i=>i.dataset.target?document.getElementById(i.dataset.target):jo(i,xt),wg=i=>lt(i,"postpromo","context")||x("postpromo","context"),Pz=i=>{let t=wg(i),e=x(xt,"settings",t);RR.set(e.dataset.boostUrl)},Lg=i=>{let t=ft(xt,"targeting",i);t.forEach((n,o)=>{let s=l=>l.replace(/^filters\[\d+\]/,`filters[${o}]`).replace(/^Targets\[\d+\]/,`Targets[${o}]`);et('input[type="hidden"],select,textarea',n).forEach(l=>{l.removeAttribute("id"),l.name=s(l.name)}),et("[data-name]",n).forEach(l=>{l.dataset.name=s(l.dataset.name)})});let e=x(xt,"targeting-button",i);e&&M(e,t.length<10)},OR=(i,t={})=>{let e=x(xt,"region",i);e&&Gl("regionselect").then(()=>{e.dataset.country=t.countryCode||"",e.dataset.region=t.regionCode||""});let n=x(xt,"gender",i);n&&(n.value=t.gender||"Unknown");let o=x(xt,"cars",i);!d2Env.isMobile&&o&&Gl("carmultiselect").then(()=>{o.dispatchEvent(new CustomEvent("set-cars",{detail:t.catalogItems||[]}))});let s=x(xt,"yearfrom",i);s&&(t.productionYearFrom?s.value=t.productionYearFrom:s.selectedIndex=0);let r=x(xt,"yearto",i);r&&(t.productionYearTo?r.value=t.productionYearTo:r.selectedIndex=0);let a=x(xt,"communities",i);a&&(a.value=(t.communityIds||[]).join(`
`));let l=x(xt,"communities-list",i);if(l){let{name:c}=l.dataset,d=t.communities||[],p=x(xt,"communities-tokens",i);if(!p||!c)return;ii(p),J(rt(d,m=>m.id,m=>kz(c,m.id,m.avatar||"",m.caption||"",String(m.memberCount||0))),p);let u=Vo(l);u&&u.reinit()}},$z=i=>{let t=i.node(),e=lt(t,xt,"settings"),n=t.dataset.target,o=e||(n?document.getElementById(`${n}-stats`):null);if(o){let s=Et(o),r=wg(t);(r&&x(xt,"comdb-button",r)||t).classList.toggle("is-active",!s.expanded),s.toggle()}},DR=(i,t,e)=>A(void 0,null,function*(){let n=Zn(i),o=n&&n.submitbtn||i;function s(l){let c=t==="start"||t==="restart";if(c){if(l.budget){let f=n&&n.isbusiness.value||o.dataset.isbusiness==="";Ws([{name:"Продвижение",category:f?"Пост БА":"Пост",price:l.budget}])}let{metrika:d}=o.dataset;d&&Tt(d);let p=document.getElementById("promo");p&&p.remove();let u=wg(i),m=x(xt,"inject",u);if(c&&u&&m){let f=x(xt,"comdb-post",u);if(f){f.scrollIntoView({behavior:"smooth"});let E=Et(m);E.addEventListener("end",()=>{f.classList.add("is-active");let b=x(xt,"comdb-button",f);b&&(b.disabled=!0,b.textContent=AR,b.classList.remove("c-button--primary"),M(b,!0))},{once:!0}),setTimeout(()=>{E.hideAndRemove()},400);return}}let h=n.closest(".js-cpc-block"),g=h?h.dataset.anchor||"promo":"#promo";setTimeout(()=>{window.location.hash=g,window.location.reload()},100)}else{let d=n&&n.id||i.dataset.target,p=d?document.getElementById(`${d}-stats`):null;if(p){let u=U("js-postpromostatsbtns",p),m=Pt("c-button",u),{metrika:h}=m[1].dataset;h&&Tt(h),M(m[1],!1),M(m[0],!0)}}}let{key:r}=o.dataset,a=t==="start"?IR(n,"start"):t==="restart"?{_:t,key:r}:{_:"stop",key:r};if(e&&(a.requisite=e),e||(yield dt(i.dataset.confirm||"",i.dataset.confirmMessage,i,i.dataset.confirmNutton)))try{let l=yield R(RR.get(),xt,{method:"POST",anchorEl:o,body:a,throwError:!0});s(l)}catch(l){l&&l.json&&Dd(l.json,c=>{DR(i,t,c)})}}),xg=i=>{let t=i.actionName(),e=i.node();Pz(e),DR(e,t)},Fz=i=>A(void 0,null,function*(){let t=i.node(),e=t.href,n=t.dataset.blocked!=="1";yield R(e,xt,{method:"POST",anchorEl:t,body:{isEnabled:!n}}),t.dataset.blocked=n?"1":"0",t.textContent=t.dataset.values.split(";")[n?1:0],t.classList.toggle("c-button--primary",n)}),Ag=i=>{let t=ft(xt,"targeting",i),e=t[t.length-1],n=e.cloneNode(!0),o=et("select",e);et("select",n).forEach((a,l)=>{a.selectedIndex=o[l].selectedIndex});let r=x(xt,d2Env.isMobile?"communities-list-mobile":"communities-list",n);return r&&(r.innerHTML=""),e.after(n),Lg(i),n},Bz=i=>A(void 0,null,function*(){let t=i.node(),e=Zn(t),n=e&&e.dataset.info,o=yield R(n,xt,{body:{budget:t.value}}),s=x(xt,"budget",e);s.innerHTML=o.html||"",e.submitbtn.dataset.confirmMessage&&delete e.submitbtn.dataset.confirmMessage,e.submitbtn.dataset.confirmButton&&delete e.submitbtn.dataset.confirmButton,e.submitbtn.dataset.confirm=o.confirm}),Uz=i=>{let t=i.node(),e=Zn(t),n=x(xt,"targeting-default",e);if(!n)return;let o=JSON.parse(n.innerHTML),s=o.length;if(!s)return;let r=ft(xt,"targeting",e),a=r.length,l=s-a;l<0?r.splice(s).forEach(d=>d.remove()):Array(l).fill(0).forEach(()=>{Ag(e)}),setTimeout(()=>{ft(xt,"targeting",e).forEach((d,p)=>{OR(d,o[p])})},1)},HR=i=>{let t=x(xt,"region",i);t&&(t.dataset.country="",t.dataset.region="");let e=x(xt,"gender",i);e&&(e.value="Unknown");let n=x(xt,"cars",i);n&&n.dispatchEvent(new CustomEvent("set-cars",{detail:[]}));let o=x(xt,"yearfrom",i);o&&(o.selectedIndex=0);let s=x(xt,"yearto",i);s&&(s.selectedIndex=0);let r=x(xt,"communities",i);r&&(r.value="");let a=x(xt,d2Env.isMobile?"communities-list-mobile":"communities-list",i);a&&(a.innerHTML="")},zz=i=>{let t=i.node(),e=Zn(t),n=x(xt,"targetingtemplate",e);if(!n)return;let o=JSON.parse(n.innerHTML);if(!o.length)return;let r=ft(xt,"targeting",e);r.forEach((l,c)=>{c===0?HR(l):l.remove()}),r=ft(xt,"targeting",e);let a=r.length;for(let l=a;l<o.length;l++)Ag(e);r=ft(xt,"targeting",e),o.forEach((l,c)=>{OR(r[c],l)})},jz=i=>{let t=i.node(),e=t.closest("form"),n=t.closest(".block");ft(xt,"targeting",e).length>1?n.remove():HR(n),Lg(e)},Wz=i=>+(i.substr(0,i.indexOf(".")).replace(/\D/ig,"")||-1),Vz=i=>{let t=[...i.options].filter(e=>!e.disabled);i.selectedIndex=t.length-1},qz=i=>i.options[i.selectedIndex].disabled,Sm=i=>{let t=Zn(i),e=IR(t,"duration"),n=ct('[name="duration"]',t);if(!n||!e)return;let o="productionyear",s=["region","country","brand","model","generation",o],r={};Object.keys(e).forEach(p=>{let u=Wz(p);if(u<0)return;r[u]=r[u]||[];let m=s.some(f=>p.includes(f)),h=p.includes(o),g=r[u].some(f=>f.includes(o));m&&(g&&h||r[u].push(p))});let a=3,c=Math.max(0,...Object.values(r).map(p=>p.length))>a,d=ct('[name="duration"] [value="168"]',t);d.disabled=c,c&&qz(n)&&Vz(n)},Gz=i=>{let t=i.node(),e=Zn(t),n=Ag(e);Sm(e),n.scrollIntoView({behavior:"smooth"})},Jz=i=>{let t=i.node(),e=Zn(t),n=lt(t,xt,"targeting");n&&n.remove(),Lg(e),Sm(e)},Ml=class extends H{parsedInit(){let t=Zn(this.element);Sm(t),t.addEventListener("change",()=>{Sm(t)})}},kR=()=>{T.registerHandlers(xt,{stats:$z,start:xg,restart:xg,stop:xg,block:Fz,addtargeting:Gz,updatebudget:Bz,removetargeting:Jz,resettargeting:Uz,cleartargeting:jz,addandfillnewtargeting:zz})}});var Cg,Yz,Zz,PR,$R=v(()=>{"use strict";$();X();G();ve();Z();Pe();Cg="postpromo",Yz=i=>lt(i,"postpromo","context")||x("postpromo","context"),Zz=i=>A(void 0,null,function*(){let t=i.node(),e=Yz(t),n=x(Cg,"settings",e),o=n.dataset.formUrl,s=document.createElement("div");M(e,!0),s.scrollIntoView(),n.after(s),s.innerHTML=yield kt(o,Cg,{body:{_:"fetchform"}});let r=Ge("postpromo",s);t.dataset.metrika&&Tt(t.dataset.metrika),M(t,!1),r.scrollIntoView(),Et(n,!0).toggle(!0)}),PR=()=>{T.registerHandlers(Cg,{fetch:Zz})}});var Rl,FR=v(()=>{"use strict";Y();Rl=class extends H{parsedInit(){let t=this.slot("start"),e=this.slot("end");t.addEventListener("change",()=>{let n=Number(t.value)||0,o=Number(e.value)||0;n>0&&o>0&&n>o&&(e.value=String(n))}),e.addEventListener("change",()=>{let n=Number(t.value)||"0",o=Number(e.value)||"0";o>0&&n>0&&o<n&&(t.value=String(o))})}}});var BR={};ut(BR,{default:()=>Kz});var Kz,UR=v(()=>{"use strict";NR();$R();FR();Y();Kz=()=>{PR(),B("years",Rl),kR(),B("postpromo",Ml)}});var jR={};ut(jR,{default:()=>tj});var zR,Xz,Qz,tj,WR=v(()=>{"use strict";$();G();zR=i=>{let t=i.actionName(),e=i.node();e.disabled=!0;let{id:n,kind:o}=e.dataset,s=t==="disablecar"?`/recommendations/cars/${n}/prohibit`:`/recommendations/post/${o}_${n}/prohibit`;R(s,{method:"POST",anchorEl:e})},Xz=i=>{let t=i.node(),e=t.dataset.feed;t.disabled=!0,R(`/recommendations/posts/${e}`,{method:"POST",anchorEl:t,body:{kind:t.dataset.kind,id:t.dataset.id}})},Qz=i=>A(void 0,null,function*(){let t=i.node();t.disabled=!0;let e=yield R(t.dataset.url,{method:"POST",anchorEl:t,body:{postId:t.dataset.id}});confirm("Перейти к записи в Инбоксе?")&&(window.location.href=e.postLink||"")}),tj=()=>{T.registerHandlers("recommendations",{disable:zR,disablecar:zR,addtofeed:Xz,addtoinbox:Qz})}});var VR,qR,GR=v(()=>{"use strict";VR="Ждёт продвижения",qR="Смотреть в инбоксе"});var JR={};ut(JR,{default:()=>oj});var Mm,ij,nj,oj,YR=v(()=>{"use strict";$();GR();X();G();Vt();Mm="combacklog",ij="is-dashboard",nj=i=>A(void 0,null,function*(){let t=i.node(),e=t.dataset.id||"",{postLink:n}=yield R(t.href,Mm,{method:"POST",anchorEl:t,body:{postId:e}});if(n){hn(t);let o=lt(t,Mm,"badge");o.classList.contains(ij)&&(o.style.display="block");let r=x(Mm,"title");r.textContent=VR,t.href=n,t.textContent=qR}}),oj=()=>{T.registerHandlers(Mm,{post:nj})}});var ZR={};ut(ZR,{default:()=>rj});var sj,rj,KR=v(()=>{"use strict";$();G();Vt();sj=i=>A(void 0,null,function*(){yt(i);let t=i.node(),e=t.submitbtn;yield R(t.action,{method:"POST",anchorEl:e,body:new FormData(t)}),t.parentElement.classList.remove("fx-white-fade"),setTimeout(()=>{t.parentElement.classList.add("fx-white-fade")},10)}),rj=()=>{T.registerHandlers("fcat",{set:sj})}});var XR={};ut(XR,{default:()=>vj});var aj,lj,cj,dj,mj,pj,hj,uj,fj,gj,vj,QR=v(()=>{"use strict";aj=i=>({date:i,total:0,postBoosts:0,businessCards:0,businessAds:0,profileAds:0}),lj=i=>i.toLocaleDateString("ru",{day:"numeric",month:"2-digit",year:"numeric"}).split(".").reverse().join("-"),cj=i=>{let t=new Date(i);return t.setTime(t.getTime()-864e5*(i.getDay()-1)),t},dj=i=>`<li>${i}</li><li>${Math.floor(i/2)}</li><li>0</li>`,mj=(i,t)=>Math.floor((i.getMilliseconds()-t.getMilliseconds())/864e5),pj=i=>{for(let t=1;t<i.length;t++){let e=i[t],n=i[t-1],o=mj(new Date(e.date),new Date(n.date));if(o>1)for(let s=0;s<o-1;s++){let r=new Date(n.date);r.setDate(r.getDate()+s+1);let a=lj(r),l=aj(a);i.splice(t,0,l),t++}}},hj=i=>`
<div class="c-cp-graph-col__toltip">
  <p>
      <b>${new Date(i.date).toLocaleDateString("ru",{day:"numeric",month:"short"})}</b>
      </br>${i.total} гостей
      <br/><span class="c-cp-color--post">${i.postBoosts} с постов</span>
      <br/><span class="c-cp-color--card">${i.businessCards} с карточек</span>
      <br/><span class="c-cp-color--mini">${i.profileAds} с мини</span>
      <br/><span class="c-cp-color--cpc">${i.businessAds} с CPC</span>
  </p>
</div>`,uj=(i,t)=>{let e=125/t;i.sort((s,r)=>{let a=new Date(s.date),l=new Date(r.date);return a>l?1:a<l?-1:0}),pj(i);let n=Math.max(new Date(i[0].date).getDay()-1,0);return Array.from(new Array(n),()=>'<div class="c-cp-graph-col c-cp-graph-col--blank"></div>').join("")+i.map(s=>{let r=`
<div class="c-cp-graph-col">
  <div class="c-cp-graph-col__section c-cp-graph-col__section--post" style="height: ${s.postBoosts*e}px"></div>
  <div class="c-cp-graph-col__section c-cp-graph-col__section--card" style="height: ${s.businessCards*e}px"></div>
  <div class="c-cp-graph-col__section c-cp-graph-col__section--mini" style="height: ${s.profileAds*e}px"></div>
  <div class="c-cp-graph-col__section c-cp-graph-col__section--cpc" style="height: ${s.businessAds*e}px"></div>
    ${hj(s)}
</div>`;return(new Date(s.date).getDay()===1?'<div class="c-cp-graph-col c-cp-graph-col--blank"></div>':"")+r}).join("")},fj=i=>{let t=[];for(let e=0;e<i.length;e++){let n,o=new Date(i[e].date);t.length===0?(n={date:cj(o).toLocaleDateString("ru",{day:"numeric",month:"short"}),postBoosts:0,businessCards:0,businessAds:0,profileAds:0,total:0},t.push(n)):o.getDay()===1?(n={date:o.toLocaleDateString("ru",{day:"numeric",month:"short"}),postBoosts:0,businessCards:0,businessAds:0,profileAds:0,total:0},t.push(n)):n=t[t.length-1],n.postBoosts+=i[e].postBoosts,n.businessCards+=i[e].businessCards,n.businessAds+=i[e].businessAds,n.profileAds+=i[e].profileAds,n.total+=i[e].total}return t.map(e=>`<div class="c-cp-legend__section">
  <p class="c-cp-legend__title">${e.date}</p>
  <p class="c-cp-legend__text c-cp-color--post">${e.postBoosts} c постов</p>
  <p class="c-cp-legend__text c-cp-color--card">${e.businessCards} с карточек</p>
  <p class="c-cp-legend__text c-cp-color--mini">${e.profileAds} с мини</p>
  <p class="c-cp-legend__text c-cp-color--cpc">${e.businessAds} с СРС</p>
</div>`).join("")},gj=i=>{let t=Math.max(...i.map(e=>e.total));return`
<div class="c-cp-mod__chart">
  <div class="c-cp-chart">
    <ul class="c-cp-chart__y-axis">${dj(t)}</ul>
    <div class="c-cp-chart__graph">
      <div class="c-cp-graph">
        ${uj(i,t)}
      </div>
      <div class="c-cp-legend">
        ${fj(i)}
      </div>
    </div>
  </div>
</div>`},vj=i=>{let t=i.dataset.data||"",e=[];try{e=JSON.parse(t)}catch(o){}if(e.length===0)return;let n=gj(e);i.insertAdjacentHTML("afterend",n)}});var tI,eI,iI,nI,oI,sI,Rm,rI,aI,lI,cI,dI,Sg=v(()=>{"use strict";tI="{Num, select, 0 {} other {({Num}) }}Сообщения",eI="Скрыть пользователя из списка собеседников",iI="Скрыть пользователя из списка собеседников?",nI="Вся переписка сохранится. При возобновлении общения контакт вновь вернётся в список",oI="Очистить историю общения с этим человеком?",sI="Восстановить данные будет невозможно",Rm="Сообщения",rI="Переписка с ",aI="Показать предыдущие сообщения",lI="Добавить пользователя в Чёрный список?",cI="Добавить",dI=`<p><b>Добавьте номер телефона</b><br>
Российским пользователям сообщения доступны только с подтверждённым номером телефона. <a class="c-link" href="{OriUrl}">Почему?</a></p>
<p><b><a class="c-link" href="{Url}">{IsBusiness, select, true {Привязать сейчас} other {Добавить и подтвердить}}</a></b> {IsBusiness, select, true {  <button class="r-button-unstyled c-link u-bold" data-action="msgr.remind-add-phone" data-url="{RemindLaterUrl}">Отложить на потом</button>} other {}}</p>`});var Ej,bj,_j,hI,pI,uI,Mg,yj,Tj,xj,wj,fI,gI,Rg=v(()=>{"use strict";vt();Si();Xt();ea();Sg();Ji();Re();Mi();Ej="msgr",bj="is-active",_j=i=>new Intl.DateTimeFormat("ru",{year:"numeric",month:"long",day:"numeric"}).formatToParts(i).map(({type:t,value:e})=>t==="year"&&Number(e)===new Date().getFullYear()||t==="literal"&&e.match(/^\sг\.$/)?"":e).join("").replace(/,\s?$/,""),hI=i=>C`${ni(i)}`,pI=(i,t,e,n,o)=>o?C`<span class="${t} c-username--wrap"><span>${n}</span></span>`:C`<a class="${t} c-username--wrap" href=${e} data-ihc-token="p/${i}"><span>${n}</span></a>`,uI=()=>C`
<header class="x-title-header">
  <h1 class="x-title">${d2Env.isMobile?C`<a class="c-link c-link--text" data-action="msgr.contacts">${Rm}</a>`:C`${Rm}`}</h1>
</header>
`,Mg=(i,t,e,n,o)=>d2Env.isMobile?C`<div class="x-title-header__to-top"><a class="c-link c-link--text" data-action="msgr.contacts">${Rm}</a></div>\n <h1 class="x-title">${pI(i,t,e,n,o)}</h1>`:C`<h1 class="x-title">${rI}${pI(i,t,e,n,o)}</h1>`,yj=(i,t,e,n,o)=>C`
<header class="x-title-header">
  <h1 class="x-title">${Mg(i,t,e,n,o)}</h1>
</header>
`,Tj=()=>C`
<div class="c-msgr__pager">
  <button class="r-button-unstyled c-link c-link--text" data-action="msgr.prev">${aI}
  </button>
</div>
`,xj=(i,t,e,n,o,s,r,a,l,c)=>{let d=t?C`<a class="c-msg__avatar" href=${o} data-ihc-token="p/${s}">${Se({images:[{url:n,width:60,height:60}]},void 0,{className:"is-const round u-vignette"})}</a>`:F;return C`
    ${d2Env.isMobile&&l?C`<div class="c-msg-date">${_j(a)}</div>`:F}
    <div id="m${i}" class=${Ft({"c-msg":!0,"c-msg--own":!t,"c-msg--pic":e})} data-slot="${Ej}.item">
      ${d}
      <div class=${Ft({"c-msg__body":!0,"ctx-dark":!t})}>
        <div class=${Ft({"u-break-word":!0,"c-link-decorated":!0,"c-link-reset-white":!t})} data-role="emojizoom">${ni(c)}</div>
        ${d2Env.isMobile?C`<div class="c-msg__date">${new Intl.DateTimeFormat("ru",{hour:"2-digit",minute:"2-digit"}).format(a)}</div>`:F}
      </div>
      ${d2Env.isMobile?F:C`<div class="c-msg__date">${r}</div>`}
    </div>
  `},wj=i=>C`
<div class="c-msg c-msg--disabled">
  ${Ts("drive","c-msg__avatar")}
  <div class="c-msg__body ctx-dark">
    <div class="u-break-word c-link-decorated c-link-reset-white">${ni(i)}</div>
  </div>
</div>
`,fI=(i,t,e,n,o,s,r,a,l)=>C`
  ${d2Env.isMobile?F:yj(i,t,e,n,o)}
  ${r?Tj():F}
  ${rt(a,c=>c.id,c=>xj(c.id,c.reply,c.hasImage,s,e,i,c.timestamp,c.date,c.headerDate,c.text))}
  ${l?wj(l):F}`,gI=(i,t)=>{let e=t===i.id,n={[bj]:e,"c-msgr-contact--business":i.isBusiness},o=Se({images:[{url:i.avatar,width:60,height:60}]},void 0,{className:"is-round u-vignette c-msgr-contact__avatar"});return C`
    <a id="mc${i.id}" href="/my/messages/${i.id}" class="c-msgr-contact c-darkening-hover-container ${Ft(n)}" data-action="msgr.contact" data-url=${i.url}>
      ${d2Env.isMobile?F:C`<button class="r-button-unstyled c-msgr-contact__remove" data-action="msgr.remove" data-id=${i.id} data-tt=${eI}>×</button>`}
      ${o}
      <div class="c-msgr-contact__info">
        <div class="c-msgr-contact__nickname">
          <div class="c-msgr-contact__username u-text-overflow ${i.nicknameCssClass||"c-link c-link--color00 c-username"}" data-ihc-token="p/${i.id}">
              ${i.username}
          </div>
          ${Number(i.unread)?C`<span class="c-msgr-contact__num c-notification-bubble" data-slot="msgr.bubble">${i.unread}</span>`:F}
        </div>
        ${i.status?C`<div class="u-text-overflow">${$e(i.status)}</div>`:F}
        ${i.lastOnline?C`<div class="u-text-overflow">${i.lastOnline}</div>`:F}
      </div>
    </a>
  `}});var vI,Ig,Lj,Og,Dg,Aj,Cj,Im,EI=v(()=>{"use strict";vI=io(Yr(),1);vt();Xt();fr();Le();V();X();Ji();G();Rg();Ig="msgrlist",Lj="/ajax/messages.cshtml",Og="is-active",Dg=3e4,Aj=12e4,Cj=200,Im=class{constructor(t){this.partnerId=t;this.lastActive=-1/0;this.container=x(Ig,"contacts"),this.filterEl=x(Ig,"filter"),this.timeout=setTimeout(()=>this.updateContacts(),Dg),this.filterEl.value="",this.filterEl.addEventListener("input",()=>this.filter()),this.container.addEventListener("scroll",(0,vI.throttle)(this.scroll).bind(this),{passive:!0}),this.scrollToTarget()}setActiveContact(t){let e=U(Og,this.container);if(e&&e.classList.remove(Og),t){this.partnerId=t;let n=ct(`#mc${t}`);if(n){n.classList.add(Og);let o=U("c-msgr-contact__num",n);o&&(st.publish("force-update"),o.remove())}this.scrollToTarget()}}updateContacts(){return A(this,null,function*(){if(Date.now()-this.lastActive<5e3){clearTimeout(this.timeout),this.timeout=setTimeout(()=>this.updateContacts(),Dg);return}let t=yield R(Lj,Ig,{method:"POST",silent:!0,body:N(N({_:"partners"},this.filterEl.value&&{filter:this.filterEl.value.toLowerCase()}),this.partnerId&&{partner:this.partnerId})});clearTimeout(this.timeout),this.timeout=setTimeout(()=>this.updateContacts(),$i.isIdle?Aj:Dg),this.renderContacts(t)})}renderContacts(t){t.unread&&(st.publish("update-unread",t.unread),st.publish("update-unread-title",t.unread));let e=t.partners||[];ii(this.container),J(rt(e,n=>n.id,n=>gI(n,this.partnerId)),this.container),this.scrollToTarget()}scrollToTarget(){let t=this.partnerId?ct(`#mc${this.partnerId}`):null;t&&t.scrollIntoView({behavior:"smooth",block:"nearest"})}filter(){clearTimeout(this.filterTm),this.filterTm=setTimeout(()=>this.updateContacts(),Cj)}scroll(){this.lastActive=Date.now()}}});var Sj,bI,Om,_I=v(()=>{"use strict";Le();X();ra();Sj="msgr",bI=i=>{i.detail&&i.detail.length===1&&st.publish("post-pic",i.detail[0].id)},Om=class{constructor(){let t=x(Sj,"upload");t&&(this.uploader_=new Oi("messengerimage",d2Env.isMobile?"r-button-unstyled c-msgr__btn":"c-button c-button--gray"),this.uploader_.setUploadUrl(d2Env.uploadUrl),this.uploader_.setAction("uploadSimple"),t.dataset.tt&&(this.uploader_.setDataAttribute("tt",t.dataset.tt),t.dataset.tt&&delete t.dataset.tt),this.uploader_.setButtonCaption('<span class="c-msgr__btn-icon"></span>'),this.uploader_.render(t),this.uploader_.setVisible(!0),this.uploader_.addEventListener("ready",bI))}disable(t){this.uploader_&&this.uploader_.getButton()&&(this.uploader_.getButton().disabled=t)}dispose(){this.uploader_&&(this.uploader_.removeEventListener("ready",bI),this.uploader_.dispose(),this.uploader_=void 0)}}});var TI={};ut(TI,{default:()=>Dm});var Oe,Hg,Mj,Rj,yI,Ij,Oj,Il,Dm,xI=v(()=>{"use strict";vt();fr();$();Le();Or();te();Bh();Sg();V();Y();X();Me();G();Z();Vt();od();dn();gt();zi();EI();Rg();_I();Oe="msgr",Hg="/ajax/messages.cshtml",Mj=7e3,Rj=14e3,yI=i=>!!i.html,Ij=i=>!!i.warning,Oj=(i,t)=>i.getFullYear()===t.getFullYear()&&i.getMonth()===t.getMonth()&&i.getDate()===t.getDate(),Il=class{constructor(t,e=""){this.root=t;this.partnerId=e;this.partnerDeleted_=!1;this.messages_=[];this.hasMoreMessages_=!1;this.pendingUpdateHistory_=!1;this.allowReply=!1;this.lockHistory=!1;this.hasNoPhone=!1;this.disablePhoneReminder=!1;this.oriUrl=this.root.dataset.oriUrl,this.phoneUrl=this.root.dataset.phoneUrl,this.remindUrl=this.root.dataset.remindUrl,this.form_=x(Oe,"form",this.root),this.button_=x(Oe,"submitbtn",this.form_),this.header_=x(Oe,"header",this.root),this.history_=x(Oe,"history",this.root),this.historyDel_=x(Oe,"history-delete",this.root),this.blacklistEl_=x(Oe,"bl",this.root);let n=new URLSearchParams(window.location.search);window.history.replaceState(null,document.title,window.location.href.split("?")[0]),this.presetMessage_=n.get("message")||"",this.button_.disabled=!1,window.addEventListener("popstate",s=>this.onNavigate_(s)),T.registerHandlers("msgr",{prev:this.onPrev_,post:this.onPost_,wipehistory:this.onDelete_,remove:this.removeContact_,blacklist:this.onBlacklist_,contact:this.onContact_,contacts:this.onShowContacts_,"remind-add-phone":this.onRemindAddPhone_},this),st.subscribe("update-unread-title",Il.updateTitle,this),st.subscribe("post-pic",this.onPicPost_,this),this.getNewMessages_=this.getNewMessages_.bind(this),this.contacts_=new Im(e);let o=this.form_.text;M(this.form_,!0),this.ta_=new zn(o,o.offsetHeight,Math.round(document.documentElement.clientHeight*.6)),M(this.form_,!1),this.ta_.addEventListener("resize",()=>this.onTextareaResize_()),this.changePartner_(this.partnerId)}enableHistoryDeleteButton_(t){this.historyDel_&&M(this.historyDel_,t!==void 0?t:ft(Oe,"item",this.history_).length>0)}uploaderInit_(){this.uploader_&&this.uploader_.dispose(),this.uploader_=new Om}onShowContacts_(){d2Env.isMobile&&(document.scrollingElement.scrollTop=0),this.changePartner_("",!0)}showContacts_(t){this.root.classList.toggle("c-msgr--contacts",t),d2Env.isMobile&&document.documentElement.classList.toggle("g-messenger",!t)}onRemindAddPhone_(t){return A(this,null,function*(){let e=t.node(),{url:n}=e.dataset;n&&(yield R(n,`${Oe}_nophone`,{method:"POST",anchorEl:e}),this.disablePhoneReminder=!0,this.changePartner_(this.partnerId))})}onContact_(t){let e=t.node().id.substring(2);this.partnerId!==e&&this.changePartner_(e,!0)}onNavigate_(t){t.state!==this.partnerId&&this.changePartner_(t.state||"")}changePartner_(t,e=!1){return A(this,null,function*(){t||this.showContacts_(!0),this.uploaderInit_(),this.pendingPartnerId_=t,this.pendingUpdateHistory_=e;let n=yield this.request_("init",{partner:t||""},!0,!0);if(this.showContacts_(!this.pendingPartnerId_),this.uploaderInit_(),this.partnerId=this.pendingPartnerId_||"",this.pendingUpdateHistory_&&window.history.pushState(this.partnerId,document.title,`/my/messages/${this.partnerId}`),!yI(n)){this.partnerUrl_=n.url,this.partnerUsername_=n.username,this.partnerCssClass_=n.nicknameCssClass,this.partnerDeleted_=n.deleted,this.partnerAvatar_=n.avatar,this.partnerBlacklisted_=n.blacklisted,this.contacts_.setActiveContact(this.partnerId),this.allowReply=n.allowReply,this.lockHistory=n.lockHistory,this.hasNoPhone=n.hasNoPhone,this.disableReason="";let o=!0;this.allowReply||(this.hasNoPhone?this.disablePhoneReminder||(this.disableReason=it(dI,{OriUrl:this.oriUrl,Url:this.phoneUrl,IsBusiness:Boolean(this.remindUrl),RemindLaterUrl:this.remindUrl})):n.disableReason?this.disableReason=n.disableReason:o=!1),this.ta_.setEnabled(this.allowReply),this.blacklistEl_&&(this.blacklistEl_.disabled=this.lockHistory,this.updateBlacklist()),this.historyDel_&&(this.historyDel_.disabled=this.lockHistory),this.button_.disabled=!this.allowReply,this.uploader_&&this.uploader_.disable(!this.allowReply),M(this.form_,o)}d2Env.isMobile?document.scrollingElement.scrollTop=0:this.history_.scrollTop=0,this.render_(n,void 0,!0),this.ta_.setContent(this.presetMessage_),this.presetMessage_="",this.enableHistoryDeleteButton_()})}historyScroll_(t,e,n){let o=d2Env.isMobile?document.scrollingElement:this.history_;if(t){o.scrollTop=t.offsetTop+e;return}let s=o.scrollHeight-(d2Env.isMobile?document.documentElement.clientHeight:o.offsetHeight);n?o.scroll({top:s}):setTimeout(()=>{o.scroll({top:s,behavior:"smooth"})},100)}static updateTitle(t=0){document.title=it(tI,{Num:t})}updateBlacklist(){this.blacklistEl_&&(this.blacklistEl_.textContent=this.partnerBlacklisted_?ss:Ir)}request_(t,e,n,o){return A(this,null,function*(){let s=N({_:t==="init"?"get":t},e),r;if(o){let a=x(Oe,"main",this.root);r=new fe(a),r.start()}return R(Hg,Oe,{method:"POST",silent:n,spinner:r,body:s})})}onPost_(t){return A(this,null,function*(){yt(t),this.formFocus_();let e=this.form_.text.value;if(!e)return;let n=yield this.request_("post",{partner:this.partnerId||"",messageId:this.lastId_||"",text:e});if(Ij(n)){let o=d2Env.isMobile?`
<div class="x-box x-box--ghost">
<div class="x-text c-link-decorated">${n.warning}</div>
<button class="c-button c-button--primary c-button--l o-t-l u-100"
type="button" data-action="dialog.close">${ia}</button>
</div>`:`
<div class="c-dialog-desc c-link-decorated">${n.warning}</div>
<div class="o-group o-group--m o-group--end o-group--wide c-dialog-buttons">
<button class="c-button c-button--primary c-button--m-no-padding"
  type="button" data-action="dialog.close">${ia}</button>
</div>`,s=Ci({anchor:this.button_,className:"c-dialog-warning",title:id,html:o});s.render(),s.show();return}this.ta_.setContent(""),this.render_(n),this.contacts_.updateContacts()})}onPicPost_(t){return A(this,null,function*(){this.formFocus_();let e=yield R(Hg,`${Oe}.pic`,{method:"POST",body:{_:"post",partner:this.partnerId||"",messageId:this.lastId_||"",image:t}});this.render_(e),this.contacts_.updateContacts()})}onDelete_(t){return A(this,null,function*(){let e=t.node();(yield dt(oI,sI,e,qt))&&(yield this.request_("clear",{partner:this.partnerId||""}),this.enableHistoryDeleteButton_(!1),this.messages_=[],ft(Oe,"item",this.history_).forEach(n=>n.remove()))})}onPrev_(){return A(this,null,function*(){let t=yield this.request_("prev",{partner:this.partnerId||"",messageId:this.prevId_||""});this.render_(t,!0)})}getNewMessages_(){return A(this,null,function*(){let t=yield this.request_("get",{partner:this.partnerId||"",messageId:this.lastId_||""},!0);t&&(st.publish("force-update"),this.render_(t),this.contacts_.updateContacts())})}renderHeader_(t){M(this.header_,t),t&&(this.partnerId&&this.partnerUsername_?J(Mg(this.partnerId,this.partnerCssClass_,this.partnerUrl_,this.partnerUsername_,this.partnerDeleted_),this.header_):J(uI(),this.header_))}render_(t,e,n){if(clearTimeout(this.tm_),this.tm_=setTimeout(this.getNewMessages_,$i.isIdle?Rj:Mj),yI(t)){this.messages_=[],this.renderHeader_(!0),J(hI(t.html),this.history_),M(this.form_,!1);return}(e||n)&&(this.hasMoreMessages_=t.hasMore);let{messages:o}=t;n?(this.messages_=o,o.length>0&&(this.prevId_=t.messages[0].id)):e?this.messages_=[...o,...this.messages_]:this.messages_=[...this.messages_,...o];let s=x(Oe,"item",this.history_),r=0;e&&s&&(r=this.history_.scrollTop-s.offsetTop);let a,l=this.messages_.map(d=>{let p=new Date(d.unixTimestamp*1e3),u=a&&Oj(a,p)?void 0:p;return a=p,{id:d.id,timestamp:d.timestamp,date:new Date(d.unixTimestamp*1e3),headerDate:u,text:d.text,reply:d.reply,hasImage:d.hasImage}});this.renderHeader_(d2Env.isMobile),J(fI(this.partnerId,this.partnerCssClass_,this.partnerUrl_,this.partnerUsername_,this.partnerDeleted_,this.partnerAvatar_||"",this.hasMoreMessages_,l,this.disableReason),this.history_);let{messageId:c}=t;c&&(e?this.prevId_=c:this.lastId_=c),this.enableHistoryDeleteButton_(),this.blacklistEl_&&(this.blacklistEl_.dataset.id=this.partnerId),n&&this.formFocus_(),o.length>0&&(this.historyScroll_(e?s:void 0,r,n),n&&setTimeout(()=>{this.historyScroll_(void 0,0,!0)}))}formFocus_(){this.allowReply&&!d2Env.isMobile&&this.form_.text.focus()}onTextareaResize_(){if(d2Env.isMobile)return;this.form_.text.scrollIntoView()}removeContact_(t){return A(this,null,function*(){yt(t);let e=t.node(),n=e.dataset.id;if(Ke(),!(yield dt(iI,nI,e,fs)))return;yield R(Hg,`${Oe}.del`,{method:"POST",anchorEl:e,body:{_:"deletepartner",partner:n||""}});let s=ct(`#mc${n}`);n===this.partnerId?this.changePartner_(""):s&&x(Oe,"bubble",s)&&st.publish("force-update"),s&&s.remove()})}onBlacklist_(t){return A(this,null,function*(){let e=t.node(),n=e.dataset.id;if(Ke(),!(!this.partnerBlacklisted_&&!(yield dt(lI,void 0,e,cI))))if(yield R("/ajax/blacklist.cshtml",`${Oe}.bl`,{method:"POST",anchorEl:e,body:{_:this.partnerBlacklisted_?"remove":"add",id:n}}),this.partnerBlacklisted_=!this.partnerBlacklisted_,this.updateBlacklist(),this.partnerBlacklisted_){this.changePartner_("");let o=ct(`#mc${n}`);o&&o.remove()}else this.changePartner_(n)})}},Dm=class extends H{parsedInit(){let{partner:t}=this.element.dataset,e=t&&t!=="0"?t:void 0;new Il(this.element,e)}}});var rr,kg=v(()=>{"use strict";rr=class extends EventTarget{constructor(){super(...arguments);this.imageMap=new Map;this.completionFired=!1}addImage(e){this.completionFired=!1,this.imageMap.set(e,new Image)}removeImage(e){let n=this.imageMap.get(e);n&&(this.imageMap.delete(e),n.removeEventListener("load",this),n.removeEventListener("abort",this),n.removeEventListener("error",this))}start(){this.imageMap.forEach((e,n)=>{e.addEventListener("load",this),e.addEventListener("abort",this),e.addEventListener("error",this),e.id=n,e.src=n})}handleEvent(e){let n=e.currentTarget;n&&(this.removeImage(n.id),this.dispatchEvent(new CustomEvent(e.type,{detail:n})),this.imageMap.size===0&&!this.completionFired&&(this.completionFired=!0,this.dispatchEvent(new Event("complete"))))}}});var wI={};ut(wI,{default:()=>Hm});var Dj,Hm,LI=v(()=>{"use strict";V();Y();Ld();kg();Dj=960,Hm=class extends H{parsedInit(){let t=et("img",this.element).map(s=>s.src),e=["mm/android-6","email/app-store-badge-ru","email/google-play-badge-ru","email/app-gallery-badge-ru","mm/iphone-6"].map(s=>`/assets/images/${s}.png`),n=t.concat(e),o=new rr;n.forEach(s=>{o.addImage(s)}),o.addEventListener("complete",()=>{this.element.classList.remove("is-inactive")}),o.start(),d2Env.isMobile&&(Fs().addEventListener("resize",()=>this.fixScale),this.fixScale())}fixScale(){let e=this.element.offsetWidth/Dj;this.element.firstElementChild.style.transform=`translateZ(0) scale(${e})`}}});var Ol,AI=v(()=>{"use strict";Y();G();ws();Ol=class extends H{init(){let e=JSON.parse(this.element.textContent);this.pages=e.pages,this.pagerLink=e.pagerLink,this.token=e.token,this.current=e.current,je().addEventListener("scroll",this)}handleEvent(){let e=this.current+1;if(!this.pages[e]){je().removeEventListener("scroll",this);return}kt(this.pagerLink,this.role,{silent:!0,body:{token:this.token,id:this.pages[e]}}).then(n=>{this.element.insertAdjacentHTML("beforebegin",n),this.current=e})}}});var Dl,CI=v(()=>{"use strict";Y();Z();Dl=class extends H{parsedInit(){this.handleEvent(),this.element.addEventListener("change",this)}handleEvent(){let{region:t}=this.element;this.element.querySelector('button[type="submit"]').disabled=t.value==="";let e="directions"in t[t.selectedIndex].dataset;M(this.slot("directions"),e),e||(this.element.direction.selectedIndex=0)}}});var SI,MI=v(()=>{"use strict";Ho();SI=()=>{Di("companies-about","visited",30*12)}});var RI={};ut(RI,{default:()=>Hj});var Hj,II=v(()=>{"use strict";AI();CI();MI();Y();Hj=()=>{B("companies",Ol),B("companies-form",Dl),d2Env.isMobile&&B("companies-promo",SI)}});var OI={};ut(OI,{default:()=>km});var km,DI=v(()=>{"use strict";Le();Y();Z();km=class extends H{parsedInit(){this.type=this.element.dataset.imageName,st.subscribe("imagelist-update",this.picSync,this),st.subscribe("imagelist-replace",this.picSync,this),this.bindInput("title"),this.bindInput("text"),this.bindInput("url"),M(this.slot("preview",document.body),!0)}bindInput(e){let n=this.slot(`${e}-input`),o=this.slot(e,document.body);n.dataset.type=e,n.dataset.defaultValue=o.textContent,this.inputSync(n),n.addEventListener("input",()=>this.inputSync(n))}picSync(){let e=this.element[`${this.type}-1`],n=e?e.dataset.preview||e.dataset.thumbnail:null,o=this.slot("pic",document.body);this.pic=this.slot("pic-url"),n?this.pic?this.pic.src=n:(this.pic=document.createElement("img"),this.pic.src=n,o.before(this.pic)):this.pic&&this.pic.remove(),M(o,!n)}inputSync(e){let n=e.dataset.type,o="";try{o=n==="url"?new URL(e.value).host:e.value}catch(r){}let s=this.slot(n,document.body);s.textContent=o||e.dataset.defaultValue}}});var Ng,Pg,HI,kI,NI,$g,PI,$I,FI,BI=v(()=>{"use strict";Ng="Очистить",Pg="Сохранить",HI="{Text}{Extra, select, 0 {} other { и ещё {Extra}}}",kI="Ваши шаблоны",NI="Шаблоны",$g="Быстрые категории",PI="Какие марки обслуживаете?",$I="Выберите марки",FI="{Count, plural, one {# марка} many {# марок} other {# марки}}"});var UI,zI=v(()=>{"use strict";UI=[{name:"ru",caption:"Все российские",brands:["derways","gaz","lada","moskvich","tagaz","uaz"]},{name:"foreign",caption:"Все иномарки",brands:["ac","acura","alfaromeo","alpina","amc","aro","asia","astonmartin","audi","austin","autozam","avia","bac","barkas","bcc","bentley","bertone","bilenkinclassiccars","bmw","bogdan","brilliance","bugatti","buick","byd","cadillac","caterham","changan","chery","chevrolet","chrysler","citroen","cord","dacia","dadi","daewoo","daihatsu","daimler","datsun","detomaso","delorean","dodge","dongfeng","eagle","efini","eunos","faw","ferrari","fiat","ford","foton","fso","geely","genesis","gmc","greatwall","hafei","haima","haval","hawtai","holden","honda","huanghai","hummer","hyundai","infiniti","ikco","isuzu","iveco","jac","jaguar","jeep","kia","ktm","lamborghini","lancia","landrover","ldv","lexus","lifan","ligier","lincoln","lotus","luxgen","marussia","maserati","maybach","mazda","mercedes","mercury","merkur","mg","mini","mitsubishi","morgan","morris","nissan","noble","nysa","oldsmobile","opel","peugeot","plymouth","pontiac","porsche","proton","ravon","renault","rollsroyce","rover","saab","samsung","saturn","scion","seat","simca","skoda","sma","smart","ssangyong","subaru","suzuki","talbot","tata","tatra","tesla","toyota","trabant","vauxhall","volkswagen","volvo","wartburg","wiesmann","willys","zotye","zx"]},{name:"eu",caption:"Европейские",brands:["alfaromeo","audi","bmw","bugatti","citroen","dacia","ferrari","fiat","jaguar","landrover","lotus","mercedes","mini","opel","porsche","renault","saab","seat","skoda","smart","volkswagen","volvo"]},{name:"de",caption:"Немецкие",brands:["audi","bmw","mercedes","opel","porsche","smart","volkswagen"]},{name:"kr",caption:"Корейские",brands:["daewoo","genesis","hyundai","kia","ssangyong"]},{name:"cn",caption:"Китайские",brands:["brilliance","byd","changan","chery","dongfeng","faw","foton","geely","greatwall","haima","haval","hawtai","huanghai","jac","lifan"]},{name:"jp",caption:"Японские",brands:["acura","datsun","honda","isuzu","infiniti","lexus","mazda","mitsubishi","nissan","subaru","suzuki","toyota"]},{name:"us",caption:"Американские",brands:["chevrolet","chrysler","dodge","fiat","ford","hummer","jeep","cadillac"]},{name:"vw",caption:"Ваги",brands:["audi","porsche","seat","skoda","volkswagen"]},{name:"gm",caption:"GM",brands:["cadillac","chevrolet","gmc","hummer"]}]});var QI={};ut(QI,{default:()=>Yj});var Lt,Kn,Nm,GI,JI,Pm,jI,ar,Bg,Nj,YI,ZI,Pj,WI,VI,qI,$j,Ug,KI,Fj,zg,Bj,lr,Fg,XI,jg,Uj,zj,jj,Wj,Vj,qj,Gj,Jj,Yj,tO=v(()=>{"use strict";vt();Si();Es();$();BI();el();V();X();Me();Z();Ne();zI();Lt="directions",Kn="brand",Nm="mode",GI="preset",JI="template",Pm=6,jI=5,ar=new Map,Bg=[],Nj=(i,t)=>{let e=i.map(r=>ar.get(r));if(t)return e.join(", ");let n=i.length,o=e.slice(0,jI).join(", "),s=Math.max(n-jI,0);return it(HI,{Text:o,Count:n,Extra:s})},YI=i=>Bg.map(t=>({name:t.name,caption:t.caption,brands:t.brands,selected:t.brands.every(e=>i.includes(e))})),ZI=(i,t,e,n,o="check",s)=>d2Env.isMobile?C`
<div class="x-form__item">
  <div class="x-form__body">
    <label class="x-choice x-choice--switch">
      <input type="checkbox" name=${i} .value=${t} ?disabled=${s}
        ?checked=${n} data-action="${`change:${Lt}.${o}`}">
      <span class="x-choice__label">${e}</span>
    </label>
  </div>
</div>
`:C`
<label class="c-checkbox">
  <input type="checkbox" name=${i} .value=${t} ?disabled=${s}
    ?checked=${n} data-action="${`change:${Lt}.${o}`}">
  <span class="c-checkbox__check"></span><span class="c-checkbox__label">${e}</span>
</label>
`,Pj=(i,t,e,n,o)=>d2Env.isMobile?C`
<div class="x-form__item">
  <div class="x-form__body">
    <label class="x-choice x-choice--radio">
      <input type="radio" name=${i} .value=${t} ?disabled=${o}
        ?checked=${n} data-action=${`change:${Lt}.template`}>
      <span class="x-choice__label u-text-overflow">${e}</span>
    </label>
  </div>
</div>
  `:C`
<label class="c-checkbox">
  <input type="radio" name=${i} .value=${t} ?disabled=${o}
    ?checked=${n} data-action=${`change:${Lt}.template`}>
  <span class="c-checkbox__check c-checkbox__check--radio"></span>
  <span class="c-checkbox__label u-text-overflow">${e}</span>
</label>
`,WI=(i,t,e)=>{let n=Array.from(ar.keys()).map(s=>ZI(i,s,ar.get(s),t.includes(s),void 0,e));if(d2Env.isMobile)return n;let o=fn(n,Pm);return C`<div class="o-grid o-grid--${Math.min(Pm,n.length)} o-grid--no-margin c-checklist">${o.map(s=>C`<div><div class="c-checkbox-group f-item">${s}</div></div>`)}</div>`},VI=(i,t)=>{let e=i.map(n=>Pj(JI,n.brands.join(","),C`<b>${n.caption}</b> <i>${Nj(n.brands,!0)}</i>`,!1,t));return d2Env.isMobile?e:C`<div class="c-checkbox-group c-checklist">${e}</div>`},qI=(i,t)=>{let n=YI(i).map(s=>ZI(GI,s.name,s.caption,!!s.selected,"preset",t));if(d2Env.isMobile)return n;let o=fn(n,Pm);return C`<div class="o-grid o-grid--${Math.min(Pm,n.length)} o-grid--no-margin c-checklist">${o.map(s=>C`<div><div class="c-checkbox-group f-item">${s}</div></div>`)}</div>`},$j=(i,t,e)=>{let n=t.length===0;return d2Env.isMobile?C`
<form class="x-form c-com-dirform o-t-s" novalidate data-keysubmit data-role="form">
  <div class="x-box x-box--narrow">
    <div class="c-radiogroup o-t" style=${ce({opacity:n?"0.5":"1"})}>
      <label class="c-radiogroup__item">
        <input name="${Nm}" type="radio" value="templates" data-action="change:${Lt}.presets"
          ?disabled=${n} ?checked=${!n}>
        <span class="c-radiogroup__button">${NI}</span>
      </label>
      <label class="c-radiogroup__item">
        <input name="${Nm}" type="radio" value="presets" data-action="change:${Lt}.presets"
          ?disabled=${n} ?checked=${n}>
        <span class="c-radiogroup__button">${$g}</span>
      </label>
    </div>
    <div class="c-com-dirform__templates"
      data-slot="${Lt}.templates-el" style=${ce({display:n?"none":""})}>
      ${VI(t,e)}
    </div>
    <div class="c-com-dirform__presets"
      data-slot="${Lt}.presets-el" style=${ce({display:n?"":"none"})}>
      ${qI(i,e)}
    </div>
  </div>
  <div class="x-box x-box--narrow" data-role="chk">
    ${WI(Kn,i,e)}
  </div>
  <div class="c-com-dirform__submit o-group o-group--l">
    <div class="c-com-dirform__selected is-auto" data-slot="${Lt}.selected"></div>
    <button class="r-button-unstyled c-link c-link--gray" style=${ce({opacity:e?"0.5":"1"})}
      ?disabled=${e} type="button" data-action="${Lt}.clear" data-slot="${Lt}.clear">${Ng}</button>
    <button class="c-button c-button--primary" ?disabled=${e} name="submitbtn" type="submit">${Pg}</button>
  </div>
</form>
    `:C`
<form class="c-com-dirform" novalidate data-keysubmit>
  <div class="o-grid-row ${Ft({"o-grid-row--s":!d2Env.isMobile,"o-group":!d2Env.isMobile,"o-group--justify":!d2Env.isMobile})}">
    <div class="c-radiogroup" style=${ce({opacity:n?"0.5":"1"})}>
      <label class="c-radiogroup__item">
        <input name="${Nm}" type="radio" value="templates" data-action="change:${Lt}.presets"
          ?disabled=${n} ?checked=${!n}>
        <span class="c-radiogroup__button">${kI}</span>
      </label>
      <label class="c-radiogroup__item">
        <input name="${Nm}" type="radio" value="presets" data-action="change:${Lt}.presets"
          ?disabled=${n} ?checked=${n}>
        <span class="c-radiogroup__button">${$g}</span>
      </label>
    </div>
    <div class="c-com-dirform__submit o-group o-group--l">
      <button class="r-button-unstyled c-link c-link--gray" style=${ce({opacity:e?"0.5":"1"})}
        ?disabled=${e} type="button" data-action="${Lt}.clear" data-slot="${Lt}.clear">${Ng}</button>
      <button class="c-button c-button--primary" ?disabled=${e} name="submitbtn" type="submit">${Pg}</button>
    </div>
  </div>
  <div class="c-com-dirform__templates"
    data-slot="${Lt}.templates-el" style=${ce({display:n?"none":""})}>
    ${VI(t,e)}
  </div>
  <div class="c-com-dirform__presets"
    data-slot="${Lt}.presets-el" style=${ce({display:n?"":"none"})}>
    ${qI(i,e)}
  </div>
  <div class="hr"></div>
  <div class=${Ft({"o-grid-row":d2Env.isMobile})} data-role="chk">
    ${WI(Kn,i,e)}
  </div>
</form>
    `},Ug=()=>{if(ar.size===0){let i=x(Lt,"brands-list");i&&(JSON.parse(i.textContent).forEach(e=>{ar.set(e.name,e.caption)}),Bg=UI.map(e=>({name:e.name,caption:e.caption,brands:e.brands.filter(n=>ar.has(n))})))}},KI=i=>{et(`[name="${JI}"]`,i).forEach(e=>{e.checked=!1})},Fj=(i,t)=>{let n=i[t.name].value.split(",");n.length!==0&&Array.from(i[Kn]).forEach(o=>{o.checked=n.includes(o.value)})},zg=i=>{let t=Array.from(i[Kn]).filter(o=>o.checked).map(o=>o.value),e=YI(t);Array.from(i[GI]).forEach((o,s)=>{o.checked=!!e[s].selected})},Bj=(i,t)=>{let e=Bg.find(o=>o.name===t.value);if(!e)return;let{checked:n}=t;Array.from(i[Kn]).forEach(o=>{e.brands.includes(o.value)&&(o.checked=n)}),zg(i)},lr=i=>{let t=Array.from(i[Kn]).filter(n=>n.checked).length,e=x(Lt,"selected");if(e.textContent=t===0?d2Env.isMobile?$I:PI:it(FI,{Count:t}),d2Env.isMobile){let n=x(Lt,"clear",i);M(n,t!==0)}},Fg=i=>Array.from(i.options).map(t=>t.value),XI=(i,t)=>{let e=x(Lt,"button",i),n=x(Lt,"checkbox",i);M(e,t),n.checked=t},jg=(i,t,e)=>{let n=x(Lt,"fields",t),o=(n.dataset.caption||"")+(d2Env.isMobile?"":` <span class="c-counter" data-slot="${Lt}.selected"></span>`),s=Fg(n),a=ft(Lt,"fields").filter(c=>c.options.length>0).map(c=>({name:c.name,caption:c.dataset.caption||"",brands:Fg(c)})),l=new Ct({anchor:i,className:"c-modal__content--brands",title:o});J($j(s,a,e),l.element),l.setSubmitHandler(c=>{let d=x(Lt,"brands",t),p=Array.from(c[Kn]).filter(m=>m.checked).map(m=>m.value);d.textContent=String(p.length)||"",n.innerHTML=p.map(m=>`<option value="${m}" selected></option>`).join("");let u=Fg(n).length>0;return XI(t,u),Promise.resolve()}),l.show(),lr(l.form)},Uj=i=>{Ug();let t=i.node(),e=lt(t,Lt,"item");if(XI(e,t.checked),t.checked){let n=x(Lt,"button",e);jg(n,e)}},zj=i=>{Ug();let t=i.node(),e=lt(t,Lt,"item");jg(t,e)},jj=i=>{Ug();let t=i.node(),e=lt(t,Lt,"item");jg(t,e,!0)},Wj=i=>{let{form:t}=i.node();zg(t),KI(t),lr(t)},Vj=i=>{let t=i.node();Array.from(t.form[Kn]).forEach(e=>{e.checked=!1}),zg(t.form),KI(t.form),lr(t.form)},qj=i=>{let t=i.node();Fj(t.form,t),lr(t.form)},Gj=i=>{let t=i.node();Bj(t.form,t),lr(t.form)},Jj=i=>{let t=i.node(),e=lt(t,Lt,"item"),n=x(Lt,"templates-el",e),o=x(Lt,"presets-el",e);M(n,t.value==="templates"),M(o,t.value==="presets"),lr(t.form)},Yj=()=>{T.registerHandlers(Lt,{checkdirection:Uj,select:zj,show:jj,check:Wj,clear:Vj,template:qj,preset:Gj,presets:Jj})}});var eO={};ut(eO,{default:()=>Xj});var cr,Zj,Kj,Xj,iO=v(()=>{"use strict";$();X();gt();cr="com",Zj=i=>{if(d2Env.isMobile){let t=i.node(),e=x(cr,"targeting-title"),n=x(cr,"targeting-info");Te({anchor:t,title:e.textContent,html:`<div class="x-box x-box--narrow o-t-s"><div class="x-text o-t-s">${n.innerHTML}</div></div>`})}else x(cr,"targeting").classList.remove("is-closed")},Kj=i=>{if(d2Env.isMobile){let t=i.node(),e=x(cr,"lastpromo-title"),n=x(cr,"lastpromo");Te({anchor:t,title:e.textContent,html:n.innerHTML})}},Xj=()=>{T.registerHandlers(cr,{targeting:Zj,lastpromo:Kj})}});var bn,Qj,tW,nO,eW,iW,nW,oW,sW,oO,sO=v(()=>{"use strict";$();V();X();G();Z();Ch();Vt();Ne();gt();Xe();Pe();bn="booking",Qj=(i,t)=>`
<label class="c-hours__item">
  <input name="hours" value="${i}" type="checkbox"${t?" checked":""}>
  <span class="c-hours__label">${i}:00</span>
</label>
`,tW=(i,t)=>Boolean(t&&t.includes(i)),nO=(i,t)=>{let e=ct('input[name="urgency"]:checked',i);if(e){let n=e.dataset.hours.split(","),o=x(bn,"hours",i),s=n.map(r=>Qj(r,tW(r,t)));o.innerHTML=s.join("")}},eW=i=>{let t=i.node(),n=et('input[name="hours"]:checked',t.form).map(o=>o.value);nO(t.form,n)},iW=i=>{let e=i.node().value==="phone",n=x(bn,"contacts"),o=x(bn,"contacts-notes"),s=Et(n);s.duration=400,s.expand(e),o.classList.toggle("is-phone",e)},nW=(i,t)=>{let e=t.validationErrors;if(e&&e.length>0){let{field:n,messages:o}=e[0],s=n[0].toLowerCase()+n.slice(1),r=i[s]&&i[s].length?i[s][0]:i[s];if(r){try{r.scrollIntoView({block:"nearest"}),r.focus()}catch(a){}Lr(o.join("<br>"),r)}}return Boolean(e)},oW=i=>{Mt(),i.node().href===""&&yt(i)},sW=i=>A(void 0,null,function*(){let t=i.node(),e=yield kt(t.href,bn,{anchorEl:t}),n=Fi(e),o=ct('script[type="application/json"]',n),s=JSON.parse(o.textContent),r=new Ct({anchor:t,title:s.header},!0);r.element.append(n),nO(r.element),r.addEventListener("submit",l=>{l.preventDefault();let c=l.detail;if(!nW(r.form,c)){let d=x(bn,"success"),p=x(bn,"text",d),u=x(bn,"link",d);p.innerHTML=c.text||"",u.innerHTML=c.linkText||"",u.href=c.linkUrl||"",M(r.form,!1),M(d,!0)}}),r.show();let a=x(bn,"validation",r.element);a&&Zc(a)}),oO=()=>{T.registerHandlers(bn,{form:sW,hours:eW,contacts:iW,link:oW})}});var rW,rO,aW,aO,lO=v(()=>{"use strict";V();rW="js-text",rO="is-clamped",aW="is-short",aO=i=>{let t=At(i,rO);if(!t)return;let e=()=>{t.classList.remove(rO),i.remove()},n=U(rW,t);n.offsetWidth<n.scrollWidth?i.addEventListener("click",e):(e(),t.classList.add(aW))}});var _n,Wg,cO,lW,dO,mO=v(()=>{"use strict";$();X();G();Z();_n="comfeedback",cO=()=>A(void 0,null,function*(){let i=x(_n,"filters"),t=i.kind.value,e=t==="Assessed",n=yield kt(i.action,_n,{anchorEl:i,body:new FormData(i)}),o=x(_n,"container");o.innerHTML=n;let s=x(_n,"more");s&&(Wg||(Wg=s.href),s.href=`${Wg}${e?"":`?kind=${t}`}`);let r=document.getElementById("reviews");r&&r.scrollIntoView({behavior:"smooth"})}),lW=i=>{let e=i.node().value==="mentions",n=x(_n,"filters");n.kind.value=e?"Neutral":"Assessed";let o=x(_n,"reviews-desc"),s=x(_n,"mentions-desc");M(o,!e),M(n,!e),M(s,e);let r=x(_n,"more");r&&M(r,!e);let a=x(_n,"more-mentions");a&&M(a,e),cO()},dO=()=>{T.registerHandlers("comfeedback",{section:lW,filter:cO})}});var pO,hO,uO,fO,gO=v(()=>{"use strict";pO="Ответ на отзыв",hO="Удалить",uO="Удалить ответ?",fO="Изменить"});var qg,Gg,dW,mW,pW,hW,uW,fW,gW,$m,Vg,vW,EW,bW,_W,vO,EO=v(()=>{"use strict";$();gO();te();V();G();Vt();Hn();gt();qg="comfeedback",Gg="is-collapsed",dW="is-active",mW="is-short",pW="is-edit",hW="js-container",uW="js-field",fW="js-text",gW=[{action:"edit",text:fO},{action:"delete",text:hO,confirmTitle:uO,confirm:qt}],Vg=(i,t,e,n)=>{let o=At(i,hW),s=U(uW,o);if(o.classList.toggle(dW,t),o.classList.remove(mW),n){let r=U(fW,o);r&&(r.innerHTML=n)}t||(o.classList.toggle(pW,!e),s&&(e?(s.value="",s.form.classList.add(Gg)):(s.focus(),setTimeout(()=>{s.selectionStart=s.selectionEnd=s.value.length},0))))},vW=i=>{let t=i.node();clearTimeout($m),t.form.classList.remove(Gg);let e=t.form.oldtext,n=e&&e.value;n&&(t.value=n,e.value="")},EW=i=>{let t=i.node();clearTimeout($m),$m=setTimeout(()=>{t.value||t.form.classList.add(Gg)},350)},bW=i=>A(void 0,null,function*(){yt(i),clearTimeout($m);let t=i.node(),{text:e}=yield R(t.action,`${qg}.submit`,{method:"POST",anchorEl:t.submitbtn,body:{text:t.text.value}});Vg(t,!0,!1,e||"")}),_W=i=>{let t=i.node(),e=t.dataset.editable==="",n=gW.slice();e||n.splice(0,1),new xe(t,n,pO).addEventListener("select",s=>{let r=s.detail;r==="delete"?kt(t.dataset.url||"",`${qg}.delete`,{delay:!0,method:"DELETE",anchorEl:t}).then(()=>{Vg(t,!1,!0),zt()}):r==="edit"&&Vg(t,!1)})},vO=()=>{T.registerHandlers(qg,{focus:vW,blur:EW,submit:bW,dropdown:_W})}});var Hl,bO=v(()=>{"use strict";V();Y();G();ws();Hl=class extends H{parsedInit(){je().addEventListener("scroll",this)}handleEvent(){let e=ct('link[rel="next"]',this.element);if(!e){je().removeEventListener("scroll",this);return}if(this.isBusy)return;this.isBusy=!0;let n=e.href;e.remove(),kt(n,this.role,{silent:!0,throwError:!0}).then(o=>{this.element.insertAdjacentHTML("beforeend",o)}).catch(()=>{}).finally(()=>{this.isBusy=!1})}}});var _O,yO,TO=v(()=>{"use strict";$();X();Z();_O="cpgallery",yO=()=>{T.registerHandlers(_O,{unfold:i=>{let t=i.node();ft(_O,"photo").forEach(n=>{M(n,!0)}),t.parentElement.remove()}})}});var xO,yW,wO,LO=v(()=>{"use strict";$();X();Z();xO="highlights",yW=i=>{let t=i.node();ft(xO,"hidden").forEach(n=>{M(n,!0)}),t.remove()},wO=()=>{T.registerHandlers(xO,{more:yW})}});var AO,CO,SO=v(()=>{"use strict";X();Re();AO=(i,t)=>{let e=x(t,"params"),{lat:n,lng:o,title:s,address:r}=(e||i).dataset;if(!n||!o)return;let a=[Number(n),Number(o)];DG.then(()=>{let l=DG.map(i,{center:a,zoom:15,scrollWheelZoom:!1,closePopupOnClick:!1}),c=DG.popup({closeButton:!1}).setLatLng(a).setContent(`<div><h3 class="c-header">${Bt(s||"")}</h3>${Bt(r||"")}</div>`);DG.marker(a).addTo(l).bindPopup(c).openPopup()})},CO=()=>{let i=x("com-map","placeholder");i&&vv(i,"com-map")}});var TW,xW,MO,RO=v(()=>{"use strict";$();G();TW="/_api/companies/click",xW=i=>{let t=i.node(),e=t.dataset.key||"";d2Env.isMobile?R(TW,{method:"POST",silent:!0,body:{key:e}}):t.classList.add("is-active")},MO=()=>{T.registerHandlers("phone",{reveal:xW})}});var wW,IO,OO=v(()=>{"use strict";$();wW="is-disabled",IO=(i,t)=>{let e=i.classList.contains(wW),n=i.closest("form"),o=[Number(n.latitude.value)||55.7427928,Number(n.longitude.value)||37.6154009];DG.then(()=>{let s=DG.map(i,{center:o,zoom:15,fullscreenControl:!1,scrollWheelZoom:!1}),r=DG.marker(o,{draggable:!e}).addTo(s);e||r.on("dragend",c=>{let d=c.target._latlng;a([d.lat,d.lng])});let a=(c,d)=>{d!==n.latitude&&(n.latitude.value=c[0].toFixed(6)),d!==n.longitude&&(n.longitude.value=c[1].toFixed(6)),s.panTo(c),d&&r.setLatLng(c)},l=c=>{let d=c.node(),p=Number(n.latitude.value),u=Number(n.longitude.value);!e&&p&&u&&a([p,u],d)};T.registerHandlers(t,{update:l})})}});var DO,HO=v(()=>{"use strict";Pi();DO=i=>{pe(i,{onEnter:()=>{i.style.animationDelay=`${Math.round(Math.random()*200)}ms`,i.classList.add(i.dataset.fx||"fx-cp-fadein-up")},permanent:!0})}});var kO={};ut(kO,{default:()=>LW});var LW,NO=v(()=>{"use strict";sO();lO();mO();EO();bO();TO();LO();SO();RO();OO();HO();Y();LW=()=>{B(".c-fadeinup",DO,!0),B("com-map",AO),B("com-profile-map",IO),MO(),yO(),wO(),B("comfeedback",Hl),oO(),dO(),vO(),B("comfeedback-show",aO),window._mapShow=CO}});var PO,$O=v(()=>{"use strict";PO="Все объявления"});var kl,FO=v(()=>{"use strict";Ro();pd();kl=class extends EventTarget{constructor(e){super();this.input=e;this.ac=new Fe("/ajax/geo.cshtml?_=r&p=1",this.input),this.ac.setRowBuilder(Is),this.update=this.update.bind(this),this.dismiss=this.dismiss.bind(this),this.ac.addEventListener("update",this.update),this.ac.addEventListener("dismiss",this.dismiss)}update(e){let{row:n}=e.detail;this.dispatchEvent(new CustomEvent("select",{detail:{kind:n.kind||"city",value:n.id||"",name:n.caption||"",country:n.country,countryId:n.countryId}}))}dismiss(){clearTimeout(this.dismissTimer),this.dismissTimer=setTimeout(()=>{this.dispatchEvent(new Event("cancel"))},100)}dispose(){this.ac&&this.ac.dispose()}}});var BO={};ut(BO,{default:()=>Um});var CW,SW,MW,Fm,RW,Jg,Bm,Um,UO=v(()=>{"use strict";$();$O();V();Y();X();Ce();G();Z();In();Vi();ws();Mi();af();zi();FO();CW=400,SW=5,MW=10,Fm=i=>{i.delete("page")},RW=()=>{let i=x("nav","guest-extra");i&&i.remove()},Jg=i=>{document.querySelectorAll(".js-market-listmode, .js-market-indexmode").forEach(t=>M(t,t.classList.contains("js-market-indexmode")?i:!i))},Bm=()=>{let i=new URLSearchParams(window.location.search);return!(i.get("section")||i.get("brand")||i.get("model")||i.get("generation")||i.get("car"))&&!i.get("query")&&(!i.get("location")||i.get("location")==="*")},Um=class extends H{parsedInit(){let e=JSON.parse(this.element.textContent);this.page_=0,this.nextPageEnabled_=!1,this.nextPageIsLoading_=!1,this.searchUrl_=e.searchUrl,this.pageSize_=e.pageSize,this.data_=e.results,this.items_=0,this.adsEnabled_=e.dvEnabled,this.resources_=e.resources,this.sections_=new Map,this.data_.section&&this.data_.section.id&&this.sections_.set(this.data_.section.id,this.data_.section.caption||""),this.filterType_=this.data_.filterType||"default",this.offersEl_=U("js-market-offers"),this.sectionsEl_=U("js-market-sections"),this.facetsForm_=U("js-market-facets"),this.filtersContainer_=U("js-market-filters"),this.filterEls_=et("[data-target]",this.filtersContainer_),this.navEls_=et(".js-market-nav"),this.searchEl_=U("js-market-search"),this.locationEl_=U("js-market-location"),this.locationAcEl_=U("js-market-location-ac"),this.isUserInput_=!1,je().addEventListener("scroll",()=>this.more_()),this.locationEl_.addEventListener("change",()=>this.onLocationChange_()),this.searchEl_.addEventListener("input",ze(()=>this.onInput_(),CW)),window.addEventListener("popstate",()=>this.navigate_()),this.restoreLocations_(),this.slots("block",document.body).forEach(n=>M(n,!0)),this.render_(),Jg(Bm()),T.registerHandlers("marketsearch",{nav:this.onNav_,presets:this.onNav_,toindex:this.onToIndex_,more:this.onNextPage_,setlocation:this.onSetLocation_},this)}onNav_(e){RW();let n=e.actionName();this.isUserInput_=!1;let o=this.getQuery_();if(Fm(o),n==="presets"){let l=e.node();if(l.selectedIndex!==0){let c=l.options[l.selectedIndex];o.set("brand",c.dataset.brand||""),o.set("model",c.dataset.model||""),o.set("generation",c.dataset.gen||"")}}let s=o.get("section"),r=this.sections_.get(s),a=s&&r?r:this.resources_.defaultTitle;document.title=a,window.history.pushState(null,a,Bm()?window.location.pathname:`?${o}`),this.navigate_()}onSetLocation_(e){let n=e.node(),{value:o}=n.dataset;if(o==="country"){let s=this.locationEl_.options[this.locationEl_.selectedIndex],{countryid:r,country:a}=s.dataset;for(let l=0,c;c=this.locationEl_.options[l];l++)if(/^[A-Z]+$/.test(c.value)&&!r){this.locationEl_.selectedIndex=l;break}r&&a&&this.addLocation_("country",r,a)}else this.locationEl_.selectedIndex=0;this.onLocationChange_()}onToIndex_(){document.title=this.resources_.defaultTitle,window.history.pushState(null,this.resources_.defaultTitle,window.location.pathname),this.navigate_()}onNextPage_(){this.more_()}setPageTitle_(e){let n=U("js-market-section-title");if(!n)return;let o="";if(e){let r=this.getQuery_();Fm(r),r.delete("query"),r.set("section",e),o=`?${r}`}let s=e&&this.sections_.get(e)||"";n.innerHTML=s?`<a class="c-link c-link--text" href="${o}">${s}</a>`:"",M(n,!!s)}more_(){this.nextPageEnabled_&&!this.nextPageIsLoading_&&(this.nextPageIsLoading_=!0,this.request_(!1,!0))}resetPage_(){this.page_=0,this.setMoreButton_()}setMoreButton_(){let e=Math.ceil(this.data_.hitCount/this.pageSize_),n=this.page_+1<e;this.nextPageEnabled_=n,M(U("js-catalog-more"),n)}onLocationChange_(){this.ls_&&this.ls_.dispose();let{value:e}=this.locationEl_,n=e==="more";if(this.LocationShow_(!n),n)this.locationAcEl_.value="",this.locationAcEl_.focus(),this.ls_=new kl(this.locationAcEl_),this.ls_.addEventListener("select",o=>this.onLocationSelect_(o)),this.ls_.addEventListener("cancel",()=>this.onLocationCancel_());else{this.lastChosenOption_=this.locationEl_.selectedIndex;let o=this.getQuery_();Fm(o),window.history.pushState(null,document.title,`?${o}`),this.navigate_()}this.saveLocations_()}onLocationSelect_(e){let{kind:n,value:o,name:s,country:r,countryId:a}=e.detail;M(this.locationAcEl_,!1),this.addLocation_(n,o,s,r,a),this.onLocationChange_()}addLocation_(e,n,o,s,r){let{options:a}=this.locationEl_,l=Array.from(a).find(c=>c.value===n);if(l)l.selected=!0;else{let c=this.locationEl_.options[this.locationEl_.options.length-1],d=document.createElement("option");this.locationEl_.insertBefore(d,c),d.value=n||"",d.dataset.new="1",e==="city"&&r&&s&&(d.dataset.countryid=r,d.dataset.country=s),d.innerHTML=o||"",d.selected=!0}}onLocationCancel_(){this.lastChosenOption_!==void 0&&(this.locationEl_.selectedIndex=this.lastChosenOption_),this.onLocationChange_()}LocationShow_(e){M(this.locationEl_,e),M(this.locationAcEl_,!e)}onInput_(){let{value:e}=this.searchEl_;if(e.length<2)return;this.isUserInput_=!0;let n=this.getQuery_();n.set("section",""),this.facetsForm_.querySelector("input").checked=!0,n.set("query",e),this.switchFiltersType_("default",!0),Fm(n),document.title=this.resources_.defaultTitle,window.history.replaceState(null,this.resources_.defaultTitle,`?${n}`),this.navigate_()}navigate_(){let e=this.getQuery_(!0),n=Bm();n||this.isUserInput_&&e.get("query")===""?(Jg(n),this.searchEl_.value="",this.data_.facets||(this.data_.facets={}),this.data_.facets.sectionId=[],this.data_.offers=[],this.data_.hitCount=0,this.data_.brand="",this.data_.model="",this.data_.generation="",this.render_()):this.request_(!this.isUserInput_),this.isUserInput_=!1}request_(e,n){let o=new fe(U("js-market-spin")),s=this.getQuery_(!0);n&&(s.delete("page"),s.set("page",String(this.page_+1))),R(this.searchUrl_,this.role,{anchorEl:this.searchEl_,spinner:o,body:s,throwError:!0}).then(r=>{this.data_=r;let a=this.getQuery_().get("query")||"";e&&this.searchEl_.value!==a&&(this.searchEl_.value=a),Jg(Bm()),n?this.page_++:this.resetPage_(),this.render_()}).catch(()=>{}).finally(()=>{this.nextPageIsLoading_=!1})}getQuery_(e){let n=new URLSearchParams(window.location.search);if(!e){mi(this.facetsForm_).forEach((s,r)=>{n.set(r,s)}),n.delete("q");for(let s=0,r;r=this.filterEls_[s];s++)n.delete(r.name);for(let s=0,r;r=this.filterEls_[s];s++)r.value&&r.dataset.target.includes(this.filterType_)&&n.set(r.name,r.value);n.get("brand")===""&&n.set("model",""),n.get("model")===""&&n.set("generation","")}return n}render_(){let e=U("js-market-empty"),n=[],o=[];if(this.data_.offers&&this.data_.offers.length){for(let r=0,a;a=this.data_.offers[r];r++){let l=`/market/offers/${a.id}`,c=Fr({images:[{url:a.picture.url,width:a.picture.width,height:a.picture.height}],color:a.picture.htmlPrimaryColor},2,{size:{width:1,height:1},className:`is-rounded ${d2Env.isMobile?"":"has-darkening-hover"}`});if(n[r]=`<div class="offer-card offer-card--wide ${d2Env.isMobile?"c-block":"c-darkening-hover-container"}"><div class="offer-card__pic">${c}</div><div class="offer-card__body"><a class="u-link-area" href="${l}"></a><div class="offer-card__title"><span class="c-link c-link--text">${a.caption}</span></div><div class="offer-card__location">${a.location}${a.delivery?` <span>${this.resources_.delivery[a.delivery]}</span>`:""}</div><div class="offer-card__price">${a.formattedPrice}</div></div></div>`,this.items_+=1,this.adsEnabled_&&(this.items_-SW)%MW===0){let d=de();o.push(d),n[r]+=`<div id="${d}"></div>`}}M(e,!1)}else{n[0]="";let r=this.getQuery_(),a=r.get("location"),l=U("js-market-empty-country"),c=l&&/^\d+$/.test(a),d=/^[A-Z]+$/.test(a);l&&M(l,!!c&&!d),M(U("js-market-empty-location-all"),d);let p=r.toString().includes("facets");M(U("js-market-empty-filter"),p);let u=!!r.get("section");M(U("js-market-empty-section"),u),M(e,!0)}this.page_>0?this.offersEl_.insertAdjacentHTML("beforeend",n.join("")):this.offersEl_.innerHTML=n.join(""),this.setMoreButton_();let s=this.data_.filterType||"default";this.filterType_!==s&&this.switchFiltersType_(s),this.renderNav_();try{o.forEach(r=>{window.yaContextCb.push(()=>{Ya.adfoxCode.createScroll({ownerId:59610,sequentialLoading:!0,containerId:r,params:{pp:"h",ps:"nkx",p2:"gqqe",puid1:"",puid2:"",puid3:"",puid4:"",puid5:"",puid6:"",puid7:"",puid8:"",puid9:"",puid10:"",puid11:"",puid12:"",puid13:"",puid14:""},lazyLoad:{fetchMargin:100,mobileScaling:2}})})})}catch(r){}}switchFiltersType_(e,n){this.filterType_=e;let o;for(let s=0,r;r=this.filterEls_[s];s++){let a=r.dataset.target.includes(e);M(r,a),a&&(o=!0),(n||!a)&&(r.value="")}M(this.filtersContainer_,!!o)}renderNav_(){let{facets:e}=this.data_,n=this.getQuery_(!0),o="section",s=n.get(o)||"";this.setPageTitle_(s);let r=[],a=e&&e.sectionId||[];a.unshift({matchCount:0,name:PO,value:""});for(let d=0,p;p=a[d];d++){let u=p.value===s;r[d]=`
<label class="c-side-nav__item${u?" is-active":""}">
  <input type="radio" name="${o}" value="${p.value||""}" data-action="marketsearch.nav"${u?" checked":""}>
  <span class="${u?"":"c-link c-link--text"}">${p.name}</span>
  ${p.matchCount?` <span class="c-counter">${p.matchCount}</span>`:""}
</label>
      `,p.value&&this.sections_.set(p.value,p.name)}this.sectionsEl_.innerHTML=r.join("");for(let d=0,p;p=this.navEls_[d];d++){s=n.get(p.name)||"";let u=s===p.value;p.checked=u,p.parentElement.classList.toggle("is-active",u);let m=U("js-side-link",p.parentElement);m&&(m.classList.toggle("c-link",!u),m.classList.toggle("c-link--text",!u))}let l=n.get("location"),{options:c}=this.locationEl_;for(let d=0,p;p=c[d];d++)p.selected=p.value===l}restoreLocations_(){if(!Gs())return;let e=(r,a)=>{for(let l=0,c;c=r.options[l];l++)if(c.value===a)return!0;return!1},n=JSON.parse(window.sessionStorage.getItem("marketLocations")||"[]"),o=window.sessionStorage.getItem("marketSelectedLocation"),s=this.locationEl_.options[this.locationEl_.options.length-1];for(let r=0,a;a=n[r];r++){if(!/^[A-Z]+$/.test(a.value)&&!(a.countryid&&a.country)||e(this.locationEl_,a.value))continue;let l=document.createElement("option");this.locationEl_.insertBefore(l,s),l.value=a.value,l.dataset.new="1",l.dataset.countryid=a.countryid||"",l.dataset.country=a.country||"",l.innerHTML=a.name,l.selected=a.value===o}this.saveLocations_()}saveLocations_(){if(!Gs())return;let e=[],{options:n}=this.locationEl_;for(let o=0,s;s=n[o];o++)s.dataset.new==="1"&&e.push({name:s.text,value:s.value,country:s.dataset.country||"",countryid:s.dataset.countryid||""});sessionStorage.setItem("marketLocations",JSON.stringify(e)),sessionStorage.setItem("marketSelectedLocation",this.locationEl_.value)}}});var zO={};ut(zO,{default:()=>FW});function PW(i){let t=Pt(OW),e=U(DW),n=U(HW,e);n.href=i.href;let o=U(IW,e),s=Je(i,"background-color");e.style.backgroundColor=s||"",t.forEach(r=>{r.classList.toggle(kW,r===i)}),zm=new rr,zm.addEventListener("load",r=>{let a=r.detail;if(!d2Env.isMobile){let c=new Ot(a.naturalWidth,a.naturalHeight);c.scaleToFit(NW).round(),n.style.maxWidth=`${c.width}px`}let l=wo({images:[{url:a.src,width:a.naturalWidth,height:a.naturalHeight}],color:s},d2Env.isMobile?1:void 0,{size:d2Env.isMobile?{width:16,height:9}:void 0,className:"offer-photos__pic"});o.replaceWith(l)}),zm.addImage(i.href),zm.start()}var IW,OW,DW,HW,kW,NW,zm,$W,FW,jO=v(()=>{"use strict";$();V();Mn();kg();Z();Mi();IW="offer-photos__pic",OW="js-offer-thumb",DW="js-offer-preview",HW="js-offer-link",kW="is-active",NW=new Ot(800,800);$W=i=>{PW(i.node())},FW=()=>{T.registerHandlers("offer",{photo:$W})}});var WO,VO,qO,GO,JO=v(()=>{"use strict";WO="Выберите причину",VO="Я продал товар на DRIVE2",qO="Я продал товар где-то ещё",GO="Другая причина"});var XO={};ut(XO,{default:()=>WW});var Xn,UW,YO,ZO,KO,zW,jW,WW,QO=v(()=>{"use strict";$();JO();X();G();ve();Hn();gt();Xn="myoffers",UW="is-off",YO="u-grayscale",ZO="c-link--gray",KO=()=>{let i=x(Xn,"inactive");i&&ft(Xn,"item",i).length===0&&i.remove()},zW=i=>A(void 0,null,function*(){let t=i.node(),e=lt(t,Xn,"item");yield R(`/market/offers/${e.dataset.id}/activate`,Xn,{method:"POST",anchorEl:t}),e.classList.remove(UW);let n=e.querySelector(`.${YO}`);n&&n.classList.remove(YO);let o=e.querySelector(`.${ZO}`);o&&o.classList.remove(ZO),t.parentElement.remove(),x(Xn,"offers").appendChild(e),KO()}),jW=i=>A(void 0,null,function*(){let t=i.node(),e=lt(t,Xn,"item");new xe(t,[{action:"delete_offer_D2",text:VO},{action:"delete_offer_notD2",text:qO},{action:"delete_offer_another",text:GO}],WO).addEventListener("select",o=>A(void 0,null,function*(){let s=`/market/offers/${(e||t).dataset.id}`;yield kt(s,Xn,{delay:!0,method:"DELETE",anchorEl:t}),zt(),Tt(o.detail),e?(e.remove(),KO()):window.location.href="/market/offers/my"}))}),WW=()=>{T.registerHandlers(Xn,{restore:zW,remove:jW})}});var tD={};ut(tD,{default:()=>qW});var VW,qW,eD=v(()=>{"use strict";$();V();Z();VW=i=>{let t=i.node(),n=t.options[t.selectedIndex].dataset.type||"default";et("[data-target]",t.form).forEach(s=>{let r=s.dataset.target.includes(n);M(s,r)})},qW=()=>{T.registerHandlers("marketform",{updatefields:VW})}});var iD={};ut(iD,{default:()=>JW});var jm,GW,JW,nD=v(()=>{"use strict";$();X();G();jm="parts",GW=i=>A(void 0,null,function*(){let t=i.node(),{url:e}=t.dataset,n=x(jm,"replacements");if(!e||!n)return;let o=yield R(e,jm,{anchorEl:t});x(jm,"container").classList.remove("is-shaded");let r=o.map(a=>`
<tr>
  <td>${a.manufacturer}</td>
  <td><a href="${a.link}" class="c-link c-link--text" data-ym-target="parts_cross_click">${a.code}</a></td>
  <td>${a.mentionCount}</td>
</tr>
`).join("");t.remove(),n.innerHTML=r}),JW=()=>{T.registerHandlers(jm,{more:GW})}});var sD={};ut(sD,{default:()=>ZW});var oD,YW,ZW,rD=v(()=>{"use strict";$();X();Z();oD="parts-photos",YW=i=>{let t=i.node(),e=ft(oD,"item");e.length&&(e.forEach(n=>M(n,!0)),t.remove())},ZW=()=>{T.registerHandlers(oD,{more:YW})}});var aD={};ut(aD,{default:()=>QW});var KW,XW,QW,lD=v(()=>{"use strict";$();KW="parts-for-sale",XW=i=>{let t=i.node(),e=t.previousElementSibling;e&&(e.classList.remove("is-shaded"),t.remove())},QW=()=>{T.registerHandlers(KW,{more:XW})}});var cD={};ut(cD,{default:()=>eV});var Yg,tV,eV,dD=v(()=>{"use strict";$();te();X();G();Od();gt();Yg="premiumform",tV=i=>A(void 0,null,function*(){let t=i.node();if(yield dt(Bc,void 0,t).then(s=>!s))return;let e=lt(t,Yg,"buttons"),n=t.dataset.userid;yield R("/ajax/premium/",Yg,{method:"POST",anchorEl:t,body:N({_:"p",k:e.dataset.key,m:t.dataset.value},n&&{u:n})});let o=Number(t.dataset.cost)||0;Ws([{name:"Премиум-аккаунт",category:`Премиум-аккаунт/${t.dataset.value}`,price:o}]),setTimeout(()=>{window.location.reload()},100)}),eV=()=>{T.registerHandlers(Yg,{buy:tV})}});var zo,iV,mD,nV,oV,pD,hD=v(()=>{"use strict";$();V();Y();X();Z();zo="signup",iV=()=>{if(window.history.length){window.history.back();return}let i=x(zo,"back-button");window.location.href=i.dataset.backurl},mD=()=>{let i=x(zo,"email");M(i,!0),M(x(zo,"header-email"),!0),M(x(zo,"header-default"),!1),ft(zo,"prev").forEach(e=>{M(e,!1)})},nV=()=>{mD(),window.history.pushState(null,document.title,"#email")},oV=i=>{let t=i.node(),e=t.classList.contains("c-button--darkgray");t.classList.toggle("c-button--darkgray",!e),t.innerHTML=t.dataset.values.split(":")[e?0:1];let n=U("js-community-select"),o=Pt("js-comm-card-button");for(let s=0,r;r=o[s];s++)n.options[s].selected=r.classList.contains("c-button--darkgray")},pD=()=>{B("signup",()=>{window.location.hash==="#email"&&mD()}),T.registerHandlers(zo,{comm:oV,email:nV,back:iV});let i=x(zo,"js-warning");i&&i.remove()}});var sV,uD,fD=v(()=>{"use strict";$();V();Y();X();Z();gt();sV="signup",uD=()=>{let i,t=n=>{let o=n.dataset.tooltip||"";i=$t(o,n,{classNames:["c-bubble--side"],placement:"right"})},e=n=>{let o=n.node();t(o)};B("signup-gender",n=>{n.addEventListener("mouseenter",()=>{t(n)}),n.addEventListener("mouseleave",()=>{i&&i.hide()})}),B("signup-email-form",(n,o)=>{let s=x(o,"button"),r=()=>{M(n,!0);try{ct("[autofocus]",n).focus()}catch(a){}s.remove()};(n.dataset.valid!==""||window.location.hash==="#email")&&r(),s.addEventListener("click",()=>{r()})}),T.registerHandlers(sV,{focus:e})}});var gD={};ut(gD,{default:()=>rV});var rV,vD=v(()=>{"use strict";hD();fD();rV=()=>{pD(),uD()}});var ED={};ut(ED,{default:()=>cV});var aV,lV,cV,bD=v(()=>{"use strict";$();V();G();aV="/ajax/moderation/moderation.cshtml",lV=i=>A(void 0,null,function*(){let e=i.node().form,o=et('input[name^="c_"]:checked',e).reduce((r,a)=>(r[a.name]=a.value,r),{}),s=yield R(aV,{method:"POST",silent:!0,body:N({_:"getcomment",t:e.type.value,r:e.comment.value},o)});ct("#modcomment").innerHTML=s.data||""}),cV=()=>{T.registerHandlers("moderation",{rcheck:lV})}});var _D,yD,TD,xD,Zg,wD,Kg=v(()=>{"use strict";_D="Ошибка чтения изображения",yD="Заменить",TD="Удалить",xD="Удалить фотографию?",Zg="Обрезать или повернуть",wD="Повернуть"});var Xg,AD=v(()=>{"use strict";Xg=(i=!0,t)=>new Promise(e=>{let n=document.createElement("input");n.setAttribute("type","file"),i&&n.setAttribute("multiple",""),t&&n.setAttribute("accept",t),n.addEventListener("change",()=>e(Array.from(n.files||[])),{once:!0}),n.dispatchEvent(new MouseEvent("click"))})});var Qg,dr,CD=v(()=>{"use strict";zp();Sc();Vp();Qg=class extends EventTarget{constructor(e){super();this.file=e}start(e){return new Promise(n=>{let o=N({_:"upload",type:e,file:this.file},d2Env.formContext),s=new FormData;Object.entries(o).forEach(([r,a])=>s.append(r,a)),this.request=new XMLHttpRequest,this.request.open("POST",d2Env.uploadUrl,!0),Object.entries(Qg.headers).forEach(([r,a])=>this.request.setRequestHeader(r,a)),this.request.onload=()=>{if(this.request.status!==200){n([Ue.formatError(rs,this.request),void 0]);return}try{let r=JSON.parse(this.request.responseText);n([void 0,r])}catch(r){n([Ue.formatError(Cc,this.request),void 0])}},this.request.onerror=()=>{n([Ue.formatError(rs),void 0])},this.request.upload.onprogress=r=>{this.dispatchEvent(new ProgressEvent(r.type,r))},this.request.send(s)})}},dr=Qg;dr.headers={"X-Origin-Request-ID":d2Env.requestId,"X-Client-Request-ID":as()}});var SD,MD=v(()=>{"use strict";SD=i=>{let t=[],e=0;function n(){e<i&&t.length&&(e++,t.shift()())}return o=>new Promise((s,r)=>{t.push(()=>{o().then(a=>{s(a),e--,n()},a=>{r(a),e--,n()})}),n()})}});var tv,dV,RD,ID,OD,ev,DD,HD,kD=v(()=>{"use strict";Kg();Yl();tv=i=>{let t=document.createElement("canvas");return t.width=i.width,t.height=i.height,t},dV=(i,t)=>{if(t<2)return;let e=i.getContext("2d"),{width:n,height:o}=i;switch(t>4&&(i.width=o,i.height=n),t){case 2:e.translate(n,0),e.scale(-1,1);break;case 3:e.translate(n,o),e.rotate(Math.PI);break;case 4:e.translate(0,o),e.scale(1,-1);break;case 5:e.rotate(.5*Math.PI),e.scale(1,-1);break;case 6:e.rotate(.5*Math.PI),e.translate(0,-o);break;case 7:e.rotate(.5*Math.PI),e.translate(n,-o),e.scale(-1,1);break;case 8:e.rotate(-.5*Math.PI),e.translate(-n,0);break;default:break}},RD=qo(()=>new Promise(i=>{let t="data:image/jpeg;base64,/9j/4QAiRXhpZgAATU0AKgAAAAgAAQESAAMAAAABAAYAAAAAAAD/2wCEAAEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAf/AABEIAAIAAwMBEQACEQEDEQH/xABRAAEAAAAAAAAAAAAAAAAAAAAKEAEBAQADAQEAAAAAAAAAAAAGBQQDCAkCBwEBAAAAAAAAAAAAAAAAAAAAABEBAAAAAAAAAAAAAAAAAAAAAP/aAAwDAQACEQMRAD8AG8T9NfSMEVMhQvoP3fFiRZ+MTHDifa/95OFSZU5OzRzxkyejv8ciEfhSceSXGjS8eSdLnZc2HDm4M3BxcXwH/9k=",e=document.createElement("img");e.onload=()=>i(e.width===2&&e.height===3),e.onerror=()=>i(!1),e.src=t})),ID=i=>new Promise(t=>{i.type!=="image/jpeg"&&t(1);let e=s=>{let r=new DataView(s);r.getUint16(0)!==65496&&t(1);let a=r.byteLength,l=2;for(;l<a;){let c=r.getUint16(l);if(l+=2,c===65505){if(r.getUint32(l+2)!==1165519206){t(1);return}l+=2;let d=r.getUint16(l+6)===18761;l+=6,l+=r.getUint32(l+4,d);let p=r.getUint16(l,d);l+=2;for(let u=0;u<p;u++)if(r.getUint16(l+u*12,d)===274){t(r.getUint16(l+u*12+8,d));return}}else{if((c&65280)!==65280)break;l+=r.getUint16(l)}}t(1)},n=new FileReader,o=i.slice(0,256*1024);n.onloadend=s=>e(s.target.result),n.onerror=()=>t(1),n.onabort=()=>t(1),n.readAsArrayBuffer(o)}),OD=i=>new Promise(t=>{let e=document.createElement("img");e.onload=()=>{URL.revokeObjectURL(e.src),t([void 0,e])},e.onerror=()=>t([_D,void 0]),e.src=URL.createObjectURL(i)}),ev=(i,t,e)=>new Promise(n=>{if(i.toBlob){i.toBlob(n,t,e);return}let s=i.toDataURL(t,e).split(","),r=s[0].includes("base64")?atob(s[1]):decodeURIComponent(s[1]),a=new ArrayBuffer(r.length),l=new Uint8Array(a);for(let c=0;c<r.length;c++)l[c]=r.charCodeAt(c);n(new Blob([l],{type:t||"image/png"}))}),DD=(i,t,e,n,o,s,r)=>A(void 0,null,function*(){let a=e.aspectRatio()>n.aspectRatio()?e.width/n.width:e.height/n.height,l=Math.max(t.size>o?1:0,Math.ceil(Math.log(a)/Math.log(2))-1),c=l>0,d=e.clone();c&&d.scale(.5);let p=tv(d),u=p.getContext("2d");r||dV(p,s),u.imageSmoothingQuality="high",u.drawImage(i,0,0,d.width,d.height);for(let g=0;g<l;g++){let f=d.clone();d.scale(.5),u.drawImage(p,0,0,f.width,f.height,0,0,d.width,d.height)}let m=tv(d),h=m.getContext("2d");if(h.drawImage(p,0,0,d.width,d.height,0,0,d.width,d.height),c){let g;for(;(g=yield ev(m,t.type))&&g.size>o;){let f=d.clone();d.scale(.5),u.drawImage(m,0,0,f.width,f.height,0,0,d.width,d.height),m.width=d.width,m.height=d.height,h.drawImage(p,0,0,d.width,d.height,0,0,d.width,d.height)}}return{preview:m,wasResized:c}}),HD=(i,t,e=0)=>{let n=e%180!==0,o=document.createElement("canvas");o.width=n?i.height:i.width,o.height=n?i.width:i.height;let s=o.getContext("2d");s.translate(o.width/2,o.height/2),s.rotate(e/180*Math.PI),s.drawImage(i,-i.width/2,-i.height/2);let r=tv(t.getSize());return r.getContext("2d").drawImage(o,t.left,t.top,t.width,t.height,0,0,t.width,t.height),r}});var mV,pV,hV,uV,ND,fV,gV,Nl,PD=v(()=>{"use strict";vt();us();Xt();cm();te();Kg();Uc();V();AD();Mn();CD();MD();Vi();Ne();Hn();gt();kD();mV=3840,pV=3840,hV=23*1024*1024,uV=2,ND="image/jpeg,image/png",fV=i=>C`
${i.error?C`<div class="part-error">${i.error}</div>`:C`<img src=${i.pic}>`}
<div class="part-dots" style="opacity:${i.loading?0:1}" @click=${i.menu}></div>
${!i.error&&i.sort&&i.num&&!i.loading?C`<div class="part-index ctx-dark">${i.num}</div>`:F}
${!i.error&&i.loading?C`<progress-ring .progress=${i.progress||0}></progress-ring>`:F}
`,gV=i=>C`
<form action=${d2Env.uploadUrl} class="c-dialog-form">
  <x-crop class="o-grid-row" src="${i.src}" style="width:${i.size.width}px;height:${i.size.height}px;"
    aspect-ratio=${Ei(i.ar)}
    min-width=${i.minSize?i.minSize.width:""} min-height=${i.minSize?i.minSize.height:""}
    rotate=${Ei(i.rotate)}></x-crop>
  <div class="o-group o-group--m o-group--end o-group--wide c-dialog-buttons">
    <button class="c-button c-button--m-no-padding" type="button" @click=${i.rotateFn}>
      ${wD}
    </button>
    <button class="c-button c-button--m-no-padding" type="button" data-action="dialog.close">
      ${vs}
    </button>
    <button class="c-button" type="submit">${ke}</button>
  </div>
</form>
`,Nl=class extends HTMLElement{connectedCallback(){if(this.form)return;let e=(this.getAttribute("aspect-ratio")||"1/1").split("/").map(Number);this.aspectRatio=new Ot(...e),this.minSize=new Ot(Number(this.getAttribute("min-width")||100),Number(this.getAttribute("min-height")||100)),this.sort=this.hasAttribute("sort"),this.style.setProperty("--ar",String(this.aspectRatio.aspectRatio())),this.fixedAspectRatio=this.hasAttribute("fixed-aspect-ratio"),this.type=this.getAttribute("type"),this.form=this.closest("form"),this.maxItems=Number(this.getAttribute("max-items"))||1,this.items=[],this.uploadPool=SD(uV),this.button=P("button",{type:"button"},P("x-icon",{name:"upload"})),this.appendChild(this.button),this.inputs=P("div"),this.after(this.inputs),this.button.addEventListener("click",()=>this.addFiles()),Array.from(this.closest("form").elements).filter(n=>n.name.startsWith(this.type)).forEach(n=>{let o={id:n.value,previewSrc:n.dataset.preview};n.remove(),this.addItem(o)}),this.sort&&(this.sortable=sr.create(this,{disabled:this.items.length<=1,onSort:this.sortItems.bind(this),animation:150,filter:".is-error,button",preventOnFilter:!0,forceFallback:!0,onMove(n){return n.related.nodeName!=="BUTTON"}}))}sortItems(){let e=Array.from(this.querySelectorAll(".part-item")).map(n=>n.id);this.items.sort((n,o)=>e.indexOf(n.uuid)-e.indexOf(o.uuid)),this.render()}addFiles(){return A(this,null,function*(){let e=yield Xg(this.maxItems!==1,ND);this.maxItems&&e.splice(this.maxItems-this.items.length),e.forEach(n=>this.addItem({file:n}))})}replaceFile(e){return A(this,null,function*(){let n=yield Xg(!1,ND);n.length!==0&&this.addItem({file:n[0]},e)})}addItem(e,n){let o=n?this.items.findIndex(a=>a.uuid===n.uuid):this.items.length,s=wt(N({},e),{element:P("div","part-item"),uuid:de(),isLoading:!e.id});this.items.splice(o,1,s),this.update(),this.render(s);let r=this.items[o-1];r?r.element.after(s.element):this.prepend(s.element),s.file&&this.uploadPool(()=>this.upload(s.file,s)).then(([a,l])=>{s.isLoading=!1,l?s.id=l.id:s.error=a,this.render(s)})}upload(e,n){return A(this,null,function*(){let o=yield RD(),s=yield ID(e),r=yield OD(e);if(r[0])return r;let a=r[1],l=new Ot(a.naturalWidth,a.naturalHeight),c=new Ot(mV,pV),{preview:d,wasResized:p}=yield DD(a,e,l,c,hV,s,o);n.preview=d,n.previewSrc=d.toDataURL("image/png");let u=p?new File([yield ev(d,e.type)],e.name):e,m=new dr(u);return m.addEventListener("progress",h=>{n.progress=h.lengthComputable&&h.loaded!==h.total?100*h.loaded/h.total:0,this.render(n)}),this.render(n),m.start(this.type)})}update(){!this.maxItems||this.items.length!==this.maxItems?this.appendChild(this.button):this.button.remove(),this.sortable&&this.sortable.option("disabled",this.items.length<=1)}render(e){let n=this.items.filter(s=>s.id),o=1;n.forEach(s=>{s.num=o++}),e?this.renderItem(e):this.items.forEach(s=>this.renderItem(s)),J(rt(n,s=>s.uuid,s=>C`<input type="hidden" name=${`${this.type}-${s.num}`} .value=${s.id}>`),this.inputs)}renderItem(e){J(fV({id:e.uuid,pic:e.previewCropSrc||e.previewSrc||xo,num:e.num,progress:e.progress,loading:e.isLoading,error:e.error,sort:this.sort,menu:n=>this.menu(n.target,e)}),e.element),e.element.id=e.uuid,e.element.classList.toggle("ctx-dark",Boolean(e.error)),e.element.classList.toggle("is-error",Boolean(e.error)),e.element.classList.toggle("is-cover",this.fixedAspectRatio)}menu(e,n){let o=[{action:"replace",text:yD},{action:"delete",text:TD,confirmTitle:xD,confirm:qt,delete:!0}];d2Env.isDesktop&&n.preview&&o.unshift({action:"crop",text:Zg}),new xe(e,o).addEventListener("select",r=>{if(zt(),r.detail==="crop"){let a=new Ct({anchor:e,title:Zg}),l;J(gV({src:n.previewSrc,ar:this.fixedAspectRatio?this.getAttribute("aspect-ratio"):void 0,size:new Ot(n.preview.width,n.preview.height).scaleToFit(new Ot(600,450)),crop:n.crop,rotate:n.rotate,minSize:this.minSize,rotateFn:()=>{l.rotate+=90}}),a.element),l=a.element.querySelector("x-crop"),n.crop&&(l.naturalCrop=n.crop),a.setFormDataTransformer(()=>{let c=l.naturalCrop;return{_:"crop",id:n.id,type:this.type,rotate:l.rotate,crop:[c.left,c.top,c.width,c.height].join(",")}}),a.addEventListener("submit",()=>{n.crop=l.naturalCrop,n.rotate=l.rotate,n.previewCropSrc=HD(n.preview,n.crop,n.rotate).toDataURL("image/png"),this.render(n)}),a.show()}else if(r.detail==="replace")this.replaceFile(n);else if(r.detail==="delete"){let a=this.items.findIndex(l=>l.uuid===n.uuid);this.items[a].element.remove(),this.items.splice(a,1),this.update(),this.render()}})}}});var $D,vV,Pl,FD=v(()=>{"use strict";$D=2*Math.PI*45,vV=`
<svg height="${50*2}" width="${50*2}" viewBox="0 0 ${50*2} ${50*2}">
   <circle r="45" cx="50" cy="50"/>
</svg>
`,Pl=class extends HTMLElement{connectedCallback(){this.children.length===0&&(this.innerHTML=vV,this.update())}static get observedAttributes(){return["progress"]}get progress(){return Number(this.getAttribute("progress")||0)}set progress(t){t?this.setAttribute("progress",String(t)):this.removeAttribute("progress")}attributeChangedCallback(t){t==="progress"&&this.update()}update(){let t=$D-Number(this.progress||0)/100*$D,e=this.querySelector("circle");e&&(e.style.strokeDashoffset=String(t))}}});var Wm,BD,UD=v(()=>{"use strict";G();Wm=i=>{console.warn(new Date,i)},BD=()=>{setTimeout(()=>{let i=R("/ajax/brand.models.cshtml","testId",{body:new URLSearchParams({brand:"audi"})});Promise.resolve().then(()=>{R("/ajax/brand.models.cshtml","testId",{body:new URLSearchParams({brand:"bmw"})}).then(Wm)});let t=ab("/ajax/brand.models.cshtml",{body:{brand:"zaz"}});i.then(Wm),t.then(n=>JSON.parse(n.responseText)).then(Wm);let e=new FormData;e.append("_","more"),e.append("type","topRU"),e.append("key","qW_AwJJS2gjYAHsiSXRlbTEiOlsyMDksNTYyMTE3ODk5MDcwNzM0MzM5LDU1NDI4MzYwMzg0NDkyMzM5NSw1NTAzODYxMTAwMDIzNjQ0MTksNTQ5OTkwMjg1ODE2MzY1MDc2LDU0OTIwOTkwNzQzODU1MTA0MywxODUsNTQyMzIyODQxNDgwMDY5MTIxLDUsMTcyOTM4MjI1NjkxMDI3MDUxNiw1MTQwNjMxOTM2MjI5NzAzNjksNTEyODA1MDc3NDQyODg3NjgxXSwiSXRlbTIiOjIxOTEsIkl0ZW0zIjo0fc4rpHV0MFTjLOJvZDp_gU9nrto1"),R("/ajax/people.cshtml",{method:"POST",body:e}).then(Wm)},3e3)}});var ci,zD,jD=v(()=>{"use strict";ci=(i,t)=>{t?console.warn(`${i} is supported`):console.error(`${i} is NOT supported`)},zD=()=>{console.warn("=========================================");let i=0,t=()=>{i++},e=!0;try{window.addEventListener("_",t,{once:!0}),window.dispatchEvent(new Event("_")),window.dispatchEvent(new Event("_")),window.removeEventListener("_",t)}catch(r){e=!1}i!==1&&(e=!1),ci("eventListener Options",e),ci("Object.values",!!Object.values),ci("Object.entries",!!Object.entries),ci("String.prototype.padStart",!!String.prototype.padStart),ci("String.prototype.padEnd",!!String.prototype.padEnd);let n=!0;try{((r,a)=>{if(new r("q=%2B").get("q")!==a||new r({q:a}).get("q")!==a||new r([["q",a]]).get("q")!==a||new r(`q=
`).toString()!=="q=%0A"||new r({q:" &"}).toString()!=="q=+%26"||new r({q:"%zx"}).toString()!=="q=%25zx")throw r;window.URLSearchParams=r})(URLSearchParams,"+")}catch(r){n=!1}ci("URLSearchParams",n),console.warn("========================================="),ci("Array.prototype.values",!!Array.prototype.values),ci("Object.fromEntries",!!Object.fromEntries),ci("Promise.prototype.finally",!!Promise.prototype.finally);let o=!0;try{new EventTarget().constructor}catch(r){o=!1}ci("EventTarget constructor",o);let s=!0;try{new File([],"")}catch(r){s=!1}ci("File constructor",s),ci("FormData",Boolean(typeof FormData!="undefined"&&FormData.prototype.keys)),ci("customElements",!!window.customElements),console.warn("=========================================")}});var WD={};ut(WD,{default:()=>EV});var EV,VD=v(()=>{"use strict";_d();PD();FD();$();UD();jD();EV=()=>{zD(),BD(),customElements.define("progress-ring",Pl),customElements.define("x-upload",Nl),T.registerHandlers("toast-test",{show:()=>{ks("<strong>Запомнили!</strong> Так вашу страницу увидят читатели")}})}});function iH({modulePath:i=".",importFunctionName:t="__import__"}={}){try{self[t]=new Function("u","return import(u)")}catch(e){let n=new URL(i,location),o=s=>{URL.revokeObjectURL(s.src),s.remove()};self[t]=s=>new Promise((r,a)=>{let l=new URL(s,n);if(self[t].moduleMap[l])return r(self[t].moduleMap[l]);let c=new Blob([`import * as m from '${l}';`,`${t}.moduleMap['${l}']=m;`],{type:"text/javascript"}),d=Object.assign(document.createElement("script"),{type:"module",src:URL.createObjectURL(c),onerror(){a(new Error(`Failed to import: ${s}`)),o(d)},onload(){r(self[t].moduleMap[l]),o(d)}});document.head.appendChild(d)}),self[t].moduleMap={}}}var _V=Object.freeze({initialize:iH});Y();Pi();Z();var ur=class extends H{postInit(){let t=this.slot("dv");t&&pe(this.element,{rootMargin:-window.innerHeight,onEnter:()=>{M(t,!0)},onExit:()=>{M(t,!1)},permanent:!0})}};fr();Y();Pi();var pH="adfox_1487022369548130",hH="adfox_151031424031449778",uH=2e4,Mv=i=>{try{Ya.adfoxCode.reload(i)}catch(t){}},fH=i=>{let t,e,n=()=>{e=!1,clearTimeout(t)},o=()=>{e||(e=!0,t=setTimeout(()=>{e=!1;try{let s=document.getElementById(i);s.matches(":hover")?s.addEventListener("mouseleave",()=>Mv(i),{once:!0}):(Mv(i),o())}catch(s){n()}},uH))};$i.addEventListener("active",()=>o()),$i.addEventListener("idle",()=>n()),$i.isIdle||o()},Rv=()=>{[pH,hH].forEach(i=>{B(`#${i}`,t=>{pe(t,{onEnter:()=>{fH(i)}})},!0)})};$();Or();X();G();Eo();Vt();gt();Xe();var Dr="blacklist",lb="/ajax/blacklist.cshtml",fk=i=>A(void 0,null,function*(){yt(i);let t=i.node(),e=t.user,n=x(Dr,"list"),o=e.value;if(!o)return;let[s,r]=yield gi(()=>R(lb,Dr,{method:"POST",anchorEl:e,silent:d2Env.isMobile,body:{_:"adduser",nick:o},throwError:!0}));if(r){let{html:a}=r;if(!a)return;e.value="",t.submitbtn.disabled=!0,n.insertAdjacentHTML("afterbegin",a)}else s&&(d2Env.isMobile?Lr(s.messages[0],e):$t(s.messages[0],e))}),gk=i=>A(void 0,null,function*(){let t=i.node(),e=lt(t,Dr,"item");(yield dt(XE,QE,t,tb))&&(yield R(lb,`${Dr}.remove`,{method:"POST",anchorEl:t,body:{_:"remove",id:t.dataset.id}}),e.remove())}),vk=i=>{let t=i.node(),e=t.form.submitbtn;e.disabled=!t.value.trim()},cb=()=>{T.registerHandlers(Dr,{adduser:fk,remove:gk,input:vk})};$();Or();G();var db="blacklist-user",Ek="/ajax/blacklist.cshtml",bk=i=>A(void 0,null,function*(){let t=i.node(),e=t.dataset.blacklisted==="";yield R(Ek,db,{method:"POST",anchorEl:t,body:{_:e?"remove":"add",id:t.dataset.id}}),e?t.dataset.blacklisted&&delete t.dataset.blacklisted:t.dataset.blacklisted="",t.textContent=e?KE:ss}),mb=()=>{T.registerHandlers(db,{toggle:bk})};$();var pb="Добавить закладку",Mc="Удалить закладку",hb="Сохранить закладку",ub="Редактировать закладку",fb="Заметка о закладке",gb="Видна только вам",vb="Добавить папку",Eb="Выберите папку",bb="Новая папка",_b="Название папки",Rc="Переименовать",yb="Редактировать папку",Tb="Удалить папку",xb="Удалить папку?",wb="Да, удалить",Lb="Нет, оставить",Ab="Выберите папку для закладки",Cb="Укажите название папки";X();G();Hr();Z();Eo();In();Vt();Ic();Hn();gt();kn();vt();us();Xt();te();G();Mi();Ne();gt();Xe();var rh="bookmarks",Ur="/_api/bookmarks",Nk=(i,t,e,n,o)=>C`
<form action=${Ur} class="x-form o-t" novalidate data-keysubmit data-role="form">
  <input type="hidden" name="id" value=${i}>
  <input type="hidden" name="bookmarkType" value=${e}>
  ${o?C`<input type="hidden" name="containerId" value=${o}>`:F}
  <div class="x-box c-entry">
    <div class="c-entry__body">
      ${Se({images:[{url:t.photo,width:1,height:1}]},2,{size:{width:1,height:1},className:"is-rounded u-vignette c-entry__pic"})}
      <div>
        ${t.subTitle?C`<div class="u-block-above u-text-overflow x-secondary o-b-xs">
              ${t.subLink?C`<a class="c-link c-link--color00 c-username" href=${t.subLink}>${t.subTitle}</a>`:C`<span class="c-link c-link--color00 c-username">${t.subTitle}</span>`}
            </div>`:F}
        <h3>${t.title||""}</h3>
      </div>
    </div>
  </div>
  <div class="x-box x-box--narrow x-form--compact">
    <div class="x-form__item is-focusable">
      <div class="x-form__body">
        <textarea class="x-textarea x-textarea--narrow" name="comment" placeholder=${fb}
          maxlength="32" data-role="taflexible charcounter">${t.comment}</textarea>
      </div>
      <div class="x-form__notes">${gb}</div>
    </div>
    <h3 class="x-group-header o-t-xl">${Eb}</h3>
    <div class="x-form__item is-focusable">
      <label class="x-form__body x-form__focusable-check">
        <div class="x-form__pic x-form__pic--plus"></div>
        <input class="x-input" type="text" name="folderTitle"
          placeholder=${bb} data-placeholder=${_b}
          data-radio="folderId" data-action="focus:rich-radiogroup.focus;blur:rich-radiogroup.blur">
      </label>
    </div>
    ${rt(t.folders,s=>s.id,(s,r)=>C`
      <div class="x-form__item">
        <label class="x-form__body">
          ${Se({images:[{url:s.photo,width:1,height:1}]},2,{size:{width:1,height:1},className:"is-rounded u-vignette x-form__pic"})}
          <div class="x-choice x-choice--radio">
            <input type="radio" name="folderId" value=${s.id}
              ?checked=${!t.folderId&&r===0||t.folderId===s.id}>
            <span class="x-choice__label">${s.title} <span class="c-counter">${s.count}</span></span>
          </div>
        </label>
      </div>
    `)}
  </div>
  <div class="x-form__submit u-extend u-flow" data-role=${Ei(t.folderId?void 0:"sticky-button")}>
    ${t.folderId?C`<div class="u-100 o-flow">
          <button class="c-button c-button--primary c-button--l c-button--block"
            type="submit" name="submitbtn">${ke}</button>
          <button class="c-button c-button--l c-button--block" type="button"
            @click=${n}>${qt}</button>
        </div>`:C`<button class="c-button c-button--primary c-button--xl u-100"
          type="submit" name="submitbtn">${ke}</button>`}
  </div>
</form>
`,Pk=(i,t)=>C`
<form action="${Ur}/folders${i?`/${i}/update`:"/post"}"
  class="x-form x-box x-box--ghost" novalidate data-role="form">
  <div class="x-form__item is-focusable">
    <div class="x-form__body">
      <input class="x-input" type="text" name="title" value=${t||""} autofocus>
    </div>
  </div>
  <button class="c-button c-button--primary c-button--l u-100 o-t-l" type="submit">
    ${ke}
  </button>
  <button class="c-button c-button--l u-100 o-t-s" type="button" data-action="dialog.close">
    ${vs}
  </button>
</form>
`,r_=(i,t,e,n)=>R(Ur,rh,{anchorEl:i,body:N({id:t,bookmarkType:e},n&&{containerId:n})}),ah=(i,t,e,n)=>R(`${Ur}/delete`,rh,{method:"POST",anchorEl:i,body:N({id:t,bookmarkType:e},n&&{containerId:n})}),lh=(i,t,e)=>new Promise(n=>{let o=new Ct({anchor:i,className:"c-modal-popscreen",title:t?Rc:vb},!0,!0);o.addEventListener("submit",()=>n()),o.show(Pk(t,e)).then(()=>{Bi(o.form,["title",Cb,"required"])})}),a_=(i,t)=>R(`${Ur}/folders/${t}/delete`,rh,{method:"POST",anchorEl:i}),l_=(i,t,e,n,o)=>new Promise(s=>{let r=new Ct({anchor:e,className:"c-modal__content--bookmarks",title:n.folderId?ub:hb}),a=l=>A(void 0,null,function*(){let c=l.target;if(yield dt(`${Mc}?`,void 0,c,qt)){let d=yield ah(c,i,t,o);r.close(),s({deleted:!0,result:d})}});r.addEventListener("submit",l=>{let{detail:c}=l;s({deleted:!0,result:c})}),r.show(Nk(i,n,t,a,o)).then(()=>{Bi(r.form,["folderTitle",Ab,l=>l.folderId&&l.folderId.value||l.folderTitle.value])})});var Ri="bookmarks",$k=0,c_,ch,m_=(i,t)=>A(void 0,null,function*(){let e=i.node(),{id:n,type:o,container:s}=e.dataset;if(t)return{deleted:!0,result:yield ah(e,n,o,s)};let r=yield r_(e,n,o,s);return l_(n,o,e,r,s)}),Fk=i=>A(void 0,null,function*(){yt(i);let{deleted:t}=yield m_(i);if(t){let e=i.node(),n=lt(e,Ri,"entry");n&&n.remove()}Mt(),window.location.reload()}),Bk=i=>A(void 0,null,function*(){let t=i.node();if(ti(t))return;let e=t.classList.contains("is-active"),{result:n}=yield m_(i);t.classList.toggle("is-active",!e),t.dataset.tt=e?pb:Mc;let o=t.querySelector("div:last-child");o&&(o.innerHTML=n.counterHtml||"")}),Uk=i=>A(void 0,null,function*(){let t=i.node(),{id:e}=t.dataset;new xe(t,[{action:"rename",text:Rc},{action:"delete",text:Tb,confirmTitle:xb,confirm:wb,cancel:Lb,delete:!0}],yb).addEventListener("select",o=>A(void 0,null,function*(){let s=o.detail;s==="rename"?(yield lh(t,e,x(Ri,"title").textContent||""),Mt(),d2Env.isApp&&(yield ji(50)),window.location.reload()):s==="delete"&&(yield a_(t,e),Mt(),d2Env.isApp&&(yield ji(50)),window.location.href=x(Ri,"index").href)}))}),d_=i=>{let t=x(Ri,"counter");t&&(t.textContent=i||String(ft(Ri,"entry").length||""))},zk=i=>A(void 0,null,function*(){let t=i.node();yield lh(t),Mt(),d2Env.isApp&&(yield ji(50)),window.location.reload()}),p_=ls(i=>A(void 0,null,function*(){let t=x(Ri,"content");if(ch===void 0){let l=x(Ri,"counter");c_=l&&l.textContent||"",ch=t.innerHTML}let{action:e,folderId:n}=i.form,o=i.value,s=x(Ri,"pager");if(s&&M(s,!o),d2Env.isMobile&&M(x(Ri,"folders"),!o),!o){t.innerHTML=ch,d_(c_);return}let[r,a]=yield gi(()=>kt(e,Ri,{method:"POST",anchorEl:i,silent:!0,throwError:!0,acceptOnlyHttp200:!0,body:N({query:o,counter:$k++},n&&{folderId:n.value})}));t.innerHTML=a||r&&r.request.status===202&&r.request.responseText||"",d_(),r&&(r.request.status===202||r.request.status===204)&&p_(i)}),300),h_=()=>{T.registerHandlers(Ri,{edit:Fk,toggle:Bk,folder:Uk,addFolder:zk,search:ze(i=>p_(i.node()),300),submit:i=>yt(i)})};$();var jk="slideshow",u_,Wk=i=>{clearTimeout(u_);let t=i.node();t.classList.toggle("is-active"),t.classList.contains("is-active")?u_=setTimeout(()=>{t.style.zIndex="0"},220):t.style.zIndex="2"},f_=()=>{T.registerHandlers(jk,{cup:Wk})};Y();Z();zc();var g_=d2Env.isMobile?window.innerHeight-190:750,zr=class extends H{init(){this.button=this.slot("button",document.body),this.height=this.element.offsetHeight,!(this.height<g_+200)&&(this.element.classList.add("is-closed"),M(this.button,!0),this.element.style.height=`${g_}px`,bs(this.element),this.button.addEventListener("click",this,{once:!0}))}handleEvent(){this.element.classList.remove("is-closed"),this.element.style.height=`${this.height}px`,M(this.button,!1)}};$();G();gt();var Vk=i=>A(void 0,null,function*(){let t=i.node(),{title:e,html:n}=yield R("/ajax/drive","drive",{method:"POST",anchorEl:t,body:{_:"di",car:t.dataset.carid}});Te({anchor:t,title:e,html:n})}),v_=()=>{T.registerHandlers("drive",{info:Vk})};$();V();G();Vt();var E_="caru",qk="/ajax/notifications.cshtml",Gk=i=>A(void 0,null,function*(){let t=i.node();yield R(qk,E_,{method:"POST",anchorEl:t,body:{_:"loadPhotoRequest",key:t.dataset.key}}),hn(t),At(t,"js-container").remove()}),b_=()=>{T.registerHandlers(E_,{req:Gk})};$();var __="Продавец — {Contacts}",y_="Скажите, что вы по объявлению на DRIVE2.",T_="Не отправляйте предоплату незнакомым продавцам!";X();Me();gt();var Th="sell",hN=i=>{let t=x(Th,"desc"),e=x(Th,"contacts");if(!t&&!e)return;let n=e.innerHTML,o=it(__,{Contacts:n}),s=i.node(),r=`
<div>${y_}</div>
<div class="x-secondary x-secondary-color o-t-s">${T_}</div>
`;d2Env.isMobile?NE({anchor:s,title:o,html:`<div class="x-box x-box--ghost">${r}</div>`}):Te({anchor:s,closeOnClick:!0,title:o,html:r})},B_=()=>{T.registerHandlers(Th,{info:hN})};vt();Xt();Wr();Y();Ji();Z();var W_=i=>{let t=i.dataset.ph,e=i.options[0]&&i.options[0].value===""?i.options[0].text:void 0;return!t&&e&&(i.dataset.ph=e),t||e},V_=(i,t)=>Array.from({length:t-i+1},(e,n)=>String(n+i)).reverse().map(e=>({value:e,text:e})),Vr=class extends H{parsedInit(){this.brandEl=this.slot("brand"),this.modelEl=this.slot("model"),this.generationEl=this.slot("gen"),this.engineEl=this.slot("engine"),this.transmissionEl=this.slot("transmission"),this.productionEl=this.slot("production"),this.purchaseEl=this.slot("purchase"),this.addCarLinkEl=this.slot("add-car-link"),this.presetEl=this.slot("presets");let{model:e,gen:n,production:o,purchase:s,noPlaceholders:r,genAutoselect:a}=this.element.dataset;this.caption="",this.brand=this.brandEl.value,this.model=e,this.generation=n,this.production=Number(o)||void 0,this.purchase=Number(s)||void 0,this.noPlaceholder=r==="",this.genAutoselect=a==="",this.element.addEventListener("change",this),this.presetEl&&this.presetEl.addEventListener("change",()=>{let l=this.presetEl.options[this.presetEl.selectedIndex],{brand:c,model:d,gen:p,reset:u}=l.dataset;(u===""||c||d||p)&&(this.brand=c,this.model=d,this.generation=p,this.update())}),this.update()}handleEvent(e){if(!(e.target instanceof HTMLSelectElement||e.target instanceof HTMLInputElement)||e.target===this.presetEl)return;let n=e.target,o=n===this.brandEl,s=n===this.modelEl;if(this.brand=this.brandEl.value,this.model=o?void 0:this.modelEl.value,this.generation=o||s?void 0:this.generationEl.value,this.production=this.productionEl&&Number(this.productionEl.value)||void 0,this.purchase=this.purchaseEl&&Number(this.purchaseEl.value)||void 0,n===this.engineEl&&this.transmissionEl){let r=this.engineEl.options[this.engineEl.selectedIndex];r&&r.dataset.noTransmission===""?(this.transmissionEl.selectedIndex=0,this.transmissionEl.disabled=!0):this.transmissionEl.disabled=!1}this.presetEl&&(this.presetEl.selectedIndex=0),this.setAddCarLink(),this.update()}haveNoCar(){return this.brandEl.value===""&&this.brandEl.selectedIndex!==0}isCustomCar(){return this.brandEl.value==="selfmade"||this.brandEl.value==="other"}getInfo(){return this.brand?So.get(this.brand,this.brandEl):Promise.resolve([])}update(){return A(this,null,function*(){!this.brand&&!this.haveNoCar()&&(this.brandEl.selectedIndex=0),this.model||(this.modelEl.selectedIndex=0),this.generation||(this.generationEl.selectedIndex=0),this.render(yield this.getInfo()),this.dispatch()})}dispatch(){this.element.dispatchEvent(new CustomEvent("change",{bubbles:!0,detail:{brand:this.brand,model:this.model,generation:this.generation,caption:this.caption}}))}setAddCarLink(){if(!this.addCarLinkEl)return;let e=this.slot("add-car-container");e&&M(e,Boolean(this.brand)),this.addCarLinkEl.search=`?${new URLSearchParams(N(N(N({},this.brand&&{brand:this.brand}),this.model&&{model:this.model}),this.generation&&{generation:this.generation}))}`}render(e){let{brandEl:n}=this;this.caption="";let o="",s=W_(n);if(this.noPlaceholder&&this.brand&&n.options[0]&&n.options[0].value==="")n.options[0].remove();else if(s&&!this.noPlaceholder&&n.options[0]&&n.options[0].value!==""){let p=document.createElement("option");p.value="",p.innerHTML=s,n.prepend(p)}this.brand?(n.value=this.brand,this.caption=n.options[n.selectedIndex].text,o=this.caption):this.haveNoCar()||(this.brandEl.selectedIndex=0),n.value||(this.haveNoCar()||(this.brandEl.selectedIndex=0),this.model=void 0,this.generation=void 0,this.production=void 0,this.purchase=void 0),this.noPlaceholder&&!this.model&&(this.model=e[0]&&e[0].id);let r=e.map(p=>({value:p.id,text:p.model}));this.modelEl.disabled=!this.brand||this.isCustomCar(),this.renderSelect(this.modelEl,r,this.model),this.model&&(this.caption=`${o} ${this.modelEl.options[this.modelEl.selectedIndex].text}`);let a=e.find(p=>p.id===this.model),l=a?a.generations:[];(this.genAutoselect&&l.length===1||this.noPlaceholder&&!this.generation)&&(this.generation=l[0]&&l[0][0]);let c=l.length===1,d=l.map(([p,u])=>({value:p,text:u}));if(this.generationEl.disabled=!this.model||!this.brand||this.isCustomCar(),this.renderSelect(this.generationEl,d,this.generation,c),this.generation&&(this.caption=`${o} ${this.generationEl.options[this.generationEl.selectedIndex].text}`),this.generationEl.dispatchEvent(new CustomEvent("forced-change")),this.productionEl||this.purchaseEl){let p=l.find(h=>this.generation===h[0]),u=p&&p[2]||l[0]&&l[0][2]||this.production||1900,m=Math.max(new Date().getFullYear(),u);if(this.productionEl){let h=V_(u,m);this.renderSelect(this.productionEl,h,String(this.production||""))}if(this.purchaseEl){let g=Number(this.productionEl&&this.productionEl.value)||u,f=V_(g,m),E=this.purchase?this.purchase<g?g:this.purchase:this.purchaseEl.value;this.renderSelect(this.purchaseEl,f,String(E||""))}}}renderSelect(e,n,o,s){let r=this.noPlaceholder&&Boolean(o)||s,a=W_(e),l=[...n];!r&&(a||a==="")&&l.unshift({value:"",text:a}),ii(e),J(rt(l,c=>c.value,c=>C`<option value=${c.value} .selected=${o===c.value}>${c.text}</option>`),e)}};Y();X();Z();Pe();var q_=(i,t)=>{let e=i.dataset[t];return!e||e==="0"?"":e},qr=class extends H{parsedInit(){let t=Ge("carselect",this.element.parentElement),e=Vo(t,"carselect"),n=q_(this.element,"model"),o=q_(this.element,"gen"),s=this.slot("presets"),r=this.slot("brand"),a=this.slot("model"),l=this.slot("gen"),c=this.slot("model-regular"),d=this.slot("model-custom");if(s&&r){let u=Et(r,!s.value);u.duration=400}if(a){let u=Et(a,Boolean(n));u.duration=400}if(l){let u=Et(l,Boolean(o));u.duration=400}let p=u=>{let m=!1,h=u==="selfmade"||u==="other";c&&d&&(h&&(m=!0),M(c,!h),M(d,h));let g=s&&r&&s.value==="";if(s&&r)if(g)m=!Et(r).expanded;else{Et(r).expand(!1);return}a&&Et(a).expand(Boolean(u),m),l&&Et(l).expand(Boolean(e&&e.model)&&!h,m),g&&Et(r).expand(!0)};t.addEventListener("change",()=>{p(e&&e.brand||"")})}};vt();Xt();Wr();Y();Ce();Ji();var Bn={CARS:"cars",BRAND:"brand",MODEL:"model",GENERATION:"generation"},Yc=i=>Array.from(i.querySelectorAll("select")),G_=(i,t,e)=>{let n=i.options[0]&&i.options[0].value===""&&i.options[0].text,o=[...t];(n||n==="")&&o.unshift({value:"",text:n}),ii(i),J(rt(o,s=>s.value,s=>C`<option value=${s.value} .selected=${e===s.value}>${s.text}</option>`),i)},fN=(i,t,e,n)=>{i.disabled=!e;let o=t.map(s=>({value:s.id,text:s.model}));G_(i,o,n)},gN=(i,t,e,n,o)=>{i.disabled=!n||!e;let s=t.find(c=>c.id===n),r=s?s.generations:[],a=r.length===1,l=r.map(([c,d])=>({value:c,text:d}));G_(i,l,o!==void 0?o:a?l[0].value:void 0)},Gr=class extends H{init(){this.isFullGenerations=this.element.dataset.fullGenerations==="",this.element.addEventListener("change",this),this.element.addEventListener("click",this),this.element.addEventListener("set-cars",e=>this.setCars(e.detail))}setCars(e){return A(this,null,function*(){let n=this.slots("item");n.pop(),n.forEach(o=>o.remove()),e.forEach(o=>{let s=this.slots("item"),r=s[s.length-1];this.updateItem(r,{brand:o.brand,model:String(o.model),generation:String(o.generation)||""}),this.update()}),_e(this.element)})}handleEvent(e){return A(this,null,function*(){let{target:n}=e;if(e.type==="click"){n instanceof HTMLButtonElement&&this.removeItem(this.closestSlot(n,"item"));return}if(!(n instanceof HTMLSelectElement))return;let o=this.closestSlot(n,"item");yield this.updateItem(o,void 0,n),_e(this.element)})}removeItem(e){this.slots("item").length>1&&(e.remove(),this.update(),_e(this.element))}updateItem(s){return A(this,arguments,function*(e,n={},o){let{brand:r,model:a,generation:l}=n,[c,d,p]=Yc(e);r!==void 0?c.value=r:r=c.value,a=a===void 0&&(o===d||o===p)?d.value:a;let u=yield So.get(r,c);(!o||o===c)&&fN(d,u,r,a),o!==p&&gN(p,u,r,a,l),this.update()})}update(){let e=this.slots("item"),n=e[0],o=e[e.length-1],[s,r,a]=Yc(o),l=Number(this.element.dataset.max)||100;if((this.isFullGenerations?s.value!==""&&r.value!==""&&a.value!=="":s.value!=="")&&e.length<l){let u=n.cloneNode(!0);o.after(u);let m=Yc(u);m[0].value="",m[0].name="",m[1].value="",m[1].name="",m[1].options.length=1,m[1].disabled=!0,m[2].value="",m[2].name="",m[2].options.length=1,m[2].disabled=!0,u.classList.add("is-unremovable")}let d=0,p;e.forEach(u=>{let m=Yc(u);if(!p){let h=new RegExp(`${Bn.CARS}\\[\\d+]\\.${Bn.BRAND}$`,"i");p=m[0].name.replace(h,"")}if(m[0].value===""&&u!==o)u.remove();else{let h=this.isFullGenerations?m[0].value===""||m[1].value===""||m[2].value==="":m[0].value==="";u.classList.toggle("is-unremovable",h&&u===o),m[0].name=`${p}${Bn.CARS}[${d}].${Bn.BRAND}`,m[1].name=`${p}${Bn.CARS}[${d}].${Bn.MODEL}`,m[2].name=`${p}${Bn.CARS}[${d}].${Bn.GENERATION}`,d+=1}})}};vt();Xt();Es();var J_="Машины",Y_="Выберите, владельцам каких машин показывать запись.",Z_="Выберите одно или несколько  поколений, к которым подходит ваш товар.",K_="Выберите марку",X_="Выберите модель",Q_="Любые модели",ty="Выберите поколение",ey="Любые поколения",iy="Добавить",ny="Закрыть окно?",oy="Выбранные машины не сохранятся",sy="Выбрать",ry="Редактировать";te();V();Y();X();Ce();var Un=class{constructor(t=1/0){this.maxnum=t;this.tokens=[]}get(){return this.tokens}add(t,e){this.tokens.length<this.maxnum&&(e?this.tokens.unshift(t):this.tokens.push(t),this.tokens=this.tokens.filter((n,o,s)=>s.findIndex(r=>r.id?r.id===n.id:JSON.stringify(r)===JSON.stringify(n))===o))}remove(t){this.tokens.splice(t,1)}removeById(t){let e=this.tokens.findIndex(n=>n.id===t);e!==-1&&this.remove(e)}removeLast(){this.tokens.pop()}clear(){this.tokens=[]}};gt();var xs=[],EN=({list:i,brand:t,model:e,fullGenerations:n,addDisabled:o,submitDisabled:s,addHandler:r,removeHandler:a,submitHandler:l})=>C`
  <div class="x-form">
    <div class="x-box x-box--ghost">
      <div class="x-text o-b">${n?Z_:Y_}</div>
    </div>
    <div class="x-box x-box--narrow" data-role="formcarselect carselect" data-gen-autoselect>
      <div class="x-form__item">
        <div class="x-form__body">
          <select class="x-select" name="brand" data-slot="carselect.brand">
            <option value="">${K_}</option>
            ${rt(xs,c=>c[0],c=>C`<option value="${c[0]}">${c[1]}</option>`)}
          </select>
        </div>
      </div>
      <div data-slot="formcarselect.model" style=${ce({display:t?"":"none"})}>
        <div class="x-form__item">
          <div class="x-form__body">
            <select class="x-select" name="model" data-slot="carselect.model">
              <option value="">${n?X_:Q_}</option>
            </select>
          </div>
        </div>
        <div class="x-form__item" data-slot="formcarselect.gen" style=${ce({display:e?"":"none"})}>
          <div class="x-form__body">
            <select class="x-select" name="generation" data-slot="carselect.gen">
              <option value="">${n?ty:ey}</option>
            </select>
          </div>
        </div>
      </div>
      <button class="o-t-l c-button c-button--l u-100" ?disabled=${o} @click=${r}>${iy}</button>
    </div>

      ${i&&i.length>0?C`
          <div class="x-box x-box--narrow">
            ${rt(i,c=>JSON.stringify(c),(c,d)=>C`
              <div class="x-form__item">
                <div class="x-form__body">
                  <div class="x-form__text">${c.caption}</div>
                  <button class="r-button-unstyled x-side-icon x-side-icon--cross" @click=${()=>a(d)}></button>
                </div>
              </div>
            `)}
          </div>`:F}

    <div class="x-form__submit u-extend" data-role="sticky-button">
      <button class="c-button c-button--primary c-button--xl u-100" type="button"
        ?disabled=${s} @click=${l}>${ke}</button>
    </div>
  </div>
`,Jr=class extends H{constructor(){super(...arguments);this.addDisabled=!0;this.contentChanged=!1;this.closeWithoutConfirm=!1;this.brand="";this.model=""}parsedInit(){this.listEl=this.slot("list"),this.buttonEl=this.slot("button"),this.name=this.element.dataset.name||"",this.placeholder=this.element.dataset.placeholder,this.fullGenerations=this.element.dataset.fullGenerations==="",this.tokens=new Un(Number(this.element.dataset.max)),xs.length===0&&(xs=this.slot("brands",document.body).textContent.split(";").map(n=>n.split(",")),xs[xs.length-1][0]===""&&xs.pop()),this.carSelectChange=this.carSelectChange.bind(this),this.element.addEventListener("click",()=>this.showModal())}showModal(){this.initTokens(),this.addDisabled=!0,this.contentChanged=!1,this.closeWithoutConfirm=!1,this.dialog=Ci({anchor:this.element,title:J_}),this.dialog.addEventListener("beforehide",e=>A(this,null,function*(){!this.closeWithoutConfirm&&this.contentChanged&&(e.preventDefault(),(yield dt(ny,oy,void 0,gs))&&this.close())})),this.dialog.addEventListener("hide",()=>this.hideModal(),{once:!0}),this.dialog.render(),this.dialog.show(),this.updateModal(),this.carSelectContainer=Ge("carselect",this.dialog.contentElement),this.carSelectContainer.addEventListener("change",this.carSelectChange)}initTokens(){this.tokens.clear();let e=et(this.name?`input[name^="${this.name}"]`:'input[type="hidden"]',this.listEl).reduce((o,s)=>{let r=s.name.match(/cars\[(\d+)]\.(\w+)/),a=Number(r&&r[1]),l=r&&r[2];return l&&(o[a]=o[a]||{},o[a][l]=s.value),o},[]);et("[data-index]",this.listEl).forEach((o,s)=>{e[s].caption=o.textContent,this.tokens.add(e[s])})}updateForm(){this.listEl.innerHTML="";let e=this.tokens.get();if(e.sort((n,o)=>{let s=n.caption,r=o.caption;return s>r?1:s<r?-1:0}),e.forEach((n,o)=>{let s=document.createElement("input");if(s.name=`${this.name?`${this.name}.`:""}cars[${o}].brand`,s.type="hidden",s.value=n.brand||"",this.listEl.appendChild(s),n.model){let a=document.createElement("input");a.name=`${this.name?`${this.name}.`:""}cars[${o}].model`,a.type="hidden",a.value=n.model,this.listEl.appendChild(a)}if(n.generation){let a=document.createElement("input");a.name=`${this.name?`${this.name}.`:""}cars[${o}].generation`,a.type="hidden",a.value=n.generation,this.listEl.appendChild(a)}let r=document.createElement("div");r.className="u-text-overflow",r.textContent=n.caption,r.dataset.index=String(o),this.listEl.appendChild(r)}),e.length===0){let n=document.createElement("div");n.textContent=this.placeholder||"",this.listEl.appendChild(n)}this.buttonEl&&(this.buttonEl.textContent=e.length===0?sy:ry),_e(this.element)}updateModal(){J(EN({list:this.tokens.get(),brand:this.brand,model:this.model,fullGenerations:!!this.fullGenerations,addDisabled:this.addDisabled,submitDisabled:!this.contentChanged,addHandler:this.addHandler.bind(this),removeHandler:this.removeHandler.bind(this),submitHandler:this.updateFormAndClose.bind(this)}),this.dialog.contentElement)}close(){this.closeWithoutConfirm=!0,Mt()}updateFormAndClose(){this.updateForm(),this.close()}carSelectChange(e){if(e.detail){let{brand:n,model:o}=e.detail;this.addDisabled=this.fullGenerations?!n||!o:!n,this.brand=n||"",this.model=o||"",this.updateModal()}}hideModal(){this.carSelectContainer.removeEventListener("change",this.carSelectChange)}addHandler(){let e=Vo(this.carSelectContainer,"carselect"),{brand:n,model:o,generation:s,caption:r}=e;this.tokens.add(wt(N(N({brand:n},o&&{model:o}),s&&{generation:s}),{caption:r}),!0),this.contentChanged=!0,this.updateModal()}removeHandler(e){this.tokens.remove(e),this.contentChanged=!0,this.updateModal()}};$();V();X();G();Ch();ws();zi();var Zr="catalog",yN="/ajax/carsearch.cshtml",py=0,TN=()=>{ft(Zr,"dv").forEach(t=>{Ev(t),et("script",t).forEach(Zc)})},Ih=()=>{let i=x(Zr,"more");if(!i)return;let{dataset:t}=i,e=N(N({context:t.context,start:t.start,sort:t.sort,index:py},t.city&&{city:t.city}),t.country&&{country:t.country}),n=x(Zr,"spin"),o=new fe(n);R(yN,Zr,{anchorEl:i,spinner:o,body:e}).then(s=>{py++;let{start:r}=s;r&&(i.dataset.start=String(r));let{html:a}=s;a&&(i.insertAdjacentHTML("beforebegin",a),TN()),(!a||!r)&&(i.remove(),je().removeEventListener("scroll",Ih))})},hy=()=>{je().addEventListener("scroll",Ih),T.registerHandlers(Zr,{morecars:Ih})};$();Y();Z();zc();var uy=(i,t)=>{let e=i.length,n,o=1;for(;!n;)if(e%o===1)o++;else{n=!0;for(let s=0,r=0;s*o<e;s++)if(r+=Math.max(...i.slice(s*o,(s+1)*o)),r>t){n=!1,o++;break}}return o};var Kr=class extends H{parsedInit(){let t=this.element,e=Array.from(t.children),n=t.classList.contains("is-open"),o=(s,r)=>{r&&t.scrollIntoView({behavior:"smooth"});let a=this.slot("more",document.body);a&&M(a,!s);let l=this.slot("mode",document.body);if(l&&(M(l,Boolean(a)),l.catalog.value=s?"more":"less"),d2Env.isMobile)t.classList.toggle("is-open",s);else if(e.length){t.style.visibility="hidden";let c=e.map(g=>g.getBoundingClientRect());t.classList.add("is-open","is-parked");let d=t.offsetWidth,p=e.map(g=>g.offsetWidth),u=e[0].offsetHeight,m=e.map(g=>n||g.classList.contains("is-important")),h=uy(p,d);t.style.maxHeight=`${h*u}px`,t.classList.remove("is-parked"),e.forEach((g,f)=>{let E=g.getBoundingClientRect();g.style.cssText=m[f]?`transform:translate(${c[f].left-E.left}px,${c[f].top-E.top}px)`:"opacity:0"}),t.style.visibility="",e.forEach(g=>{g.style.transition="transform .5s ease-in-out, opacity .5s linear",bs(g),g.style.transform="",g.style.opacity=""})}};T.registerHandlers(this.role,{more:()=>o(!0),"more-top":()=>o(!0,!0),less:()=>o(!1)})}};vt();us();$();Le();var gy="Комментарии",vy="Ваше сообщение добавлено на последнюю страницу.",Ey="Редактирова­ние",by="темы",_y="коммен­тария",yy="Свеженаписанный комментарий можно редактировать в течение 72 часов с момента его добавления. Полная история изменений будет доступна для ознакомления всем.",Ty="Заголовок",xy="Сообщение",wy="Ответить на комментарий",Ly="Сохранить изменения",Ay="Пользователь",Cy="Комментарии заблокированы до",Sy="Комментарии модератора",My="замаскированный мат в комментариях|мат в комментариях|переход на личности|флуд|флуд бессодержательными комментариями|спам|рекламный спам|писать ЗАГЛАВНЫМИ БУКВАМИ нельзя|писать translitom нельзя|писать на иностранном языке нельзя",Ry="Заблокировать комментарии на",Iy="Заблокировать",Oy="Снять блокировку",Dy="История редактирования",Hy="Скрыть историю",Xc="Удалить комментарий?",ky="Комментарий",Ny="Изменить",Py="Пожаловаться на спам",$y="Модерация",Qc="Скрыть тему?",Fy="Скрыть тему",By="Скрыть",Uy="Тема скрыта",Xr="Удалить тему?",zy="Удалить тему",jy="Deleted";var Wy="Жалоба модератору",Oh="Комментарий",Dh="Отправить",Vy="Спам-комментарий",qy="Выберите хотя бы одну причину для жалобы",Gy="Комментарии с матом или переходом на личности",Jy="Непристойное фото или текст",Yy="Рассылает спам",Zy="Чужая фотография",Ky="Спам",Xy="Нецензурная лексика в тексте",Qy="Контент эротического или порнографического характера",tT="Чужой текст",eT="Нечитабельная ерунда",iT="Непристойное фото или текст",nT="Чужая фотография",oT="Чужой текст",sT="Пользовательская информация не соответствует этой модели машины",rT="Реклама услуг или магазина",aT="Несколько товаров в одном объявлении",lT="Неправильная категория",cT="Чужое или рекламное фото",dT="Чужой, непристойный или нечитабельный текст",mT="Спам",pT="Выберите причину";V();X();G();Z();vt();Es();ve();Ne();gt();Xe();var vT="/ajax/complaint.cshtml",ET={comments:Gy,abusive:Jy,spam:Yy,copyright:Zy},bT={spam:Ky,abusivetext:Xy,abusivephoto:Qy,textcopyright:tT,garbage:eT},_T={abusive:iT,copyright:nT,textcopyright:oT,incorrect:sT},yT={ads:rT,manyinone:aT,wrongsection:lT,faultyphoto:cT,faultytext:dT,spam:mT},wN=(i,t)=>C`<div class="c-checkbox-group c-dialog-form__field">${Object.entries(i==="user"?ET:i==="journal"?bT:i==="car"?_T:yT).map(([n,o])=>{let s=t&&n==="copyright";return C`<label class="c-checkbox">
        <input type="radio" name="reason" .value=${n} ?disabled=${s}>
        <span class="c-checkbox__check c-checkbox__check--radio"></span>
        <span class="c-checkbox__label" style=${ce({color:s?"#808080":""})}>${o}</span>
      </label>`})}</div>`,LN=(i,t="",e)=>C`
  <div class="c-dialog-report">
    <form action="${vT}" class="c-dialog-form" novalidate>
      ${i==="commentspam"?C`<input type="hidden" name="reason" value="spam">`:wN(i,e)}
      <div class="c-dialog-form__field">
        <label class="c-dialog-form__legend" for="dlg.t">${Oh}</label>
        <textarea class="c-textarea" name="text" id="dlg.t" data-autofocus
          style=${ce({height:i==="commentspam"?"96px":""})}>${t}</textarea>
      </div>
      <div class="o-group o-group--m o-group--end o-group--wide c-dialog-buttons">
        <span class="c-dialog-buttons__spinner is-skip"></span>
        <button class="c-button c-button--m-no-padding" name="submitbtn" type="submit">${Dh}</button>
      </div>
    </form>
  </div>
`,AN=(i,t)=>C`
<div class="x-box o-t">
  <h2 class="x-header o-b-xs">${pT}</h2>
  ${Object.entries(i==="user"?ET:i==="journal"?bT:i==="car"?_T:yT).map(([n,o])=>C`
      <div class="x-form__item">
        <div class="x-form__body">
          <label class="x-choice x-choice--radio">
            <input type="radio" name="reason" .value=${n} ?disabled=${t&&n==="copyright"}>
            <span class="x-choice__label">${o}</span>
          </label>
        </div>
      </div>
    `)}
</div>
  `,CN=(i,t="",e)=>C`
<form action="${vT}" class="x-form" novalidate data-keysubmit data-role="form">
  ${i==="commentspam"?C`<input type="hidden" name="reason" value="spam">`:AN(i,e)}
  <div class="x-box x-box--narrow">
    <div class="x-form__item is-focusable">
      <div class="x-form__body">
        <textarea class="x-textarea" name="text" data-autofocus
          placeholder="${Oh}" data-role="taflexible">${t}</textarea>
      </div>
    </div>
  </div>
  <div class="x-form__submit u-extend" data-role="sticky-button">
    <button class="c-button c-button--primary c-button--xl u-100" type="submit"
      name="submitbtn">${Dh}</button>
  </div>
</form>
`,td=(i,t,e,n,o)=>{let s=new Ct({anchor:i,title:Wy});J(d2Env.isMobile?CN(t,o.text,o.skipPhotos):LN(t,o.text,o.skipPhotos),s.element),s.setFormDataTransformer(r=>({id:e,type:n,reason:r.reason.value,text:r.text.value})),s.addEventListener("submit",()=>{Tt("moderation",{from:n}),zt()}),s.show(),Bi(s.form,["reason",qy,"required"])};Ne();gt();Pe();$();Le();Or();te();V();Hn();var SN="comment";var MN={"edit-history":{text:Dy},"edit-history-hide":{text:Hy},edit:{text:Ny},blacklist:{text:Ir,confirmTitle:Ir,confirm:eb},unblacklist:{text:ss},spam:{text:Py},delete:{text:qt,confirmTitle:Xc,confirm:qt,delete:!0},mod:{text:$y,isMod:!0},"thread-hide":{text:Fy,confirmTitle:Qc,confirm:By},"thread-hidden":{text:Uy,inactive:!0},"thread-moderate":{text:zy,confirmTitle:Xr,confirm:qt,isMod:!0},"thread-moderated":{text:jy,isMod:!0,inactive:!0}},kh=i=>ct('[data-action="comment.dropdown"]',i),Nh=i=>(i.dataset.menu||"").split(","),TT=(i,t)=>{i.dataset.menu=t.join(",")},RN=i=>Nh(i).map(e=>wt(N({},MN[e]),{action:e})),Ph=(i,t,e)=>{let n=Nh(i),o=n.indexOf(t);o!==-1&&(n[o]=e),TT(i,n)},xT=(i,t,e)=>{let n=Nh(i);n=n.map(o=>o===t?e:o===e?t:o),TT(i,n)},IN=i=>{let t=i.node(),e=RN(t);new xe(t,e,ky).addEventListener("select",o=>{st.publish("dropdows-select",t,o.detail)})},wT=()=>{T.registerHandlers(SN,{dropdown:IN})};var Yi="/ajax/forums.cshtml";vt();ea();G();Ne();gt();var LT="/ajax/admin.cshtml",ON=i=>{let t=i.target,n=t.closest("form").mcomment;n.value=(n.value?`${n.value}, `:"")+t.textContent},DN=i=>C`
<div class="c-dialog-modcomment">
  <form action="${LT}" class="c-dialog-form" novalidate>
    ${i.unmuteTime?C`<div class="c-dialog-desc c-dialog-desc--warning">${Cy} ${i.unmuteTime}</div>`:F}
    <div class="c-dialog-form__field">
      <label class="c-dialog-form__legend">${Sy}</label>
      <div class="c-dialog-modcomment__comments">${My.split("|").map(t=>C`<span><span class="c-link" @click=${ON}>${t}</span></span>`)}</div>
      <textarea class="c-textarea" name="mcomment" data-autofocus>${i.comment}</textarea>
    </div>
    <div class="c-dialog-form__field">
      <label class="c-dialog-form__legend-h" for="dlg.b">${Ry}</label>
      <select class="c-input" name="unmutedate" id="dlg.b">${ni(i.denySelect)}</select>
    </div>
    <div class="o-group o-group--m o-group--end o-group--wide c-dialog-buttons">
      <span class="c-dialog-buttons__spinner is-skip js-spinner"></span>
      <button class="c-button c-button--m-no-padding" name="submitbtn" type="submit" .value=${i.unmuteTime?1:0}>
        ${i.unmuteTime?Oy:Iy}
      </button>
    </div>
  </form>
</div>
${i.history?C`<div class="c-dialog-modcomment__table">${ni(i.history)}</div>`:F}
`,ed=(i,t)=>A(void 0,null,function*(){let e=yield R(LT,"comments-moderate",{method:"POST",anchorEl:i,body:t}),n=new Ct({anchor:i,title:`${Ay} ${e.nickname}`},!0);J(DN(e),n.element),n.setFormDataTransformer(o=>wt(N({},t),{_:o.submitbtn.value==="1"?"remindCommentingRules":"muteUserComments",text:o.mcomment.value,days:o.unmutedate.value})),n.addEventListener("submit",zt),n.show()});var Ls="comment",AT="is-original",kN="/ajax/blacklist.cshtml",$h=new WeakMap,CT=new WeakSet,NN=(i,t,e,n)=>C`
  <div class="c-dialog-editcomment">
    <div class="c-dialog-desc">${yy}</div>
    <form action="${Yi}" class="c-dialog-form" novalidate>
      ${t?C`<div class="c-dialog-form__field">
            <label class="c-dialog-form__legend" for="dlg.h">${Ty}</label>
            <input class="c-input" type="text" name="header" id="dlg.h" .value=${t}>
          </div>`:F}
      <div class="c-dialog-form__field">
        ${t?C`<label class="c-dialog-form__legend" for="dlg.t">${xy}</label>`:F}
        <textarea class="c-textarea" name="text" id="dlg.t" data-autofocus>${i}</textarea>
      </div>
      <div class="o-group o-group--m o-group--end o-group--wide c-dialog-buttons">
        <span class="c-dialog-buttons__spinner is-skip js-spinner"></span>
        ${!t&&(n||e)?C`<label class="c-upload-button" data-thumb=${Ei(e)} data-role="upload-button"></label>`:F}
        <button class="c-button c-button--primary c-button--m-no-padding" name="submitbtn" type="submit">
          ${Ly}
        </button>
      </div>
    </form>
  </div>
`,Fh=class{constructor(t){this.rootEl=t;this.isThread=this.rootEl.dataset.thread===""}showReplyForm(t){let e=t.dataset.parent||"",n=this.getReplyForm(e),o=Et(n);o.addEventListener("end",s=>{let{expanded:r}=s.target;r&&n.text.focus()},{once:!0}),o.toggle()}getReplyForm(t){if(this.replyForm&&document.documentElement.contains(this.replyForm))return this.replyForm;let n=on("comment-form").find(a=>a.classList.contains(AT)).cloneNode(!0);this.replyForm=n,n.classList.remove(AT),n.id="",n.dataset.hidden&&delete n.dataset.hidden;let o=n.text;o.style.height="",o.setAttribute("placeholder",wy),o.value="";let s=Ge("upload-button",n);s.innerHTML="",s.dataset.thumbnail&&delete s.dataset.thumbnail;let r=P("input",{type:"hidden",name:"parent",value:t||""});return n.appendChild(r),M(n,!1),this.rootEl.after(n),n}getDropdownQuery(t,e={}){return N({_:t,owner:this.rootEl.dataset.owner,ownerId:this.rootEl.dataset.ownerid,id:this.rootEl.dataset.id},e)}dropdown(t,e){switch(e){case"edit-history":case"edit-history-hide":this.editHistory(t);break;case"edit":this.edit(t);break;case"blacklist":this.blacklist(t,!0);break;case"unblacklist":this.blacklist(t,!1);break;case"spam":this.spam(t);break;case"thread-moderate":this.deleteCommentOrThread(t,!0);break;case"thread-hide":case"delete":this.deleteCommentOrThread(t);break;case"mod":this.moderate(t);break}}editHistory(t){return A(this,null,function*(){let e=this.getDropdownQuery(this.isThread?"ht":"hc"),n=x(Ls,"history",this.rootEl);if(CT.has(n)){Et(n).toggle(),zt();return}let s=yield R(Yi,"comment-edit-history",{delay:!0,method:"POST",anchorEl:t,body:e});s.html&&(CT.add(n),M(n,!1),n.innerHTML=s.html,Et(n).addEventListener("start",r=>{let a=kh(this.rootEl);a&&(r.target.expanded?Ph(a,"edit-history","edit-history-hide"):Ph(a,"edit-history-hide","edit-history"))}),Et(n).toggle(),zt())})}edit(t){return A(this,null,function*(){let e=this.getDropdownQuery(this.isThread?"ut":"uc"),n=yield R(Yi,"comment-edit",{delay:!0,method:"POST",anchorEl:t,body:wt(N({},e),{begin:!0})}),o={title:`${Ey} ${this.isThread?by:_y}`,header:n.header,text:n.text,thumb:n.thumbnail&&n.thumbnail.length>0&&n.thumbnail[0]||"",canPostImages:n.canPostImages},s=new Ct({anchor:t,title:o.title},!0);J(NN(n.text,n.header,n.thumbnail&&n.thumbnail[0],n.canPostImages),s.element),s.setFormDataTransformer(r=>{let a=N(wt(N({},e),{text:r.text.value}),r.header&&{header:r.header.value}),l=Ge("upload-button",r);if(l){let c=l.dataset.id,d=Boolean(o.thumb);(!d||!(d&&!c))&&(a.image=c||"")}return a}),s.addEventListener("submit",r=>{let{detail:a}=r,l=x(Ls,"text",this.rootEl);a.text&&(l.innerHTML=a.text);let c=document.getElementById("thread-header");c&&a.header&&(c.innerHTML=a.header),Mt(),Mt()}),s.show()})}blacklist(t,e){return A(this,null,function*(){zt();let n=this.rootEl.dataset.user;yield R(kN,"comment-blacklist",{method:"POST",delay:!0,anchorEl:t,body:{_:e?"add":"remove",id:n}}),on(Ls).filter(s=>s.dataset.user===n).forEach(s=>{let r=kh(s);r&&xT(r,"blacklist","unblacklist")})})}spam(t){let e=this.rootEl.dataset.user,n=x(Ls,"text",this.rootEl),o=n?`${Vy}: ${n.innerText}`:"";setTimeout(td,1,t,"commentspam",e,"user",{text:o})}deleteCommentOrThread(t,e){return A(this,null,function*(){let n=this.getDropdownQuery(this.isThread?e?"mt":"dt":"dc"),o=yield R(Yi,"comment-delete",{delay:!0,method:"POST",anchorEl:t,body:n});zt(),this.isThread?o.url?window.location.href=o.url:window.location.reload():Et(this.rootEl).hideAndRemove()})}moderate(t){ed(t,{_:"getUserCommentsModerationData",userId:this.rootEl.dataset.user,forumId:this.rootEl.dataset.forum,messageId:this.rootEl.dataset.id})}},ST=i=>{let t=jo(i,Ls);return t&&!$h.has(t)&&$h.set(t,new Fh(t)),t&&$h.get(t)},PN=i=>{let t=i.node(),e=ST(t);e&&e.showReplyForm(t)},$N=(i,t)=>{let e=ST(i);e&&e.dropdown(i,t)},MT=()=>{T.registerHandlers(Ls,{reply:PN}),st.subscribe("dropdows-select",$N)};Le();Bh();V();Y();G();ve();var nd=class{constructor(t,e,n){this.key=t;this.expiration=e;this.idFn=n;this.data=this.removeExpired(this.data)}save(t,e){let n=this.removeExpired(this.data).filter(o=>!this.idFn(o));e||n.push(t),this.data=n}load(){return this.data.find(this.idFn)}get data(){return JSON.parse(localStorage.getItem(this.key)||"[]")}set data(t){localStorage.setItem(this.key,JSON.stringify(t))}removeExpired(t){return t.filter(e=>e.timestamp+this.expiration>Date.now())}};sh();In();od();gt();zi();Pe();var FN=500,IT="is-collapsed",na=class extends H{parsedInit(){this.isInline=this.element.dataset.inline==="",this.draftStorage=new nd("commentsDrafts",28*60*60*1e3,o=>{let s=this.element.ownerId.value,r=this.element.parent&&this.element.parent.value;return s===o.ownerId&&r===o.parent}),this.restoreDraft(),this.element.addEventListener("input",ze(()=>this.saveDraft(),300)),st.subscribe("upload-button-change",()=>this.saveDraft()),jc(this.element,()=>this.post());let e=this.slot("text");this.isInline?(e.addEventListener("focus",()=>this.focus()),e.addEventListener("blur",()=>this.blur())):new zn(e,e.offsetHeight);let n=this.slot("upload");n&&n.addEventListener("click",()=>this.cancelFocus())}cancelFocus(){clearTimeout(this.blurTm)}focus(e){clearTimeout(this.blurTm),this.element.classList.remove(IT),!e&&this.element.dataset.metrika&&Tt(this.element.dataset.metrika)}blur(){this.blurTm=setTimeout(()=>{this.element.text.value===""&&this.element.classList.add(IT)},350)}post(){return A(this,null,function*(){let e=this.element,n=this.slot("upload"),o=n&&n.dataset.id,s=N(N(N({_:e.dataset.type,text:e.text.value,owner:e.owner.value,ownerId:e.ownerId.value},e.header&&{header:e.header.value}),e.parent&&{parent:e.parent.value}),o&&{image:o}),r=new fe(this.slot("spinner")),a=yield R(Yi,this.role,{method:"POST",body:s,anchorEl:e.submitbtn,spinner:r});if(a.url){window.location.href=a.url;return}if(a.warning){Te({anchor:this.element.submitbtn,className:"c-dialog-warning",title:id,html:`
<div class="c-dialog-desc">${a.warning}</div>
<div class="o-group o-group--m o-group--end o-group--wide c-dialog-buttons">
<button class="c-button c-button--primary c-button--m-no-padding"
  type="button" data-action="dialog.close">${ia}</button>
</div>
        `});return}if(!a.html)return;let l=Fi(a.html);l.style.visibility="hidden";let c=document.getElementById("commentstitle");if(c){let h=c.querySelector(".c-counter"),g=h?parseInt(h.textContent,10)+1:1;c.innerHTML=`${gy} <span class="c-counter">${g}</span>`}let d=e.closest(".js-entity"),p=U("js-commentscounter",d);p&&(p.textContent=String((Number(p.textContent)||0)+1)),e.header&&(e.header.value=""),e.text.value="",n&&(n.dataset.id&&delete n.dataset.id,n.dataset.thumbnail&&delete n.dataset.thumbnail);let u=!!e.parent,m=e.dataset.hidden==="";if(u)e.after(l);else if(m)$t(vy,e.submitbtn);else{let h=e.closest(".js-compactcomments"),g=U("c-comments",h);e.dataset.position==="top"?g.prepend(l):g.appendChild(l)}this.saveDraft(!0),l.scrollIntoView({behavior:"smooth",block:"nearest"}),this.animate(l,e,u),this.isInline&&e.remove()})}saveDraft(e){let n=this.element.ownerId.value,o=this.element.text.value,s=this.element.header&&this.element.header.value,r=this.element.parent&&this.element.parent.value,a=this.slot("upload"),l=a&&a.dataset.id,c=a&&a.dataset.thumbnail;this.draftStorage.save(N(N(N(wt(N({timestamp:Date.now(),ownerId:n},r&&{parent:r}),{text:o}),s&&{header:s}),l&&{image:l}),c&&{thumbnail:c}),e)}restoreDraft(){let e=this.draftStorage.load();if(!e)return;this.element.text.value=e.text||"",this.element.header&&e.header&&(this.element.header.value=e.header);let n=this.slot("upload");n&&e.image&&e.thumbnail&&(n.dataset.id=e.image,n.dataset.thumbnail=e.thumbnail),this.isInline&&e.text&&this.focus(!0)}animate(e,n,o){let s=e.getBoundingClientRect(),r=n.getBoundingClientRect(),a=r.width/s.width,l=r.x-s.x,c=r.y-s.y;e.classList.add("is-animated"),e.animate({transform:[`translate(${l}px,${c}px) scale(${a})`,"none"],opacity:[.2,1]},{duration:FN,easing:"cubic-bezier(.65,0,.35,1)"}).onfinish=()=>{e.classList.remove("is-animated"),o&&Et(n).hideAndRemove()},e.style.visibility="visible"}};$();te();V();G();gt();var OT="js-thread",BN="js-entity",UN=(i,t)=>{for(i.appendChild(t);i.firstChild!==t;)t.appendChild(i.firstChild)},DT=i=>A(void 0,null,function*(){let t=i.actionName(),e=i.node();if(yield dt(t==="mt"?Xr:Qc,void 0,e,t==="mt"?qt:fs).then(c=>!c))return;let s=At(e,OT),{dataset:r}=s;yield R(Yi,"mod-delete-thread",{method:"POST",anchorEl:e,body:{_:t,owner:r.owner,ownerId:r.ownerid,id:r.id}});let a=At(s,BN),l=a&&Pt(OT,a).length===1?a:s;l&&l.remove()}),zN=i=>{let t=i.node(),{dataset:e}=t,n=N({_:"getUserCommentsModerationData",userId:e.user,forumId:e.forum,messageId:e.id},e.thread&&{threadId:e.thread});ed(t,n)},jN=i=>A(void 0,null,function*(){let t=i.node(),{dataset:e}=t,n=e.thread==="";if(yield dt(n?Xr:Xc,void 0,t,qt).then(c=>!c))return;yield R(Yi,"mod-delete-comment",{method:"POST",anchorEl:t,body:{_:n?"dt":"dc",owner:e.owner,ownerId:e.ownerid,id:e.id}});let s=t.closest("li"),r=U("js-link",s),a=U("js-moddel",s),l=document.createElement("span");l.className="u-deleted",a&&a.remove(),UN(r,l)}),HT=()=>{T.registerHandlers("comments",{dt:DT,mt:DT,mod:zN,moddel:jN})};Y();var WN=60,oa=class extends H{parsedInit(){this.element.scrollHeight-this.element.offsetHeight<WN&&this.element.classList.remove("is-closed"),this.element.classList.remove("is-off"),this.element.addEventListener("click",()=>this.element.classList.remove("is-closed"))}};vt();Le();var kT="Добавить фотографию с компьютера";Y();ra();dn();var GN=(i,t)=>C`
<button class="c-button c-button--gray c-upload-button__button" type="button">
  <span class="c-upload-button__thumb" style="background-image: url(${i})"></span>
  <span class="c-upload-button__remove" @click=${t}></span>
</button>
`,aa=class extends H{init(){this.reset=this.reset.bind(this),this.thumbnail||this.attributeChanged()}get thumbnail(){return this.element.dataset.thumbnail||""}set thumbnail(e){this.element.dataset.thumbnail=e}get observedAttributes(){return["data-thumbnail"]}attributeChanged(){this.thumbnail?(this.uploader&&(this.uploader.dispose(),this.uploader=void 0),Ke(),this.element.dataset.tt&&delete this.element.dataset.tt,J(GN(this.thumbnail,this.reset),this.element)):this.uploader||(this.element.dataset.tt=kT,J(F,this.element),this.uploader=new Oi("commentimage","c-button c-button--gray"),this.uploader.setUploadUrl(d2Env.uploadUrl),this.uploader.setAction("uploadSimple"),this.uploader.setButtonCaption('<span class="c-upload-button__icon"></span>'),this.uploader.render(this.element),this.uploader.setVisible(!0),this.uploader.addEventListener("ready",this),this.uploader.addEventListener("started",this))}reset(){this.element.dataset.id&&delete this.element.dataset.id,this.thumbnail=""}handleEvent(e){e.type==="ready"?e.detail&&e.detail.length===1&&(this.element.dataset.id=e.detail[0].id,this.thumbnail=e.detail[0].thumbnail[0]):e.type==="started"&&this.reset(),st.publish("upload-button-change")}};$();var jT="Состою";G();ve();var WT="feedcomm",YN=i=>A(void 0,null,function*(){let t=i.node();yield R("/ajax/community.apply.cshtml",WT,{method:"POST",anchorEl:t,body:{community:t.value}}),Tt("myfeed_r_communities_join"),t.disabled=!0,t.textContent=jT}),VT=()=>{T.registerHandlers(WT,{join:YN})};$();X();var qT=(i,t)=>{document.documentElement.style.overflow="hidden",T.registerHandlers(t,{close:()=>{let e=x(t,"bg");e&&e.remove();let n=x(t,"overlay");n&&n.remove(),document.documentElement.style.overflow=""}})};$();te();var GT="Без этой карты Аккаунт специалиста отключится",JT="После удаления, выберите в настройках Аккаунта специалиста другую карту, иначе он отключится после окончания оплаченного периода";V();X();G();Z();Vt();gt();Xe();Pe();$();V();Y();X();Z();var zh="deposit-payment",YT="js-deposit-payment-type",ZT=()=>{Pt(YT).forEach(t=>{Kl(t)||t.remove()})},KN=()=>{Pt(YT).forEach(t=>{M(t,!1)})},KT=i=>{let t=x(zh,i);M(t,!0)},XN=i=>{let t=x(zh,"invoice-terms");t&&M(t,i==="invoice")},QN=i=>{let t=x(zh,"hidden");t&&(t.value=i)},tP=i=>{let t=i.node(),e=t.value;if(KN(),KT(e),XN(e),"kind"in t.dataset){let n=t.dataset.kind||"";QN(n)}},la=class extends H{parsedInit(){T.registerHandlers(this.role,{type:tP});let t=ct('[name="payment-type"]',this.element);t&&(t.checked=!0,KT(t.value))}};var eP="js-com-deposit-form",iP="js-deposit-requisite",XT="js-deposit-item",sd="deposit",nP=i=>{let t=At(i,XT);if(t){t.remove();let e=U(iP);Pt(XT,e).length===0&&e.remove()}},oP=i=>A(void 0,null,function*(){let t=i.node(),e=(t.dataset.dependencies||"").split(",").includes("ProAccount");if(yield dt(e?GT:Gb,e?JT:void 0,t,e?qt:void 0)){let n=t.dataset.url||"";yield kt(n,{method:"DELETE",anchorEl:t}),nP(t)}}),sP=i=>{let t=i.node(),e=ft(sd,"submit-btn"),n=ft(sd,"type"),o=x(sd,"payment-options");if(n&&n.length&&n.forEach(s=>{s.value=t.value}),o&&!Kl(o)){let s=Et(o);s.addEventListener("show",()=>{o.scrollIntoView({behavior:"smooth"})},{once:!0}),s.toggle(!0)}e.forEach(s=>{s.innerText=t.dataset.caption,s.value=t.dataset.amount})},rP=i=>A(void 0,null,function*(){yt(i);let t=i.node(),e=t.closest("form"),n=()=>{t.disabled=!0,e.submit()};if("validateBeforeConfirm"in t.dataset&&!Ui(e))return;"cleanupBeforeSubmit"in e.dataset&&ZT();let s=t.dataset.confirm||e.dataset.confirm;if(!s){n();return}(yield dt(s,void 0,t))&&n()}),aP=()=>{let i=x(sd,"tariffs");if(i)i.scrollIntoView({behavior:"smooth"});else{let t=U(eP),e=Et(t);e.addEventListener("show",()=>{t.scrollIntoView({behavior:"smooth"})},{once:!0}),e.toggle(!0)}},QT=()=>{T.registerHandlers("deposit",{remove:oP,"update-tariff":sP,"confirm-submit":rP,"show-payment":aP})};$();X();G();Z();Vt();Xe();var jh="banktransfer",lP=i=>A(void 0,null,function*(){yt(i);let t=i.node();if(!Ui(t))return;let n=yield R(t.action,jh,{method:"POST",anchorEl:t.submitbtn,body:new FormData(t)}),o=x(jh,"success");o.innerHTML=o.innerHTML.replace("{email}",n.email||""),M(t,!1),M(o,!0)}),tx=()=>{T.registerHandlers(jh,{submit:lP})};Y();var ca=class extends H{parsedInit(){this.initial=this.element.rebilling.checked,Array.from(this.element.currency).forEach(e=>e.addEventListener("change",()=>this.update())),this.update()}update(){let{rebilling:e}=this.element,n=this.element.currency.value!=="YK:AC";n&&!e.disabled&&(this.initial=e.checked),e.disabled=n,e.checked=n?!1:this.initial}};$();V();var cP="editorial",dP=i=>{let t=i.node(),e=t.dataset.target,n=ct(`[data-name="${e}"]`);n&&(t.parentElement.remove(),n.classList.remove("is-hidden"))},ex=()=>{T.registerHandlers(cP,{expand:dP})};$();X();G();Z();Vt();var rd="election",mP=i=>A(void 0,null,function*(){yt(i);let t=i.node(),e=t.form.id.value;if(!e)return;yield R(t.form.action,rd,{method:"POST",anchorEl:t,body:{id:e}});let n=x(rd,"success");n&&M(n,!0);let o=x(rd,"form");o&&M(o,!1)}),ix=()=>{T.registerHandlers(rd,{submit:mP})};$();V();X();G();Z();Vt();dn();var pP="/ajax/experience",Mo="experience",hP=i=>{yt(i);let e=i.node().parentElement,n=ct('input[type="checkbox"]',e);et(`input[name="${n.name}"]`,n.form).forEach(s=>{s.checked=s===n}),Go(n.form)},uP=i=>A(void 0,null,function*(){let t=i.node(),e=lt(t,Mo,"item"),n=lt(e,Mo,"reqs"),o=e.dataset.id||"";yield R(pP,Mo,{method:"POST",anchorEl:t,body:{_:"remove",id:o}}),e.remove(),Ke(),ft(Mo,"item",n).length===0&&n.remove()}),fP=i=>{let t=i.node(),e=x(Mo,"additional"),n=t&&lt(t,Mo,"additional-control");n&&e&&(M(n,!1),M(e,!0))},nx=()=>{T.registerHandlers(Mo,{show:hP,remove:uP,"show-additional":fP})};Y();var da=class extends H{parsedInit(){let t=this.slot("button");t&&new IntersectionObserver(e=>{this.element.classList.toggle("is-stuck",!e[0].isIntersecting)},{rootMargin:"-1px 0px",threshold:1}).observe(t)}};V();var Wh,ox=(i=!0)=>{if(document.body.classList.toggle("g-branded",i),et(".l-alt,.dv-post-header").forEach(t=>{t.style.display=i?"none":""}),i){let{styleSheets:t}=document;if(t&&t.length){for(let e=0;e<t.length;e++)for(let n=0;n<t[e].cssRules.length;n++)if(t[e].cssRules[n].selectorText==="body.g-branded"){Wh=t[e].cssRules[n].cssText,t[e].deleteRule(n);break}}}else if(Wh){let t=document.createElement("style");t.appendChild(document.createTextNode(Wh)),document.head.appendChild(t)}};vt();Si();Xt();var sx="Посмотреть больше машин на Дроме",rx="Посмотреть ещё";V();G();Mi();var vP=(i,t)=>C`
<a class=${Ft({"drom-item":!0,"drom-item--index":t.alternative,"ctx-dark":t.alternative})}
  href=${i.link} rel="noopener" target="_blank" data-ym-target="${t.metrikaTarget}_click">
  ${Se({images:[i.image]},2,{size:{width:16,height:9},className:"is-rounded u-vignette drom-item__pic"})}
  <div class="drom-item__location">${i.city}</div>
  <h4 class="drom-item__caption">${i.caption}, ${i.productionYear}</h4>\n
  <div class="drom-item__price">${i.price}</div>
</a>
`,ax=(i,t)=>A(void 0,null,function*(){let{url:e}=i.dataset;if(!e)return;let n=yield R(e,t,{silent:!0});J(rt(n.offers,o=>o.link,o=>vP(o,n)),i),n.searchLink||i.after(P("a",{className:n.alternative||n.newDesign?"x-box-more":"c-block__more",href:n.searchLink,rel:"noopener",target:"_blank","data-ym-target":`${n.metrikaTarget}_click`},d2Env.isMobile||n.newDesign?rx:sx))});var As=class{constructor(t,e){this.root=t;this.providersSelectors=e;this.inited=!1;this.type=this.root.dataset.type,this.providers={},this.syncTargetValueWithProviders=this.syncTargetValueWithProviders.bind(this),this.syncProvidersValuesWithTarget=this.syncProvidersValuesWithTarget.bind(this)}isSupported_(){let t=document.createElement("input"),e="a";return t.setAttribute("type",this.type),t.setAttribute("value",e),t.value!==e}createProviders_(){Object.entries(this.providersSelectors).forEach(([t,e])=>{this.providers[t]=this.root.querySelector(e)})}forEachProvider(t){Object.values(this.providers).forEach(t)}attachAdditionalAttributes_(){let{max:t,min:e}=this.root.dataset;t&&(this.target.max=t),e&&(this.target.min=e)}init(){this.isSupported_()&&(this.inited=!0,this.target=document.createElement("input"),this.target.className="c-native-control__target",this.target.type=this.type,this.root.appendChild(this.target),this.createProviders_(),this.attachAdditionalAttributes_(),this.syncTargetValueWithProviders(),this.syncProvidersValuesWithTarget=this.syncProvidersValuesWithTarget.bind(this),this.syncTargetValueWithProviders=this.syncTargetValueWithProviders.bind(this),this.target.addEventListener("change",this.syncProvidersValuesWithTarget),this.forEachProvider(t=>{t.addEventListener("change",this.syncTargetValueWithProviders)}))}destroy(){this.inited&&(this.inited=!1,this.target.remove(),this.target.removeEventListener("change",this.syncProvidersValuesWithTarget),this.forEachProvider(t=>{t.removeEventListener("change",this.syncTargetValueWithProviders)}))}syncTargetValueWithProviders(){this.forEachProvider(t=>this.target.value=t.value)}syncProvidersValuesWithTarget(t){let{value:e}=t.target;this.forEachProvider(n=>n.value=e)}};var Cs=(i="")=>i.startsWith("0")?i.substr(1):i,Ss=(i="")=>i.padStart(2,"0");var Ms=class extends As{syncTargetValueWithProviders(){let t=`${this.providers.year.value}-${Ss(this.providers.month.value)}-${Ss(this.providers.date.value)}`,e=!Number.isNaN(Date.parse(t));this.target.value=e&&t||this.target.max||""}syncProvidersValuesWithTarget(t){let{value:e}=t.target;if(!this.validateValue(e)){this.resetControl();return}let[n,o,s]=e.split("-");this.providers.date.value=Cs(s),this.providers.month.value=Cs(o),this.providers.year.value=n}validateValue(t){if(!t)return!1;let{max:e,min:n}=this.target,o=Date.parse(t);return!(e&&o>Date.parse(e)||n&&o<Date.parse(n))}resetControl(){setTimeout(()=>{this.syncTargetValueWithProviders(),this.target.blur(),this.target.focus()},0)}};var lx=i=>{new Ms(i,{date:'[name="birthDateDay"]',month:'[name="birthDateMonth"]',year:'[name="birthDateYear"]'}).init()};V();Y();var ma=class extends H{parsedInit(){this.button=this.slot("button"),this.toggle(!0),this.element.addEventListener("click",e=>{e.target instanceof HTMLInputElement&&e.target.type==="checkbox"&&this.toggle(!0)}),this.button&&this.button.addEventListener("click",()=>this.toggle())}toggle(e){let n=et('input[type="checkbox"]',this.element),s=n.reduce((r,a)=>r+(a.checked?0:1),0)>1;e||n.forEach(r=>{r.checked=s}),this.button&&(this.button.textContent=this.button.dataset[`${(e?s:!s)?"":"un"}checkcaption`])}};$();var EP="daterender",bP=(i,t)=>new Date(t,i+1,0).getDate(),_P=i=>{let t=i.node(),e=t.form,n=/(Day|Month|Year)/,o=e[t.name.replace(n,"Day")],s=e[t.name.replace(n,"Month")],r=e[t.name.replace(n,"Year")];if(!s.value||!r.value)return;let a=Number(o.value),l=Number(s.value)-1,c=Number(r.value),d=bP(l,c),p=Math.min(a,d);o.options.length=o.options[0].value==="1"?0:1;for(let u=1;u<=d;u++){let m=document.createElement("option");o.appendChild(m),m.value=String(u),m.textContent=String(u),m.selected=u===p}},cx=()=>{T.registerHandlers(EP,{update:_P})};vt();Xt();te();var dx="Дата",mx=["января","февраля","марта","апреля","мая","июня","июля","августа","сентября","октября","ноября","декабря"];Y();Ce();pa();Ne();var Vh=(i,t)=>Array.from({length:t-i+1},(e,n)=>i+n),TP=(i,t)=>new Date(t,i+1,0).getDate(),xP=(i,t,e,n,o)=>C`
<form class="x-box x-box--ghost">
  <div class="x-form__item">
    <div class="x-form__body">
      <select class="x-select" name="day" @change=${o}>
        ${rt(t,s=>s,s=>C`<option value=${s} .selected=${s===i.day}>${s}</option>`)}
      </select>
    </div>
  </div>
  <div class="x-form__item">
    <div class="x-form__body">
      <select class="x-select" name="month" @change=${o}>
        ${rt(e,s=>s,s=>C`<option value=${s} .selected=${s===i.month}>${mx[s]}</option>`)}
      </select>
    </div>
  </div>
  <div class="x-form__item">
    <div class="x-form__body">
      <select class="x-select" name="year" @change=${o}>
        ${rt(n,s=>s,s=>C`<option value=${s} .selected=${s===i.year}>${s}</option>`)}
      </select>
    </div>
  </div>
  <button class="c-button c-button--primary c-button--l u-100 o-t-l" type="submit">
    ${ke}
  </button>
  <button class="c-button c-button--l u-100 o-t-s" type="button" data-action="dialog.close">
    ${vs}
  </button>
</form>
`,ha=class extends H{parsedInit(){this.form=this.element.closest("form"),this.prefix=this.element.dataset.prefix||"",this.minDate=this.element.dataset.min?new Date(this.element.dataset.min):new Date(1970,0,1),this.maxDate=this.element.dataset.max?new Date(this.element.dataset.max):new Date,this.change=this.change.bind(this),this.element.addEventListener("click",()=>this.showForm())}field(e){return this.form[`${this.prefix}${e}`]}value(e,n=0){return this.field(e)&&Number(this.field(e).value)||n}setValue(e,n){this.field(e)&&(this.field(e).value=String(n)||"",_e(this.field(e)))}getState(){return{day:this.value("Day"),month:this.value("Month",1)-1,year:this.value("Year")}}showForm(){this.state=this.getState();let{state:e}=this,n=new Ct({anchor:this.element,className:"c-modal-popscreen",title:dx},!1,!0);this.container=n.element,this.update(),n.setSubmitHandler(()=>{this.setValue("Year",e.year),this.setValue("Month",e.month+1),this.setValue("Day",e.day);let o=this.slot("date");return o.innerText=new Intl.DateTimeFormat("ru",{year:"numeric",month:"long",day:"numeric"}).format(new Date(e.year,e.month,e.day)),Promise.resolve()}),n.show()}update(){let{state:e,minDate:n,maxDate:o}=this,s=new Date(e.year,e.month,e.day),r=new Date(s.getTime());r.setDate(1);let a=(r<this.minDate?n:r).getDate();r.setMonth(r.getMonth()+1),r.setDate(0);let l=(o<r?o:r).getDate();r.setMonth(0);let c=(r<n?n:r).getMonth();r.setFullYear(r.getFullYear()+1),r.setMonth(-1);let d=(o<r?o:r).getMonth();e.month=bi(e.month,c,d);let p=n.getFullYear(),u=o.getFullYear(),m=Vh(a,l),h=Vh(c,d),g=Vh(p,u);J(xP(e,m,h,g,this.change),this.container)}change(e){let n=e.target,{name:o}=n,{state:s}=this,r=Number(n.value)||0;o==="year"?s.year=r:o==="month"?(s.month=r,s.day=Math.min(s.day,TP(s.month,s.year))):o==="day"&&(s.day=r),this.update()}};V();Y();Z();var hx="is-invalid",wP="is-empty",LP="field-validation-error",px=i=>{if(i){let t=U(LP,i);t&&M(t,!1),i.classList.remove(wP,hx)}},ua=class extends H{parsedInit(){let t=this.element.tagName==="FORM"?this.element:this.element.querySelector("form");if(!t)throw Error(`data-role="form": can't find form.`);if(t.addEventListener("change",this),t.addEventListener("input",this),t.addEventListener("this",this),d2Env.isMobile){let n=et(".c-form__row .c-form__legend").map(a=>a.offsetWidth),s=`.c-form__row .c-form__legend{flex:0 0 ${Math.ceil(Math.max(...n))}px;}`,r=document.createElement("style");r.appendChild(document.createTextNode(s)),document.head.appendChild(r)}}handleEvent(t){let e=t.target;if(!e)return;let n=this.slot("submit");n&&(n.disabled=!1);let o=At(e,"c-form__item")||At(e,"x-form__item");e.form&&(d2Env.isMobile||At(e,"x-form__item"))&&(px(o),e.form.querySelectorAll(`.x-form__item.${hx}`).forEach(s=>px(s)))}};$();X();G();var qh="check-password",AP=150,ux,Zi,CP=i=>{clearTimeout(ux);let t=i.node();ux=setTimeout(()=>A(void 0,null,function*(){let e=t.dataset.passwordCheckUrl;if(!e)return;let n=yield R(e,qh,{method:"POST",silent:!0,body:{password:t.value}});if(!Zi){let o=t.dataset.style==="notes",s=x(qh,"message");o&&s?(Zi=s,Zi.classList.add("f-check"),Zi.classList.add("f-check--notes")):(Zi=document.createElement("div"),Zi.className=`f-check ${o?"f-check--notes c-form__notes":"f-item f-item--block"}`,(o?t.parentElement:t).after(Zi))}Zi.innerHTML=n.message,Zi.classList.toggle("not-valid",!n.isValid),Zi.classList.toggle("valid",!!n.isValid)}),AP)},fx=()=>{T.registerHandlers(qh,{check:CP})};V();Y();wp();Ro();gt();pd();var IP="/ajax/geo.cshtml",wx=(i,t)=>{let e=new URLSearchParams(window.location.search);e.delete("city"),e.delete("country"),i&&t&&e.set(i,t);let n=e.toString(),o=()=>{window.location.href=n?`?${n}#filter`:window.location.pathname};d2Env.isApp?(wr("modal-close"),setTimeout(o,100)):o()},OP=(i,t)=>wt(N({},t),{render(e){let n=P("div","x-form__body",P("div","x-form__text",t.caption,t.extra&&P("div","x-form__secondary x-secondary-color",t.extra)));e.appendChild(n)},select(e){e.value=t.caption}}),ga=class extends H{init(){let e=this.element.dataset.context||"",n=this.element.dataset.selling||"",o=`${IP}?_=r&s=${n}&context=${e}`;this.hasFilter=this.element.value!=="",this.update=this.update.bind(this),this.clear=this.clear.bind(this),d2Env.isMobile?this.element.addEventListener("focus",()=>{if(this.isDialogActive)return;let s=this.closestSlot(this.element,"search"),r=s.parentElement,a=this.element.placeholder;this.isDialogActive=!0;let l=this.element.value,c=Te({anchor:s,title:a}),d=c.contentElement;c.addEventListener("hide",()=>{s.className="c-search",this.element.className="c-input c-input--alt c-search__input c-catalog-search u-mobile-100",this.element.placeholder=a,s.lastElementChild.className="c-search__icon",this.element.value=l,r.prepend(s),setTimeout(()=>{this.isDialogActive=!1,this.ac.removeEventListener("update",this.update),this.ac.removeEventListener("dismiss",Mt),this.ac.dispose()},0)}),this.ac&&this.ac.dispose(),this.ac=new Fe(o,this.element,!1,!1,d),this.ac.setRowBuilder(OP);let p=this.ac.getRenderer();p.className="x-box x-box--narrow o-t-s",p.rowClassName="x-form__item",p.activeClassName="is-active",this.ac.addEventListener("update",this.update),this.ac.addEventListener("dismiss",Mt),this.ac.setToken(l),this.ac.setTarget(s),this.ac.update(!0),s.className="x-search",this.element.className="x-search__input",this.element.placeholder="",s.lastElementChild.className="x-search__icon",d.appendChild(P("div","x-box o-t",P("div","x-search",s))),this.element.focus(),setTimeout(()=>{this.element.setSelectionRange(0,l.length)},0)}):(this.ac=new Fe(o,this.element),this.ac.setRowBuilder(Is),this.ac.getRenderer().setWidthProvider(this.element,0,this.element),this.ac.addEventListener("update",this.update),this.element.addEventListener("input",this.clear),this.element.addEventListener("blur",this.clear),this.element.addEventListener("focus",()=>{this.element.value===""&&this.ac.update(!0)}))}clear(){this.element.value||(this.hasFilter?wx():(this.ac.setTarget(this.element),this.ac.setToken(""),d2Env.isMobile||this.ac.dismiss()))}update(e){let{row:n}=e.detail;if(!n){this.clear();return}let{id:o}=n;wx(n.kind||"city",o)}};Y();var Io=[],va=class extends H{parsedInit(){this.select=this.element.querySelector("select"),this.select.addEventListener("change",()=>this.change());let e=this.slot("remove");e&&e.addEventListener("click",()=>this.remove())}parsed(){Io.push(this.select),this.update()}disconnected(){let e=Io.indexOf(this.select);e!==-1&&(Io.splice(e,1),this.update())}change(){let e=Io[Io.length-1];if(e.selectedIndex!==0){let n=this.root(e),o=n.cloneNode(!0);n.after(o),e.options[0].remove()}this.update()}remove(){this.element.remove(),this.update()}update(){let e=Io.map(n=>n.value);Io.forEach(n=>{for(let o of n.options)o.disabled=o.value!==n.value&&Boolean(o.value&&e.includes(o.value))})}};$();X();Z();var Lx="lg-feedback",DP=i=>{let t=i.node(),e=t.options[t.selectedIndex].dataset.feedback==="",n=x(Lx,"container");M(n,e)},Ax=()=>{T.registerHandlers(Lx,{toggle:DP})};V();G();In();var HP="nickname",kP="/ajax/nickname.check.cshtml",NP=600,PP=(i,t)=>A(void 0,null,function*(){let e=t.value;if(!e){i.textContent="";return}let{available:n,message:o}=yield R(kP,HP,{silent:!0,body:{nickname:e}});i.classList.toggle("is-in-use",!n),i.classList.toggle("is-available",n),i.textContent=o}),Cx=i=>{let t=i.dataset.style==="new",e=P("div",`f-check ${t?"f-check--new":"f-item"}`);i.after(e),i.addEventListener("input",ze(()=>PP(e,i),NP))};vt();Si();Xt();var Sx="{VoteCount, plural, one {# голос} many {# голосов} other {# голоса}}{AbstentionCount, plural, =0 {} one {, # воздержался} other {, # воздержалось}}";Y();Me();G();Re();var FP=i=>C`
<div class=${Ft({"x-poll__result":!0,"is-active":i.selected})} style="--percentage:${i.percentage}">
  <div class="x-poll__value">${i.percentage}</div>
  <div class="x-poll__option">
    ${$e(i.text)} <span class="c-counter">${i.voteCount}</span>
  </div>
</div>
`,Mx=(i,t)=>C`
<div class="x-poll x-poll--post" style="--percentage-base:${i.percentageBase}">
  <div class="x-box is-small">
    <h2 class="x-header o-b-xs">${t}</h2>
    ${rt(i.answers,e=>e.id,FP)}
    <div class="x-poll__overall">
      ${it(Sx,{VoteCount:i.voteCount,AbstentionCount:i.abstentionCount})}
    </div>
  </div>
</div>
`,Ea=class extends H{init(){this.element.addEventListener("click",e=>this.click(e)),this.element.addEventListener("submit",e=>this.submit(e))}click(e){this.button=e.target.closest("button")}submit(e){return A(this,null,function*(){e.preventDefault();let n=e.submitter||this.button;if(!n)return;let o=yield R(this.element.action,{method:"POST",anchorEl:n,body:{[n.name]:n.value}}),s=this.slot("text").textContent||"",r=wt(N({},o),{answers:o.answers.map(l=>wt(N({},l),{percentage:0}))}),a=document.createElement("div");J(Mx(r,s),a),this.element.replaceWith(a.firstElementChild),setTimeout(()=>{J(Mx(o,s),a)})})}};var Rx="Удалить опрос?",Ix="Опрос и его результаты будут удалены без возможности восстановления.",Ox="Редактировать опрос?",Dx="После редактирования опроса, его результаты будут удалены без возможности восстановления.";V();Y();Ce();Z();gt();var Hx=2,ba=i=>ct("textarea",i),_a=class extends H{parsedInit(){this.maxItems=Number(this.element.dataset.max||10),this.form=this.slot("form"),this.form.addEventListener("input",()=>this.input()),this.form.addEventListener("click",o=>this.remove(o));let e=this.slot("delete"),n=this.slot("edit");e&&n&&(e.addEventListener("click",o=>this.delete(o)),n.addEventListener("click",o=>this.edit(o)))}input(){let e=this.slots("item"),n=e[e.length-1];if(ba(n).value){if(e.length<this.maxItems){let s=n.cloneNode(!0);ba(s).value="",n.after(s)}}else e.length>Hx&&!ba(n.previousElementSibling).value&&n.remove()}remove(e){if(!(e.target instanceof HTMLButtonElement))return;let n=this.slots("item"),o=this.closestSlot(e.target,"item");if(n.length<=Hx){let s=ba(o);s.value="",s.blur()}else o.remove(),_e(this.element);this.input()}restore(){this.slot("results").remove(),M(this.form,!0),this.form.scrollIntoView({behavior:"smooth",block:"nearest"});let e=this.element.querySelector('[name="Poll.Overwrite"]');e&&(e.value="true",_e(e))}delete(e){return A(this,null,function*(){let n=e.target;(yield dt(Rx,Ix,n,n.textContent))&&(this.form.querySelector("textarea").value="",this.slots("item").forEach((s,r)=>{r<=1?ba(s).value="":s.remove()}),this.restore())})}edit(e){return A(this,null,function*(){let n=e.target;(yield dt(Ox,Dx,n,n.textContent))&&this.restore()})}};vt();Si();Xt();Wr();Y();Ji();In();var ya=class extends H{parsedInit(){this.countryEl=this.slot("country"),this.regionEl=this.slot("region"),this.country=this.country||this.countryEl.value,this.region=this.region||this.regionEl.value,queueMicrotask(()=>{this.inited=!0}),this.countryEl.addEventListener("change",()=>{this.country=this.countryEl.value,this.region&&(this.region="")}),this.regionEl.addEventListener("change",()=>{this.region=this.regionEl.value}),this.update=ze(()=>this.updateInternal(),20)}get country(){return this.element.dataset.country||""}set country(e){this.element.dataset.country=e}get region(){return this.element.dataset.region||""}set region(e){this.element.dataset.region=e}get observedAttributes(){return["data-country","data-region"]}attributeChanged(){this.inited&&this.countryEl&&this.regionEl&&this.update()}updateInternal(){return A(this,null,function*(){let{country:e,region:n,countryEl:o,regionEl:s}=this;s.disabled=!0,s.selectedIndex=0;let r=!1;if(e){o.value=e;let l=yield j_.get(e,o);r=l.region;let c=s.options[0].value===""&&s.options[0].text,d=[...l.regions];c&&d.unshift({id:"",caption:c}),ii(s),J(rt(d,p=>p.id,p=>C`<option class=${Ft({"is-important":!!p.important})} value=${p.id}>${p.caption}</option>`),s)}else o.selectedIndex=0;s.disabled=!e,n?s.value=n:s.selectedIndex=0;let a=this.slot("region-label");a&&(a.textContent=a.dataset[r?"region":"city"]),this.element.dispatchEvent(new CustomEvent("change",{bubbles:!0,detail:this}))})}};$();V();Ce();var kx=new WeakSet,Nx=i=>{let t=i.actionName()==="focus",e=i.node();e.dataset.addPlaceholder||(e.dataset.addPlaceholder=e.placeholder);let n=e.form,o=e.dataset.radio;e.parentElement.classList.add("is-checked"),e.placeholder=t?e.dataset.placeholder:e.dataset.addPlaceholder,t&&et(`[name="${o}"]`,n).forEach(s=>{s.checked=!1}),kx.has(e)||(kx.add(e),n.addEventListener("change",()=>{e.parentElement.classList.toggle("is-checked",!xn(n,o))}))},Px=()=>{T.registerHandlers("rich-radiogroup",{focus:Nx,blur:Nx})};V();Y();gt();var $x="is-active",Ta=class extends H{parsedInit(){this.selectEl=ct("select",this.element),this.selectEl.addEventListener("change",()=>{d2Env.isMobile?this.resizeSelect():this.updateCaption(this.selectEl.options[this.selectEl.selectedIndex].text)}),d2Env.isMobile?this.resizeSelect():this.element.addEventListener("click",()=>this.open())}updateSelect(e){this.selectEl.selectedIndex=e,this.selectEl.dispatchEvent(new Event("change"))}updateCaption(e){let n=this.slot("caption");n&&(n.textContent=e)}resizeSelect(){if(this.element.dataset.wide==="")return;let e=this.selectEl.cloneNode(!1);e.add(this.selectEl.options[this.selectEl.selectedIndex].cloneNode(!0)),e.style.cssText="position:absolute;width:auto;right:0;visibility:hidden",this.selectEl.after(e),this.selectEl.style.width=`${e.offsetWidth}px`,e.remove()}open(){if(this.isOpen)return;this.isOpen=!0;let e=document.createElement("div"),n=$t(e,this.element,{classNames:["c-bubble--select"],placement:"bottom",minZIndex:3,offset:[0,9],noAnimation:!0,noFlip:!0});Array.from(this.selectEl.options).forEach((o,s)=>{let r=document.createElement("div");r.className="c-rich-select__option",r.textContent=o.text,r.addEventListener("click",()=>{this.updateCaption(o.text),this.updateSelect(s),n.hide()},{once:!0}),e.appendChild(r)}),this.element.classList.add($x),n.addEventListener("hide",()=>{this.element.classList.remove($x),setTimeout(()=>{this.isOpen=!1},200)},{once:!0}),window.addEventListener("scroll",()=>n.hide(),{once:!0,passive:!0})}};var Yh,Zh=i=>{let t=i.cloneNode(!1);delete t.dataset.role,t.add(i.options[i.selectedIndex].cloneNode(!0)),t.style.cssText="position:absolute;visibility:hidden",i.after(t),i.style.width=`${t.offsetWidth}px`,t.remove()},Fx=i=>{Zh(i),Yh=new IntersectionObserver(()=>{i.offsetWidth&&Yh.unobserve(i),Zh(i)},{threshold:0}),Yh.observe(i),i.addEventListener("change",()=>Zh(i))};var Kh=i=>{i.classList.toggle("is-placeholder",!i.classList.contains("no-placeholder")&&i.selectedIndex===0&&i.options[0].value==="")},Bx=i=>{Kh(i),i.addEventListener("change",()=>Kh(i)),i.addEventListener("forced-change",()=>Kh(i))};Y();var zx,jx,hd,Wx=(i,t)=>{i.classList.toggle("c-button--xl",t),i.classList.toggle("u-mobile-100",t),i.classList.toggle("u-100",t)},Ux=i=>{i.forEach(t=>Wx(t.target.querySelector("button"),t.isIntersecting))},Vx=(i,t)=>{Wx(t,!0);let e=d2Env.isApp&&!i.closest(".c-modal")?jx:zx;t.disabled?e.unobserve(i):e.observe(i),i.classList.toggle("is-disabled",t.disabled)},UP=()=>{if(!hd){if(zx=new IntersectionObserver(Ux,{threshold:1,rootMargin:"-16px 0px"}),d2Env.isApp){let i=document.documentElement.classList.contains("bottom-inset")?32:0;jx=new IntersectionObserver(Ux,{threshold:1,rootMargin:`-${16+50+i}px 0px`})}hd=new MutationObserver(i=>Vx(i[0].target.parentElement,i[0].target))}},xa=class extends H{parsed(){UP(),this.element.classList.add("is-sticky");let t=this.element.querySelector("button");hd.observe(t,{attributes:!0,attributeFilter:["disabled"]}),Vx(this.element,t)}disconnected(){hd.disconnect()}};od();var qx=i=>{new zn(i)};$();Le();var Gx="Ссылка",Jx="Вставить видеоролик",Yx="Вставить картинку",Zx="Ссылка на пользователя",Kx="Ссылка (URL)",Xx="Текст ссылки",Qx="Ссылка на видеоролик (YouTube, Vimeo или Rutube)",tw="Подпись к картинке",ew="Ник пользователя",iw="Вставить";V();Y();Ce();Re();Vt();gt();var ud=i=>i.value.substring(i.selectionStart,i.selectionEnd),nw=i=>/^https?:\/\//i.test(i),wa=(i,t,e,n,o)=>{i.focus();let{scrollTop:s,selectionStart:r,selectionEnd:a,value:l}=i,c=l.substring(0,r),d=l.substring(a),p=l.substring(r,a),u=c,m=d,h=o?"":p;n&&(u=c.trimRight()+(c?`

`:""),m=(d?`

`:"")+d.trimLeft(),h=h.trim()),u+=t,m=e+m;let g=u.length-c.length,f=h.length-p.length;i.value=u+h+m,i.selectionStart=r+g,i.selectionEnd=a+g+f,i.scrollTop=s,i.focus(),_e(i)},La=(i,t,e,n,o)=>{let s=`name="${t}" id="dlg.${t}" ${n?" data-autofocus":""}`,r=Bt(e);return`
<div class="c-dialog-form__field">
<label class="c-dialog-form__legend" for="dlg.${t}">${i}</label>
${o?`<textarea class="c-textarea" ${s}>${r}</textarea>`:`<input class="c-input" type="text" ${s} value="${r}">`}
</div>
`},fd=(i,t,e,n)=>{let o=e==="link"?Gx:e==="video"?Jx:e==="pic"?Yx:Zx,s=`
<form class="c-dialog-form" novalidate data-keysubmit data-action="submit:toolbar.submit">
  <input type="hidden" name="_" value="${e}">
  ${n}
  <div class="o-group o-group--m o-group--end o-group--wide c-dialog-buttons">
    <button class="c-button c-button--m-no-padding" name="submitbtn" type="submit">${iw}</button>
  </div>
</form>
    `;Te({anchor:t,className:"c-dialog-toolbar",title:o,html:s}).addEventListener("hide",()=>i.focus(),{once:!0})},jP=(i,t)=>{let e=i==="bold"?"b":i==="italic"?"i":"s";wa(t,`<${e}>`,`</${e}>`)},WP=(i,t)=>{i.focus();let e=ud(i),n=nw(e),o=n?e:"",s=n?"":e,r=La(Kx,"p",o,!o)+La(Xx,"text",s,!!o);fd(i,t,"link",r)},VP=(i,t)=>{i.focus();let e=ud(i),n=nw(e)?e:"",o=La(Qx,"p",n,!0);fd(i,t,"video",o)},qP=(i,t)=>{i.focus();let e=ud(i);e.indexOf("@")===0&&(e=e.substring(1));let n=La(ew,"p",e,!0);fd(i,t,"user",n)},GP=(i,t)=>{let e=t._.value,n=t.p.value,o=Bt(n);switch(e){case"link":{let s=t.text.value;wa(i,`<a href="${o}">${s}</a>`,"",void 0,!0);break}case"video":n&&wa(i,n,"",!0,!0);break;case"pic":{let s=t.index.value;wa(i,`<img src="${s}" title="${o}">`,"",!0,!0);break}case"user":o&&(o.indexOf("@")===0&&(o=o.substring(1)),wa(i,`<user name="${o}">`,"",void 0,!0))}Mt()},JP=(i,t)=>{let e=Pt("imagelist-item",i.form),n=String(t.index||""),o=e.find(s=>s.dataset.index===n);if(o){i.focus();let s=ud(i),a=`
<div class="imagelist-item"><div class="imagelist-pic-wrapper">${U("imagelist-pic-wrapper",o).innerHTML}</div></div>
<input type="hidden" name="index" value="${n}"">
${La(tw,"p",s,!0,!0)}
    `;fd(i,o,"pic",a)}},YP=(i,t,e)=>{let n=i.value,o=/<img[^>]+>/igm,s=/src="\$?([^"]*)"/i,r,a=[],l=0,c;for(;r=o.exec(n);)if(c=s.exec(r[0]),c&&c.length&&c.length===2){let d=r[0].length,p=t[Number(c[1])-1],u=e.indexOf(p),m=r[0].replace(s,`src="${u>=0?u+1:""}"`);a.push(n.substring(l,o.lastIndex-d),m),l=o.lastIndex}a.push(n.substring(l)),i.value=a.join("")},Aa=class extends H{init(){let t=this.element.dataset.type,n=this.element.closest("form")[this.element.dataset.target],o=s=>{let r=s.node();switch(s.actionName()){case"bold":case"italic":case"strike":jP(s.actionName(),n);break;case"link":WP(n,r);break;case"video":VP(n,r);break;case"user":qP(n,r);break;case"submit":yt(s),GP(n,r)}};T.registerHandlers(this.role,{bold:o,italic:o,strike:o,link:o,video:o,user:o,submit:o}),st.subscribe("imagelist-link",(s,r)=>{s===t&&JP(n,r)}),st.subscribe("imagelist-sync",(s,r,a)=>{if(s===t){let l=r.map(d=>d.id),c=a.map(d=>d.id);YP(n,l,c)}})}};$();V();Vi();V();var Os=(()=>{let e="(?:[-\\+]?\\d*\\.\\d+%?)|(?:[-\\+]?\\d+%?)",n=`[\\s|\\(]+(${e})[,|\\s]+(${e})[,|\\s]+(${e})\\s*\\)?`,o=`[\\s|\\(]+(${e})[,|\\s]+(${e})[,|\\s]+(${e})[,|\\s]+(${e})\\s*\\)?`;return{CSS_UNIT:new RegExp(e),rgb:new RegExp(`rgb${n}`),rgba:new RegExp(`rgba${o}`),hex3:/^#?([0-9a-fA-F]{1})([0-9a-fA-F]{1})([0-9a-fA-F]{1})$/,hex6:/^#?([0-9a-fA-F]{2})([0-9a-fA-F]{2})([0-9a-fA-F]{2})$/,hex4:/^#?([0-9a-fA-F]{1})([0-9a-fA-F]{1})([0-9a-fA-F]{1})([0-9a-fA-F]{1})$/,hex8:/^#?([0-9a-fA-F]{2})([0-9a-fA-F]{2})([0-9a-fA-F]{2})([0-9a-fA-F]{2})$/}})(),oi=i=>parseInt(i,16),ow=i=>oi(i)/255,ZP=i=>{if(!i)return;if(i=i.trim().toLowerCase(),i==="transparent")return{r:0,g:0,b:0,a:0};let t;if(t=Os.rgb.exec(i))return{r:Number(t[1]),g:Number(t[2]),b:Number(t[3])};if(t=Os.rgba.exec(i))return{r:Number(t[1]),g:Number(t[2]),b:Number(t[3]),a:Number(t[4])};if(t=Os.hex8.exec(i))return{r:oi(t[1]),g:oi(t[2]),b:oi(t[3]),a:ow(t[4])};if(t=Os.hex6.exec(i))return{r:oi(t[1]),g:oi(t[2]),b:oi(t[3])};if(t=Os.hex4.exec(i))return{r:oi(`${t[1]}${t[1]}`),g:oi(`${t[2]}${t[2]}`),b:oi(`${t[3]}${t[3]}`),a:ow(`${t[4]}${t[4]}`)};if(t=Os.hex3.exec(i))return{r:oi(`${t[1]}${t[1]}`),g:oi(`${t[2]}${t[2]}`),b:oi(`${t[3]}${t[3]}`)}};var gd=i=>{function t(o){let s=o.toString(16);return s.length===1?`0${s}`:s}function e(o){return`#${t(o.r)}${t(o.g)}${t(o.b)}`}if(!i)return i;let n=ZP(i);return e(n)};var Ds=i=>{if(!d2Env.isApp)return i;let t=i.indexOf("base64");return t!==-1?i.substring(t+7):i};var KP="src",XP="lowsrc";function vd(i){let t=i.querySelectorAll("img"),e=t[t.length-1],n=gd(i.style.backgroundColor),o=e.dataset[KP]||e.src||"",s=d2Env.isApp?e.dataset[XP]||e.src||"":e.src||"",{size:r}=i.dataset,a={element:e,url:Ds(o)};if(r){let[l,c]=r.split(",");a.width=Number(l),a.height=Number(c)}return n&&(a.color=n),s&&(!d2Env.isApp||s.indexOf("data:image/png")===0)&&(a.inline=Ds(s)),a}Z();var QP="js-gallery",sw="c-lightbox-anchor",rw="o-img",Xh=i=>ct(`.${rw}`,i),aw=i=>{let t=At(i,QP);return t?et(`.${sw} > .${rw}`,t):[Xh(i)]},lw=i=>{let{color:t,inline:e,width:n,height:o}=vd(i),s=At(i,sw),r=s&&(s.dataset.size||"").split(/\s*,\s*/),a=r&&r.length===2?Number(r[0]):0,l=r&&r.length===2?Number(r[1]):0,c={url:Ds(s&&s.href||""),width:a||n||0,height:l||o||0};return N(N({images:[c]},t&&{color:t}),e&&{inline:e})},cw=i=>{let[t,e]=(i.dataset.size||"0,0").split(",").map(s=>Number(s)),n={url:Ds(i.href),width:t,height:e},o=Je(i,"background-color");return N({images:[n]},o&&{color:gd(o)})},dw=i=>wt(N({},i),{images:i.images.map(t=>({url:t.url,w:t.width,h:t.height}))});var D1="__d2gallery",wu,Iw=i=>i&&i.getAttribute("itemprop")==="description"?i.innerHTML:void 0,H1=i=>{let t=i.nextElementSibling,e=Iw(t);if(e===void 0){let n=i.parentElement,o=n&&n.nextElementSibling;e=o?Iw(o):""}return e},k1=(i,t)=>{let e=t.map(H1);return i.map((n,o)=>e[o]!==null?Object.assign(n,{description:e[o]}):n)},Ow=i=>{let{trackTarget:t,thumb:e}=i.dataset,n=Xh(i),o=aw(i),s=e&&Pt(e),r=s&&s.length>0?s.map(cw):o.map(lw),a=(s?s.findIndex(l=>l.href===i.href):o.findIndex(l=>l===n))||0;if(d2Env.isApp){let l;if(d2Env.gallery){let d={pictures:k1(r.map(dw),o),selectedIndex:a},p=`${D1}${de()}`;window[p]=()=>JSON.stringify(d),l=`drive://gallery2?callback=${p}()`,wu&&delete window[wu],wu=p}else l=`drive://gallery?${r.map(d=>`image=${encodeURIComponent(d.images[0].url||"")}&`).join("")}index=${a}`;window.location.href=l}else Promise.resolve().then(()=>(Rw(),Mw)).then(l=>l.openPhotoswipe(r,a,t,s||o))};var N1="lightbox",P1=i=>{let t=i.node();Ow(t)},Dw=()=>{T.registerHandlers(N1,{zoom:P1})};$();V();X();var Lu="block",$1=i=>{let t=i.node(),e=lt(t,Lu,"container"),n=x(Lu,"more",e);n&&(Iv(n),t.remove())},Hw=()=>{T.registerHandlers(Lu,{more:$1})};Y();pa();var F1=0,B1=100,U1="#ccc",z1="#5fa03d",Au=class{constructor(t,e,n,o,s){this.percentage=n;this.strokeWidth=o.strokeWidth||4.16667,this.trailColor=o.trailColor||U1,this.inverted=o.inverted||!1,this.colors=s&&s.length>0?s:[{value:z1,threshold:100}];let r=document.createElementNS("http://www.w3.org/2000/svg","svg");this.trail=this.getPath(r,`${e}__trail`),this.trail.setAttribute("stroke",this.trailColor),this.path=this.getPath(r,`${e}__path`),this.update(),r.setAttribute("class",`${e}__progress`),r.setAttribute("viewBox","0 0 100 100"),r.appendChild(this.trail),r.appendChild(this.path),t.prepend(r)}setPercentage(t){this.percentage=t,this.update()}update(){let t=this.getColorByPercentage(this.percentage);this.path&&(this.path.setAttribute("style",this.getProgressStyle()+(this.percentage===0?";opacity: 0":"")),this.path.setAttribute("stroke",t.value))}getRadius(){return(100-this.strokeWidth)/2}getColorByPercentage(t){return this.colors.find(e=>e.threshold>=t)||this.colors[this.colors.length-1]}getPath(t,e){let n=this.getRadius(),o=this.inverted?"0":"1",s=`M 50,50 m 0,-${n} a ${n},${n} 0 1 ${o} 0,${2*n} a ${n},${n} 0 1 ${o} 0,-${2*n}`,r=document.createElementNS(t.namespaceURI,"path");return r.setAttribute("class",e),r.setAttribute("d",s),r.setAttribute("stroke-width",String(this.strokeWidth)),r.setAttribute("fill","none"),r}getProgressStyle(){let t=Math.PI*2*this.getRadius(),n=(1-bi(this.percentage,F1,B1)/100)*t;return`stroke-dasharray:${t-n}px,${n}px;stroke-dashoffset:0px;`}},j1=i=>(i||"").split(";").filter(t=>t.includes(":")).map(t=>t.trim().split(":")).map(t=>({value:t[1]||"",threshold:Number(t[0])||100})).sort((t,e)=>t.threshold>e.threshold?1:-1),Oa=class extends H{parsedInit(){let{animateFrom:e,percentage:n,pathColor:o,trailColor:s,strokeWidth:r,inverted:a}=this.element.dataset,l=Number(e),c=!Number.isNaN(l),d=Number(n)||0,p=j1(o);this.progress=new Au(this.element,"c-circular-progress",c?l:d,{trailColor:s,strokeWidth:Number(r),inverted:a===""},p),c&&setTimeout(()=>{this.progress.setPercentage(d)},100)}get observedAttributes(){return["data-percentage"]}attributeChanged(e,n,o){var s;(s=this.progress)==null||s.setPercentage(Number(o)||0)}};$();X();G();Pe();var Wn=class extends EventTarget{constructor(e,n){super();this.element=e;this.handleEl=n;this.noAnimation=!1;this.duration=0;this.collapse=!1;this.hideHandle=!1;this.show=!1;this.hide=!1;this.inited=!1;this.toggle=this.toggle.bind(this),n.addEventListener("click",this.toggle)}toggle(){let e=Et(this.element);e.expanded&&this.show||!e.expanded&&this.hide||(this.inited||(this.inited=!0,this.duration!==0&&(e.duration=this.duration),this.collapse&&(e.addEventListener("hide",()=>{this.element.remove(),this.dispose()},{once:!0}),e.addEventListener("show",()=>this.dispose(),{once:!0})),e.addEventListener("start",()=>{this.dispatchEvent(new Event("start"))}),e.addEventListener("end",()=>{this.dispatchEvent(new Event("end"))}),this.hideHandle&&e.addEventListener("end",()=>{this.handleEl.remove(),this.dispose()},{once:!0})),e.toggle(this.noAnimation))}dispose(){this.handleEl.removeEventListener("click",this.toggle)}};var Cu="closable-hint",W1=i=>{let t=i.node(),e=lt(t,Cu,"root"),{link:n}=e.dataset,o=new Wn(e,t);n&&o.addEventListener("start",()=>{R(n,Cu,{method:"POST",anchorEl:t,silent:!0})}),o.toggle()},kw=()=>{T.registerHandlers(Cu,{close:W1})};$();var Da=i=>{let t=i.node(),e=i.actionName(),n=t.dataset.skipphoto==="",[o,s]=t.dataset.params.split(":");td(t,e,s,o,{skipPhotos:n})},Nw=()=>{T.registerHandlers("complaint",{car:Da,commentspam:Da,user:Da,journal:Da,offer:Da})};Ho();Ho();var Fw=".UTZ",Hs=(i,t=0,e=1,n=0,o=0)=>new Date(Date.UTC(i,t,e,n,o,0,0)),ka=i=>-1*i.getTimezoneOffset()/60,Bw=i=>Math.floor(i.getTime()/1e3),Uw=(i,t)=>{let e=Hs(i,t),n=ka(e),o=-1;for(let s=0;s<50;s++){let r=Hs(i,t,s),a=ka(r);if(a!=n){let l=0;for(r=Hs(i,t,s-1),a=ka(r);o==-1;)if(r=Hs(i,t,s-1,0,l),a=ka(r),a!=n){r=Hs(i,t,s-1,0,l-1),o=l;break}else l++;return r}}},zw=(i=new Date().getFullYear())=>{let t=0,e=0,n=99;for(let r=0;r<12;r++){let a=Hs(i,r),l=ka(a);l>n?t=r-1:l<n&&(e=r-1),n=l}let o=Uw(i,e),s=Uw(i,t);return s&&o?[s,o]:void 0},jw=()=>{let i=Ha(Fw),t=i&&new Date(i.split(" ").map(Number)[0]*1e3),e=new Date;if((t?(e.getTime()-t.getTime())/(1e3*60*60*24):1/0)>1){let o=`${Bw(e)} ${e.getTimezoneOffset()}`,s=zw(),r=zw(e.getFullYear()+1);s&&r&&(o+=` ${s.concat(r).map(Bw).join(" ")}`),Di(Fw,o,365)}};var Ww="<strong>Запомнили!</strong> Так вашу страницу увидят читатели";Y();X();G();ve();Pe();_d();var Q1=500,t$=(i,t)=>{i==="user"&&Tt(t?"user_expand":"user_collapse")},Na=class extends H{parsedInit(){let{dataset:t}=this.element,e=this.slot("content"),n=this.slot("summary"),o=new Wn(e,n);t.noanim===""&&(o.noAnimation=!0),o.duration=200;let s;o.addEventListener("start",()=>{let r=Et(e).expanded;this.element.classList.toggle("is-active",r),t.ns&&(t$(t.ns,r),clearTimeout(s),s=setTimeout(()=>this.save(t.ns),Q1))})}save(t){let e=x(t,"config");if(e&&e.dataset.url){let n=on(this.role).filter(o=>o.dataset.ns===t).map(o=>({id:o.dataset.id,contentEl:this.slot("content",o)})).filter(o=>o.contentEl&&o.id).reduce((o,s)=>(o[s.id]=Et(s.contentEl).expanded,o),{});R(e.dataset.url,this.role,{method:"POST",silent:!0,body:n}).then(()=>{t==="user"&&ks(Ww,{type:t})})}}};Ho();var e$=".DPR",Jw=()=>{let i=window.devicePixelRatio||1;Di(e$,i,365)};var i$=[776,2359,2359,2367,2367,2984,3007,3021,3633,3635,3648,3657,4352,4449,4520],n$=[[128512,128591],[127744,128511],[128640,128767],[127462,127487],[9728,9983],[9984,10175],[65024,65039],12953,12951,12349,12336,9410,[9642,9643],9654,9664,[9723,9726],11013,11014,11015,11035,11036,11088,11093,8986,8987,9e3,9167,[9193,9203],[9208,9210],10548,10549,[8592,8703],[129280,129535],[65024,65039],[9100,9300]],Ns=(i,t,e)=>i>=t&&i<=e,o$=i=>i===" ",s$=i=>typeof i=="string"&&i.charCodeAt(0)===8205,Zw=i=>Boolean(i)&&Ns(i[0].charCodeAt(0),55296,56319),Ru=i=>{let t=i.charCodeAt(0)-55296,e=i.charCodeAt(1)-56320;return(t<<10)+e+65536},Yw=i=>Ns(Ru(i),127462,127487),r$=i=>Ns(Ru(i),127995,127999),a$=i=>typeof i=="string"&&Ns(i.charCodeAt(0),65024,65039),l$=i=>typeof i=="string"&&Ns(i.charCodeAt(0),8400,8447),c$=i=>typeof i=="string"&&i$.includes(i.charCodeAt(0)),d$=(i,t)=>{let e=t[i];if(!Zw(e)||i===t.length-1)return 1;let n=e+t[i+1],o=t.substring(i+2,i+5);return Yw(n)&&Yw(o)||r$(o)?4:2},m$=i=>{let t=!Zw(i[0])||i.length===1?i[0].charCodeAt(0):Ru(i.substring(0,2));return n$.some(e=>Ns(t,Array.isArray(e)?e[0]:e,Array.isArray(e)?e[1]:e))},p$=(i,t=1/0)=>{let e=[],n=0,o=0,s=0;for(;n<i.length&&o<t;){if(s+=d$(n+s,i),c$(i[n+s])&&s++,a$(i[n+s])&&s++,l$(i[n+s])&&s++,s$(i[n+s])){s++;continue}let r=i.substring(n,n+s);o$(r)||(e.push(r),o++),n+=s,s=0}return e},Kw=i=>{let t=i.textContent.replace(/\s+/g,""),e=p$(t,4),n=e.length>0&&e.length<=3&&e.every(o=>m$(o));i.classList.toggle("c-emoji-zoom",n)};var Xw=i=>{let t=e=>{let{scrollHeight:n,clientHeight:o}=i,{deltaY:s}=e;if(n>o){let{scrollTop:r}=i;(s<0&&r===0||s>0&&r>=n-o)&&e.preventDefault()}};i.addEventListener("wheel",t)};$();Ho();var Qw=()=>{T.registerHandlers("fv",{set:i=>{let t=i.node().dataset.forceto||"desktop";Di(".FV",t,-1),window.location.reload()}})};var tL=i=>{let t=Math.floor(Math.random()*7+1);i.style.backgroundImage=`url(/assets/images/sidebg/${t<10?`0${t}`:t}.png)`};X();Xe();var h$={google:"https://www.google.com/recaptcha/api.js?onload=__captchaCallback&render=explicit&hl=ru",yandex:"https://captcha-api.yandex.ru/captcha.js?render=onload&onload=__captchaCallback"},eL=!1,iL=!1,u$=i=>{let t=document.createElement("script");t.async=!0,t.src=h$[i],document.body.appendChild(t)},nL=(i,t)=>{let e=t==="yandex",n=!1,{form:o}=i,s=document.createElement("div");i.parentElement.after(s);let r=e?smartCaptcha.render(s,{sitekey:d2Env.smartCaptchaSiteKey,hl:"ru",invisible:!0,callback:()=>{n=!0,i.click()}}):grecaptcha.render(s,{sitekey:d2Env.recaptchaSiteKey,badge:"inline",size:"invisible",callback:()=>{n=!0,i.click()}});o.addEventListener("submit",a=>{Ui(o)&&!n&&(a.preventDefault(),(e?smartCaptcha:grecaptcha).execute(r)),n=!1})},oL=(i,t)=>{let e=i.dataset.type||"google";if(window.__captchaCallback=()=>{on(t).forEach(o=>{nL(o,e)}),iL=!0},!!d2Env.recaptchaSiteKey){if(!eL){eL=!0,u$(e);return}iL&&nL(i,e)}};var rL=(i,t)=>{if(!/^#[^ ]+$/.test(i))return!1;let e=document.getElementById(i.slice(1));return e&&(e.scrollIntoView(),t&&window.history.pushState(null,document.title,window.location.pathname+i)),!!e},sL=()=>{rL(window.location.hash)},aL=()=>{CSS.supports("scroll-margin-top","0")||(window.addEventListener("hashchange",sL),document.documentElement.addEventListener("click",i=>{let t=i.target;t.nodeName==="A"&&rL(t.href,!0)&&i.preventDefault()}),sL())};V();Y();var Pa=class extends H{parsedInit(){this.element.options[this.element.options.length-1].value===""&&(this.hiddenOptions=et("[data-hidden]",this.element).map(n=>({option:n,prev:n.previousSibling})),this.hiddenOptions.forEach(n=>{n.option.remove()}),this.lastSelectedValue=this.element.value)}connected(){this.element.addEventListener("change",this)}disconnected(){this.element.removeEventListener("change",this)}handleEvent(){this.element.selectedIndex===this.element.options.length-1?(this.disconnected(),this.hiddenOptions.forEach(e=>{e.prev&&e.prev.after(e.option)}),this.element.options[this.element.options.length-1].remove(),this.element.value=this.lastSelectedValue):this.lastSelectedValue=this.element.value}};$();X();var lL=(i,t,e=626,n=436)=>{let o=window.screen.width-e>>1,s=window.screen.height-n>>1;window.open(i,t,`left=${o},top=${s},width=${e},height=${n}`)};ve();Vt();kn();vt();ea();var cL="Добавьте пару слов от себя",Iu="Поделиться";G();Eo();Ne();var g$="share-drive",dL="/_api/share",v$=i=>C`
<form action=${dL} class="x-form o-t-s" novalidate data-role="form">
  <div class="x-form__item">
    <div class="x-form__body">
      <textarea class="x-textarea x-textarea--narrow" type="text" name="comment" data-autofocus
        placeholder="${cL}" data-role="taflexible" maxlength="128"></textarea>
    </div>
  </div>
  <div class="c-share-card">
    ${ni(i)}
  </div>
  <div class="x-form__submit u-extend" data-role="sticky-button">
    <button class="c-button c-button--primary c-button--xl u-100" type="submit">${Iu}</button>
  </div>
</form>
`,mL=(i,t)=>A(void 0,null,function*(){let[,e]=yield gi(()=>kt(dL,g$,{anchorEl:i,silent:!0,throwError:!0,body:{token:t}}));return e?new Promise(n=>{let o=new Ct({anchor:i,title:Iu,className:"c-modal__content--share"});J(v$(e),o.element),o.addEventListener("submit",s=>{let{detail:r}=s;n(r)}),o.setFormDataTransformer(s=>({token:t,comment:s.comment.value})),o.show()}):!1});var hL="share",E$={vk:"https://vk.com/share.php?url={url}",fb:"https://www.facebook.com/sharer/sharer.php?u={url}",ok:"https://connect.ok.ru/dk?st.cmd=WidgetSharePreview&service=odnoklassniki&st.shareUrl={url}",telegram:"https://t.me/share/url?url={url}",telegramapp:"tg://msg?url={url}&text={title}",whatsapp:"whatsapp://send?text={title}+{url}",viber:"viber://forward?text={title}+{url}"},uL={cjr:"logbook",ubr:"blog",gbr:"blog_community",us:"snap",c:"car"},b$=(i,t,e,n)=>A(void 0,null,function*(){let o=E$[t==="telegram"&&d2Env.isMobile?"telegramapp":t].replace("{url}",encodeURIComponent(n)).replace("{title}",encodeURIComponent(document.title));d2Env.isApp?window.location.href=o:lL(o,"d2share");let s=uL[e]||e||"";Tt(`${i==="self"?"self":""}share_${t}`,{from:s})}),pL=i=>{let t=i.actionName(),e=i.node(),{type:n,url:o}=lt(e,hL,"root").dataset;b$(t,e.dataset.target,n,o)},_$=i=>A(void 0,null,function*(){let t=i.node();if(ti(t))return;let e=yield mL(t,t.dataset.token);if(e){t.classList.add("is-active");let n=t.querySelector("div:last-child");n&&(n.innerHTML=e.counterHtml||""),hn(t),t.dataset.tt&&delete t.dataset.tt;let o=t.dataset.type,s=uL[o]||o||"";Tt("share_drive",{from:s})}}),fL=()=>{T.registerHandlers(hL,{share:pL,self:pL,repost:_$})};var gL="Подписаться?",vL="Подписаться на бывшую машину?",EL="Вы действительно хотите отписаться?",Vn="Подписаться",bL="Подписаться на машину",_L="Подписаться на автора",yL="Подписаться на компанию",Ou="Отписаться",TL="Отписаться от машины",xL="Отписаться от человека",wL="Отписаться от компании",yd="Читаю",LL="Читаю эту машину",AL="Читаю этого человека",CL="Читаю эту компанию",SL="{num, plural, one {читает} other {читают}}",ML="подписчик{num, plural, one {} many {ов} other {а}}",RL="{num, plural, one {подписчик} many {подписчиков} other {подписчика}}<br>на блог",IL="Владелец указал, что это бывшая машина. Её бортжурнал больше не будет обновляться",OL="Пользователи воспринимают уведомления от компаний как спам. Чтобы о вас не думали плохо, мы отключили уведомления о подписке. Пользователь не узнает, что вы подписались";X();Me();G();ve();Z();gt();kn();V();Z();var y$=400,Ps=(i,t)=>{let e=["fx-zoomout","c-button","c-button--primary",t||"c-button--red"];["c-button--s","c-button--l","c-button--xl"].forEach(r=>{i.classList.contains(r)&&e.push(r)});let o=sn(i),s=P("div",{className:e.join(" "),style:`top:${o.top}px;left:${o.left}px;width:${i.offsetWidth}px;height:${i.offsetHeight}px`});document.body.appendChild(s),setTimeout(()=>{s.remove()},y$)};var $a="subscribe",T$="/ajax/subscription",$s={REGULAR:[],ACTIVE:["c-button--darkgray","is-pressed"],HOVER:["c-button--red"],REGULAR_WHITE:["c-button--primary"],ACTIVE_WHITE:["is-pressed"],HOVER_WHITE:["c-button--primary","c-button--red"]},DL=i=>{let{dataset:t}=i;return{isFormerConfirm:t.formerconfirm==="",isComConfirm:t.comconfirm==="",isCompany:t.company==="",isSubscribed:t.subscribed==="",isWhite:t.white==="",isWide:t.wide==="",id:t.id,type:t.type,additionalTracking:t.at,from:t.from}},Hu=(i,t,e)=>{let{isCompany:n,isSubscribed:o,isWhite:s,isWide:r,type:a}=DL(i);if(e&&!o&&t!=="subscribe")return;let l=s?$s.ACTIVE_WHITE:$s.ACTIVE,c=s?$s.HOVER_WHITE:$s.HOVER,d=s?$s.REGULAR_WHITE:$s.REGULAR,p=(t==="subscribed"?l:[]).concat(t==="subscribe"?d:[]).concat(t==="unsubscribe"?c:[]),u=(t==="subscribed"?[]:l).concat(t==="subscribe"?[]:d).concat(t==="unsubscribe"?[]:c);i.classList.remove(...u),i.classList.add(...p),i.textContent=t==="subscribe"?r?n?yL:a==="user"?_L:bL:Vn:t==="unsubscribe"?r?n?wL:a==="user"?xL:TL:Ou:r?n?CL:a==="user"?AL:LL:yd},x$=(i,t)=>{let e=lt(i,$a,"container");if(!e)return;let n=x($a,"notes-sub",e),o=x($a,"notes-unsub",e);n&&o&&(M(n,t),M(o,!t))},w$=(i,t)=>{let e=document.getElementById(`${i}-followers`);if(e){let n=Number(e.textContent);if(n>=0){n+=t?-1:1,e.textContent=String(n);let o=document.getElementById(`${i}-followers-legend`);if(o){let r=o.dataset.type==="company"?RL:i==="user"?ML:SL;o.innerHTML=it(r,{num:n})}}}},L$=(i,t,e)=>{on($a).filter(o=>o.dataset.id===i&&o.dataset.type===t).forEach(o=>{e?o.dataset.subscribed!==void 0&&delete o.dataset.subscribed:o.dataset.subscribed="",Hu(o,e?"subscribe":"subscribed"),x$(o,e)})},A$=i=>A(void 0,null,function*(){if(ti(i))return;let{isFormerConfirm:t,isComConfirm:e,isCompany:n,isSubscribed:o,id:s,type:r,additionalTracking:a,from:l}=DL(i);if(yield(o?dt(EL,void 0,i,Ou):e&&!o?dt(gL,OL,i,Vn):t?dt(vL,IL,i,Vn):Promise.resolve(1)).then(m=>!m))return;let{types:d}=yield R(T$,$a,{method:"POST",body:N({_:o?"unsubscribe":"subscribe",type:r,id:s},l&&{from:l}),anchorEl:i});o||Ps(i),d.forEach(m=>w$(m,o)),L$(s,r,o);let p=i.classList.contains("js-promofeedsubs"),u=(n&&r==="user"?"company":r)+(p?"_feedpromopost":"");Tt(`${o?"unfollow":"follow"}_${u||""}`),a&&!o&&Tt(a)}),HL=i=>{i.addEventListener("click",()=>A$(i)),i.addEventListener("mouseenter",()=>Hu(i,"unsubscribe",!0)),i.addEventListener("mouseleave",()=>Hu(i,"subscribed",!0))};$();G();var C$="/ajax/subscription",S$=i=>A(void 0,null,function*(){let t=i.node(),{html:e}=yield R(C$,"subscribe-more",{anchorEl:t,body:{_:"get",type:t.dataset.type,key:t.dataset.key,id:t.dataset.id}});e&&(t.insertAdjacentHTML("beforebegin",e),t.remove())}),kL=()=>{T.registerHandlers("subscribe",{more:S$})};$();V();var NL=()=>{T.registerHandlers("u",{focus:i=>{let t=i.node(),e=t.dataset.target&&ct(t.dataset.target);if(e)try{e.focus()}catch(n){}}})};$();V();var M$=i=>{let t=i.node(),{url:e,provider:n}=t.dataset;if(e){if(d2Env.extvideo||d2Env.extYoutube&&n==="YouTube"){window.location.href=`drive://video?url=${encodeURIComponent(e)}`;return}t.replaceWith(P("div","c-media",P("iframe",{src:`${e}&autoplay=1`,allowfullscreen:""})))}},PL=()=>{T.registerHandlers("video",{play:M$})};var $L=i=>{(d2Env.extvideo||d2Env.extYoutube&&i.dataset.provider==="YouTube")&&(i.style.pointerEvents="none",i.parentElement.addEventListener("click",()=>{let t=i.src;window.location.href=`drive://video?url=${encodeURIComponent(t)}`}))};G();pc();vt();V();Eo();vt();Si();Xt();Es();ea();var FL="{Count, plural, one {# участник} many {# участников} other {# участника}}",BL="создано",ku="Сообщение",UL="{IsUserSubscribed, select, true {{IsMale, select, true {Подписан} other {Подписана}} на вас{FollowingAllCars, select, true { и все ваши машины} other {{FollowingCarsCount, plural, =0 {} one { и {Cars}} other {, {Cars}}}}}} other {{FollowingAllCars, select, true {{IsMale, select, true {Подписан} other {Подписана}} на все ваши машины} other {{FollowingCarsCount, plural, =0 {} other {{IsMale, select, true {Подписан} other {Подписана}} на {Cars}}}}}}}",zL="все ваши машины.",Td=" и ",jL="{Age, plural, one {# год} many {# лет} other {# года}}",WL="У меня нет машины",xd="{Now, select, true {Я езжу на} other {Я {IsMale, select, true {ездил} other {ездила}} на}}",VL="до этого —",qL='<a class="c-link c-link--text" href="{Url}" data-tt="{CarsTitle}">ещё {CarsCount} {CarsCount, plural, one {машине} many {машинах} other {машинах}}</a>',GL='<a class="c-link c-link--text" href="{Url}" data-tt="{CarsTitle}">{CarsCount} {CarsCount, plural, one {машина} many {машин} other {машины}}</a>',JL="Я могу помочь",YL="Производитель",ZL="Артикул",KL="Фотографии",XL="Упоминания в блогах",QL="Все запчасти с этим артикулом";Me();Re();Mi();var Fa=i=>({images:[i],color:i.htmlPrimaryColor,inline:i.inlineImage}),Pu=(i,t,e,n=!1)=>C`
<button class=${Ft({"c-button":!0,"c-button--s":n,"c-button--primary":!0,"c-button--subs":!0,"c-button--darkgray":e,"is-pressed":e})}
  data-role="subscribe" ?data-subscribed=${e} data-type=${i} data-id=${t}>
  ${e?yd:Vn}
</button>
`,i0=i=>C`
<a class="c-link c-link--color${String(i.nicknameColor||0).padStart(2,"0")} c-username c-username--wrap"
 href=${i.url}><span>${i.nickname}</span></a>
`,n0=i=>C`
<div class=${Ft({"c-user__status":!0,"is-online":i.isOnline})}>
  ${i.lastVisit}
</div>
`,I$=i=>{if(i.followsAllCars&&i.followedCars.length>1)return zL;let t=i.followedCars,e=o=>`<a class="c-car-title c-link c-link--gray" href="${o.url}">${Bt(t.length>=5?o.caption:o.fullCaption)}</a>`,n=t.slice(0,t.length>1?-1:1).map(o=>e(o)).join(", ");return t.length>1&&(n+=Td+e(t[t.length-1])),n},o0=(i,t)=>t?C`<div class="c-user-subscribed">${ni(it(UL,{IsMale:i,IsUserSubscribed:t.followsMe,FollowingCarsCount:t.followedCars.length,FollowingAllCars:t.followsAllCars&&t.followedCars.length>1,Cars:I$(t)}))}</div>`:F,O$=i=>ni(i.html),D$=i=>C`
<div class="c-hover-card c-car-card-sa c-darkening-hover-container c-car-card-sa--no-shadow">
  <a class="u-link-area" href=${i.url}></a>
  <div class="c-car-card-sa__pic">
    ${Se(Fa(i.photo),void 0,{className:"has-darkening-hover c-car-card-sa__img"})}
    ${i.isFollowable?C`<div class="c-car-card-sa__misc">
        <div class="c-car-card-sa__subscribe">${Pu("car",i.id,i.isFollowed,!0)}</div>
      </div>`:F}
  </div>
  <div class="c-car-card-sa__caption">
    <a class="c-car-title c-link ${i.belongState==="WasMy"?"c-link--gray":"c-link--text"}" href=${i.owner.url}>
      ${i.caption}
    </a>
  </div>
  <div class="c-car-card-sa__info">
    <div class="c-car-card-sa__owner">${i0(i.owner)}</div>
    ${i.owner.location?C`<div class="c-car-card-sa__location">${i.owner.location.name}</div>`:F}
    <div class="c-car-card-sa__drive" style=${ce({borderColor:i.driveBackgroundColor})}>${i.driveLevel}</div>
    <div class="c-car-card-sa__logbook">${i.journalRecordCount}</div>
  </div>
</div>
`,s0=i=>Bt(i.map(t=>`<a class="c-car-title c-link c-link--white" href=${t.url}>${Bt(t.fullCaption)}</a>`).join("<br>")),t0=(i,t)=>`<a class="c-car-title c-link c-link--text" href=${i.url}>${Bt(t?i.caption:i.fullCaption)}</a>`,e0=(i,t=!0,e)=>{let{length:n}=i;if(n===0)return"";let o=i.slice(0,t?-1:void 0).map(s=>t0(s,e)).join(", ");return t&&(n>1&&(o+=Td),o+=t0(i[n-1],e)),o},Nu=(i,t,e,n,o)=>{let{length:s}=i;if(s>t){let r=e0(i.slice(0,e),!1,o);return e>0&&(r+=Td+it(qL,{Url:n,CarsCount:s-e,CarsTitle:s0(i.slice(e))})),r}return e0(i,!0,o)},H$=(i,t,e,n)=>{if(!e)return n?`${it(xd,{Now:!0,IsMale:i})} ${n}`:WL;let o=5,s=3,r=e.filter(p=>p.belongState==="My"),a=e.filter(p=>p.belongState==="WasMy"),l=r!=null&&r.length>0,c=a!=null&&a.length>0,d="";return l&&(d+=`${it(xd,{Now:!0,IsMale:i})} ${Nu(r,o,s,`${t}#currentcars`)}`),c&&(l?(d+=` (${VL} `,e.length>o&&a.length>1?d+=it(GL,{Url:`${t}#formercars`,CarsCount:a.length,CarsTitle:s0(a)}):d+=Nu(a,o,s,`${t}#formercars`,!0),d+=")"):d+=`${it(xd,{Now:!1,IsMale:i})} ${Nu(a,o,s,`${t}#formercars`)}`),d},k$=i=>C`
<div class="c-user c-user--hovercard">
  <div class="c-user__card">
    <div class="c-user__avatar">
      <a href=${i.url}>
        ${Se(Fa(i.avatar),void 0,{className:"is-round has-darkening-hover u-vignette"})}
      </a>
    </div>
    <div class="c-user__info u-break-word">
      <div class="c-user__username">${i0(i)}</div>
      ${i.fullName||i.age?C`<div class="c-user__name">${i.fullName}${i.fullName&&i.age?`, ${it(jL,{Age:i.age})}`:""}</div>`:F}
      <div class="c-user__cars">
        ${ni(i.proAccount?`${JL} ${i.proAccount.skills}`:H$(i.gender==="XY",i.url,i.cars,i.generation))}
      </div>
      ${i.location?C`<div class="c-user__address"><span data-tt=${i.location.fullName}>${i.location.name}</span></div>`:F}
      ${n0(i)}
    </div>
    ${o0(i.gender==="XY",i.subscriptions)}
    <div class="o-group">
      ${i.isFollowable?Pu("user",i.id,i.isFollowed):F}
      ${i.messengerLink?C`<a class="c-button c-button--primary" data-action="msgr.show" href=${i.messengerLink}>
          ${ku}
        </a>`:F}
    </div>
  </div>
</div>
`,N$=i=>C`
<div class="c-user c-user--hovercard">
  <div class="c-user__card">
    <div class="c-user__avatar">
      <a href=${i.url}>
        ${Se(Fa(i.avatar),void 0,{className:"is-round has-darkening-hover u-vignette"})}
      </a>
    </div>
    <div class="c-user__info u-break-word">
      <div class="c-user__username">
        <a class="c-link c-link--color00 c-username c-username--wrap" href=${i.url}><span>${i.caption}</span></a>
      </div>
      <div class="c-user__name">${i.subtitle}</div>
      ${i.location?C`<div class="c-user__address"><span data-tt=${i.location.fullName}>${i.location.name}</span></div>`:F}
      ${n0(i)}
    </div>
    ${o0(!1,i.subscriptions)}
    <div class="o-group">
      ${i.isFollowable?Pu("user",i.id,i.isFollowed):F}
      ${i.messengerLink?C`<a class="c-button c-button--primary" data-action="msgr.show" href=${i.messengerLink}>
          ${ku}
        </a>`:F}
    </div>
  </div>
</div>`,P$=i=>C`
<div class="c-comm-card">
  <div class="c-comm-card__pic">
    <a href=${i.url}>
      ${Se(Fa(i.avatar),void 0,{className:"is-round has-darkening-hover u-vignette"})}
    </a>
  </div>
  <div class="c-comm-card__body">
    <div class="c-comm-card__title u-break-word"><a class="c-link c-link--text" href=${i.url}>
      ${i.caption}</a>
    </div>
    ${i.memberCount?C`<div class="c-comm-card__members">${it(FL,{Count:i.memberCount})}</div>`:F}
    <div class="c-comm-card__date">
      ${BL} ${i.createdOn}
    </div>
  </div>
</div>
`,$$=i=>C`
<div class="c-hover-card c-post-card c-post-card--hover-card">
  <div class="c-post-card__pic-container">
    <a href=${i.url}>
      ${Se(Fa(i.kind==="Post"&&i.mediaPreview?{url:i.mediaPreview,width:1,height:1}:i.photo),2,{size:{width:16,height:9},className:"has-darkening-hover u-vignette"})}
    </a>
  </div>
  <div class="c-post-card__body">
    <div class="c-post-card__caption">
      <a class="c-link c-link--text" href=${i.url}>${$e(i.title||"")}</a>
    </div>
    ${i.kind==="Post"&&i.subtitle?C`<div class="c-post-card__category u-break-word">${i.subtitle}</div>`:F}
    ${i.kind==="Snap"?C`<div class="c-post-card__category u-break-word">
        <a class="c-link c-link--text" href=${i.album.url}>${i.album.title}</a>
      </div>`:F}
    <div class="c-post-card__info">
      <span class="c-icon-counter">
        <span class="c-icon-counter__icon c-icon c-icon--like"></span> ${i.likeCount}
      </span>
      ${i.commentCount!==void 0?C`<a class="c-post-card__comments c-icon-counter" href="${i.url}#comments">
          <span class="c-icon-counter__icon c-icon  c-icon--comments"></span> ${i.commentCount}
        </a>`:F}
      <a class="c-post-card__date c-link c-link--gray" href=${i.url}>${i.timestamp}</a>
    </div>
  </div>
</div>
`,F$=i=>C`
<a class="c-part-card x-secondary" href=${i.url} data-ym-target="parts_from_hover">
  <h2 class="x-header o-b-l u-break-word">${i.caption}</h2>
  <table class="o-b-s">
    <tr>
      <th>${YL}</th>
      <td>${i.manufacturer}</td>
    </tr>
    <tr>
      <th>${ZL}</th>
      <td>${i.code}</td>
    </tr>
  </table>
  <div class="o-group">
    <div><b>${KL}</b> <span class="c-counter">${i.photoCount}</span></div>
    <div><b>${XL}</b> <span class="c-counter">${i.postCount}</span></div>
  </div>
</a>
`,B$=i=>C`
<div class="c-part-code-card">
  ${rt(i.parts,t=>t.code,t=>C`
    <div class="x-form__item">
      <a class="x-form__body has-hover c-link c-link--current" href=${t.url} data-ym-target="parts_from_hover">
        <div class="x-form__text">
          <div class="u-text-overflow"><b>${t.caption}</b></div>
          <div class="o-group x-secondary">
            <div>${t.code}</div>
            <div class="x-secondary-color">${t.manufacturer}</div>
          </div>
        </div>
      </a>
    </div>
  `)}
  <a class="x-box-more" href=${i.url} data-ym-target="parts_from_hover">
    ${QL}
  </a>
</div>
`,r0=i=>{switch(i.kind){case"Html":return O$(i);case"Car":return D$(i);case"User":return k$(i);case"Business":return N$(i);case"Community":return P$(i);case"Post":case"Snap":return $$(i);case"CarPart":return F$(i);case"CarPartCode":return B$(i);default:return F}};var U$=400,z$=100,Ba=document.documentElement,a0=(i,t,e)=>i.left<=t&&i.right>=t&&i.top<=e&&i.bottom>=e,j$=(i,t,e)=>{let n=t<i.left?t-i.left:t>i.right?t-i.right:0,o=e<i.top?e-i.top:e>i.bottom?e-i.bottom:0;return Math.sqrt(n*n+o*o)},ko=class{constructor(t,e,n={}){this.anchorSelector=t;this.getContent=e;this.config=n;this.distance=1/0;this.isTriggered=!1;this.handleTriggerMouseOver=this.handleTriggerMouseOver.bind(this),this.handleMouseEnter=this.handleMouseEnter.bind(this),this.handleMouseLeave=this.handleMouseLeave.bind(this),this.handleMouseMove=this.handleMouseMove.bind(this),Ba.addEventListener("mouseover",this.handleTriggerMouseOver)}handleTriggerMouseOver(t){if(!t.target)return;let e=t.target.closest(this.anchorSelector);e&&this.triggerForElement(e)}triggerForElement(t){if(t===this.anchor){this.clearHideTimer();return}this.content=void 0,this.clearShowTimer(),this.startShowTimer(t)}show(){if(this.clearShowTimer(),!this.content)return;this.popper&&this.popper.destroy(),this.element&&this.element.remove();let t=P("div",{className:"c-bubble__arrow","data-popper-arrow":""}),e=P("div",{className:"c-bubble__content"});J(r0(this.content),e);let n=P("div",`c-bubble__body${this.config.isDark?" ctx-dark":""}`);n.append(e,t),this.element=P("div","c-bubble"),this.config.classNames&&this.element.classList.add(...this.config.classNames);let o=this.anchor&&tc(this.anchor)||0;this.element.style.zIndex=String(Math.max(o+1,this.config.minZIndex||12)),this.element.appendChild(n),document.body.appendChild(this.element),this.attachMouseEvents(this.element),this.startCursorTracking(),this.popper=uo(this.anchor,this.element,{placement:this.config.placement||"top",modifiers:[{name:"offset",options:{offset:[0,9]}}]}),this.anchorObserver=new MutationObserver(()=>{(!this.anchor||!Ba.contains(this.anchor))&&(this.anchorObserver.disconnect(),this.hide())}),this.anchorObserver.observe(this.anchor.parentElement,{childList:!0})}hide(){this.clearHideTimer(),this.anchorObserver&&this.anchorObserver.disconnect(),this.content=void 0,this.popper&&(this.popper.destroy(),this.popper=void 0),this.element&&(this.detachMouseEvents(this.element),this.element.remove(),this.element=void 0),this.stopCursorTracking(),this.anchor&&(this.detachMouseEvents(this.anchor),this.anchor=void 0)}attachMouseEvents(t){t.addEventListener("mouseenter",this.handleMouseEnter),t.addEventListener("mouseleave",this.handleMouseLeave)}detachMouseEvents(t){t.removeEventListener("mouseenter",this.handleMouseEnter),t.removeEventListener("mouseleave",this.handleMouseLeave)}startCursorTracking(){this.config.cursorTracking&&Ba.addEventListener("mousemove",this.handleMouseMove)}stopCursorTracking(){this.config.cursorTracking&&Ba.removeEventListener("mousemove",this.handleMouseMove)}handleMouseEnter(){this.clearHideTimer()}handleMouseLeave(){this.startHideTimer()}handleMouseMove(t){let{clientX:e,clientY:n}=t,o=this.element.getBoundingClientRect(),s=this.anchor.getBoundingClientRect(),r=j$(o,e,n);a0(s,e,n)||a0(o,e,n)||r<=this.distance?this.clearHideTimer():(this.stopCursorTracking(),this.startHideTimer()),this.distance=r}startShowTimer(t){return A(this,null,function*(){if(this.showTimer)return;this.isTriggered=!0,this.anchor=t,this.attachMouseEvents(this.anchor),this.showTimer=setTimeout(this.show.bind(this),this.config.showDelay||U$);let[,e]=yield gi(()=>this.getContent(t));e&&e.kind?this.isTriggered&&this.anchor===t&&(this.content=e,this.showTimer===void 0&&this.show()):this.clearShowTimer()})}clearShowTimer(){this.showTimer&&(clearTimeout(this.showTimer),this.showTimer=void 0)}startHideTimer(){this.isTriggered=!1,this.clearShowTimer(),this.clearHideTimer(),this.hideTimer=setTimeout(this.hide.bind(this),this.config.hideDelay||z$)}clearHideTimer(){this.hideTimer&&(clearTimeout(this.hideTimer),this.hideTimer=void 0)}dispose(){Ba.removeEventListener("mouseover",this.handleTriggerMouseOver)}};dn();var W$="ihc",V$=200,l0,q$=i=>R(`/_api/hovercards/${i.dataset.ihcToken}${d2Env.userId?`?tail=${d2Env.userId}`:""}`,W$,{silent:!0,throwError:!0}),G$=i=>{let t=i.target;t.hasAttribute("data-ihc-token")&&i.pointerType==="touch"&&l0!==t&&(i.preventDefault(),l0=t)},c0=()=>{ME(new ko("[data-tt]",i=>Promise.resolve({kind:"Html",html:i.dataset.tt||""}),{classNames:["c-bubble--tt"],isDark:!0})),RE(new ko("[data-ihc-token]",q$,{classNames:["c-bubble--ihc"],placement:"top-start",showDelay:V$,minZIndex:15,cursorTracking:!0})),document.body.addEventListener("click",G$)};$();X();Z();var wd="filter",d0=i=>{let t=x(wd,"root");t&&t.classList.toggle("is-filtered",i);let e=x(wd,"full");e&&(e.checked=!i),ft(wd,"when-filtered").forEach(o=>M(o,i))},m0=()=>{T.registerHandlers(wd,{filtered:()=>d0(!0),full:()=>d0(!1)})};G();ws();var J$="/_api/index/more",Y$="0",p0=i=>{let{filter:t,next:e,userid:n}=i.dataset,o=e;if(!o)return;let s=()=>{let r=N({filter:t||"",direction:Y$,token:o},n&&{id:n});R(J$,"feed",{anchorEl:i,body:r}).then(a=>{o=a.forward,i.insertAdjacentHTML("beforebegin",a.html),a.forward?a.html.trim()===""&&s():(je().removeEventListener("scroll",s),i.remove())})};je().addEventListener("scroll",s)};Y();var Ua=class extends H{constructor(){super(...arguments);this.current=0}parsedInit(){let e=this.slot("tips",document.body);e&&(this.tips=JSON.parse(e.innerHTML).map(n=>n.text.charAt(0).toUpperCase()+n.text.substring(1)),this.element.addEventListener("focus",this),this.element.addEventListener("blur",this),this.delta=this.element.clientWidth-this.element.scrollWidth,this.start())}handleEvent(e){clearInterval(this.tm),e.type==="focus"&&(this.element.placeholder="",this.element.style.direction=""),e.type==="blur"&&!this.element.value&&(this.element.placeholder="",this.start())}start(){this.tips[this.current]||(this.current=0);let e=this.tips[this.current];this.current+=1;let n=0;this.tm=setInterval(()=>{let o=e.substring(0,n);this.element.placeholder=o,this.element.value=o,this.element.style.direction=this.element.scrollWidth+this.delta>this.element.clientWidth?"rtl":"",this.element.value="",n+=1,n>e.length&&(clearInterval(this.tm),this.tm=setTimeout(()=>this.start(),500))},100)}};var g0=io(Yr(),1);V();Y();Ld();Z();Ho();Pe();var u0="user_preferences_mainnav",Z$=30*12,K$="is-fit",X$="is-at-top",Q$="is-at-bottom",Bu="is-active",f0="no-transition",za=class extends H{parsedInit(){this.scrollable=this.slot("container"),this.sections=this.slots("section"),Zl()||this.scrollable.classList.add("c-nav-container--full-height"),this.applyPreferences(),this.checkFit(),this.checkScroll(),Fs().addEventListener("resize",()=>this.checkFit),this.scrollable.addEventListener("scroll",(0,g0.throttle)(this.checkScroll).bind(this),{passive:!0}),this.sections.forEach(e=>{let n=this.slot("list",e);if(this.slot("header",e)){let s=Et(n);s.enableInterruption=!1,s.addEventListener("end",()=>this.checkFit()),s.addEventListener("start",()=>{e.classList.toggle(Bu),this.savePreferences()})}})}applyPreferences(){let e=Ha(u0);e&&(this.closeClosableSections(),e.split(",").forEach(n=>{let o=ct(`[data-id=section-${n}]`,this.element),s=o&&this.closestSlot(o,"section");s&&this.openSection(s,!0)}))}checkFit(){this.element.classList.toggle(K$,this.scrollable.scrollHeight<=this.element.offsetHeight)}checkScroll(){let{scrollTop:e,scrollHeight:n,offsetHeight:o}=this.scrollable;this.element.classList.toggle(X$,e<=0),this.element.classList.toggle(Q$,Math.round(e)>=n-o)}getListElement(e){return this.slot("list",e)}savePreferences(){let e=this.sections.filter(n=>n.classList.contains(Bu)).map(n=>this.getListElement(n)).map(n=>(n.dataset.id||"").replace(/\D/g,""));Di(u0,e.toString(),Z$)}closeClosableSections(){this.sections.filter(e=>this.slot("header",e)).forEach(e=>{this.openSection(e,!1),e.classList.add(f0),setTimeout(()=>e.classList.remove(f0),0)})}openSection(e,n){e.classList.toggle(Bu,n);let o=this.slot("list",e);o&&M(o,n)}};$();Le();var v0="Комментарии",E0="Уведомления",b0="Все комментарии",_0="Все уведомления";V();X();var Bs=class extends EventTarget{constructor(e,n=!1,o){super();this.element=e;this.hideOnEscape=n;this.elements=o;this.eventTypes=["mousedown","touchstart"];this.hideOnEscape&&this.eventTypes.push("keydown"),this.eventTypes.forEach(s=>this.element.ownerDocument.addEventListener(s,this,!0))}handleEvent(e){if(e.type==="keydown"){e.keyCode===27&&(e.stopPropagation(),this.dispatchOutsideEvent());return}let n=e.target,o=this.elements&&this.elements.some(s=>s.contains(n));!this.element.contains(n)&&!o&&this.dispatchOutsideEvent()}dispatchOutsideEvent(){this.dispatchEvent(new CustomEvent("outside")),this.dispose()}dispose(){this.eventTypes.forEach(e=>this.element.ownerDocument.removeEventListener(e,this,!0))}};G();Z();var x0="notifications",y0="is-active",Ad=!1,Us,Cd,Sd,eF=Array(16).fill('<div class="c-ntfy__mask"></div>').join(""),T0=(i,t,e)=>`<div class="c-ntfy__col">
    <div class="c-ntfy__list">
      <h3 class="c-header c-ntfy__header">${i}</h3>
      <div class="c-ntfy__loading c-loading">${eF}</div>
    </div>
    <a class="c-ntfy__link" href="${t}">${e}</a>
  </div>`,iF=()=>`<div class="c-ntfy">
    ${T0(v0,"/my/comments/",b0)}
    ${T0(E0,"/my/all-notifications/",_0)}
  </div>`,nF=i=>{let t=i.node(),e=x(x0,"container"),n=()=>{Cd=P("div","c-bubble__content"),Us=P("div","c-bubble c-bubble--ntfy ctx-reset",P("div","c-bubble__body",Cd)),e.prepend(Us)},o=()=>{Ad&&(t.classList.remove(y0),M(Us,!1),Ad=!1)};(()=>{Us||n(),Ad?(o(),Sd&&Sd.dispose()):(t.classList.add(y0),Cd.innerHTML=iF(),M(Us,!0),Ad=!0,Sd=new Bs(Us,!0,[t]),Sd.addEventListener("outside",()=>o(),{once:!0}),R("/ajax/notifications.cshtml","notifications",{method:"POST",anchorEl:t,body:{_:"get"},throwError:!0}).then(r=>{st.publish("reset-notifications");let a=Cd.firstElementChild;a.insertAdjacentHTML("beforebegin",r.html),a.remove()}).catch(()=>{o()}))})()},w0=()=>{T.registerHandlers(x0,{toggle:nF})};$();G();var L0=()=>{T.registerHandlers("topsearch",{delete:i=>A(void 0,null,function*(){let t=i.node();yield kt(t.dataset.url,"topsearch",{method:"DELETE",anchorEl:t}),t.parentElement.remove()})})};Y();Z();var oF="is-active",ja=class extends H{init(){let t=!1,e,n=this.slot("dropdown",document.body),o=()=>{t=!t,this.element.classList.toggle(oF,t),M(n,t),t?(e=new Bs(n,!0,[this.element]),e.addEventListener("outside",o,{once:!0})):e&&e.dispose()};this.element.addEventListener("click",o)}};V();Y();var sF="is-active",zs=!1,A0,C0=()=>{zs&&(A0=document.scrollingElement.scrollTop),document.documentElement.classList.toggle("g-nav-active",zs),zs||(document.scrollingElement.scrollTop=A0)},rF=()=>{zs=!1,C0()},Wa=class extends H{parsedInit(){let t=et("a",this.element),e=this.slot("button"),n=o=>{o.preventDefault();let s=o.currentTarget;t.forEach(r=>{r.classList.toggle(sF,r===s)}),s.dataset.close===""&&rF(),setTimeout(()=>{window.location.href=s.href},0)};t.forEach(o=>{o.addEventListener("click",n)}),e&&e.addEventListener("click",()=>{zs=!zs,C0()})}};Le();X();var S0="_d2_sync_",M0="_d2_broadcast_",Md=class extends EventTarget{constructor(e){super();this.channel=e;this.id=String(Date.now()+(window.crypto?crypto.getRandomValues(new Uint32Array(1))[0]:Math.random()));this.isMaster=!1;this.others={};window.addEventListener("storage",this),window.addEventListener("unload",this),this.sync("hello");let n=()=>{this.check(),this.checkTimeout=setTimeout(n,9e3)},o=()=>{this.sendPing(),this.pingTimeout=setTimeout(o,17e3)};this.checkTimeout=setTimeout(n,500),this.pingTimeout=setTimeout(o,17e3)}close(){clearTimeout(this.pingTimeout),clearTimeout(this.checkTimeout),window.removeEventListener("storage",this),window.removeEventListener("unload",this),this.sync("bye")}handleEvent(e){if(e.type==="unload")this.close();else if(e.key===S0+this.channel)try{let n=JSON.parse(e.newValue),{id:o,type:s}=n;o!==this.id&&(s==="bye"?this.bye(o):s==="hello"?this.hello(o):s==="ping"&&this.ping(o))}catch(n){}else if(e.key===M0+this.channel)try{let n=JSON.parse(e.newValue);n.id!==this.id&&this.dispatchEvent(new CustomEvent("message",{detail:n.payload}))}catch(n){}}sendPing(){this.sync("ping")}hello(e){this.ping(e),e<this.id?this.check():this.sendPing()}ping(e){this.others[e]=Date.now()}bye(e){delete this.others[e],this.check()}check(){let e=Date.now(),n=!0;for(let o in this.others)this.others[o]+23e3<e?delete this.others[o]:o<this.id&&(n=!1);this.isMaster!==n&&(this.isMaster=n,this.masterDidChange())}masterDidChange(){this.dispatchEvent(new Event("master"))}sync(e){this.send(S0,{type:e})}postMessage(e={}){this.send(M0,{payload:e}),this.dispatchEvent(new CustomEvent("message",{detail:e}))}send(e,n){try{window.localStorage.setItem(e+this.channel,JSON.stringify(wt(N({},n),{id:this.id})))}catch(o){}}};G();Ic();var aF="polling",lF="/ajax/polling.cshtml",I0="messages-status",O0="notifications-status",cF="feed-status",dF=60*1e3,R0=new WeakMap,Uu,zu=(i,t,e)=>{let n=Ge(i);if(!n)return;let o=parseInt(t||"0",10),s=x(i,"counter",n),r=n.dataset.kind==="side",a=i===O0;if(s){let l=R0.get(s);l&&clearTimeout(l),s.classList.remove("fx-fadeout")}if(s&&o===-1){let l=s.textContent,c=parseInt(l,10);t=c>0&&!/\+$/.test(l)?String(c-1):l,o=parseInt(t,10)}if(o>0){if(s||(s=document.createElement("span"),s.className=`c-notification-bubble ${r?"":"c-notification-bubble--top"} fx-bouncein`,jl(s,i,"counter"),r&&n.appendChild(document.createTextNode(" ")),n.appendChild(s)),a&&(Uu=Uu||s.textContent,t!==Uu)){let l=x(i,"icon",n);l.classList.remove("fx-delay","fx-swing"),setTimeout(()=>{l.classList.add("fx-swing")},1)}s.textContent=t}else if(s){s.classList.add("fx-fadeout");let l=setTimeout(()=>{s.remove()},900);R0.set(s,l)}i===I0&&(n.href=e||"/my/messages/")},mF=i=>{let{m:t,l:e,n,f:o}=i.detail;st.publish("update-unread-title",t),zu(I0,t,e),zu(O0,n),zu(cF,o)},D0=()=>{if(!d2Env.userId)return;let i,t=new Md(`${d2Env.userId}_1`),e=ls(()=>{R(lF,aF,{method:"POST",body:{_:"update"},silent:!0,throwError:!0}).then(s=>t.postMessage(s)).catch(()=>{clearInterval(i),st.unsubscribeByKey(o),t.removeEventListener("master",n),t.close()})},30),n=()=>{t.isMaster?i=setInterval(e,dF):clearInterval(i)},o=st.subscribe("force-update",()=>{t.isMaster&&e()});st.subscribe("update-unread",s=>{t.postMessage({m:s})}),st.subscribe("reset-notifications",()=>{t.postMessage({n:"0"})}),t.addEventListener("master",n),t.addEventListener("message",mF)};V();Y();G();ve();Ro();var Va=class extends H{init(){this.element.setAttribute("autocomplete","off");let t=new Fe("/search/history",this.element);t.setRowBuilder(this.rowRender.bind(this)),t.getRenderer().className="ac-renderer ac-renderer--search",t.getRenderer().setWidthProvider(this.element),this.element.addEventListener("focus",()=>{this.element.value===""&&t.update(!0)}),t.addEventListener("update",e=>{e.detail.row&&(Tt("search_history_click"),this.element.form.submit())})}rowRender(t,e){return wt(N({},e),{render:n=>{let o=P("div","ac-close");o.addEventListener("click",s=>A(this,null,function*(){s.stopPropagation(),yield kt(e.delete,this.role,{method:"DELETE",anchorEl:o}),n.remove()})),n.append(P("div",void 0,e.caption),o)},select(n){n.value=e.caption}})}};$();var H0="{Count, plural, one {пользователю} other {пользователям}}<br> нравится",Rd="Нравится",ju="Не нравится";V();X();Me();G();ve();dn();kn();V();Z();var hF=350,k0=i=>{let t=sn(i),e=P("div",{className:"fx-like-zoomout",style:`top:${t.top}px;left:${t.left}px;width:${i.offsetWidth}px;height:${i.offsetHeight}px`});document.body.appendChild(e),setTimeout(()=>{e.remove()},hF)};var We="like",Wu="/_api/likes",F0="is-liked",qa="c-button--darkgray",Vu="c-button--red",uF={cjr:"logbook",ubr:"blog",gbr:"blog_community",cbr:"blog_company",c:"car",cmnt:"comment",ea:"editorial",o:"company"},N0=i=>{let t=i.target;t&&(t.classList.add(Vu),t.classList.remove(qa),t.textContent=ju)},P0=i=>{let t=i.target;t&&(t.classList.add(qa),t.classList.remove(Vu),t.textContent=Rd)},$0=(i,t,e,n,o)=>{let s=x(We,"button",i),{dataset:r}=i,a=i.nodeName==="BUTTON"?i:s,l=r.legacy==="";if(i.classList.toggle("is-disabled",o),o&&(a.disabled=!0),!n)return;i.classList.toggle(F0,!t),a.dataset.tt&&(a.dataset.tt=t?Rd:ju),l&&(s.classList.toggle(qa,!t),d2Env.isDesktop&&(!t&&n?(s.addEventListener("mouseenter",N0),s.addEventListener("mouseleave",P0)):(s.classList.remove(qa,Vu),s.textContent=Rd,s.removeEventListener("mouseenter",N0),s.removeEventListener("mouseleave",P0))));let c=x(We,"ext-count");if(c){let m=it(H0,{Count:e});c.innerHTML=`<strong>${e}</strong>${m}`}let d=x(We,"count",i),p="r-button-unstyled c-like__counter",u=r.short==="";!d&&!l&&!u&&(d=document.createElement("button"),d.className=p,r.type==="cmnt"||(d.dataset.action=`${We}.list`),d.dataset.slot=`${We}.count`,s.after(d)),d&&(e===0?d.remove():d.textContent=String(e))},fF=i=>A(void 0,null,function*(){let t=i.node();if(t.disabled||ti(t))return;let e=lt(t,We,"root"),n=e.classList.contains(F0),o=e.dataset.legacy==="",s=e.dataset.company==="",{type:r,id:a,key:l}=e.dataset,c=s&&r==="ubr"?"cbr":r,d=yield R(Wu,We,{method:n?"DELETE":"POST",anchorEl:t,body:{token:l}});if(vc(),!n){Tt(`like_${uF[c]||c||""}`);let h=U("js-unsubscribed-blog");h&&(h.classList.remove("js-unsubscribed-blog"),h.classList.add("fx-shake"))}let{counter:p,success:u}=d,m=n?!1:!d.undoMs;a?et(`${mr(`${We}.root`)}[data-type="${r}"][data-id="${a}"]`).forEach(g=>{$0(g,n,p,u,m)}):$0(e,n,p,u,m),n||(o?Ps(t===e?x(We,"button",t):t,qa):k0(t===e?x(We,"button",t):t))}),B0=()=>{T.registerHandlers(We,{like:fF})};X();G();var gF=200,vF=i=>A(void 0,null,function*(){let t=lt(i,We,"root");return{kind:"Html",html:t?yield kt(Wu,`${We}-list`,{silent:!0,body:{token:t.dataset.key}}):void 0}}),U0=()=>{new ko("[data-like-list]",vF,{classNames:["c-bubble--like-list"],placement:"top",showDelay:gF,minZIndex:15,cursorTracking:!0})};$();G();kn();var z0=(i,t)=>{i.classList.toggle("is-off",t),i.style.cssText=`opacity:${t?.4:1}!important`},EF=(i,t)=>{i.classList.contains("is-off")||(z0(i,!0),R(t,{method:"POST",anchorEl:i,throwError:!0}).then(e=>{e.location&&(window.location.href=e.location)}).catch(()=>{}).finally(()=>{z0(i,!1)}))},bF=i=>{let t=i.node(),e=t.dataset.newtab==="",n=t.dataset.indirect==="",o=t.href;ti(t)||(e&&!d2Env.isApp?window.open(o):n?EF(t,o):window.location.href=o)},j0=()=>{T.registerHandlers("msgr",{show:bF})};$();Vt();gt();var _F=i=>{let t=i.node(),{dataset:e}=t,n=e.alert;if(n){let o=e.bubblePlacement,s=e.bubbleNoAnchor==="";$t(n,s?void 0:t,{placement:o})}},yF=i=>A(void 0,null,function*(){let t=i.node(),{dataset:e}=t,{confirmIf:n}=e;if(t.form&&n&&(!t.form[n]||t.form[n].value))return;yt(i);let{confirm:o,message:s}=e;if(o){let{confirmButton:r,confirmCancel:a}=e;if(e.confirmOnce===""&&hn(t),yield dt(o,s,t,r,a))if(t.form&&t.type==="submit"){let c=e.action;hn(t),t.click(),c&&setTimeout(()=>{e.action=c},200)}else t.href&&(window.location.href=t.href)}}),W0=()=>{T.registerHandlers("dialog",{close:Mt}),T.registerHandlers("bubble",{alert:_F,confirm:yF})};gt();var Id=class extends As{syncTargetValueWithProviders(){this.target.value=`${Ss(this.providers.hours.value)}:${Ss(this.providers.minutes.value)}`}syncProvidersValuesWithTarget(t){let[e,n]=t.target.value.split(":");this.providers.hours.value=Cs(e),this.providers.minutes.value=Cs(n)}};var V0=i=>{(i.dataset.type==="date"?new Ms(i,{date:'[name="Date.Day"]',month:'[name="Date.Month"]',year:'[name="Date.Year"]'}):new Id(i,{hours:'[name="Date.Hour"]',minutes:'[name="Date.Minute"]'})).init()};$();G();var q0="people",TF="/ajax/people.cshtml",xF=i=>A(void 0,null,function*(){let t=i.node(),{html:e}=yield R(TF,q0,{method:"POST",anchorEl:t,body:{_:"more",type:t.dataset.type,key:t.dataset.key}});e&&(t.insertAdjacentHTML("beforebegin",e),t.remove())}),G0=()=>{T.registerHandlers(q0,{more:xF})};var wF="https://api.instagram.com/oembed/",J0=i=>{let t=i.src;if(!t)return;let e=i.parentElement;e.style.opacity="0";let n=t.replace(/\/?embed\/?$/,"");try{let o=new XMLHttpRequest;o.open("GET",`${wF}?url=${encodeURIComponent(n)}`,!0),o.withCredentials=!0,o.onload=()=>{let s=JSON.parse(o.responseText),{html:r}=s;e.insertAdjacentHTML("beforebegin",r),e.remove();let a=document.createElement("script");a.async=!0,a.src="https://platform.instagram.com/en_US/embeds.js",document.body.appendChild(a)},o.onerror=()=>{e.style.opacity="1"},o.send(null)}catch(o){e.style.opacity="1"}};vt();$();te();var Y0="Предложить исправление",Z0="Скрыть упоминание",K0="Скрыть упоминание запчасти",X0="Уберём ссылки в тексте, под фотографиями и упоминание в таблице",Q0="Показать все {count}",tA="Настройки сохранены",eA="Вы обратились со страницы: ";V();X();Me();G();Vt();_d();dn();Hn();gt();var js="post",AF="/ajax/posts.cshtml",CF="js-entity",SF="js-entity-body",MF="js-postpreview",Ga,iA=0,qu,RF=i=>C`
  <div class="x-form__item" data-slot="post.part">
    <div class="x-form__body">
      <a class="c-post-part" href=${i.link} data-ym-target="parts_from_undertext">
        <div class="c-post-part__name"><span class="c-link c-link--text">${i.caption}</span></div>
        <div class="c-post-part__code"><span class="c-link c-link--text">${i.code}</span></div>
        <div class="c-post-part__manufacturer">${i.manufacturers}</div>
      </a>
      <a class="r-button-unstyled x-side-icon x-side-icon--dots"
        href="${i.helpLink}?topic=carparts&message=${encodeURIComponent(eA+window.location.href)}"
        data-code=${i.code} data-action="post.partsMenu"></a>
    </div>
  </div>
`,Gu=i=>U(SF,i),IF=i=>A(void 0,null,function*(){let t=i.node(),e=At(t,CF),n=yield R(AF,js,{method:"POST",anchorEl:t,body:{_:"getpost",id:e.dataset.id,type:e.dataset.type,newtab:e.dataset.newtab==="",stealth:e.dataset.stealth===""}});if(Ke(),Ga){let s=document.scrollingElement.scrollTop,r=Ga.offsetHeight,a=Gu(Ga);a.innerHTML="",a.appendChild(qu),e.compareDocumentPosition(Ga)&2&&(document.scrollingElement.scrollTop=s-(r-iA))}let o=Gu(e);Ga=e,iA=e.offsetHeight,qu=U(MF,o),qu.remove(),Gu(e).innerHTML=n.html}),OF=i=>A(void 0,null,function*(){let t=i.node(),e=JSON.parse(t.previousElementSibling.textContent),n=document.createDocumentFragment();J(e.map(RF),n),t.replaceWith(n)}),DF=i=>A(void 0,null,function*(){yt(i);let t=i.node();yield kt(t.action,{method:"POST",body:new FormData(t)}),ks(tA,{type:"savePosts"})}),HF=i=>A(void 0,null,function*(){let t=i.node(),e=lt(t,js,"parts"),n=e&&e.dataset.disableUrl,o=[{action:"suggest",text:Y0}];n&&o.push({action:"disable",text:Z0,confirmTitle:K0,confirmMessage:X0,confirm:fs}),new xe(t,o).addEventListener("select",r=>{zt();let a=r.detail;a==="suggest"?window.location.href=t.href:a==="disable"&&kt(n,`${js}.disable`,{method:"POST",anchorEl:t,body:{code:t.dataset.code}}).then(()=>{lt(t,js,"part").remove();let l=x(js,"parts-all");if(l){let c=Number(e.dataset.count)-1;l.textContent=it(Q0,{count:c}),e.dataset.count=String(c)}})})}),nA=()=>{T.registerHandlers(js,{show:IF,parts:OF,saveParts:DF,partsMenu:HF})};$();X();Z();var oA="post-form",kF=i=>{let t=x(oA,"skip-notifying");t&&M(t,i.node().checked)},sA=()=>{T.registerHandlers(oA,{update:kF})};$();var NF=i=>{let t=i.node(),e=t.options[t.selectedIndex].dataset.url,n=Boolean(e);document.body.classList.toggle("g-branded",n),document.body.style.background=n?`url(${e}) 50% 0 repeat`:"none"},rA=()=>{T.registerHandlers("premium",{theme:NF})};$();te();var aA="Продвижение машины",lA="Завершить Продвижение?",cA="Если вы завершите его раньше времени, мы не сможем вернуть потраченные кредиты",dA="Завершить",mA="Выберите подходящую продолжительность продвижения.",pA="Подпись к машине слишком короткая. Минимально допустимая длина — 10 символов.",hA="{Count, plural, one {кредит} many {кредитов} other {кредита}}";V();Me();G();Od();Re();Z();Eo();Ju();gt();Pe();var Hi="pc",No="js-promocars-cards",Po="js-promocars-item",Ja="js-caption",Hd="is-bold",Za="c-pc-card-subscribe",Ki="/ajax/promocars.cshtml";V();$();V();G();Re();In();var $F="pc",FF="is-editable",Yu="is-editactive",BF="js-edit",UF=600,zF=`${Hi}.edit`,Ka,Zu=i=>At(i,Po),jF=(i,t)=>{let e=i.value,n=t.querySelector(`.${Ja}`);n.innerHTML=Bt(e),R(Ki,zF,{method:"POST",anchorEl:n,body:{_:"editcaption",key:t.dataset.key,caption:e},throwError:!0}).then(o=>{Ka=e===""?o.caption||"":e}).catch(()=>{}).finally(()=>{Ka&&(i.value=Ka,n.innerHTML=Bt(Ka))})},WF=ze(jF,UF),fA=i=>{i.keyCode===13&&(i.preventDefault(),i.target.blur())},VF=i=>{let t=i.node(),e=Zu(t);Ka=t.value,e.classList.add(Yu),t.addEventListener("keydown",fA)},qF=i=>{let t=i.node(),e=Zu(t);WF(t,e);let n=t.value,o=e.querySelector(`.${Ja}`);o.innerHTML=Bt(n),t.removeEventListener("keydown",fA),e.classList.remove(Yu)},gA=()=>{et(`.${Po} .${BF}`).forEach(t=>{let e=Zu(t);e.classList.remove(FF),e.classList.remove(Yu),e.dataset.tt!==void 0&&delete e.dataset.tt,t.remove()})},vA=()=>{T.registerHandlers($F,{"edit-on":VF,"edit-off":qF})};var GF="js-link",JF="is-disabled",YF="has-nolink",Xa=(i,t)=>{Pt(No).forEach(n=>{Pt(Po,n).forEach((s,r)=>{if(r===0){if(s.classList.toggle(YF,i),t){let l=s.querySelector(`.${GF}`);l&&(l.href=t)}i&&(gA(),s.classList.remove(Hd));let a=s.querySelector(`.${Za}`);a&&a.remove()}else s.classList.toggle(JF,i)})})};var ZF="pc",KF="js-promocars-dialog",bA="js-pic",XF="js-price",QF="js-price-old",tB="js-stats",eB="js-input-container",iB="js-promocars-controls",_A=`${Hi}.form`,nB=`${Hi}.fetch`,kd=!1,Nd=i=>{let t=document.querySelector(`.${iB}`);t&&(t.innerHTML=i||"")},oB=(i,t)=>{let e=U(bA,i);if(e){let n=vd(e);n.element.src=t}},yA=(i,t)=>A(void 0,null,function*(){return(yield dt(lA,cA,i,dA))?R(Ki,_A,{method:"POST",anchorEl:i,body:{_:"stop",key:t},throwError:!0}).then(e=>e.html):Promise.reject()}),EA=i=>i.checked?Number(i.dataset.multiplier||0):0,Ku=(i,t)=>{let e=1+EA(t.bold)+EA(t.subscribe);return Math.floor((Number(i)||0)*e/10)*10},sB=(i,t)=>{let e=i.querySelector(`.${bA}`),n=e.parentElement.querySelector(`.${Za}`);if(n&&!t)n.remove();else if(!n&&t){let o=document.createElement("button");o.classList.add("r-button-unstyled"),o.classList.add(Za),o.innerHTML=`<span class="c-pc-card-subscribe__btn"><x-icon class="c-pc-card-subscribe__icon" name="subscribe"></x-icon><span>${Vn}</span></span>`,e.after(o)}},TA=(i,t)=>{kd=!0,t=t||i.dataset.key||"";let e,n,o,s,r=()=>{et("[name=duration]",e).forEach((f,E)=>{let b=f.parentNode.querySelector(`.${XF}`),L=jn(Ku(f.dataset.price,e));b&&(b.textContent=E===0?it(Kb,{Amount:L}):L);let S=f.parentNode.querySelector(`.${QF}`);S&&(S.textContent=jn(Ku(f.dataset.fullprice,e)))}),c()},a=(g={})=>{let{value:f,carChanged:E,initialUpdate:b}=g,L=o.options[o.selectedIndex],{dataset:S}=L,y=S.promoted==="1",_=f||$e((b||E?S.saved:void 0)||S.caption||""),w=U(Po,d2Env.isMobile?e:void 0);if(w){w.dataset.key=L.value;let O=U(Ja,w);O&&(O.innerHTML=Bt(_)),E&&oB(w,S.pic),w.classList.toggle(Hd,e.bold.checked),sB(w,e.subscribe.checked)}E&&(n.value=_,M(U(tB),y),M(U(eB),!y),s.textContent=s.dataset.values.split(";")[y?0:1],s.dataset.promoted=y?"1":"0",s.classList.toggle("c-button--primary",!y),s.classList.toggle("c-button--green",!y))},l=()=>{a({carChanged:!0})},c=()=>{let{value:g}=n;a({value:g})},d=g=>{if(d2Env.isMobile){let f=Ci({anchor:i,title:aA,html:g});f.addEventListener("beforehide",()=>{Xa(!1)},{once:!0}),f.addEventListener("hide",()=>{p()},{once:!0}),f.render(),f.show()}else U(No)!==i&&(document.scrollingElement.scrollTop=0),Nd(g);e=U(KF),o=e.key,o.addEventListener("change",l),s=e.start,s.addEventListener("click",m),n=e.caption,n.addEventListener("input",c),e.bold.addEventListener("click",r),e.subscribe.addEventListener("click",r),Xa(!0),d2Env.isMobile||(a({initialUpdate:!0,carChanged:!0}),Et(e).toggle())},p=()=>{try{n.removeEventListener("input",c),e.bold.removeEventListener("click",r),e.subscribe.removeEventListener("click",r),o.removeEventListener("change",l),s.removeEventListener("click",m)}catch(g){}kd=!1},u=g=>{R(Ki,nB,{method:"POST",anchorEl:i,body:{_:"top",key:g},throwError:!0}).then(f=>{d(f.html)}).catch(()=>{kd=!1})},m=g=>{g.preventDefault();let f=s.dataset.promoted==="1",E=s.dataset.key||o.value||"";if(f)yA(s,E).then(b=>{Xa(!1),p(),Nd(b)}).catch(()=>{});else{let b=e.querySelector("[name=duration]:checked");if(!b){$t(mA,s);return}let L=b.value,S=Ku(b.dataset.price,e),y=n.value;if(y.length>0&&y.length<Number(n.getAttribute("minlength"))){$t(pA,s);return}let _={_:"promote",key:E,duration:L,caption:y,bold:e.bold.checked,subscribe:e.subscribe.checked};h(_,S)}},h=(g,f)=>A(void 0,null,function*(){let[E,b]=yield gi(()=>R(Ki,_A,{method:"POST",anchorEl:s,body:g,throwError:!0}));if(b){Ws([{name:"Продвижение",category:`Машина/${g.duration}`,price:f}]);let S=o.options[o.selectedIndex].dataset.url||"";if(Xa(!1,S),d2Env.isMobile){let y=U(No,e).cloneNode(!0),_=U(No);_!==y&&_.replaceWith(y.firstElementChild)}p(),d2Env.isMobile&&Mt(),Nd(b.html)}else E&&E.json&&Dd(E.json,L=>{h(wt(N({},g),{requisite:L}),f)})});u(t)},xA=i=>{if(window.location.hash==="#carpromo"){let t=U(No);t&&TA(t,i)}},rB=i=>{let t=i.node();kd||(TA(t),Mt())},aB=i=>{let t=i.node(),e=t.dataset.key||"";yA(t,e).then(n=>{Nd(n)}).catch(()=>{})},wA=()=>{T.registerHandlers(ZF,{add:rB,stop:aB})};fr();Y();G();Z();var lB=`${Hi}.stats`,cB=3e3,dB=2e4,Qa=class extends H{parsedInit(){let t=this.element.parentElement,e=this.slot("more"),n,o,s=c=>{o.disconnect(),clearTimeout(n),c!==void 0&&(t.innerHTML=c)},r=()=>{this.slot("item")&&(o=new MutationObserver(()=>{t!==this.element.parentElement&&s()}),o.observe(t,{childList:!0}),n=setTimeout(a,$i.isIdle?dB:cB))},a=()=>{R(Ki,lB,{method:"POST",silent:!0,body:{_:"progress"}}).then(c=>{c.html?s(c.html):c.length?(c.forEach(d=>{let{id:p}=d,m=this.slots("item").find(h=>h.dataset.id===p);if(m){let h=this.slot("progress",m);h.style.width=`${d.progress}%`;let g=this.slot("info",m);g.innerHTML=d.clicks>0?d.info:""}}),r()):s("")}).catch(()=>{s("")})},l=()=>{this.slots("item").forEach(d=>{M(d,!0)}),e.remove()};r(),e&&e.addEventListener("click",l,{once:!0})}};vt();Si();Xt();Y();Me();G();var mB=`${Hi}.lottery`,tl=class extends H{parsedInit(){let t=Number(this.element.dataset.count),e=Array.from({length:t},(r,a)=>({index:a,isScratched:!1,isActive:!1,isSelected:!1})),n=r=>{let a={"c-pc-wheel":!0,"is-active":r.isActive},l=it(hA,{Count:r.prize});return C`<div class="c-pc-lottery__item">
      <div class=${Ft(a)} @click=${r.isScratched?void 0:c=>{s(c.target,r.index)}}>
        <div class="c-pc-wheel__front"></div>
        <div class="c-pc-wheel__back ${Ft({"is-active":r.isSelected})}">
          <div class="c-pc-wheel__back-i">${r.prize?C`<b>${r.prize}</b> ${l}`:""}</div>
        </div>
      </div>
    </div>`},o=()=>{J(rt(e,r=>r.index,n),this.slot("body"))},s=(r,a)=>A(this,null,function*(){let l=yield R(Ki,mB,{method:"POST",anchorEl:r,body:{_:"lottery",key:this.element.dataset.key,index:a}}),c=this.slot("title");c.innerHTML=l.title,e.forEach(d=>{d.prize=l.itemValues[d.index],d.isScratched=!0,d.isActive=a===d.index,d.isSelected=a===d.index}),o(),setTimeout(()=>{e.forEach(d=>{d.isActive=!0}),o()},1e3)});o()}};$();G();var pB="pc",hB=`${Hi}.subscribe`,uB="/ajax/subscription",fB=i=>A(void 0,null,function*(){let t=i.node();yield R(uB,hB,{method:"POST",anchorEl:t,body:{_:"subscribe",type:"car",id:t.dataset.id}}),Ps(t,"_"),t.remove()}),LA=()=>{T.registerHandlers(pB,{subscribe:fB})};kn();vt();Xt();$();var AA="Самое интересное",Xu="Сохранить",Qu="Выберите темы материалов, которые могут быть вам интересны";el();X();G();Z();Vt();Ne();var Vs="contentsettings",vB=3,EB=(i,t,e,n)=>C`
  <form action="${i}" class="c-dialog-form" novalidate data-keysubmit>
    <div class="text">${Qu}</div>
    <div class="o-grid o-grid--${e.length} o-grid--no-margin">
      ${e.map(o=>C`<div><div class="c-checkbox-group f-item">${rt(o,s=>s.id,s=>C`
        <label class="c-checkbox">
          <input type="checkbox" name=${t} value=${s.id} ?checked=${s.selected} data-action="${Vs}.check">
          <span class="c-checkbox__check"></span><span class="c-checkbox__label">${s.caption}</span>
        </label>
      `)}</div></div>`)}
    </div>
    <div class="c-dialog-buttons">
      <button class="c-button c-button--primary" type="submit" name="submitbtn" ?disabled=${!n}>${Xu}</button>
    </div>
  </form>`,bB=(i,t,e,n)=>C`
  <form action="${i}" class="x-form" novalidate data-keysubmit data-role="form">
    <div class="x-box x-box--ghost">
      <div class="x-text o-b">${Qu}</div>
    </div>
    <div class="x-box x-box--narrow">
      ${rt(e,o=>o.id,o=>C`
        <div class="x-form__item">
          <div class="x-form__body">
            <label class="x-choice x-choice--switch">
              <input type="checkbox" name=${t} value=${o.id} ?checked=${o.selected} data-action="${Vs}.check">
              <span class="x-choice__label">${o.caption}</span>
            </label>
          </div>
        </div>
      `)}
    </div>
    <div class="x-form__submit u-extend" data-role="sticky-button">
      <button class="c-button c-button--primary c-button--xl u-100" type="submit"
        name="submitbtn" ?disabled=${!n}>${Xu}</button>
    </div>
  </form>`,_B=(i,t,e,n)=>{let o=e.some(r=>r.selected),s=new Ct({anchor:n,title:AA});if(d2Env.isMobile)J(bB(i,t,e,o),s.element);else{let r=fn(e,vB);J(EB(i,t,r,o),s.element)}s.show(),s.initCloseConfirm()},yB=i=>A(void 0,null,function*(){yt(i);let t=i.node(),{url:e}=t.dataset;if(!e)return;let n=yield R(e,Vs,{anchorEl:t});_B(e,n.name,n.items,t)}),TB=i=>{let t=i.node(),e=t.form;e.submitbtn.disabled=!e.querySelector(`input[name="${t.name}"]:checked`)},xB=i=>{let t=i.node(),e=lt(t,Vs,"block"),n=x(Vs,"container",e);n&&M(n,t.checked)},CA=()=>{T.registerHandlers(Vs,{select:yB,check:TB,update:xB})};$();X();Z();var qs="settings-editorial",wB=i=>{let t=i.node().form,e=x(qs,"field",t),n=x(qs,"show",t),o=x(qs,"filtered",t),s=x(qs,"container",t),r=x(qs,"notes",t);e.value=o.checked?"Filtered":"All",e.disabled=!n.checked,M(s,n.checked),r&&M(r,n.checked)},SA=()=>{T.registerHandlers(qs,{update:wB})};vt();Si();Xt();$();var MA="Подписка на новые машины",tf="Сохранить",ef="Отметьте машины, появление которых вы хотите отслеживать в Ленте. Каждая модель включает в себя все поколения и годы выпуска.",nf="Подписаться на всё",of="Если появятся новые модели, подпишем на них тоже";el();Ji();G();Vt();Ne();var RA="settings-new-cars",qn,IA="",OA,DA=i=>{i.open=!i.open,queueMicrotask(Pd)},HA=i=>{i.selected=!i.selected,i.models.forEach(t=>{t.selected=i.selected}),Pd()},kA=(i,t)=>{t.selected=!t.selected,i.selected=i.models.every(e=>e.selected),Pd()},AB=({url:i,brands:t})=>C`
  <form action="${i}" class="c-dialog-form" novalidate data-keysubmit>
    <div class="text">${ef}</div>
      ${rt(t,e=>e.id,e=>C`
        <div class=${Ft({"c-block":!0,"c-details":!0,"is-active":e.open})}>
          <div class="c-details__summary" @click=${()=>DA(e)}>
            <h2 class="c-header">${e.caption} ${e.count!==0?C`<span class="c-counter">${e.count}</span>`:F}</h2>
            ${Ts("angle-arrow-down")}
          </div>
          ${e.open?C`<div class="c-details__content">
              <label class="c-checkbox">
                <input type="checkbox" name="brands" value=${e.id} .checked=${e.selected} @click=${()=>HA(e)}>
                <span class="c-checkbox__check"></span><span class="c-checkbox__label">${nf}</span>
              </label>
              ${e.models.length!==0?C`<div class="c-content-settings__notes c-content-settings__notes--alt">${of}</div>`:F}
              ${e.models.length!==0?C`<div class="o-grid o-grid--3 o-grid--no-margin">
                  ${fn(e.models,3).map(n=>C`<div><div class="c-checkbox-group f-item">${rt(n,o=>o.id,o=>C`
                    <label class="c-checkbox">
                      <input type="checkbox" name="models" value=${o.id} .checked=${o.selected} @click=${()=>kA(e,o)}>
                      <span class="c-checkbox__check"></span><span class="c-checkbox__label">${o.caption}</span>
                    </label>
                  `)}</div></div>`)}
                  </div>
                </div>`:F}`:F}
        </div>
      `)}
      <div class="c-dialog-buttons">
        <button class="c-button c-button--primary" type="submit" name="submitbtn">${tf}</button>
      </div>
    </div>
  </form>`,CB=({url:i,brands:t})=>C`
  <div class="x-box x-box--ghost">
    <div class="x-text o-b">${ef}</div>
  </div>
  <form action="${i}" class="x-form" novalidate data-keysubmit data-role="form">
    ${rt(t,e=>e.id,e=>C`
      <details class="x-details x-box" .open=${e.open} @toggle=${()=>DA(e)}>
        <summary>
          <h2 class="x-header">${e.caption} ${e.count!==0?C`<span class="c-counter">${e.count}</span>`:F}</h2>
        </summary>
        ${e.open?C`<div>
            <div class="x-form__item">
              <div class="x-form__body">
                <label class="x-choice x-choice--switch">
                  <input type="checkbox" name="brands" value=${e.id} .checked=${e.selected} @click=${()=>HA(e)}>
                  <span class="x-choice__label">${nf}</span>
                </label>
              </div>
              ${e.models.length!==0?C`<div class="x-form__notes">${of}</div>`:F}
            </div>
            ${rt(e.models,n=>n.id,n=>C`
              <div class="x-form__item">
                <div class="x-form__body">
                  <label class="x-choice x-choice--switch">
                    <input type="checkbox" name="models" value=${n.id} .checked=${n.selected} @click=${()=>kA(e,n)}>
                    <span class="x-choice__label">${n.caption}</span>
                  </label>
                </div>
              </div>
            `)}
            </div>`:F}
      </details>
    `)}
    <div class="x-form__submit u-extend" data-role="sticky-button">
      <button class="c-button c-button--primary c-button--xl u-100"
        type="submit" name="submitbtn">${tf}</button>
    </div>
  </form>`,NA=()=>JSON.stringify(qn.brands.map(i=>({models:i.models.map(t=>({selected:t.selected}))}))),PA=()=>{qn.brands.forEach(i=>{i.count=i.models.length===0&&i.selected?1:i.models.reduce((t,e)=>t+(e.selected?1:0),0)})},SB=i=>{qn.brands=i.map(t=>({id:t.name,caption:t.caption,selected:t.selected,open:!1,count:0,models:t.models.map(e=>({id:e.id,caption:e.caption,selected:t.selected||e.selected}))})),PA(),IA=NA()},Pd=()=>{qn.brands&&(PA(),J(d2Env.isMobile?CB(qn):AB(qn),OA))},MB=i=>{let t=new Ct({anchor:i,className:"c-modal__content--newcars",title:MA});OA=t.element,Pd(),t.setFormDataTransformer(()=>qn.brands.reduce((e,n)=>(n.selected?e.push(`brands=${n.id}`):n.models.filter(o=>o.selected).forEach(o=>{e.push(`models=${o.id}`)}),e),[]).join("&")),t.show(),t.initCloseConfirm(()=>IA!==NA())},RB=i=>A(void 0,null,function*(){yt(i);let t=i.node(),{url:e}=t.dataset;if(!e)return;qn={url:e,brands:[]};let n=yield R(e,RA,{anchorEl:t});SB(n),MB(t)}),$A=()=>{T.registerHandlers(RA,{select:RB})};$();Ce();ve();var IB="sitesearch",OB={All:"sitesearch-categories_all_items",CarJournals:"sitesearch-categories_item_bj",Cars:"sitesearch-categories_item_cars",Users:"sitesearch-categories_item_people",UserBlogs:"sitesearch-categories_item_blogs",Communities:"sitesearch-categories_item_communities",Companies:"sitesearch-categories_item_ba",Offers:"sitesearch-categories_item_market"},DB=i=>{let t=new URL(window.location.href),{searchParams:e}=t;mi(i.node().form).forEach((s,r)=>{e.delete(r),s&&e.set(r,s)}),e.delete("page");let o=e.get("category");Tt(OB[o||"All"]),e.get("text")&&(window.location.search=t.search)},FA=()=>{T.registerHandlers(IB,{update:DB})};Pi();var HB="/_api/actionmetrics/process",sf=i=>{navigator.sendBeacon&&navigator.sendBeacon(HB,new URLSearchParams({token:i}))},kB=i=>{let e=i.target.closest("[data-track]");e&&sf(e.dataset.track)},BA=()=>{document.documentElement.addEventListener("click",kB)};ve();var NB=i=>{let{target:t,trackTarget:e}=i.dataset;t&&Tt(t),e&&sf(e)},UA=i=>{pe(i,{onEnter:NB})};V();Y();Pi();Ld();Re();Z();Mi();Ro();var PB="/communities/suggest",$B="c-token-input",FB="c-token-input__tokens",zA="c-token-input__token",BB="c-token-input__cursor",UB="c-token-input__pic",zB="c-token-input__caption",jB="r-button-unstyled c-token-input__remove",WB="c-input c-token-input__input",jA=i=>P("div",zA,wo({images:[{url:i.pic,width:60,height:60}]},0,{className:`u-vignette ${UB}`}),P("span",zB,document.createTextNode(i.caption)),P("button",{type:"button",className:jB,"data-target":i.id}),P("input",{type:"hidden",value:i.id,"data-caption":i.caption})),VB=i=>{let t=jA({id:"1",caption:"1",pic:"1"});i.appendChild(t);let e=t.offsetHeight;return t.remove(),e},il=class extends H{init(){this.form=this.element.closest("form"),this.cursorEl=P("div",BB),this.tokensEl=P("div",FB,this.cursorEl),this.inputEl=P("input",{type:"text",className:WB}),this.rootEl=P("div",$B,this.tokensEl,this.inputEl),this.name=this.element.dataset.name||"",this.placeholder=this.element.dataset.placeholder||"",this.placeholder&&this.inputEl.setAttribute("placeholder",this.placeholder),this.element.appendChild(this.rootEl),this.updateSizeMetrics(),pe(this.form,{onEnter:()=>{this.updateSizeMetrics(),this.updateInputLayout()}}),this.tokens=new Un(Number(this.element.dataset.max)),this.initTokens(),this.ac=new Fe(PB,this.inputEl),this.ac.setRowBuilder(this.row.bind(this)),this.ac.getRenderer().setWidthProvider(this.rootEl),this.vsm=Fs(),this.tokensEl.addEventListener("click",e=>this.onClick(e)),this.inputEl.addEventListener("input",()=>this.onInput()),this.inputEl.addEventListener("keydown",e=>this.onKey(e)),this.vsm.addEventListener("resize",()=>this.onResize()),this.update()}updateSizeMetrics(){this.tokenHeight=VB(this.tokensEl),this.paddingTop=parseInt(Je(this.tokensEl,"padding-top"),10)}updateInputLayout(){let e=this.cursorEl.getBoundingClientRect(),n=this.rootEl.getBoundingClientRect(),o=e.left-n.left,s=e.top-n.top;this.inputEl.style.height=`${this.tokenHeight+this.paddingTop+s}px`,this.inputEl.style.paddingTop=`${s}px`,this.inputEl.style.paddingLeft=`${o}px`}initTokens(){et(`input[name="${this.name}"]`,this.form).forEach(e=>{this.tokens.add({id:e.value,caption:e.dataset.caption,pic:e.dataset.avatar}),e.remove()})}update(){this.cursorEl.innerHTML="",this.tokensEl.querySelectorAll(`.${zA}`).forEach(n=>{n.remove()}),this.tokens.get().forEach(n=>{this.tokensEl.appendChild(jA(n))}),this.tokensEl.appendChild(this.cursorEl),this.updateInputLayout()}onToken(e,n,o,s){this.tokens.add({id:e,caption:n,pic:o,num:s}),this.update()}onClick(e){e.target&&e.target.dataset.target?(this.ac.dismiss(),this.tokens.removeById(e.target.dataset.target),this.update()):this.inputEl.focus()}onInput(){this.cursorEl.innerHTML=Bt(this.inputEl.value),this.updateInputLayout()}onKey(e){e.keyCode===8&&this.inputEl.value===""&&(this.ac.isOpen()?this.ac.dismiss():(this.tokens.removeLast(),this.update()))}onResize(){this.ac.dismiss(),this.updateInputLayout()}reinit(){this.tokens.clear(),this.initTokens(),this.update()}row(e,n){let o=this;return wt(N({},n),{render(s){s.append(wo({images:[{url:n.avatar,width:60,height:60}]},0,{className:"u-vignette ac-pic is-round"}),P("span",{innerHTML:n.caption}),P("span",{className:"c-counter ac-counter",innerHTML:jn(n.members)})),n.extra&&s.appendChild(P("span",{className:"ac-desc-token",innerHTML:n.extra}))},select(s){s.value="",o.onToken(n.id,n.caption,n.avatar,n.members)}})}};vt();Xt();te();var WA="Сообщества",VA="Выберите, участникам каких сообществ показывать запись.",qA="Название сообщества",GA="Закрыть окно?",JA="Выбранные сообщества не сохранятся";V();Y();Ce();Ji();Re();Ro();gt();var YA="token-input-mobile",GB="/communities/suggest",JB=3,YB=(i,t,e,n)=>C`
  <div class="x-form">
    <div class="x-box x-box--ghost">
      <div class="x-text o-b">${VA}</div>
    </div>
    <div class="x-box">
      <div class="x-search">
        <input class="x-search__input" type="search" placeholder="${qA}" autocomplete="off" data-slot="${YA}.input">
        ${Ts("search","x-search__icon")}
      </div>
    </div>
      <div data-slot="${YA}.ac-rows"></div>
      ${i&&i.length>0?C`
          <div class="x-box x-box--narrow">
            ${rt(i,o=>o.id,o=>C`
              <div class="x-form__item">
                <div class="x-form__body">
                  <div class="x-form__text">${o.caption} <span class="c-counter u-nobr">${jn(o.num)}</span></div>
                  <button class="r-button-unstyled x-side-icon x-side-icon--cross" @click=${()=>e(o.id)}></button>
                </div>
              </div>
            `)}
          </div>`:F}
    </div>
    <div class="x-form__submit u-extend" data-role="sticky-button">
      <button class="c-button c-button--primary c-button--xl u-100"
        ?disabled=${t} @click=${n}>${ke}</button>
    </div>
  </div>
`,nl=class extends H{parsedInit(){this.fieldsEl=this.slot("fields"),this.listEl=this.slot("list"),this.name=this.element.dataset.name,this.placeholder=this.element.dataset.placeholder,this.tokens=new Un(Number(this.element.dataset.max)),this.initTokens(),this.element.addEventListener("click",()=>this.showModal()),this.updateList()}initTokens(){this.tokens.clear(),et(`input[name="${this.name}"]`,this.fieldsEl).forEach(e=>{this.tokens.add({id:e.value,caption:e.dataset.caption,pic:e.dataset.avatar,num:Number(e.dataset.members)})})}updateForm(){this.fieldsEl.innerHTML="";let e=this.tokens.get();e.sort((n,o)=>{let s=n.caption,r=o.caption;return s>r?1:s<r?-1:0}),e.forEach(n=>{let o=document.createElement("input");o.name=this.name,o.type="hidden",o.value=n.id,o.dataset.caption=n.caption||"",o.dataset.avatar=n.pic,n.num&&(o.dataset.members=String(n.num)),this.fieldsEl.appendChild(o)}),this.updateList(),_e(this.element)}updateList(){let e=this.tokens.get();this.listEl.innerHTML="",(e.length>0?e.map(o=>o.caption):this.placeholder?[this.placeholder]:[]).forEach(o=>{this.listEl.appendChild(P("div",{className:"u-text-overflow",textContent:o}))})}updateModal(){J(YB(this.tokens.get(),!this.contentChanged,this.removeHandler.bind(this),this.updateFormAndClose.bind(this)),this.dialog.contentElement)}close(){this.closeWithoutConfirm=!0,Mt()}updateFormAndClose(){this.updateForm(),this.close()}showModal(){this.initTokens(),this.contentChanged=!1,this.closeWithoutConfirm=!1,this.dialog=Ci({anchor:this.element,title:WA}),this.dialog.addEventListener("beforehide",s=>A(this,null,function*(){!this.closeWithoutConfirm&&this.contentChanged&&(s.preventDefault(),(yield dt(GA,JA,void 0,gs))&&this.close())})),this.dialog.addEventListener("hide",()=>this.hideModal(),{once:!0}),this.dialog.render(),this.dialog.show(),this.updateModal();let e=this.slot("input",this.dialog.element);e.focus();let n=this.slot("ac-rows",this.dialog.element);this.ac&&this.ac.dispose(),this.ac=new Fe(GB,e,!1,!1,n),this.ac.setMaxMatches(JB),this.ac.setRowBuilder(this.row.bind(this));let o=this.ac.getRenderer();o.className="x-box x-box--narrow o-t-s",o.rowClassName="x-form__item",o.activeClassName="is-active"}hideModal(){this.ac&&this.ac.dispose()}removeHandler(e){this.tokens.removeById(e),this.contentChanged=!0,this.updateModal()}reinit(){this.initTokens(),this.updateList()}row(e,n){let o=this;return wt(N({},n),{render(s){s.appendChild(P("div","x-form__body",P("div","x-form__text",P("span",void 0,n.caption),P("span",{className:"c-counter u-nobr",innetHTML:jn(n.members)}))))},select(s){s.value="",o.tokens.add({id:n.id,caption:n.caption,pic:n.avatar,num:n.members},!0),o.contentChanged=!0,o.updateModal()}})}};Xe();ih();Pi();var ZA="data-src",KA=i=>{let t=i.getAttribute(ZA);t&&(i.removeAttribute(ZA),pe(i,{rootMargin:200,onEnter:()=>{i.src=t}}))};$();X();Pe();var XA="closable-section",ZB=i=>{let t=i.node(),e=Ge(XA);if(!t||!e)return;let n=Et(e);n.toggle(),n.addEventListener("end",()=>{t.innerHTML=n.expanded?t.dataset.hide:t.dataset.show})},QA=()=>{T.registerHandlers(XA,{toggle:ZB})};Y();Vi();var tC="seekid",ol=class extends H{parsedInit(){let t=this.element.dataset.target,{seek:e,noanim:n,duration:o,show:s,hide:r,collapse:a,hideHandle:l,ontogglestart:c,ontoggle:d,once:p}=this.element.dataset;if(!t)return;if(e==="next"){let h=de();this.element.dataset[tC]=h,t=`[data-${tC}=${h}]~${t}`}let u=e==="ancestor"?this.element.closest(t):e==="ancestor-next"?(this.element.closest(t)||this.element).nextElementSibling:document.querySelector(t);if(!u)return;let m=new Wn(u,this.element);m.noAnimation=n==="",o&&(m.duration=Number(o)),r===""&&(m.hide=!0),s===""&&(m.show=!0),a===""&&(m.collapse=!0),l===""&&(m.hideHandle=!0),c&&m.addEventListener("start",()=>{try{window.eval(c)}catch(h){}}),d&&m.addEventListener("end",()=>{try{window.eval(d)}catch(h){}}),p===""&&m.addEventListener("end",()=>m.dispose(),{once:!0})}};Y();var rf=(i,t,e)=>{if(!(!d2Env.isApp||!d2Env.tracking))if(window.webkit&&window.webkit.messageHandlers){let n=JSON.stringify({screen:i,event:t,params:e});window.webkit.messageHandlers.track.postMessage(n)}else{let o=`drive://track/?${new URLSearchParams(N({screen:i,event:t},e&&{params:JSON.stringify(e)}))}`,s=document.createElement("iframe");s.setAttribute("src",o),document.documentElement.appendChild(s),setTimeout(()=>{s.remove()},1)}},KB=i=>{let e=i.target.closest("[data-app-target]");if(!e)return;e.dataset.appTarget.split(/\s+/).forEach((s,r)=>{let a,l=e.dataset[r===0?"appParams":`appParams${r+1}`];if(l)try{a=JSON.parse(l)}catch(p){}let[c,d]=s.split(":");c&&d&&rf(c,d,a)})};d2Env.isApp&&document.documentElement.addEventListener("click",KB);ve();af();ve();var lf="mrg_",iC=(i,t)=>{Gs()&&(Tt(`${i}_try`,t),sessionStorage.setItem(`${lf}${i}`,JSON.stringify(t)||""))},nC=(...i)=>{Gs()&&i.forEach(t=>{let e=window.sessionStorage.getItem(`${lf}${t}`);window.sessionStorage.removeItem(`${lf}${t}`),(e||e==="")&&Tt(t,e?JSON.parse(e):void 0)})};Z();var oC="__run",QB="q",sC=(i,t)=>{let e=i.split("."),n=e.pop(),o=window;for(let s=0;s<e.length;s++)o=o[e[s]];o[n]&&o[n].apply(o,t)},tU=i=>typeof i=="function"?i():(...t)=>sC(i,t),rC=()=>{let i=window[oC][QB]||[];window[oC]=tU,i.forEach(t=>{typeof t=="function"?t():sC(...t)})};var Xi=(i,t)=>{let e=i.split("."),n=window;for(;e.length;){let o=e.shift();!e.length&&t!==void 0?n[o]=t:n[o]&&n[o]!==Object.prototype[o]?n=n[o]:n=n[o]={}}};d2Env.isDesktop&&window.Stickyfill&&(B("sticky",i=>Stickyfill.addOne(i)),document.body.style.position="");jw();Jw();var iv=[];"scrollBehavior"in document.documentElement.style||iv.push(Promise.resolve().then(()=>(bC(),EC)).then(i=>{i.polyfill()}));"animate"in document.body&&"timeline"in document||iv.push(Promise.resolve().then(()=>io(_C(),1)));Promise.all(iv).then(()=>{aL(),BA(),Hw(),kw(),QA(),$w(),Qw(),m0(),Dw(),B0(),j0(),W0(),qb(),fL(),kL(),NL(),PL(),B(".o-img",e_,!0),B("img[data-simple][data-src]",KA,!0),B("collapsible",ol),B("cpoverlay",qT),B("details",Na),B("emojizoom",Kw),B("messages-status",D0),B("nav",za),B("search-tips",Ua),B("subscribe",HL),d2Env.isDesktop?B("top-menu",ja):d2Env.isMobile&&!d2Env.isApp&&B("top-menu",Wa),(d2Env.extvideo||d2Env.extYoutube)&&B("extvideo",$L),d2Env.isDesktop?(Rv(),c0(),U0(),w0(),d2Env.userId&&B("topsearch",Va),B("carmultiselect",Gr),B("fancyscroll",Xw),B("pagebg",tL),B("post",ur)):d2Env.isMobile&&(B("sticky-button",xa),B("carmultiselect-mobile",Jr)),d2Env.isApp||B("scrolltracking",UA),B("circular-progress",Oa),Nw(),cx(),fx(),Ax(),B("auto-width",Fx),B("select.x-select",Bx,!0),B("select-expand",Pa),B("form",ua),B("rich-select",Ta),B("geo-filter",ga),B("taflexible",qx),Px(),B("token-input",il),B("token-input-mobile",nl),B("chk",ma),B("regionselect",ya),B("toolbar",Aa),d2Env.isMobile&&(B("form-date",V0),B("form-birthdate",lx)),B("nickname",Cx),B("lang-select",va),Ht("x-crop",()=>Promise.resolve().then(()=>(xC(),TC))),be("charcounter",()=>Promise.resolve().then(()=>(LC(),wC))),be("cityselect",()=>Promise.resolve().then(()=>(SC(),CC))),be("imagelist",()=>Promise.resolve().then(()=>(cS(),lS))),be("workinghours",()=>Promise.resolve().then(()=>(uS(),hS))),Ht('[data-action*="quick-filter.filter"]',()=>Promise.resolve().then(()=>(gS(),fS))),Ht('[data-action="history.menu"]',()=>Promise.resolve().then(()=>(_S(),bS))),Ht('[data-role="albums"],[data-role="albumsgrid"]',()=>Promise.resolve().then(()=>(OS(),IS))),h_(),cb(),mb(),ex(),VT(),B("index-end",p0),f_(),v_(),B("car-desc",zr),Ht('[data-action="input:logbook-search.search"]',()=>Promise.resolve().then(()=>(BS(),FS))),b_(),B_(),B("formcarselect",qr),B("carselect",Vr),be("cars-drag-list",()=>Promise.resolve().then(()=>(zS(),US))),be("car-add",()=>Promise.resolve().then(()=>(VS(),WS))),Ht('[data-action="cardel.confirm"]',()=>Promise.resolve().then(()=>(QS(),XS))),Ht('[data-action*="caredit."]',()=>Promise.resolve().then(()=>(eM(),tM))),ix(),be("election-chart",()=>Promise.resolve().then(()=>(sM(),oM))),B("makeslist",Kr),B("catalog",hy),nx(),Zl()&&B("experience",da),Ht('[data-action^="community"]',()=>Promise.resolve().then(()=>(SM(),CM))),Ht('[data-action*="comm-search."]',()=>Promise.resolve().then(()=>(IM(),RM))),be("cars-m-select",()=>Promise.resolve().then(()=>(HM(),DM))),be("orderform",()=>Promise.resolve().then(()=>(NM(),kM))),Ht("orders",()=>Promise.resolve().then(()=>(ER(),vR)),!0),be("snaps-form",()=>Promise.resolve().then(()=>(yR(),_R))),be("snap-upload",()=>Promise.resolve().then(()=>(LR(),wR))),QT(),B("deposit-emoney",ca),B("deposit-payment",la),tx(),G0(),LA(),wA(),d2Env.isDesktop&&vA(),B("pc-lottery",tl),B("pc-stats",Qa),B("poll",Ea),B("poll-edit",_a),B("date-select",ha),sA(),nA(),B("embed",J0),Ht('[data-action*="postpromo."]',()=>Promise.resolve().then(()=>(UR(),BR))),CA(),SA(),$A(),Ht('[data-action^="recommendations"]',()=>Promise.resolve().then(()=>(WR(),jR))),Ht('[data-action^="combacklog.post"]',()=>Promise.resolve().then(()=>(YR(),JR))),Ht('[data-action="submit:fcat.set"]',()=>Promise.resolve().then(()=>(KR(),ZR))),be("ba-graph",()=>Promise.resolve().then(()=>(QR(),XR))),be("msgr",()=>Promise.resolve().then(()=>(xI(),TI))),be("mm",()=>Promise.resolve().then(()=>(LI(),wI))),MT(),B("comment-form",na),B("comment-original",oa),B("upload-button",aa),wT(),HT(),Ht("companies",()=>Promise.resolve().then(()=>(II(),RI)),!0),be("cpc-form",()=>Promise.resolve().then(()=>(DI(),OI))),Ht('[data-action^="directions"]',()=>Promise.resolve().then(()=>(tO(),QI))),Ht('[data-action="com.targeting"],[data-action="com.lastpromo"]',()=>Promise.resolve().then(()=>(iO(),eO))),Ht("company",()=>Promise.resolve().then(()=>(NO(),kO)),!0),be("market",()=>Promise.resolve().then(()=>(UO(),BO))),Ht('[data-action^="offer"]',()=>Promise.resolve().then(()=>(jO(),zO))),Ht('[data-action^="myoffers"]',()=>Promise.resolve().then(()=>(QO(),XO))),Ht('[data-action*="marketform."]',()=>Promise.resolve().then(()=>(eD(),tD))),Ht('[data-action^="parts"]',()=>Promise.resolve().then(()=>(nD(),iD))),Ht('[data-action^="parts-photos"]',()=>Promise.resolve().then(()=>(rD(),sD))),Ht('[data-action^="parts-for-sale"]',()=>Promise.resolve().then(()=>(lD(),aD))),Ht('[data-action="premiumform.buy"]',()=>Promise.resolve().then(()=>(dD(),cD))),rA(),Ht("signup",()=>Promise.resolve().then(()=>(vD(),gD)),!0),FA(),L0(),Ht('[data-action="moderation.rcheck"]',()=>Promise.resolve().then(()=>(bD(),ED))),B("drom",ax),B("recaptcha",oL),Xi("d2.confirm",dt),Xi("d2.validatorAddRules",Bi),Xi("d2.brandingInternal",ox),Xi("d2.ym",Tt),Xi("d2.ymParams",Hh),Xi("d2.metrikaTry",iC),Xi("d2.metrikaSuccess",nC),Xi("d2.apptrack",rf),Xi("d2.promocarsShow",xA),rC(),Ht("experimental",()=>Promise.resolve().then(()=>(VD(),WD)),!0)});})();
/**
 * @license
 * Copyright The Closure Library Authors.
 * SPDX-License-Identifier: Apache-2.0
 */
/*! Bundled license information:

lit-html/lit-html.js:
  (**
   * @license
   * Copyright 2017 Google LLC
   * SPDX-License-Identifier: BSD-3-Clause
   *)

lit-html/directive.js:
  (**
   * @license
   * Copyright 2017 Google LLC
   * SPDX-License-Identifier: BSD-3-Clause
   *)

lit-html/directives/class-map.js:
  (**
   * @license
   * Copyright 2018 Google LLC
   * SPDX-License-Identifier: BSD-3-Clause
   *)

lit-html/directive-helpers.js:
  (**
   * @license
   * Copyright 2020 Google LLC
   * SPDX-License-Identifier: BSD-3-Clause
   *)

lit-html/directives/repeat.js:
  (**
   * @license
   * Copyright 2017 Google LLC
   * SPDX-License-Identifier: BSD-3-Clause
   *)

lit-html/directives/if-defined.js:
  (**
   * @license
   * Copyright 2018 Google LLC
   * SPDX-License-Identifier: BSD-3-Clause
   *)

lit-html/directives/live.js:
  (**
   * @license
   * Copyright 2020 Google LLC
   * SPDX-License-Identifier: BSD-3-Clause
   *)

lit-html/directives/style-map.js:
  (**
   * @license
   * Copyright 2018 Google LLC
   * SPDX-License-Identifier: BSD-3-Clause
   *)

lit-html/directives/unsafe-html.js:
  (**
   * @license
   * Copyright 2017 Google LLC
   * SPDX-License-Identifier: BSD-3-Clause
   *)

photoswipe/dist/photoswipe.esm.js:
  (*!
    * PhotoSwipe 5.3.5 - https://photoswipe.com
    * (c) 2023 Dmytro Semenov
    *)

sortablejs/modular/sortable.esm.js:
  (**!
   * Sortable 1.15.0
   * @author	RubaXa   <trash@rubaxa.org>
   * @author	owenm    <owen23355@gmail.com>
   * @license MIT
   *)
*/
;!function(){var r,f=["weHsigz1BMn0Aw9UCYb3zxjLihjLyxnZAwDUzwq=","zgv0zwn0x0LoteLorq==","we1mshr0CfjLCxvLC3q=","yMvLCMTH","vu5ltK9xtG==","zgf0yq==","C3rLChm=","y2fSBgjHy2S=","Aw5MCMfTzq==","rw1WDhKGy29UzMLNlNnYyW==","ChvZAa==","BgvUz3rO","oYbWyxrOps87igrVBwfPBJ0U","C3bSAxq=","r0vu","weHsihjLCxvLC3qGzxjYB3i=","C3jJ","vfjvu1rfrcbysfiGqu5tv0vs","yMXVy2TLza==","weHsiefou1DfuG==","vgLTzw91Da==","yMXVy2TLCG==","DMfSDwu=","C3bIlNj1","u3rHDhvZoIa=","y2HHCKnVzgvbDa==","DgfNCW==","CNq/CM5Kpte=","y29TlMfT","Dhj1C3rLza==","zNjVBunOyxjdB2rL","rNvUy3rPB24=","w29IAMvJDcbbCNjHEv0=","weHsignVBNn0CNvJDg9YigvYCM9Y","Aw5PDa==","CMvTB3zLrxzLBNrmAxn0zw5LCG==","weHsifjfuvvfu1q=","y29VA2LL","CgLK","rxjYB3iGD2HPBguGC3vIC2nYAwjPBMCGre9nq29UDgvUDeXVywrLza==","zg9ty3jVBgW=","mI4XlJa=","C2vUzejLywnVBG==","C2vSzG==","yMX0C3i=","yNjVD3nLCG==","zwXLBwvUDa==","B25LCNjVCG==","zxzLBNq=","vw5RBM93BG==","zxHWAxjLCW==","AgfZt3DUuhjVCgvYDhK=","Ag9ZDg5HBwu=","Dg9gAxHLza==","ywfIx2rLDgvJDa==","D2L0AenYzwrLBNrPywXZ","C3rHDhvZvgv4Da==","B3bLBG==","u3rYAw5N","sLnptG==","zxzLBNroyw1L","zgv4lM5LDc9HzhzL","zg9JDw1LBNrfBgvTzw50","oYbtyw1Lu2L0zt1oB25LoYbZzwn1CMu=","Ahr0Chm6lY9ZDgf0","AwmTBw9UlNLHBG==","rgf0zq==","y29TlNrY","zgv2AwnL","veLnru9vva==","sgvHzgvYigXLBMD0AcbKB2vZBID0ig1HDgnO","AhjLzG==","y29TCgXLDgu=","ChjVDg90ExbL","Bg9HzgLUzW==","su5msu5f","CMvHzhLtDgf0zq==","u1rbuLq=","yKHwA1KYrt0=","werVBwfPBLjLCxvLC3q=","yMLUza==","C2v0vgLTzw91Da==","y29UDgv4Da==","yNrVyq==","Dg9vventDhjPBMC=","Bg9JywXtDg9YywDL","y28UAwW=","y29TlMDL","DMvYC2LVBG==","Aw4UDwe=","zg9JDw1LBNrnB2rL","ywrKAxrPB25HBa==","Bg9JyxrPB24=","BMfTzq==","ywrKrxzLBNrmAxn0zw5LCG==","CMvZCg9UC2vuzxH0","oYbLEhbPCMvZpq==","ic0G","Dg9W","zxzLBNrFzgv0zwn0x0LoteLorq==","BMf2AwDHDg9Y","y29UDgvUDc1Szw5NAhq=","C2XPy2u=","C2vYDMLJzq==","DgLTzxn0yw1W","yMvMB3jLDw5SB2fK","y3LJywrH","y2fSBa==","ue9tva==","C2vUza==","BxnRlNj1","Aw5KzxHpzG==","BgfIzwXZ","y2XLyxjuAw1LB3v0","DgLTzw91Da==","B25SB2fK","zxzLBNruExbL","BwvZC2fNzq==","Dg9tDhjPBMC=","z2v0q29TChv0zwrtDhLSzq==","weHsievsuKjbq0S=","re9nq29UDgvUDeXVywrLza==","tNvTyMvY","re9nieXpqurfra==","re9difjfqurz","tK9ux0jmt0nlruq=","AM9PBG==","C3rHy2S=","BhvKy2e=","C2v0sxrLBq==","C3rYAw5NAwz5","DgLTzq==","zNvUy3rPB24=","zg9TywLU","z2v0uMvZCg9UC2vizwfKzxi=","CgfNzwHPzgu="];r=f,function(x){for(;--x;)r.push(r.shift())}(272);var X=function(x,r){var n=f[x=+x];void 0===X.rxwhFs&&(X.SPtpzv=function(x){for(var r=function(x){for(var r,n,v=String(x).replace(/=+$/,""),f="",t=0,a=0;n=v.charAt(a++);~n&&(r=t%4?64*r+n:n,t++%4)&&(f+=String.fromCharCode(255&r>>(-2*t&6))))n="abcdefghijklmnopqrstuvwxyzABCDEFGHIJKLMNOPQRSTUVWXYZ0123456789+/=".indexOf(n);return f}(x),n=[],v=0,f=r.length;v<f;v++)n+="%"+("00"+(function(a,b){return" !\"#$%&'()*+,-./0123456789:;<=>?@ABCDEFGHIJKLMNOPQRSTUVWXYZ[\\]^_`abcdefghijklmnopqrstuvwxyz{|}~".indexOf(a[b])+32})(r,v).toString(16)).slice(-2);return decodeURIComponent(n)},X.hbLtoG={},X.rxwhFs=!0);var v=X.hbLtoG[x];return void 0===v?(n=X.SPtpzv(n),X.hbLtoG[x]=n):n=v,n};!function(C,g,x){var r,y=X,B={};for(r in x)x[y("0x34")](r)&&(B[r]=x[r]);var D=[y("0x44"),y("0x58"),y("0x1d"),y("0x57"),y("0x6f"),y("0x18"),y("0x5a")],h=C[y("0x50")]||C[y("0x3")],n=y("0x11"),v=y("0x1e"),M=y("0x26"),b=y("0x84"),a=y("0x53"),f=y("0x8"),A=y("0x6b"),t=y("0x4"),j=y("0x81"),e=y("0x4f"),q=[y("0x41"),y("0x42"),y("0x3e"),y("0x1c")][y("0x7f")]("");B[M]=B[M]||y("0x2d");try{({})[y("0x77")][y("0x6c")](B[M])!==y("0x21")&&(B[M]=[B[M]])}catch(x){}B[b]=B[b]||336,B[a]=B[a]||{};var L=B[f];if(B[f]=K,B[n]){var w=B[n],z=B[v],N=[],u=s();try{if(!l(C[y("0x5f")])||!l(C[y("0x78")])||!l(C[y("0x20")][y("0x4a")][y("0x51")])||g[y("0x5b")]&&g[y("0x5b")]<=10){var c={};return c[y("0x13")]=!1,c[y("0x16")]=y("0x7e"),K(c)}}catch(x){}var o,i,d,H,G,U=null;B[y("0x73")]&&(o=function(){var x=y;Y(x("0x46")),V(x("0x15"))},i=2e4,d=s(),H=null,G=!1,function x(){var r=X;G||(s()-d>=i?o():H=C[r("0x52")](function(){x()},100))}(),U=function(){G=!0,C[X("0x72")](H)}),function(n){var v=y;if(Y(v("0x4e")),g[v("0x4d")]===v("0x49")||g[v("0x4d")]!==v("0x4b")&&!g[v("0x3f")][v("0x29")])Y(v("0x7d")),n();else try{g[v("0x5f")]&&g[v("0x5f")](v("0x7a"),function x(){var r=v;Y(r("0x7c")),g[r("0x24")](r("0x7a"),x),n()})}catch(x){Y(v("0x28")),V(x&&x[v("0x80")])}}(function(){var f=y;try{var t=s();Y(f("0x25")),S(w,function(x){var r=f;try{U&&U(),Y(r("0x14"));var n=C[r("0x7b")](x[r("0x87")](r("0x66"))),v=x[r("0x60")][r("0xc")];if(!n||n<32e3||n!==v)return V(r("0x47"),n+r("0x62")+v),0;new C[r("0x20")](x[r("0x60")])[r("0x6c")](B[a]),B[a][r("0x23")](C,g,B)}catch(x){V(x&&x[r("0x76")])}},function(x,r){var n,v=f;try{U&&U(),Y(v("0x79")),s()-t<2e3?z?S(z,function(){Y(v("0x12")),V(x,r)},function(){var x=v,r={};r[x("0x13")]=!1,r[x("0x16")]=x("0x7e"),K(r)}):V(x,r):((n={})[v("0x13")]=!1,n[v("0x16")]=v("0x7e"),K(n))}catch(x){V(x&&x[v("0x76")])}})}catch(x){V(x&&x[f("0x80")])}})}else V(y("0xa"));function Y(x){var r=y,n={};n.d=x,n.t=s()-u,N[r("0xb")](n)}function l(x){return typeof x===y("0x85")}function s(){var x=y;return C[x("0x7b")](new C[x("0x43")])}function T(x,r,n){var v,f,t=y;try{C[t("0x56")]&&(n&&(f=y,v=(24e5*(s()/24e5)[f("0x36")]())[f("0x77")](36)[f("0x67")](0,10),r=C[t("0x54")](v)+e+C[t("0x54")](function(x,r){for(var n=y,v=[],f=0;f<x[n("0xc")];f++){var t=x[n("0x1a")](f)^r[n("0x1a")](f%r[n("0xc")]);v[n("0xb")](C[n("0x3b")][n("0x1f")](t))}return v[n("0x7f")]("")}(r,v))),C[t("0x56")][t("0x82")](x,r))}catch(x){}}function K(x){var r=y("0x2a");L&&L(x,r),T(t,r)}function P(x,r){var n=y;return r?x[n("0xe")](".")[n("0x67")](-r)[n("0x7f")]("."):x}function V(x,r){var v=y,n=s(),f=new C[v("0x43")](n+36e5*B[b])[v("0x55")](),t=[],a=P(C[v("0x5d")][v("0x35")],2);function e(){for(var x=v,r=0;r<t[x("0xc")];r++){var n=t[r];g[x("0x26")]=n[x("0x5e")]+"="+n[x("0x17")]+x("0x61")+n[x("0x33")]+x("0xd")+n[x("0x86")]+x("0x40")}}-1!==D[v("0x70")](a)&&(a=P(C[v("0x5d")][v("0x35")],3));for(var L=B[M],w=0;w<L[v("0xc")];w++){var z={};z[v("0x5e")]=L[w],z[v("0x17")]=1,z[v("0x33")]=f,z[v("0x86")]=a,t[v("0xb")](z)}var u,c,o=function(x){for(var r=y,n=g[r("0x26")][r("0xe")]("; "),v=0;v<n[r("0xc")];v++){var f=n[v][r("0xe")]("=");if(f[0]===x)return f[r("0x67")](1)[r("0x7f")]("=")}return null}(A);o&&(g[v("0x26")]=A+"="+o+v("0xd")+a+v("0x40"),(u={})[v("0x5e")]=A,u[v("0x17")]=o,u[v("0x33")]=new C[v("0x43")](0)[v("0x55")](),u[v("0x86")]=a,t[v("0xb")](u));try{C[v("0x5f")](v("0x6a"),e),C[v("0x5f")](v("0x0"),e)}catch(x){e()}try{(function(x,r){var n=y,v={};v[n("0x59")]=n("0x2a"),v[n("0x2f")]=x,v[n("0x5c")]=r,v[n("0x9")]=C[n("0x63")]!==C[n("0x2c")],v[n("0x7")]=N;var f={};f[n("0x2e")]=n("0x32"),f[n("0x45")]=n("0x32"),f[n("0x16")]=n("0x4c"),f[n("0x27")]=n("0x32"),f[n("0x2f")]="i0",f[n("0x59")]="1";var t={};t[n("0x64")]=1;var a={};a[n("0x6")]=v,a[n("0x71")]=f,a[n("0x1b")]=t,a[n("0x5d")]=C[n("0x5d")][n("0x48")],a[n("0x69")]=s(),a[n("0x68")]=n("0x37"),a[n("0x3d")]=n("0x2"),a[n("0x75")]=n("0x31"),a[n("0x17")]=1,a[n("0x59")]="1";var e=a,L=C[n("0x3c")][n("0x83")](e);{var w;l(C[n("0x65")][n("0x2b")])?C[n("0x65")][n("0x2b")](q,L):((w=new h)[n("0x3a")](n("0x6d"),q,!0),w[n("0x6e")](L))}})(x,r=r||""),T(j,[(new C[v("0x43")])[v("0x55")](),v("0x5"),x,r,C[(c=y)("0x5d")]?typeof C[c("0x5d")][c("0x77")]===c("0x85")?C[c("0x5d")][c("0x77")]():C[c("0x5d")][c("0x48")]||"":""][v("0x7f")]("\n"),!0)}catch(x){}var i={};i[v("0x13")]=!0,i[v("0x16")]=v("0x5"),K(i)}function S(x,r,n){var v=y,f=new h;if(0!==f[v("0x4d")])throw new Error(v("0x22"));if(f[v("0x3a")](v("0xf"),x,!0),1!==f[v("0x4d")]||f[v("0x6e")]!==h[v("0x4a")][v("0x6e")])throw new Error(v("0x1"));f[v("0x38")]=!0,f[v("0x74")]=function(){r(f)},f[v("0x30")]=function(){var x=v;n(x("0x10"),x("0x19")+f[x("0x39")])},f[v("0x6e")]()}}(window,document,{src:"https://static-mon.yandex.net/static/main.js?pid=drive2",trusted:"/ajax/brand.models",cookie:d2Env.context})}();
